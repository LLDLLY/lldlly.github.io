<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>lerna</title>
      <link href="/2022/07/13/lerna/"/>
      <url>/2022/07/13/lerna/</url>
      
        <content type="html"><![CDATA[<h2 id="ç›¸å…³åœ°å€è®°å½•"><a href="#ç›¸å…³åœ°å€è®°å½•" class="headerlink" title="ç›¸å…³åœ°å€è®°å½•"></a>ç›¸å…³åœ°å€è®°å½•</h2><p><a href="https://github.com/lerna/lerna">github</a><br><a href="https://lerna.js.org/">å®˜ç½‘</a><br><a href="https://www.lernajs.cn/">ä¸­æ–‡å®˜ç½‘</a><br><a href="https://www.jianshu.com/p/e18d1bfad05a">æ–‡ç« 1</a><br><a href="https://www.jianshu.com/p/8b7e6025354b">æ–‡ç« 2</a></p>]]></content>
      
      
      <categories>
          
          <category> npm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>github Token</title>
      <link href="/2022/07/11/gitToken/"/>
      <url>/2022/07/11/gitToken/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å¥½ä¹…æ²¡åœ¨githubä¸Šæäº¤ä»£ç ï¼Œæäº¤ä»£ç æŠ¥é”™:</p><blockquote><p>remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.<br>remote: Please see <a href="https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/">https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/</a> for more information.<br>fatal: Authentication failed for â€˜<a href="https://github.com/LLDLLY/lldlly.github.io.git/&#39;">https://github.com/LLDLLY/lldlly.github.io.git/&#39;</a></p></blockquote><p>å¥½å§ï¼Œæ¥æä¸€ä¸ªtokenå§</p><h3 id="ç”³è¯·token"><a href="#ç”³è¯·token" class="headerlink" title="ç”³è¯·token"></a>ç”³è¯·token</h3><p><code>å³ä¸Šè§’å¤´åƒç‚¹å‡»</code> =&gt; <code>Setting</code> =&gt; <code>Developer setting</code> =&gt; <code>Personal access tokens</code> =&gt;<code>Generate new token</code></p><p>ç”³è¯·å¥½äº†ä¹‹åï¼Œå¤åˆ¶</p><h3 id="æœ¬åœ°è®¾ç½®"><a href="#æœ¬åœ°è®¾ç½®" class="headerlink" title="æœ¬åœ°è®¾ç½®"></a>æœ¬åœ°è®¾ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin https://&lt;your_token&gt;@github.com/&lt;USERNAME&gt;/&lt;REPO&gt;.git</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ProComponents + antd Formç»„ä»¶è®°å½•</title>
      <link href="/2022/07/08/procomponents/"/>
      <url>/2022/07/08/procomponents/</url>
      
        <content type="html"><![CDATA[<h2 id="å¿™åˆ°å¿˜è®°è®°ç¬”è®°ğŸ˜…"><a href="#å¿™åˆ°å¿˜è®°è®°ç¬”è®°ğŸ˜…" class="headerlink" title="å¿™åˆ°å¿˜è®°è®°ç¬”è®°ğŸ˜…"></a>å¿™åˆ°å¿˜è®°è®°ç¬”è®°ğŸ˜…</h2><blockquote><p>å•çº¯çš„è®°ä¸€ä¸‹ç¬”è®°</p></blockquote><h2 id="Modal-æ”¯æŒæäº¤å†…éƒ¨formè¡¨å•"><a href="#Modal-æ”¯æŒæäº¤å†…éƒ¨formè¡¨å•" class="headerlink" title="Modal æ”¯æŒæäº¤å†…éƒ¨formè¡¨å•"></a>Modal æ”¯æŒæäº¤å†…éƒ¨formè¡¨å•</h2><p><code>index.tsx</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Button, Modal, ModalProps &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> type &#123; DraggableData, DraggableEvent &#125; <span class="keyword">from</span> <span class="string">&#x27;react-draggable&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Draggable <span class="keyword">from</span> <span class="string">&#x27;react-draggable&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Title <span class="keyword">from</span> <span class="string">&#x27;./title&#x27;</span></span><br><span class="line"></span><br><span class="line">interface IFooterProps &#123;</span><br><span class="line">  readOnly?: boolean</span><br><span class="line">  customFooter?: boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * modal å°è£…</span></span><br><span class="line"><span class="comment"> * 1. æ”¯æŒæ‹–åŠ¨</span></span><br><span class="line"><span class="comment"> * 2. æ”¯æŒæ”¾å¤§åˆ°å…¨å±</span></span><br><span class="line"><span class="comment"> * 4. modalç¡®å®šæŒ‰é’® æäº¤formè¡¨å•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> ModalComps: React.FC&lt;ModalProps &amp; IFooterProps&gt; = React.memo((props): React.ReactElement =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [form, setForm] = useState(<span class="literal">null</span>) <span class="comment">// å­çº§çš„form</span></span><br><span class="line">  <span class="keyword">const</span> [disabled, setDisabled] = useState(<span class="literal">false</span>) <span class="comment">// æ˜¯å¦å¼€å§‹æ‹–æ‹½</span></span><br><span class="line">  <span class="keyword">const</span> [full, setFull] = useState(<span class="literal">false</span>) <span class="comment">//  æ˜¯å¦æ˜¯å…¨å±</span></span><br><span class="line">  <span class="keyword">const</span> [bounds, setBounds] = useState(&#123; <span class="attr">left</span>: <span class="number">0</span>, <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">bottom</span>: <span class="number">0</span>, <span class="attr">right</span>: <span class="number">0</span> &#125;)</span><br><span class="line">  <span class="keyword">const</span> draggleRef = useRef&lt;HTMLDivElement&gt;(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¼¹çª—å…³é—­çš„æ—¶å€™ï¼Œfull é‡ç½®</span></span><br><span class="line">    <span class="keyword">if</span> (props?.visible === <span class="literal">false</span>) setFull(<span class="literal">false</span>)</span><br><span class="line">  &#125;, [props.visible])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»™å­ç»„ä»¶æ³¨å…¥äº‹ä»¶ onModalForm</span></span><br><span class="line">  <span class="comment">// å­ç»„ä»¶é€šè¿‡onModalFormå°†formä¼ ç»™modal, modalæ¥ç®¡formè¡¨å•</span></span><br><span class="line">  <span class="keyword">const</span> childrenRender = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> prop = &#123;</span><br><span class="line">      onModalForm: getChildrenForm,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> React.Children.map(props?.children, <span class="function">(<span class="params">child: any</span>) =&gt;</span> React.cloneElement(child, prop))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–åˆ°å­ç»„ä»¶form å®ä¾‹</span></span><br><span class="line">  <span class="keyword">const</span> getChildrenForm = <span class="function">(<span class="params">form: any</span>) =&gt;</span> setForm(form)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// modalç‚¹å‡»æäº¤çš„æ—¶å€™ å°†å­formçš„æ•°æ®ä¼ ç»™ modal çš„ç¡®è®¤äº‹ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> onSubmit = <span class="function">(<span class="params">e: React.MouseEvent&lt;HTMLElement&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (form) &#123;</span><br><span class="line">      <span class="comment">// @ts-ignore</span></span><br><span class="line">      form</span><br><span class="line">        <span class="comment">// @ts-ignore</span></span><br><span class="line">        ?.validateFields()</span><br><span class="line">        .then(<span class="function">(<span class="params">values: IObjectProps</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> values</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .then(<span class="function">(<span class="params">res: any</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// æ ¡éªŒä¸é€šè¿‡ï¼Œä¸è§¦å‘ modal ç¡®è®¤äº‹ä»¶</span></span><br><span class="line">          <span class="keyword">if</span> (res === <span class="literal">false</span>) <span class="keyword">return</span></span><br><span class="line">          props?.onOk?.(res || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    props?.onOk?.(e)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‹–åŠ¨ä½ç½®å¤„ç†</span></span><br><span class="line">  <span class="keyword">const</span> onStart = <span class="function">(<span class="params">_event: DraggableEvent, uiData: DraggableData</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; clientWidth, clientHeight &#125; = <span class="built_in">window</span>.document.documentElement</span><br><span class="line">    <span class="keyword">const</span> targetRect = draggleRef.current?.getBoundingClientRect()</span><br><span class="line">    <span class="keyword">if</span> (!targetRect) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    setBounds(&#123;</span><br><span class="line">      left: -targetRect.left + uiData.x,</span><br><span class="line">      right: clientWidth - (targetRect.right - uiData.x),</span><br><span class="line">      top: -targetRect.top + uiData.y,</span><br><span class="line">      bottom: clientHeight - (targetRect.bottom - uiData.y),</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// modal å¯æ‹–åŠ¨å¤„ç†</span></span><br><span class="line">  <span class="keyword">const</span> modalRender = <span class="function">(<span class="params">modal: React.ReactNode</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// modal å…¨å±€å¼¹çª— æ—¶ä¸å…è®¸æ‹–åŠ¨</span></span><br><span class="line">    <span class="keyword">if</span> (full) <span class="keyword">return</span> modal</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Draggable</span><br><span class="line">        disabled=&#123;disabled&#125;</span><br><span class="line">        bounds=&#123;bounds&#125;</span><br><span class="line">        onStart=&#123;<span class="function">(<span class="params">event, uiData</span>) =&gt;</span> onStart(event, uiData)&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div ref=&#123;draggleRef&#125;&gt;&#123;modal&#125;&lt;/div&gt;</span><br><span class="line">      &lt;/Draggable&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Modal</span><br><span class="line">      width=&#123;<span class="number">900</span>&#125;</span><br><span class="line">      &#123;...props&#125;</span><br><span class="line">      title=&#123;</span><br><span class="line">        &lt;Title</span><br><span class="line">          title=&#123;props.title&#125;</span><br><span class="line">          disabled=&#123;disabled&#125;</span><br><span class="line">          setDisabled=&#123;setDisabled&#125;</span><br><span class="line">          full=&#123;full&#125;</span><br><span class="line">          setFull=&#123;setFull&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &#125;</span><br><span class="line">      className=&#123;<span class="string">`msh-modal <span class="subst">$&#123;full ? <span class="string">&#x27;full&#x27;</span> : <span class="string">&#x27;&#x27;</span>&#125;</span>`</span>&#125;</span><br><span class="line">      centered=&#123;!full&#125;</span><br><span class="line">      modalRender=&#123;modalRender&#125;</span><br><span class="line">      footer=&#123;[</span><br><span class="line">        props.readOnly ? (</span><br><span class="line">          props.customFooter ? (</span><br><span class="line">            props.footer</span><br><span class="line">          ) : (</span><br><span class="line">            &lt;Button key=<span class="string">&quot;cancel&quot;</span> onClick=&#123;props.onCancel&#125;&gt;</span><br><span class="line">              å…³é—­</span><br><span class="line">            &lt;/Button&gt;</span><br><span class="line">          )</span><br><span class="line">        ) : (</span><br><span class="line">          &lt;div key=<span class="string">&quot;btn&quot;</span>&gt;</span><br><span class="line">            &lt;Button key=<span class="string">&quot;submit&quot;</span> type=<span class="string">&quot;primary&quot;</span> onClick=&#123;onSubmit&#125;&gt;</span><br><span class="line">              ç¡®è®¤</span><br><span class="line">            &lt;/Button&gt;</span><br><span class="line">            &lt;Button key=<span class="string">&quot;back&quot;</span> onClick=&#123;props.onCancel&#125;&gt;</span><br><span class="line">              å–æ¶ˆ</span><br><span class="line">            &lt;/Button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        ),</span><br><span class="line">      ]&#125;</span><br><span class="line">      getContainer=&#123;<span class="string">&#x27;#root&#x27;</span>&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;childrenRender()&#125;</span><br><span class="line">    &lt;/Modal&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ModalComps</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>title.tsx</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Icon <span class="keyword">from</span> <span class="string">&#x27;@/assets/svg&#x27;</span></span><br><span class="line"></span><br><span class="line">interface ITitleProps &#123;</span><br><span class="line">  title?: string | unknown</span><br><span class="line">  disabled: boolean <span class="comment">// æ˜¯å¦å¯ä»¥æ‹–åŠ¨</span></span><br><span class="line">  full: boolean <span class="comment">// å…¨å±çŠ¶æ€</span></span><br><span class="line">  setFull: <span class="function">(<span class="params">data: boolean</span>) =&gt;</span> any</span><br><span class="line">  setDisabled: <span class="function">(<span class="params">data: boolean</span>) =&gt;</span> any <span class="comment">// è®¾ç½®æ˜¯å¦å…è®¸æ‹–åŠ¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£…modal title</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> Title: React.FC&lt;ITitleProps&gt; = <span class="function">(<span class="params">&#123; title, disabled, full, setFull, setDisabled &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> handleSetFull = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setFull(!full)</span><br><span class="line">    <span class="comment">// å…¨å±çŠ¶æ€å…³é—­æ‹–åŠ¨</span></span><br><span class="line">    setDisabled(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div</span><br><span class="line">      className=<span class="string">&quot;msh-modal-header-title flex flex-jsc-between flex-align-center&quot;</span></span><br><span class="line">      style=&#123;&#123;</span><br><span class="line">        width: <span class="string">&#x27;100%&#x27;</span>,</span><br><span class="line">        cursor: full ? <span class="string">&#x27;unset&#x27;</span> : <span class="string">&#x27;move&#x27;</span>,</span><br><span class="line">      &#125;&#125;</span><br><span class="line">      onMouseOver=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (disabled) &#123;</span><br><span class="line">          setDisabled(<span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;&#125;</span><br><span class="line">      onMouseOut=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        setDisabled(<span class="literal">true</span>)</span><br><span class="line">      &#125;&#125;</span><br><span class="line">      onFocus=&#123;<span class="function">() =&gt;</span> &#123;&#125;&#125;</span><br><span class="line">      onBlur=&#123;<span class="function">() =&gt;</span> &#123;&#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;title || <span class="string">&#x27;è¿™æ˜¯title&#x27;</span>&#125;</span><br><span class="line">      &#123;<span class="comment">/* å…¨å±å¤„ç† icon */</span>&#125;</span><br><span class="line">      &#123;!full &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Icon</span> <span class="attr">name</span>=<span class="string">&quot;full&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleSetFull&#125;</span> <span class="attr">className</span>=<span class="string">&quot;cursor-pointer&quot;</span> /&gt;</span></span>&#125;</span><br><span class="line">      &#123;full &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Icon</span> <span class="attr">name</span>=<span class="string">&quot;full2&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleSetFull&#125;</span> <span class="attr">className</span>=<span class="string">&quot;cursor-pointer&quot;</span> /&gt;</span></span>&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> React.memo(Title)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¯Œæ–‡æœ¬-æ”¯æŒantd-formè¡¨å•"><a href="#å¯Œæ–‡æœ¬-æ”¯æŒantd-formè¡¨å•" class="headerlink" title="å¯Œæ–‡æœ¬ æ”¯æŒantd formè¡¨å•"></a>å¯Œæ–‡æœ¬ æ”¯æŒantd formè¡¨å•</h2><p>ä½¿ç”¨çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ <a href="https://www.wangeditor.com/">wangEditor</a></p><ul><li>ä½¿ç”¨ç¤ºä¾‹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// antd form item</span></span><br><span class="line"> &lt;Form.Item</span><br><span class="line">    name=<span class="string">&quot;test&quot;</span></span><br><span class="line">    label=<span class="string">&quot;ä¸­æ–‡ç®€ä»‹&quot;</span></span><br><span class="line">    labelCol=&#123;&#123; <span class="attr">span</span>: <span class="number">4</span> &#125;&#125;</span><br><span class="line">    wrapperCol=&#123;&#123; <span class="attr">span</span>: <span class="number">20</span> &#125;&#125;</span><br><span class="line">    initialValue=&#123;&#125;</span><br><span class="line">    rules=&#123;[&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">max</span>: <span class="number">65535</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥xxxx&#x27;</span> &#125;]&#125;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;MyEditor /&gt;</span><br><span class="line">  &lt;/Form.Item&gt;</span><br></pre></td></tr></table></figure><ul><li>ç»„ä»¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Editor, Toolbar &#125; <span class="keyword">from</span> <span class="string">&#x27;@wangeditor/editor-for-react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; IDomEditor, IEditorConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;@wangeditor/editor&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@wangeditor/editor/dist/css/style.css&#x27;</span> <span class="comment">// å¼•å…¥ css</span></span><br><span class="line"></span><br><span class="line">type valueType = string | <span class="literal">null</span> | <span class="literal">undefined</span></span><br><span class="line">interface IEditorProps &#123;</span><br><span class="line">  value?: valueType</span><br><span class="line">  onChange?: <span class="function">(<span class="params">value: valueType</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯ä»¥é…åˆ form çš„editor ç»„ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">props</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> MyEditor:React.FC&lt;IEditorProps&gt; = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [editor, setEditor] = useState&lt;IDomEditor | <span class="literal">null</span>&gt;(<span class="literal">null</span>) <span class="comment">// å­˜å‚¨ editor å®ä¾‹</span></span><br><span class="line">  <span class="keyword">const</span> [html, setHtml] = useState(<span class="string">&#x27;&#x27;</span>) <span class="comment">// ç¼–è¾‘å™¨å†…å®¹</span></span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    props.value &amp;&amp; setHtml(props.value)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> editorConfig: Partial&lt;IEditorConfig&gt; = &#123;</span><br><span class="line">    placeholder: <span class="string">&#x27;è¯·è¾“å…¥å†…å®¹...&#x27;</span>,</span><br><span class="line">    autoFocus: <span class="literal">false</span>, <span class="comment">// ä¸è‡ªåŠ¨èšç„¦</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŠæ—¶é”€æ¯ editor ï¼Œé‡è¦ï¼</span></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (editor == <span class="literal">null</span>) <span class="keyword">return</span></span><br><span class="line">      editor.destroy()</span><br><span class="line">      setEditor(<span class="literal">null</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [editor])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> contentChangeHandle = <span class="function">(<span class="params">editor: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> node = editor.getHtml()</span><br><span class="line">    setHtml(editor.getHtml())</span><br><span class="line">    <span class="comment">// å†…å®¹ä¸ºç©ºæ—¶ gethtmlå¾—åˆ°çš„å†…å®¹ä¸º &#x27;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&#x27;</span></span><br><span class="line">    props?.onChange?.(node === <span class="string">&#x27;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : node)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;editor-wrap&quot;</span>&gt;</span><br><span class="line">        &lt;Toolbar editor=&#123;editor&#125; mode=<span class="string">&quot;default&quot;</span> style=&#123;&#123; <span class="attr">borderBottom</span>: <span class="string">&#x27;1px solid #d9d9d9&#x27;</span> &#125;&#125; /&gt;</span><br><span class="line">        &lt;Editor</span><br><span class="line">          defaultConfig=&#123;editorConfig&#125;</span><br><span class="line">          value=&#123;html&#125;</span><br><span class="line">          onCreated=&#123;setEditor&#125;</span><br><span class="line">          onChange=&#123;contentChangeHandle&#125;</span><br><span class="line">          mode=<span class="string">&quot;default&quot;</span></span><br><span class="line">          style=&#123;&#123; <span class="attr">height</span>: <span class="string">&#x27;240px&#x27;</span>, <span class="attr">overflowY</span>: <span class="string">&#x27;hidden&#x27;</span> &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> MyEditor</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Protable-è‡ªå®šä¹‰-inputæ¨¡ç³Šæœç´¢"><a href="#Protable-è‡ªå®šä¹‰-inputæ¨¡ç³Šæœç´¢" class="headerlink" title="Protable è‡ªå®šä¹‰ inputæ¨¡ç³Šæœç´¢"></a>Protable è‡ªå®šä¹‰ inputæ¨¡ç³Šæœç´¢</h2><ul><li><p>ä½¿ç”¨ç¤ºä¾‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. searchInput å•ç‹¬ä½¿ç”¨</span></span><br><span class="line">   &lt;Form.Item</span><br><span class="line">      name=<span class="string">&quot;employeeId&quot;</span></span><br><span class="line">      label=<span class="string">&quot;ä¼šå‘˜å·&quot;</span></span><br><span class="line">      rules=&#123;[&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥ä¼šå‘˜å·&#x27;</span> &#125;]&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;SearchInput onSearch=&#123;handleSearchEmployeeId&#125; placeholder=<span class="string">&quot;è¯·è¾“å…¥ä¼šå‘˜å·&quot;</span>  onChange=&#123;<span class="function"><span class="params">value</span> =&gt;</span> handleEmployeeIdChange(value, form)&#125;  /&gt;</span><br><span class="line">    &lt;/Form.Item&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. é…åˆProcomponent ProTable ä½¿ç”¨</span></span><br><span class="line"> <span class="keyword">const</span> columns: ProColumns = [</span><br><span class="line">    &#123;</span><br><span class="line">      title: <span class="string">&#x27;åºå·&#x27;</span>,</span><br><span class="line">      dataIndex: <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">      valueType: <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">      width: <span class="number">48</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      title: <span class="string">&#x27;ä¼šå‘˜å·&#x27;</span>,</span><br><span class="line">      dataIndex: <span class="string">&#x27;employeeId&#x27;</span>,</span><br><span class="line">      ellipsis: <span class="literal">true</span>,</span><br><span class="line">      copyable: <span class="literal">true</span>,</span><br><span class="line">      width: <span class="number">150</span>,</span><br><span class="line">      renderFormItem: EmployeeSearch, <span class="comment">// è§ä¸‹é¢ EmployeeSearch</span></span><br><span class="line">      formItemProps: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">          &#123;</span><br><span class="line">            required: <span class="literal">true</span>,</span><br><span class="line">            message: <span class="string">&#x27;æ­¤é¡¹ä¸ºå¿…å¡«é¡¹&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;ï¼Œ</span><br><span class="line"> ]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>searchInput</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Select &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">const</span> &#123; Option &#125; = Select</span><br><span class="line"></span><br><span class="line">interface ISearchInputProps &#123;</span><br><span class="line">  value?: string</span><br><span class="line">  onChange?: <span class="function">(<span class="params">value: string</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  placeholder?: string</span><br><span class="line">  style?: React.CSSProperties</span><br><span class="line">  onSearch: <span class="function">(<span class="params">value: string, setData: any</span>) =&gt;</span> <span class="keyword">void</span> <span class="comment">// ç”¨æˆ·è¾“å…¥ï¼Œè§¦å‘è¯·æ±‚</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ”¯æŒè¾“å…¥+æœç´¢çš„ select</span></span><br><span class="line"><span class="comment"> * å¯é…åˆformä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">props</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> SearchInput: React.FC&lt;ISearchInputProps&gt; =  <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useState&lt;any[]&gt;([])</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = useState&lt;string&gt;();</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (props?.value &amp;&amp; <span class="keyword">typeof</span> props.value === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      setData(props?.value || [])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleSearch = <span class="function">(<span class="params">newValue: string</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(newValue)&#123;</span><br><span class="line">      setValue(newValue)</span><br><span class="line">      props?.onSearch(newValue, setData)</span><br><span class="line">      <span class="comment">// @ts-ignore</span></span><br><span class="line">      props?.onChange(newValue?.trim())</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">   setData([])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleChange = <span class="function">(<span class="params">newValue: string</span>) =&gt;</span> &#123;</span><br><span class="line">    setValue(newValue)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å€¼å›ä¼ ç»™çˆ¶çº§</span></span><br><span class="line">    <span class="comment">// @ts-ignore</span></span><br><span class="line">    props?.onChange(newValue?.trim())</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClear =<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    setData([])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> options =</span><br><span class="line">     <span class="keyword">typeof</span> data === <span class="string">&#x27;object&#x27;</span> &amp;&amp; data?.map(<span class="function"><span class="params">d</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">Option</span> <span class="attr">key</span>=<span class="string">&#123;d.value&#125;</span>&gt;</span>&#123;d.text&#125;<span class="tag">&lt;/<span class="name">Option</span>&gt;</span></span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Select</span><br><span class="line">      allowClear</span><br><span class="line">      showSearch</span><br><span class="line">      value=&#123;value&#125;</span><br><span class="line">      showArrow=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">      style=&#123;props.style&#125;</span><br><span class="line">      filterOption=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">      onChange=&#123;handleChange&#125;</span><br><span class="line">      onSearch=&#123;handleSearch&#125;</span><br><span class="line">      onClear=&#123;handleClear&#125;</span><br><span class="line">      notFoundContent=&#123;<span class="literal">null</span>&#125;</span><br><span class="line">      defaultActiveFirstOption=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">      placeholder=&#123;props.placeholder&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;options&#125;</span><br><span class="line">    &lt;/Select&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> React.memo(SearchInput)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>employeeSearch</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SearchInput <span class="keyword">from</span> <span class="string">&#x27;@/pages/components/searchInput&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; handleSearchEmployeeId &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ä¼šå‘˜å·é€‰é¡¹ select</span></span><br><span class="line"><span class="keyword">const</span> EnployeeSearch = (</span><br><span class="line">  _: any,</span><br><span class="line">  &#123; type, defaultRender, formItemProps, fieldProps, ...rest &#125;: any,</span><br><span class="line">  form: any</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&#x27;form&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> status = form.getFieldValue(<span class="string">&#x27;state&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (status !== <span class="string">&#x27;open&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="comment">// value å’Œ onchange ä¼šé€šè¿‡ form è‡ªåŠ¨æ³¨å…¥ã€‚</span></span><br><span class="line">      &lt;SearchInput</span><br><span class="line">        &#123;...formItemProps&#125;</span><br><span class="line">        &#123;...fieldProps&#125;</span><br><span class="line">        onSearch=&#123;handleSearchEmployeeId&#125;</span><br><span class="line">        placeholder=<span class="string">&quot;è¯·è¾“å…¥ä¼šå‘˜å·&quot;</span></span><br><span class="line">        style=&#123;&#123;</span><br><span class="line">          width: <span class="string">&#x27;100%&#x27;</span>,</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> defaultRender(_)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> EnployeeSearch</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// handleSearchEmployeeId</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨å±€ employeeId æ¨¡ç³ŠæŸ¥è¯¢å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> handleSearchEmployeeId = debounce(</span><br><span class="line">  (value: string, <span class="attr">callback</span>: <span class="function">(<span class="params">data: &#123; value: string; text: string &#125;[]</span>) =&gt;</span> <span class="keyword">void</span>) =&gt; &#123;</span><br><span class="line">    getEmployeeIdListApi(&#123; <span class="attr">employeeId</span>: value &#125;).then(<span class="function">(<span class="params">res: any</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res?.success !== <span class="string">&#x27;t&#x27;</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">      callback(</span><br><span class="line">        res.result?.map(<span class="function">(<span class="params">item: string</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> &#123; <span class="attr">value</span>: item, <span class="attr">text</span>: item &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      )</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="number">300</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="upload"><a href="#upload" class="headerlink" title="upload"></a>upload</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Upload, Modal &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; PlusOutlined &#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons&#x27;</span></span><br><span class="line"><span class="keyword">import</span> type &#123; RcFile, UploadFile, UploadProps, ShowUploadListInterface &#125; <span class="keyword">from</span> <span class="string">&#x27;antd/es/upload/interface&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line"></span><br><span class="line">type ValueType = UploadFile[] | <span class="literal">null</span> | <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">interface IUploadProps &#123;</span><br><span class="line">  api: <span class="function">(<span class="params">data: any</span>) =&gt;</span> <span class="built_in">Promise</span>&lt;any&gt;</span><br><span class="line">  value?: ValueType</span><br><span class="line">  onChange?: <span class="function">(<span class="params">value: ValueType</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">  preview?: boolean <span class="comment">// æ˜¯å¦æ”¯æŒé¢„è§ˆ</span></span><br><span class="line">  length?: number <span class="comment">// å½“ä¸Šä¼ ç…§ç‰‡æ•°åˆ°è¾¾é™åˆ¶åï¼Œä¸Šä¼ æŒ‰é’®æ¶ˆå¤±ã€‚</span></span><br><span class="line">  maxCount?: number <span class="comment">// é€šè¿‡ maxCount é™åˆ¶ä¸Šä¼ æ•°é‡ã€‚å½“ä¸º 1 æ—¶ï¼Œå§‹ç»ˆç”¨æœ€æ–°ä¸Šä¼ çš„ä»£æ›¿å½“å‰ã€‚</span></span><br><span class="line">  multiple?: boolean <span class="comment">// æ˜¯å¦æ”¯æŒå¤šé€‰</span></span><br><span class="line">  data?: Record&lt;string, any&gt; <span class="comment">// ä¸Šä¼ æ‰€éœ€é¢å¤–å‚æ•°æˆ–è¿”å›ä¸Šä¼ é¢å¤–å‚æ•°çš„æ–¹æ³•</span></span><br><span class="line">  beforeUpload?: UploadProps[<span class="string">&#x27;beforeUpload&#x27;</span>]</span><br><span class="line">  showUploadList?: ShowUploadListInterface <span class="comment">// æ§åˆ¶å›¾ç‰‡hoveræ—¶ï¼Œå„ç§iconçš„æ˜¾ç¤º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getBase64 = (file: RcFile): <span class="built_in">Promise</span>&lt;string&gt; =&gt;</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader()</span><br><span class="line">    reader.readAsDataURL(file)</span><br><span class="line">    reader.onload = <span class="function">() =&gt;</span> resolve(reader.result <span class="keyword">as</span> string)</span><br><span class="line">    reader.onerror = <span class="function"><span class="params">error</span> =&gt;</span> reject(error)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸Šä¼ å›¾ç‰‡ç»„ä»¶ï¼Œå¯ä»¥é…åˆformè¡¨å•ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * æ³¨ï¼š ç›®å‰ä»…æ”¯æŒå•å¼ ä¸Šä¼ ï¼Œå¤šå¼ ä¸Šä¼ æ¥å£å’Œå‰ç«¯ç›®å‰éƒ½ä¸æ”¯æŒ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> UploadComp: React.FC&lt;IUploadProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [previewVisible, setPreviewVisible] = useState(<span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">const</span> [previewImage, setPreviewImage] = useState(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [previewTitle, setPreviewTitle] = useState(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [fileList, setFileList] = useState&lt;UploadFile[]&gt;([])</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!props.value || !props.value[<span class="number">0</span>]?.url) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// 1. æ¥å— formçš„é»˜è®¤å€¼</span></span><br><span class="line">    setFileList(props.value)</span><br><span class="line">  &#125;, [props.value])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleChange: UploadProps[<span class="string">&#x27;onChange&#x27;</span>] = <span class="function">(<span class="params">&#123; fileList: newFileList &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    setFileList(newFileList)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é¢„è§ˆ</span></span><br><span class="line">  <span class="keyword">const</span> handlePreview = <span class="keyword">async</span> (file: UploadFile) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!file.url &amp;&amp; !file.preview) &#123;</span><br><span class="line">      file.preview = <span class="keyword">await</span> getBase64(file.originFileObj <span class="keyword">as</span> RcFile)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setPreviewImage(file.url || (file.preview <span class="keyword">as</span> string))</span><br><span class="line">    setPreviewVisible(<span class="literal">true</span>)</span><br><span class="line">    setPreviewTitle(file.name || file.url!.substring(file.url!.lastIndexOf(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleCancel = <span class="function">() =&gt;</span> setPreviewVisible(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸Šä¼ ä¹‹å‰å¤„ç†ï¼Œreturn false ä¸èµ°uploadç»„ä»¶ä¸Šä¼ </span></span><br><span class="line">  <span class="keyword">const</span> handleBeforeUpload: UploadProps[<span class="string">&#x27;beforeUpload&#x27;</span>] = <span class="function">(<span class="params">file: RcFile, fileList: RcFile[]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> formdata = <span class="keyword">new</span> FormData()</span><br><span class="line">    formdata.append(<span class="string">&#x27;files&#x27;</span>, file)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†éœ€è¦å¤šä¼ çš„å‚æ•° æ³¨å…¥formdata</span></span><br><span class="line">    <span class="keyword">if</span> (props.data &amp;&amp; <span class="built_in">Object</span>.keys(props.data).length) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> props.data) &#123;</span><br><span class="line">        formdata.append(key, props.data[key])</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å›¾ç‰‡ä¸Šä¼  éœ€æ±‚ä¸éœ€è¦å›¾ç‰‡å‹ç¼© æœªåšå‹ç¼©å¤„ç†</span></span><br><span class="line">    props.api(formdata).then(<span class="function">(<span class="params">res: any</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.success === <span class="string">&#x27;t&#x27;</span> &amp;&amp; res.result) &#123;</span><br><span class="line">        <span class="comment">// 2.æ•°æ®è¿”å›ç»™ä¸Šçº§form</span></span><br><span class="line">        props?.onChange &amp;&amp; props?.onChange(res.result)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ é™¤</span></span><br><span class="line">  <span class="keyword">const</span> handleRemove: UploadProps[<span class="string">&#x27;onRemove&#x27;</span>] = (param): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">    props?.onChange &amp;&amp; props?.onChange([])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;Upload</span><br><span class="line">        listType=<span class="string">&quot;picture-card&quot;</span></span><br><span class="line">        multiple=&#123;props?.multiple&#125;</span><br><span class="line">        maxCount=&#123;props.maxCount&#125;</span><br><span class="line">        fileList=&#123;fileList&#125;</span><br><span class="line">        onPreview=&#123;handlePreview&#125;</span><br><span class="line">        onChange=&#123;handleChange&#125;</span><br><span class="line">        onRemove=&#123;handleRemove&#125;</span><br><span class="line">        beforeUpload=&#123;handleBeforeUpload&#125;</span><br><span class="line">        showUploadList=&#123;&#123; <span class="attr">showPreviewIcon</span>: props.preview, ...props.showUploadList &#125;&#125; </span><br><span class="line">      &gt;</span><br><span class="line">        &#123;fileList.length &lt; (props?.length || <span class="number">20</span>) &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">PlusOutlined</span> /&gt;</span></span>&#125;</span><br><span class="line">      &lt;/Upload&gt;</span><br><span class="line"></span><br><span class="line">      &#123;<span class="comment">/* å›¾ç‰‡é¢„è§ˆ */</span>&#125;</span><br><span class="line">      &#123;props.preview ? (</span><br><span class="line">        &lt;Modal</span><br><span class="line">          visible=&#123;previewVisible&#125;</span><br><span class="line">          title=&#123;previewTitle&#125;</span><br><span class="line">          footer=&#123;<span class="literal">null</span>&#125;</span><br><span class="line">          onCancel=&#123;handleCancel&#125;</span><br><span class="line">          destroyOnClose</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;img alt=<span class="string">&quot;example&quot;</span> style=&#123;&#123; <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span> &#125;&#125; src=&#123;previewImage&#125; /&gt;</span><br><span class="line">        &lt;/Modal&gt;</span><br><span class="line">      ) : (</span><br><span class="line">        <span class="string">&#x27;&#x27;</span></span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">UploadComp.defaultProps = &#123;</span><br><span class="line">  multiple: <span class="literal">false</span>,</span><br><span class="line">  length: <span class="number">10</span>, <span class="comment">// é»˜è®¤å›¾ç‰‡åˆ—è¡¨å¯ä»¥å±•ç¤ºå›¾ç‰‡çš„æ•°é‡ï¼Œå½“ä¸Šä¼ ç…§ç‰‡æ•°åˆ°è¾¾é™åˆ¶åï¼Œä¸Šä¼ æŒ‰é’®æ¶ˆå¤±ã€‚</span></span><br><span class="line">  maxCount: <span class="number">10</span>,</span><br><span class="line">  preview: <span class="literal">true</span>, <span class="comment">// é»˜è®¤æ”¯æŒé¢„è§ˆ</span></span><br><span class="line">  showUploadList: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> UploadComp</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
          <category> antd </category>
          
      </categories>
      
      
        <tags>
            
            <tag> antd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¢å¤æœ¬ç«™æ­£å¸¸è¿è¡Œ</title>
      <link href="/2022/06/04/live2dApi/"/>
      <url>/2022/06/04/live2dApi/</url>
      
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚èƒŒæ™¯"><a href="#éœ€æ±‚èƒŒæ™¯" class="headerlink" title="éœ€æ±‚èƒŒæ™¯"></a>éœ€æ±‚èƒŒæ™¯</h2><p>ç›¸å…³æ”¿ç­–ç­‰ä¸€ç³»åˆ—åŸå› ï¼ŒåŸæœ¬çš„ <code>cdn.jsdelivr.net</code>å…è´¹cdnä¸èƒ½è®¿é—®ï¼Œå¯¼è‡´æœ¬ç«™å´©æ‰ã€‚ä¸ºäº†æ¢å¤æœ¬ç«™çš„æ­£å¸¸è¿è¡Œï¼Œåšäº†ä»¥ä¸‹æ¢å¤æªæ–½ã€‚</p><h2 id="æ›¿æ¢-npm-CDN"><a href="#æ›¿æ¢-npm-CDN" class="headerlink" title="æ›¿æ¢ npm CDN"></a>æ›¿æ¢ npm CDN</h2><p><a href="https://www.unpkg.com/">unpkg.com</a></p><ul><li>npm cdn<br><code>cdn.jsdelivr.net/npm</code> =&gt; <code>unpkg.com</code></li><li>github cdn<br><code>cdn.jsdelivr.net/gh</code> =&gt; <code>æœ¬åœ°åŠ è½½</code></li></ul><h2 id="è‡ªå·±éƒ¨ç½²live2d-api-php"><a href="#è‡ªå·±éƒ¨ç½²live2d-api-php" class="headerlink" title="è‡ªå·±éƒ¨ç½²live2d_api(php)"></a>è‡ªå·±éƒ¨ç½²live2d_api(php)</h2><p>çœ‹æ¿å¨˜çš„apiç½‘å€ä¹Ÿä¸èƒ½è®¿é—®ï¼ŒæŸ¥åˆ°<code>live2d_api</code>æ”¯æŒè‡ªå·±éƒ¨ç½²ï¼Œæœæ–­éƒ¨ç½²åˆ°è‡ªå·±æœåŠ¡å™¨ä¸Šã€‚</p><ol><li><p>å®‰è£…php<br><a href="https://blog.csdn.net/weixin_41752294/article/details/90181805">å‚è€ƒèµ„æ–™</a></p></li><li><p>é…ç½® <code>nginx</code> è®¿é—®æœåŠ¡<br>phpé»˜è®¤ç«¯å£9000ï¼Œç”±äºæˆ‘æ”¹ä¸ºäº†4001ï¼Œnginxé…ç½®ä¸­é…ç½®ä¸º4001ç«¯å£<br><code>/usr/local/php/etc php-fpm.conf</code> ä¸­listenå­—æ®µæ›´æ”¹é»˜è®¤ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen       4000;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    # å…è®¸è·¨åŸŸ</span><br><span class="line">    add_header &#x27;Access-Control-Allow-Origin&#x27;  &#x27;*&#x27;;</span><br><span class="line">    add_header &#x27;Access-Control-Allow-Credentials&#x27;   &#x27;true&#x27;;</span><br><span class="line">    add_header &#x27;Access-Control-Allow-Methods&#x27;  &#x27;GET, POST, OPTIONS&#x27;;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   www;</span><br><span class="line">        index index.php index.html index.htm; # 1. åŠ ä¸Š index.php</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # 2. å¢åŠ å¦‚ä¸‹é…ç½®</span><br><span class="line">    location ~ .php$ &#123;</span><br><span class="line">       root   www;</span><br><span class="line">       fastcgi_pass   127.0.0.1:4001;</span><br><span class="line">       fastcgi_index index.php;</span><br><span class="line">       fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">       include        fastcgi_params;</span><br><span class="line">       fastcgi_param   SCRIPT_NAME        $fastcgi_script_name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><p>httpsé—®é¢˜ï¼Œéœ€è¦ç”³è¯·åŸŸåã€httpsè¯ä¹¦â€¦ é¢ï¼Œå°±å…ˆè¿™æ ·å§~</p></li></ol><h2 id="å†™åœ¨åé¢"><a href="#å†™åœ¨åé¢" class="headerlink" title="å†™åœ¨åé¢"></a>å†™åœ¨åé¢</h2><p>æœ¬æ¥æ‰“ç®—å€Ÿæ­¤æœºä¼šç”¨ä¸€ç”¨dockerï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸Šnginxå·²ç»å®‰è£…è¿‡äº†ï¼Œlive2d_apiä¹Ÿå¾ˆç®€å•ä¸æ¶‰åŠåˆ°æ•°æ®åº“ç›¸å…³çš„ä¸œè¥¿ï¼Œæœ€åè¿˜æ˜¯å†³å®šç®€å•çš„å®‰è£…ä¸€ä¸‹phpï¼Œæ”¹ä¸€ä¸‹nginxé…ç½®å®Œäº‹ã€‚<br><a href="https://docs.docker.com/engine/reference/commandline/ps/">dockerå®˜ç½‘</a><br><a href="https://blog.csdn.net/weixin_40357154/article/details/123398978">dockerå®‰è£…</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Dartå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</title>
      <link href="/2022/04/13/dart2/"/>
      <url>/2022/04/13/dart2/</url>
      
        <content type="html"><![CDATA[<h2 id="Map-å­—å…¸"><a href="#Map-å­—å…¸" class="headerlink" title="Map å­—å…¸"></a>Map å­—å…¸</h2><p><a href="https://api.flutter-io.cn/flutter/dart-core/Map-class.html">å®˜ç½‘æ–‡æ¡£</a></p><h3 id="å¸¸â½¤å±æ€§ï¼š"><a href="#å¸¸â½¤å±æ€§ï¼š" class="headerlink" title="å¸¸â½¤å±æ€§ï¼š"></a>å¸¸â½¤å±æ€§ï¼š</h3><ul><li><code>keys</code> è·å–æ‰€æœ‰çš„keyå€¼</li><li><code>values</code> è·å–æ‰€æœ‰çš„valueå€¼</li><li><code>isEmpty</code> æ˜¯å¦ä¸ºç©º</li><li><code>isNotEmpty</code> æ˜¯å¦ä¸ä¸ºç©º</li></ul><h3 id="å¸¸â½¤â½…æ³•"><a href="#å¸¸â½¤â½…æ³•" class="headerlink" title="å¸¸â½¤â½…æ³•:"></a>å¸¸â½¤â½…æ³•:</h3><ul><li><code>remove(key)</code> åˆ é™¤æŒ‡å®škeyçš„æ•°æ®</li><li><code>addAll(&#123;...&#125;)</code> åˆå¹¶æ˜ å°„ ç»™æ˜ å°„å†…å¢åŠ å±æ€§</li><li><code>containsValue</code> æŸ¥çœ‹æ˜ å°„å†…çš„å€¼ è¿”å›true/false</li><li><code>forEach</code> </li><li><code>map</code></li><li><code>where</code></li><li><code>any</code></li><li><code>every</code></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜</span></span><br><span class="line"><span class="keyword">var</span> myMap = &#123;&#125;;</span><br><span class="line"><span class="built_in">Map</span> map = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">Map</span> map2 = &#123;</span><br><span class="line">  <span class="string">&#x27;test&#x27;</span>:<span class="string">&#x27;test&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(map2[<span class="string">&#x27;test&#x27;</span>]); <span class="comment">// test</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Map</span> testMap = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(testMap.keys); <span class="comment">// (a, b, c)</span></span><br><span class="line"><span class="built_in">print</span>(testMap.values); <span class="comment">// (1, 2, 3)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(testMap.isEmpty); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(testMap.isNotEmpty); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// remove</span></span><br><span class="line">testMap.remove(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="built_in">print</span>(testMap); <span class="comment">// &#123;b: 2, c: 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// addAll</span></span><br><span class="line">testMap.addAll(&#123;<span class="string">&#x27;d&#x27;</span>:<span class="number">4</span>&#125;);</span><br><span class="line"><span class="built_in">print</span>(testMap); <span class="comment">// &#123;b: 2, c: 3, d: 4&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// forEach</span></span><br><span class="line"><span class="keyword">final</span> planetsByMass = &lt;<span class="built_in">num</span>, <span class="built_in">String</span>&gt;&#123;</span><br><span class="line">  <span class="number">0.81</span>: <span class="string">&#x27;Venus&#x27;</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">&#x27;Earth&#x27;</span>,</span><br><span class="line">  <span class="number">0.11</span>: <span class="string">&#x27;Mars&#x27;</span>,</span><br><span class="line">  <span class="number">17.15</span>: <span class="string">&#x27;Neptune&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">planetsByMass.forEach((key, value) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$key</span>: <span class="subst">$value</span>&#x27;</span>);</span><br><span class="line">  <span class="comment">// 0.81: Venus</span></span><br><span class="line">  <span class="comment">// 1: Earth</span></span><br><span class="line">  <span class="comment">// 0.11: Mars</span></span><br><span class="line">  <span class="comment">// 17.15: Neptune</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> planetsByMass = &lt;<span class="built_in">num</span>, <span class="built_in">String</span>&gt;&#123;</span><br><span class="line">  <span class="number">0.81</span>: <span class="string">&#x27;Venus&#x27;</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">&#x27;Earth&#x27;</span>,</span><br><span class="line">  <span class="number">0.11</span>: <span class="string">&#x27;Mars&#x27;</span>,</span><br><span class="line">  <span class="number">17.15</span>: <span class="string">&#x27;Neptune&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// forEach</span></span><br><span class="line">planetsByMass.forEach((key, value) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$key</span>: <span class="subst">$value</span>&#x27;</span>);</span><br><span class="line">  <span class="comment">// 0.81: Venus</span></span><br><span class="line">  <span class="comment">// 1: Earth</span></span><br><span class="line">  <span class="comment">// 0.11: Mars</span></span><br><span class="line">  <span class="comment">// 17.15: Neptune</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// map returnæ–°çš„Map </span></span><br><span class="line"><span class="comment">// å…¥å‚å‡½æ•°ï¼Œå‡½æ•°return æ•°æ®ç±»å‹éœ€è¦ä¸º MapEntry</span></span><br><span class="line"><span class="built_in">print</span>(planetsByMass.map(((key, value) =&gt; MapEntry(</span><br><span class="line">    key, value)))); <span class="comment">// &#123;0.81: Venus, 1: Earth, 0.11: Mars, 17.15: Neptune&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(planetsByMass.map(((key, value) =&gt; MapEntry(</span><br><span class="line">    key + <span class="number">1</span>, value)))); <span class="comment">//&#123;1.81: Venus, 2: Earth, 1.11: Mars, 18.15: Neptune&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p><a href="https://api.flutter-io.cn/flutter/dart-core/Set-class.html">å®˜ç½‘æ–‡æ¡£</a><br>å¸¸ç”¨æ¥æ•°ç»„å»é‡</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"></span><br><span class="line"> arr.add(<span class="string">&#x27;test1&#x27;</span>);</span><br><span class="line"> arr.add(<span class="string">&#x27;test1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="built_in">print</span>(arr.toList()); <span class="comment">// [test1]</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> arr1 = [<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;test1&#x27;</span>, <span class="string">&#x27;test2&#x27;</span>, <span class="string">&#x27;test1&#x27;</span>];</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"> s.addAll(arr1);</span><br><span class="line"> <span class="built_in">print</span>(s.toList()); <span class="comment">// [&#x27;test&#x27;, &#x27;test1&#x27;, &#x27;test2&#x27;]</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> halogens = &#123;</span><br><span class="line">   <span class="string">&#x27;fluorine&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;chlorine&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;bromine&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;iodine&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;astatine&#x27;</span></span><br><span class="line"> &#125;; <span class="comment">// å®šä¹‰ä¸€ä¸ªé›†åˆ</span></span><br><span class="line"> <span class="keyword">var</span> elements = &lt;<span class="built_in">String</span>&gt;&#123;&#125;;</span><br><span class="line"> elements.add(<span class="string">&#x27;fluorine&#x27;</span>); <span class="comment">// ç»™ç¬¬äºŒä¸ªæ•°å­—æ·»åŠ ä¸€ä¸ªå€¼</span></span><br><span class="line"> <span class="built_in">print</span>(elements); <span class="comment">// &#123;fluorine&#125;</span></span><br><span class="line"> elements.addAll(halogens); <span class="comment">// å†å’Œç¬¬ä¸€ä¸ªæ•°ç»„ä¸­çš„å€¼æ·»åŠ è¿›æ¥</span></span><br><span class="line"> <span class="built_in">print</span>(elements); <span class="comment">// &#123;fluorine, chlorine, bromine, iodine, astatine&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h2><p>ç®­å¤´å‡½æ•°ï¼ˆå’ŒJSä¸â¼€æ ·,dartçš„ç®­å¤´å‡½æ•°åªèƒ½å†™â¼€â€œâ¾â€ï¼‰ä¸¥è°¨çš„è¯´æ³• 1ä¸ªè¡¨è¾¾å¼</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;lemon&#x27;</span>, <span class="string">&#x27;grape&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>];</span><br><span class="line">fruits.where((name) =&gt; name.contains(<span class="string">&#x27;banana&#x27;</span>)).forEach(<span class="built_in">print</span>); <span class="comment">// banana</span></span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•å…¥å‚"><a href="#æ–¹æ³•å…¥å‚" class="headerlink" title="æ–¹æ³•å…¥å‚"></a>æ–¹æ³•å…¥å‚</h2><ul><li>å‚æ•° <code>func(name)</code></li><li>å¼ºåˆ¶ç±»å‹ <code>func(String name)</code></li><li>é»˜è®¤å€¼ <code>func(String name=&#39;name&#39;)</code></li><li>å¯é€‰å‚æ•° <code>func(name,[age,gender])</code></li><li>å‘½åå‚æ•° <code>func(name,&#123;age,gender&#125;)</code></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Dart å¯ä»¥ä½¿ç”¨ [] æ ‡è®°å¯é€‰çš„ä½ç½®å‚æ•°ï¼Œå¹¶å°†å®ƒæ”¾ç½®åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åã€‚</span></span><br><span class="line"><span class="comment">// device ä½œä¸ºå¯é€‰å‚æ•°ï¼Œå¯ä»¥ä¸ä¼ å…¥</span></span><br><span class="line"><span class="built_in">String</span> say(<span class="built_in">String</span> from, <span class="built_in">String</span> msg, [<span class="built_in">String</span> device = <span class="string">&#x27;&#x27;</span>]) &#123;</span><br><span class="line">  <span class="keyword">if</span> (device.isNotEmpty) <span class="keyword">return</span> <span class="string">&#x27;<span class="subst">$from</span> says <span class="subst">$msg</span> --- from <span class="subst">$device</span>&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;<span class="subst">$from</span> says <span class="subst">$msg</span>&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="built_in">print</span>(say(<span class="string">&#x27;Jim&#x27;</span>, <span class="string">&#x27;Hi&#x27;</span>)); <span class="comment">// Jim says Hi </span></span><br><span class="line"> <span class="built_in">print</span>(say(<span class="string">&#x27;Jim&#x27;</span>, <span class="string">&#x27;Hi&#x27;</span>, <span class="string">&#x27;iPhone&#x27;</span>)); <span class="comment">// Jim says Hi  --- from iPhone</span></span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> say(<span class="built_in">String</span> from, <span class="built_in">String</span> msg, &#123;<span class="built_in">String</span> software = <span class="string">&#x27;&#x27;</span>, <span class="built_in">String</span> device = <span class="string">&#x27;&#x27;</span>&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;<span class="subst">$from</span> says <span class="subst">$msg</span> --- from <span class="subst">$device</span> <span class="subst">$software</span>&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(say(<span class="string">&#x27;Jim&#x27;</span>, <span class="string">&#x27;Hi&#x27;</span>, device: <span class="string">&#x27;iPhone&#x27;</span>, software: <span class="string">&#x27;QQ&#x27;</span>)); <span class="comment">// Jim says Hi  --- from iPhone QQ</span></span><br><span class="line"><span class="built_in">print</span>(say(<span class="string">&#x27;Jim&#x27;</span>, <span class="string">&#x27;Hi&#x27;</span>, software: <span class="string">&#x27;Wechat&#x27;</span>)); <span class="comment">// Jim says Hi  --- from  Wechat</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="asyncï¼Œawaitï¼ŒFuture"><a href="#asyncï¼Œawaitï¼ŒFuture" class="headerlink" title="asyncï¼Œawaitï¼ŒFuture"></a>asyncï¼Œawaitï¼ŒFuture</h2><p>å¤šçœ‹çœ‹å®˜ç½‘ï¼ <a href="https://dart.cn/codelabs/async-await#what-is-a-future">å®˜ç½‘ä¼ é€é—¨</a></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> foo() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;foo E&#x27;</span>);</span><br><span class="line">  <span class="built_in">String</span> value = <span class="keyword">await</span> bar();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;foo X <span class="subst">$value</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span> bar() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;bar E&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;main E&#x27;</span>);</span><br><span class="line">  foo();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;main X&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°é¡ºåº</span></span><br><span class="line"><span class="comment">// main E</span></span><br><span class="line"><span class="comment">// foo E</span></span><br><span class="line"><span class="comment">// bar E</span></span><br><span class="line"><span class="comment">// main X</span></span><br><span class="line"><span class="comment">// foo X hello</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">foo() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;foo E&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> Future(bar).then((value) =&gt; <span class="built_in">print</span>(<span class="string">&#x27;foo X <span class="subst">$value</span>&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;bar E&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;main E&#x27;</span>);</span><br><span class="line">  foo();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;main X&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main E</span></span><br><span class="line"><span class="comment">// foo E</span></span><br><span class="line"><span class="comment">// main X</span></span><br><span class="line"><span class="comment">// bar E</span></span><br><span class="line"><span class="comment">// foo X hello</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>dartçš„ä»£ç æ‰§è¡Œé¡ºåºå’Œjsçš„evenloopæ˜¯ç±»ä¼¼çš„ï¼›</p><p>ä»¥ä¸‹ä»£ç çš„æ‰§è¡Œé¡ºåºï¼š</p><ol><li>æ§åˆ¶å°æ‰“å°<code>start</code>;</li><li>æ‰§è¡ŒcountSeconds()æ–¹æ³•ï¼ŒcountSecondsä¸­æ˜¯Future.delayedï¼Œæ”¾å…¥å¼‚æ­¥ä»»åŠ¡ä¸­ï¼›</li><li>æ‰§è¡ŒprintOrderMessage(), æ§åˆ¶å°æ‰“å°ï¼š<code>Awaiting user order...</code>;</li><li>æ‰§è¡ŒfetchUserOrder(), fetchUserOrderä¸­æ˜¯Future.delayed, æ”¾å…¥å¼‚æ­¥ä»»åŠ¡ä¸­ï¼›</li><li>è¿™ä¸ªæ—¶å€™å…ˆæ‰§è¡ŒcountSecondsä¸­çš„å¼‚æ­¥ä»»åŠ¡ï¼Œæ§åˆ¶å°ä¾æ¬¡æ‰“å°<code>1 2 3 4</code>ï¼›</li><li>å†æ‰§è¡ŒfetchUserOrderä¸­çš„å¼‚æ­¥ä»»åŠ¡ï¼Œå¾—åˆ°orderï¼Œæ§åˆ¶å°æ‰“å°<code>Your order is: Large Latte</code>;</li><li>æ§åˆ¶å°æ‰“å°<code>end</code>;</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å®˜ç½‘ä¾‹å­çš„åŸºç¡€ä¸Š å¢åŠ äº† start end çš„æ‰“å°</span></span><br><span class="line">Future&lt;<span class="keyword">void</span>&gt; printOrderMessage() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;Awaiting user order...&#x27;</span>); </span><br><span class="line">  <span class="keyword">var</span> order = <span class="keyword">await</span> fetchUserOrder();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;Your order is: <span class="subst">$order</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Future&lt;<span class="built_in">String</span>&gt; fetchUserOrder() &#123;</span><br><span class="line">  <span class="comment">// Imagine that this function is more complex and slow.</span></span><br><span class="line">  <span class="keyword">return</span> Future.delayed(<span class="keyword">const</span> <span class="built_in">Duration</span>(seconds: <span class="number">4</span>), () =&gt; <span class="string">&#x27;Large Latte&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line">  countSeconds(<span class="number">4</span>);</span><br><span class="line">  <span class="keyword">await</span> printOrderMessage();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;end&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can ignore this function - it&#x27;s here to visualize delay time in this example.</span></span><br><span class="line"><span class="keyword">void</span> countSeconds(<span class="built_in">int</span> s) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= s; i++) &#123;</span><br><span class="line">    Future.delayed(<span class="built_in">Duration</span>(seconds: i), () =&gt; <span class="built_in">print</span>(i));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">start</span><br><span class="line">Awaiting user order...</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">Your order is: Large Latte</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„ä¾‹å­å†ç¨ç¨åšä¸€ä¸‹æ”¹åŠ¨ï¼šå°†16è¡Œ<code>printOrderMessage</code> å‰é¢çš„awaitå»æ‰ï¼Œå†æ¥çœ‹çœ‹ä»£ç çš„æ‰“å°é¡ºåºã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="keyword">void</span>&gt; printOrderMessage() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;Awaiting user order...&#x27;</span>); </span><br><span class="line">  <span class="keyword">var</span> order = <span class="keyword">await</span> fetchUserOrder();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;Your order is: <span class="subst">$order</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Future&lt;<span class="built_in">String</span>&gt; fetchUserOrder() &#123;</span><br><span class="line">  <span class="comment">// Imagine that this function is more complex and slow.</span></span><br><span class="line">  <span class="keyword">return</span> Future.delayed(<span class="keyword">const</span> <span class="built_in">Duration</span>(seconds: <span class="number">4</span>), () =&gt; <span class="string">&#x27;Large Latte&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line">  countSeconds(<span class="number">4</span>);</span><br><span class="line">  <span class="comment">// å»æ‰ await</span></span><br><span class="line">  printOrderMessage();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;end&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can ignore this function - it&#x27;s here to visualize delay time in this example.</span></span><br><span class="line"><span class="keyword">void</span> countSeconds(<span class="built_in">int</span> s) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= s; i++) &#123;</span><br><span class="line">    Future.delayed(<span class="built_in">Duration</span>(seconds: i), () =&gt; <span class="built_in">print</span>(i));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°é¡ºåº:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">start</span><br><span class="line">Awaiting user order...</span><br><span class="line">end</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">Your order is: Large Latte</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Getter-å’Œ-Setter"><a href="#Getter-å’Œ-Setter" class="headerlink" title="Getter å’Œ Setter"></a>Getter å’Œ Setter</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> left, top, width, height;</span><br><span class="line"></span><br><span class="line">  Rectangle (<span class="keyword">this</span>.left, <span class="keyword">this</span>.top, <span class="keyword">this</span>.width, <span class="keyword">this</span>.height);</span><br><span class="line">  <span class="comment">// å®šä¹‰ä¸¤ä¸ªè®¡ç®—å±æ€§ï¼šright å’Œ bottomã€‚</span></span><br><span class="line">  <span class="built_in">num</span> <span class="keyword">get</span> right =&gt; left + width;</span><br><span class="line">  <span class="keyword">set</span> right (<span class="built_in">num</span> value) =&gt; left = value - width;</span><br><span class="line">  <span class="built_in">num</span> <span class="keyword">get</span> bottom =&gt; top + height;</span><br><span class="line">  <span class="keyword">set</span> bottom (<span class="built_in">num</span> value) =&gt; top = value - height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main () &#123;</span><br><span class="line">  <span class="keyword">var</span> rect = Rectangle (<span class="number">3</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">15</span>);</span><br><span class="line">  <span class="comment">// æ–­è¨€ debugæ¨¡å¼ä¸‹ å€¼falseæ§åˆ¶å°ä¼šæŠ¥é”™</span></span><br><span class="line">  <span class="keyword">assert</span>(rect.left == <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">  rect.right = <span class="number">12</span>; <span class="comment">// set</span></span><br><span class="line">  <span class="keyword">assert</span>(rect.left == <span class="number">-8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›çš„å‡½æ•°å‚æ•°ä¸ addBy ç›¸åŠ ã€‚</span></span><br><span class="line"><span class="built_in">Function</span> makeAdder(<span class="built_in">num</span> addBy) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="built_in">num</span> i) =&gt; addBy + i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºä¸€ä¸ªåŠ  2 çš„å‡½æ•°</span></span><br><span class="line">  <span class="keyword">var</span> add2 = makeAdder(<span class="number">2</span>);</span><br><span class="line">  <span class="comment">// åˆ›å»ºä¸€ä¸ªåŠ  4 çš„å‡½æ•°</span></span><br><span class="line">  <span class="keyword">var</span> add4 = makeAdder(<span class="number">4</span>);</span><br><span class="line">  <span class="comment">// éªŒè¯æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">assert</span>(add2(<span class="number">3</span>) == <span class="number">5</span>);</span><br><span class="line">  <span class="keyword">assert</span>(add4(<span class="number">3</span>) == <span class="number">7</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="class-ç±»"><a href="#class-ç±»" class="headerlink" title="class ç±»"></a>class ç±»</h2><p> Dart æ˜¯ä¸€ç§åŸºäºç±»å’Œ mixin ç»§æ‰¿æœºåˆ¶çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œæ‰€æœ‰çš„ç±»å‡ç»§æ‰¿è‡ª Objectã€‚åŸºäº Mixin ç»§æ‰¿ æ„å‘³ç€æ¯ä¸ªç±»éƒ½åªæœ‰ä¸€ä¸ªè¶…ç±»ï¼Œä¸€ä¸ªç±»ä¸­çš„ä»£ç å¯ä»¥åœ¨å…¶ä»–å¤šä¸ªç»§æ‰¿ç±»ä¸­é‡å¤ä½¿ç”¨ã€‚Dart ä¸­çš„æ„é€ å‡½æ•°åˆ†ä¸ºé»˜è®¤æ„é€ å‡½æ•°å’Œå‘½åæ„é€ å‡½æ•°ã€‚</p><h3 id="é»˜è®¤æ„é€ å‡½æ•°"><a href="#é»˜è®¤æ„é€ å‡½æ•°" class="headerlink" title="é»˜è®¤æ„é€ å‡½æ•°"></a>é»˜è®¤æ„é€ å‡½æ•°</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰å£°æ˜æ„é€ å‡½æ•°ï¼ŒDart ä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ã€‚é»˜è®¤ä¼šè°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å‡½æ•°ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  Person()&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;this is person&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Student æœªå£°æ˜æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123; &#125; </span><br><span class="line"></span><br><span class="line">main()&#123;</span><br><span class="line">  <span class="comment">// new å…³é”®å­—å¯ä»¥çœç•¥</span></span><br><span class="line">  <span class="keyword">var</span> stu = <span class="keyword">new</span> Student(); <span class="comment">// this is person</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å‘½åæ„é€ å‡½æ•°"><a href="#å‘½åæ„é€ å‡½æ•°" class="headerlink" title="å‘½åæ„é€ å‡½æ•°"></a>å‘½åæ„é€ å‡½æ•°</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> firstName;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> lastName;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å£°æ˜æ„é€ å‡½æ•° å¹¶ å±æ€§èµ‹å€¼</span></span><br><span class="line"> <span class="comment">// Dart æä¾›äº†åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œå‰åˆå§‹åŒ–å®ä¾‹å˜é‡çš„åŠŸèƒ½ï¼Œå„å‚æ•°çš„åˆå§‹åŒ–ç”¨é€—å·åˆ†éš”ã€‚ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¾ç½® final å­—æ®µã€‚</span></span><br><span class="line">  Student(<span class="keyword">this</span>.firstName,<span class="keyword">this</span>.lastName)</span><br><span class="line">    : name = firstName + lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()&#123;</span><br><span class="line">  <span class="keyword">var</span> stu = <span class="keyword">new</span> Student(<span class="string">&#x27;Halon&#x27;</span>,<span class="string">&#x27;Jim&#x27;</span>);</span><br><span class="line">  <span class="built_in">print</span>(stu.name); <span class="comment">// HalonJim</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰©å±•ç±»-ç»§æ‰¿"><a href="#æ‰©å±•ç±»-ç»§æ‰¿" class="headerlink" title="æ‰©å±•ç±» ç»§æ‰¿"></a>æ‰©å±•ç±» ç»§æ‰¿</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯çˆ¶ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="comment">// çˆ¶ç±»å®šä¹‰äº† dowWork æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">void</span> doWork()&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;person work&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿™æ˜¯å­ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ @override é‡å†™çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> doWork()&#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥è°ƒç”¨çˆ¶ç±»ï¼Œå¹¶å¢åŠ å­ç±»æƒ³æ·»åŠ çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">super</span>.doWork();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;student study&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="keyword">var</span> student =  Student();</span><br><span class="line">  student.doWork();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// person work</span></span><br><span class="line"><span class="comment">// student study</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> name;</span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> weapon;</span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> run;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ implements ç»§æ‰¿</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fighter</span> <span class="keyword">implements</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line"> <span class="comment">// ä¿®é¥°ç¬¦ @override ä¼šå‘Šè¯‰åˆ†æå™¨ä½ å½“å‰æ˜¯åœ¨å¤å†™æŸä¸ªæˆå‘˜æ–¹æ³•ï¼Œå¦‚æœè¯¥å¤å†™ä¸æˆåŠŸï¼Œåˆ†æå™¨å°±ä¼šæŠ¥é”™</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> name =&gt; <span class="string">&#x27;fighter&#x27;</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> weapon =&gt; <span class="string">&#x27;missile&#x27;</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> run =&gt; <span class="string">&#x27;fly&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">$name</span> can <span class="subst">$run</span>,use <span class="subst">$weapon</span> as weapon.&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ implements ç»§æ‰¿</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tank</span> <span class="keyword">implements</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> name =&gt; <span class="string">&#x27;tank&#x27;</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> weapon =&gt; <span class="string">&#x27;cannon&#x27;</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> run =&gt; <span class="string">&#x27;run&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">$name</span> can <span class="subst">$run</span>,use <span class="subst">$weapon</span> as weapon.&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆ›å»ºå·¥å‚ç±»ï¼Œæ¥è¿”å›ç›¸åº”çš„ç±»å‹</span></span><br><span class="line">Vehicle vehicleFactory(<span class="built_in">String</span> type) &#123;</span><br><span class="line">  <span class="keyword">if</span> (type == <span class="string">&#x27;fighter&#x27;</span>) <span class="keyword">return</span> Fighter();</span><br><span class="line">  <span class="keyword">if</span> (type == <span class="string">&#x27;tank&#x27;</span>) <span class="keyword">return</span> Tank();</span><br><span class="line">  <span class="keyword">throw</span> <span class="string">&#x27;can not create <span class="subst">$type</span>.&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="keyword">final</span> fighter = vehicleFactory(<span class="string">&#x27;fighter&#x27;</span>);</span><br><span class="line">  <span class="keyword">final</span> tank = vehicleFactory(<span class="string">&#x27;tank&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(fighter);</span><br><span class="line">  <span class="built_in">print</span>(tank);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Mixin"><a href="#Mixin" class="headerlink" title="Mixin"></a>Mixin</h2><p> Mixin å¯ä»¥ä¸ºç±»æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œè€Œä¸”ä½¿ç”¨ Mixin ä¸å…¶ä»–ç±»ä¹‹é—´ä¹Ÿä¸å­˜åœ¨å±‚çº§å’Œç»§æ‰¿å…³ç³»ã€‚ä½¿ç”¨ Mixin ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡ with åé¢è·Ÿä¸€ä¸ªæˆ–å¤šä¸ªæ··å…¥çš„åç§°å°±å¯ä»¥äº†ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// abstract å®šä¹‰æŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Mammal</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Fish</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">mixin</span> Walker &#123;</span><br><span class="line">  <span class="keyword">void</span> walk() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I&#x27;m walking&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">mixin</span> Swimmer &#123;</span><br><span class="line">  <span class="keyword">void</span> swim() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I&#x27;m swimming&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">mixin</span> Flyer &#123;</span><br><span class="line">  <span class="keyword">void</span> Fly() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I&#x27;m swimming&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ·è±šæ˜¯å“ºä¹³åŠ¨ç‰© å¯ä»¥æ¸¸æ³³</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dolphin</span> <span class="keyword">extends</span> <span class="title">Mammal</span> <span class="title">with</span> <span class="title">Swimmer</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è™è æ˜¯å“ºä¹³åŠ¨ç‰© å¯ä»¥èµ°å’Œé£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bat</span> <span class="keyword">extends</span> <span class="title">Mammal</span> <span class="title">with</span> <span class="title">Walker</span>, <span class="title">Flyer</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çŒ«æ˜¯å“ºä¹³åŠ¨ç‰© å¯ä»¥èµ°</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Mammal</span> <span class="title">with</span> <span class="title">Walker</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¸½å­æ˜¯é¸Ÿ å¯ä»¥èµ°å’Œé£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dove</span> <span class="keyword">extends</span> <span class="title">Bird</span> <span class="title">with</span> <span class="title">Walker</span>, <span class="title">Flyer</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¸­å­æ˜¯ç¦½ç±» å¯ä»¥èµ° æ¸¸æ³³å’Œé£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Duck</span> <span class="keyword">extends</span> <span class="title">Bird</span> <span class="title">with</span> <span class="title">Walker</span>, <span class="title">Swimmer</span>, <span class="title">Flyer</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é£é±¼æ˜¯é±¼ç±» å¯ä»¥æ¸¸æ³³å’Œé£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlyingFish</span> <span class="keyword">extends</span> <span class="title">Fish</span> <span class="title">with</span> <span class="title">Swimmer</span>, <span class="title">Flyer</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  Cat cat = Cat();</span><br><span class="line">  Duck duck = Duck();</span><br><span class="line"></span><br><span class="line">  cat.walk();</span><br><span class="line">  duck.swim();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Dart </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>patch-package</title>
      <link href="/2022/04/12/patch-package/"/>
      <url>/2022/04/12/patch-package/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><a href="https://www.npmjs.com/package/patch-package">ä¼ é€é—¨</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> npm</span></span><br><span class="line">npm i patch-package  --save-dev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> yarn</span></span><br><span class="line">yarn add patch-package postinstall-postinstall  --dev</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹package-json"><a href="#ä¿®æ”¹package-json" class="headerlink" title="ä¿®æ”¹package.json"></a>ä¿®æ”¹package.json</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;postinstall&quot;: &quot;patch-package&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·åœ¨ä¸‹è½½ä¾èµ–çš„æ—¶å€™<code>patch-package</code>ä¼šè‡ªåŠ¨ä¸ºä¾èµ–åŒ…æ‰“ä¸Šè¡¥ä¸ã€‚</p><h2 id="åˆ›å»ºè¡¥ä¸"><a href="#åˆ›å»ºè¡¥ä¸" class="headerlink" title="åˆ›å»ºè¡¥ä¸"></a>åˆ›å»ºè¡¥ä¸</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npx patch-package package-name   <span class="comment"># ä½¿ç”¨npm [package-name]</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yarn patch-package package-name  <span class="comment"># ä½¿ç”¨yarn</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œåé€šå¸¸ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>patches</code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º<code>package-name+version.patch</code>çš„æ–‡ä»¶ã€‚å°†è¯¥patchæ–‡ä»¶æäº¤è‡³ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œå³å¯åœ¨ä¹‹ååº”ç”¨è¯¥è¡¥ä¸äº†ã€‚</p><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>è¡¥ä¸è·Ÿä¾èµ–åŒ…çš„ç‰ˆæœ¬æ˜¯å¼ºå…³è”çš„ï¼Œåœ¨è¿›è¡Œä¾èµ–åŒ…å‡çº§çš„æ—¶å€™éœ€è¦æ³¨æ„ã€‚å¦‚æœå‡çº§åçš„ç‰ˆæœ¬å·²ç»è§£å†³äº†ç›¸å…³é—®é¢˜ï¼Œè¡¥ä¸å°±å¯ä»¥åˆ æ‰äº†ï¼›å¦åˆ™éœ€è¦ä¸ºæ–°ç‰ˆæœ¬çš„ä¾èµ–åŒ…é‡æ–°æ‰“è¡¥ä¸ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dartå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
      <link href="/2022/04/06/dart1/"/>
      <url>/2022/04/06/dart1/</url>
      
        <content type="html"><![CDATA[<h2 id="Dart-ä»‹ç»"><a href="#Dart-ä»‹ç»" class="headerlink" title="Dart ä»‹ç»"></a>Dart ä»‹ç»</h2><p><a href="https://api.dart.dev/stable/2.16.2/index.html">å®˜ç½‘</a><br>Dart æ˜¯ç”±è°·æ­Œå¼€å‘çš„è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ã€‚è¢«ç”¨äº Webã€æœåŠ¡å™¨ã€ç§»åŠ¨åº”ç”¨å’Œç‰©è”ç½‘ç­‰é¢†åŸŸçš„å¼€å‘ã€‚å®ƒä½¿ç”¨å®½æ¾å¼€æºè®¸å¯è¯ï¼ˆBSD è¯ä¹¦ï¼‰ã€‚Dart è¢«è®¾è®¡ä¸ºé¢å‘å¯¹è±¡çš„ã€ç±»å®šä¹‰çš„ã€å•ç»§æ‰¿çš„è¯­è¨€ã€‚å®ƒçš„è¯­æ³•æœ‰ç‚¹ç±»ä¼¼ C è¯­è¨€ï¼Œå¹¶ä¸”å¯ä»¥è½¬è¯‘ä¸º JavaScriptï¼Œæ”¯æŒæ··å…¥ï¼ˆmixinsï¼‰ã€æ¥å£ï¼ˆinterfacesï¼‰ã€æŠ½è±¡ç±»ï¼ˆabstract classesï¼‰ã€å…·ä½“åŒ–æ³›å‹ï¼ˆreified genericsï¼‰ã€å¯é€‰ç±»å‹ï¼ˆoptional typingï¼‰ä¸ sound type systemã€‚</p><h2 id="Dartæ•°æ®ç±»å‹"><a href="#Dartæ•°æ®ç±»å‹" class="headerlink" title="Dartæ•°æ®ç±»å‹"></a>Dartæ•°æ®ç±»å‹</h2><ul><li>æ•°å€¼ Number int double</li><li>å­—ç¬¦ä¸² String</li><li>å¸ƒå°”å€¼ bool</li><li>æ•°ç»„ List</li><li>å­—å…¸ Map</li><li>Set  Set æ˜¯ä¸€ä¸ªå…ƒç´ å”¯ä¸€ä¸”æ— åºçš„é›†åˆ</li><li>Runes</li><li>Symbol</li><li>Null</li></ul><p>Dart æ”¯æŒç±»å‹æ¨æ–­ï¼Œæ‰€ä»¥å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¹¶ä¸éœ€è¦æ˜¾å¼çš„æŒ‡å®šç±»å‹ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&quot;this is a name&quot;</span>; <span class="comment">// å­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">var</span> year = <span class="number">2020</span>; <span class="comment">// æ•´å‹</span></span><br><span class="line">  <span class="keyword">var</span> money = <span class="number">15.32</span>; <span class="comment">// æµ®ç‚¹å‹</span></span><br><span class="line">  <span class="keyword">var</span> fruits = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;lemon&#x27;</span>, <span class="string">&#x27;grape&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>]; <span class="comment">// æ•°ç»„</span></span><br><span class="line">  <span class="keyword">var</span> student = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&quot;Jim&quot;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">12</span>&#125;; <span class="comment">// å¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Object æ˜¯æ‰€æœ‰ Dart å¯¹è±¡çš„åŸºç±»å‹ï¼Œæ‰€ä»¥ä»»ä½•å€¼éƒ½å¯ä»¥èµ‹å€¼ç»™ Objectã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&quot;this is a name&quot;</span>; <span class="comment">// å­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">var</span> year = <span class="number">2020</span>; <span class="comment">// æ•´å‹</span></span><br><span class="line">  <span class="built_in">Object</span> obj;</span><br><span class="line">  <span class="comment">// ä»¥ä¸‹ä»£ç éƒ½å¯ä»¥æ­£å¸¸è¿è¡Œ</span></span><br><span class="line">  obj = name;</span><br><span class="line">  <span class="built_in">print</span>(obj);</span><br><span class="line"></span><br><span class="line">  obj = year;</span><br><span class="line">  <span class="built_in">print</span>(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°å€¼"><a href="#æ•°å€¼" class="headerlink" title="æ•°å€¼"></a>æ•°å€¼</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.æ•°å€¼</span></span><br><span class="line"> <span class="built_in">int</span> intvalue = <span class="number">0</span>;</span><br><span class="line"> <span class="built_in">double</span> <span class="built_in">num</span> = <span class="number">1.2222</span>; <span class="comment">// æµ®ç‚¹æ•°</span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2.å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">String</span> str1 = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="built_in">String</span> str2 = <span class="string">&#x27;dart!&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">$str1</span> <span class="subst">$str2</span>&quot;</span>); <span class="comment">// hello dart!  å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line"><span class="comment">// &#x27;&#x27;&#x27; 3ä¸ªå¼•å·ï¼ˆå•å¼•å·ã€å¤šå¼•å·ï¼‰å¯ä»¥ç”¨æ¥å†™å¤šè¡Œå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">String</span> str3 = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">            ç¬¬ä¸€è¡Œ</span></span><br><span class="line"><span class="string">            ç¬¬äºŒè¡Œ</span></span><br><span class="line"><span class="string">            ç¬¬ä¸‰è¡Œ</span></span><br><span class="line"><span class="string">            &#x27;&#x27;&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(str3);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¸ƒå°”å€¼"><a href="#å¸ƒå°”å€¼" class="headerlink" title="å¸ƒå°”å€¼"></a>å¸ƒå°”å€¼</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> booll = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">bool</span> bool2 = <span class="keyword">false</span>;</span><br><span class="line"><span class="built_in">print</span>(booll); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><h4 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> list1 = [];</span><br><span class="line"><span class="keyword">var</span> list2 = [];</span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; list3 = [<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;str&#x27;</span>, <span class="string">&#x27;arr&#x27;</span>]; <span class="comment">// æŒ‡å®šç±»å‹list</span></span><br></pre></td></tr></table></figure><h4 id="å–å€¼"><a href="#å–å€¼" class="headerlink" title="å–å€¼"></a>å–å€¼</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; list = [<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;str&#x27;</span>, <span class="string">&#x27;arr&#x27;</span>]; <span class="comment">// æŒ‡å®šç±»å‹list</span></span><br><span class="line"><span class="built_in">print</span>(list[<span class="number">0</span>]); <span class="comment">// test</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> listTake = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// take</span></span><br><span class="line"><span class="built_in">print</span>(listTake.take(<span class="number">2</span>)); <span class="comment">// (1,2) ä»0å¼€å§‹å–countä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›ç»“æœ</span></span><br><span class="line"><span class="comment">// takeWhile</span></span><br><span class="line"><span class="built_in">print</span>(listTake.takeWhile((value) =&gt; value &lt; <span class="number">5</span>)); <span class="comment">// (1, 2, 3, 4) è¿”å›listTake</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// retainWhere</span></span><br><span class="line">listTake.retainWhere((element) =&gt; element&gt;<span class="number">2</span>); <span class="comment">// æ”¹å˜åŸæ•°ç»„</span></span><br><span class="line"><span class="built_in">print</span>(listTake); <span class="comment">// [3, 4, 5]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="é•¿åº¦"><a href="#é•¿åº¦" class="headerlink" title="é•¿åº¦"></a>é•¿åº¦</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; list = [<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;str&#x27;</span>, <span class="string">&#x27;arr&#x27;</span>]; <span class="comment">// æŒ‡å®šç±»å‹list</span></span><br><span class="line"><span class="built_in">print</span>(list.length); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> list = [];</span><br><span class="line"><span class="comment">// add</span></span><br><span class="line">list.add(<span class="number">1</span>); <span class="comment">// æ·»åŠ å•ä¸ª</span></span><br><span class="line"><span class="comment">// addAll</span></span><br><span class="line">list.addAll([<span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// å¯ä»¥åšæ•°ç»„åˆå¹¶</span></span><br></pre></td></tr></table></figure><h4 id="æ’å€¼"><a href="#æ’å€¼" class="headerlink" title="æ’å€¼"></a>æ’å€¼</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> list = [];</span><br><span class="line"><span class="comment">// insert</span></span><br><span class="line">list.insert(<span class="number">0</span>, <span class="number">12</span>); <span class="comment">// å…¥å‚ index,value</span></span><br><span class="line"><span class="built_in">print</span>(list); <span class="comment">// [12]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// insertAll</span></span><br><span class="line">list.insertAll(<span class="number">0</span>, [<span class="number">10</span>, <span class="number">11</span>]);</span><br><span class="line"><span class="built_in">print</span>(list); <span class="comment">// [10, 11, 12]</span></span><br></pre></td></tr></table></figure><h4 id="æ›¿æ¢"><a href="#æ›¿æ¢" class="headerlink" title="æ›¿æ¢"></a>æ›¿æ¢</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// setAll</span></span><br><span class="line"><span class="built_in">List</span> list = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">list.setAll(<span class="number">1</span>, [<span class="string">&#x27;set&#x27;</span>,<span class="string">&#x27;set1&#x27;</span>]); <span class="comment">// ä»indexå¼€å§‹é€ä¸ªæ›¿æ¢</span></span><br><span class="line"><span class="built_in">print</span>(list); <span class="comment">// [0, set, set1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fillRange</span></span><br><span class="line"><span class="built_in">List</span> listFill = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">listFill.fillRange(<span class="number">1</span>, <span class="number">3</span>, <span class="number">66</span>); <span class="comment">// fillRange(start,end,value) ä»start-endæ¯ä¸ªå…ƒç´ â½¤valueæ›¿æ¢</span></span><br><span class="line"><span class="built_in">print</span>(listFill); <span class="comment">// [1, 66, 66, 4, 5]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> listRemove = &lt;<span class="built_in">int</span>&gt;[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// remove</span></span><br><span class="line">listRemove.remove(<span class="number">0</span>); <span class="comment">// å…¥å‚å€¼ åˆ é™¤ç¬¬ä¸€ä¸ªç›¸åŒçš„å€¼</span></span><br><span class="line"><span class="built_in">print</span>(listRemove); <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// removeAt</span></span><br><span class="line">listRemove.removeAt(<span class="number">0</span>); <span class="comment">// å…¥å‚index</span></span><br><span class="line"><span class="built_in">print</span>(listRemove); <span class="comment">// [2, 3, 4, 5, 6, 7, 8, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// removeLast</span></span><br><span class="line">listRemove.removeLast(); <span class="comment">// åˆ é™¤æ•°ç»„æœ€åä¸€ä½</span></span><br><span class="line"><span class="built_in">print</span>(listRemove); <span class="comment">// [2, 3, 4, 5, 6, 7, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// removeRange</span></span><br><span class="line">listRemove.removeRange(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">// åˆ é™¤æŒ‡å®šèŒƒå›´çš„å€¼ï¼ŒåŒ…å«start,ä¸åŒ…å«end</span></span><br><span class="line"><span class="built_in">print</span>(listRemove); <span class="comment">// [2, 5, 6, 7, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// removeWhere</span></span><br><span class="line">listRemove.removeWhere((e) =&gt; e == <span class="number">8</span>); <span class="comment">// åˆ é™¤æ»¡è¶³æ¡ä»¶çš„å€¼ åˆ é™¤8</span></span><br><span class="line"><span class="built_in">print</span>(listRemove); <span class="comment">// [2, 5, 6, 7]</span></span><br><span class="line">listRemove.removeWhere((e) =&gt; e &gt; <span class="number">4</span>); <span class="comment">// åˆ é™¤æ»¡è¶³æ¡ä»¶çš„å€¼ åˆ é™¤å¤§äº4çš„å€¼</span></span><br><span class="line"><span class="built_in">print</span>(listRemove); <span class="comment">// [2]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> listIndex = &lt;<span class="built_in">int</span>&gt;[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>];</span><br><span class="line"><span class="built_in">print</span>(listIndex.indexOf(<span class="number">1</span>)); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">print</span>(listIndex.lastIndexOf(<span class="number">0</span>)); <span class="comment">// 3 ä»åå¾€å‰æ‰¾ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„é¢å€¼</span></span><br></pre></td></tr></table></figure><h4 id="ç¿»è½¬"><a href="#ç¿»è½¬" class="headerlink" title="ç¿»è½¬"></a>ç¿»è½¬</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> listReversed = &lt;<span class="built_in">String</span>&gt;[<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;str&#x27;</span>, <span class="string">&#x27;arr&#x27;</span>];</span><br><span class="line"><span class="built_in">print</span>(listReversed.reversed); <span class="comment">// (arr, str, test) </span></span><br><span class="line"><span class="built_in">print</span>(listReversed.reversed.toList()); <span class="comment">// [arr, str, test] è¿”å›æ–°list</span></span><br></pre></td></tr></table></figure><h4 id="é¦–å°¾å€¼"><a href="#é¦–å°¾å€¼" class="headerlink" title="é¦–å°¾å€¼"></a>é¦–å°¾å€¼</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> list = &lt;<span class="built_in">String</span>&gt;[<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;str&#x27;</span>, <span class="string">&#x27;arr&#x27;</span>];</span><br><span class="line"><span class="built_in">print</span>(list.first); <span class="comment">// test  </span></span><br><span class="line"><span class="built_in">print</span>(list.last); <span class="comment">// arr</span></span><br></pre></td></tr></table></figure><h4 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; lists = [<span class="string">&#x27;str&#x27;</span>, <span class="string">&#x27;str1&#x27;</span>, <span class="string">&#x27;str2&#x27;</span>];</span><br><span class="line"><span class="comment">// map</span></span><br><span class="line"><span class="built_in">print</span>(lists.map((e) =&gt; e)); <span class="comment">// (str, str1, str2)</span></span><br><span class="line"><span class="built_in">print</span>(lists.map((e) =&gt; e == <span class="string">&#x27;str&#x27;</span>)); <span class="comment">// (true, false, false)</span></span><br><span class="line"><span class="built_in">print</span>(lists.map((e) =&gt; e).toList()); <span class="comment">// [str, str1, str2]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> testList = &lt;<span class="built_in">int</span>&gt;[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="comment">// forEach</span></span><br><span class="line">testList.forEach(<span class="built_in">print</span>); <span class="comment">// ä¾æ¬¡æ‰“å°å€¼</span></span><br><span class="line"><span class="comment">// firstWhere</span></span><br><span class="line"><span class="built_in">print</span>(testList.firstWhere((e) =&gt; e &gt; <span class="number">3</span>)); <span class="comment">// 4 è¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å€¼</span></span><br><span class="line"><span class="comment">// lastWhere</span></span><br><span class="line"><span class="built_in">print</span>(testList.lastWhere((e) =&gt; e&lt;<span class="number">6</span> )); <span class="comment">// 5 é‡åå¾€å‰æ‰¾ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å€¼</span></span><br></pre></td></tr></table></figure><h4 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> listSort = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">0</span>];</span><br><span class="line">listSort.sort();</span><br><span class="line"><span class="built_in">print</span>(listSort); <span class="comment">// [0, 1, 2, 4, 6]</span></span><br></pre></td></tr></table></figure><h4 id="ä¹±åº"><a href="#ä¹±åº" class="headerlink" title="ä¹±åº"></a>ä¹±åº</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> listShuffle = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// shuffle éšæœºæ‰“ä¹±æ•°ç»„</span></span><br><span class="line">listShuffle.shuffle();</span><br><span class="line"><span class="built_in">print</span>(listShuffle); <span class="comment">// [2, 0, 3, 1] éšæœº</span></span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­"><a href="#åˆ¤æ–­" class="headerlink" title="åˆ¤æ–­"></a>åˆ¤æ–­</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> testList = &lt;<span class="built_in">int</span>&gt;[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="comment">// contains æ˜¯å¦åŒ…å«</span></span><br><span class="line"><span class="built_in">print</span>(testList.contains(<span class="number">0</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">print</span>(testList.contains(<span class="number">1</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">print</span>(testList.contains(<span class="number">6</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›æ»¡è¶³æ¡ä»¶çš„å€¼ è¿”å›å€¼æ ¼å¼Iterable </span></span><br><span class="line"><span class="built_in">print</span>(testList.where((element) =&gt; element &gt; <span class="number">3</span>)); <span class="comment">// (4, 5)</span></span><br><span class="line"><span class="comment">// any æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„å€¼</span></span><br><span class="line"><span class="built_in">print</span>(testList.any((element) =&gt; element &gt; <span class="number">3</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">print</span>(testList.any((element) =&gt; element &gt; <span class="number">6</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="comment">// every æ˜¯å¦æ‰€ä»¥å€¼éƒ½æ»¡è¶³æ¡ä»¶</span></span><br><span class="line"><span class="built_in">print</span>(testList.every((element) =&gt; element &gt; <span class="number">3</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">print</span>(testList.every((element) =&gt; element &lt; <span class="number">6</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Dart </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®å‰ç«¯é¡¹ç›®æ€»ç»“</title>
      <link href="/2022/01/18/qiankun/"/>
      <url>/2022/01/18/qiankun/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åˆæ¥è®°ç¬”è®°äº†â€¦</p><p>qiankun å®˜ç½‘åœ°å€ï¼š<a href="https://qiankun.umijs.org/zh/guide">https://qiankun.umijs.org/zh/guide</a></p><h2 id="è¸©è¿‡çš„å‘"><a href="#è¸©è¿‡çš„å‘" class="headerlink" title="è¸©è¿‡çš„å‘"></a>è¸©è¿‡çš„å‘</h2><p>å¤§éƒ¨åˆ†é—®é¢˜ï¼Œå®˜ç½‘ä¸Šéƒ½æ˜¯æœ‰è§£å†³æ–¹æ¡ˆï¼Œä¹¾å¤å¸¸ç”¨é—®é¢˜è§£å†³æ–¹æ¡ˆåœ°å€ï¼š <a href="https://qiankun.umijs.org/zh/faq">https://qiankun.umijs.org/zh/faq</a></p><p>ä¸»è¦è®°å½•ä¸€ä¸‹éƒ¨ç½²çš„æ—¶å€™é‡åˆ°çš„é—®é¢˜ï¼›</p><ol><li>ä¸»åº”ç”¨å’Œå­åº”ç”¨éƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨çš„æƒ…å†µï¼Œéœ€è¦ä¸»åº”ç”¨é…ç½®ä»£ç†ï¼Œæˆ–è€…å­åº”ç”¨çš„ ningx é…ç½®è®¾ç½®ä¸€ä¸‹ add_headerï¼Œå‰ç«¯è®¿é—®åœ°å€å’Œapiè¯·æ±‚éƒ½éœ€è¦è®¾ç½®ä¸€ä¸‹</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">localhost /&#123;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">    add_header Access-Control-Allow-Origin &#x27;https://XXXXXX&#x27;;</span><br><span class="line"><span class="meta">#</span><span class="bash"> Credentials ç½‘ç«™è®¿é—®åœ°å€ä¸éœ€è¦ï¼Œapiè¯·æ±‚éœ€è¦</span></span><br><span class="line">add_header Access-Control-Allow-Credentials &#x27;true&#x27;;    </span><br><span class="line">add_header Access-Control-Allow-Methods &#x27;GET, POST, OPTIONS&#x27;;</span><br><span class="line">add_header Access-Control-Allow-Headers &#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#x27;;</span><br><span class="line"></span><br><span class="line">if ($request_method = &#x27;OPTIONS&#x27;) &#123;</span><br><span class="line">return 204;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>çº¿ä¸Šç¯å¢ƒåœ¨å­åº”ç”¨é¡µé¢åˆ·æ–°æµè§ˆå™¨ä¹‹åï¼Œé¡µé¢ç©ºç™½æ— æ³•åŠ è½½å­åº”ç”¨ï¼Œä¸”å›é€€åˆ°ä¸»åº”ç”¨ä¹Ÿæ— æ³•åŠ è½½ä¸»åº”ç”¨é¡µé¢ï¼›</li></ol><p>è¿™ä¸ªé—®é¢˜å½“æ—¶èŠ±äº†æŒºé•¿æ—¶é—´çš„ï¼Œæœ¬åœ°å¼€å‘ç¯å¢ƒå¹¶ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œéšä¾¿åˆ·æ–°éƒ½æ˜¯å¯ä»¥çš„ï¼Œçº¿ä¸Šå­åº”ç”¨åˆ·æ–°å°±ç›´æ¥ç™½å±ï¼Œé¡¹ç›®æ–‡ä»¶æŠ¥404é”™è¯¯ï¼ŒæŸ¥äº†å¾ˆå¤šèµ„æ–™æä¾›çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯è®©nginxä»£ç†ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ã€‚æœ€åæŸ¥å‡ºæ¥é—®é¢˜æ˜¯å­åº”ç”¨åœ¨æ‰“åŒ…çš„æ—¶å€™ä¸€å®šè¦é…ç½® <code>publicPath</code>ï¼Œä¸é…ç½®çš„æƒ…å†µå­åº”ç”¨å•ç‹¬éƒ¨ç½²å’Œè®¿é—®è™½ç„¶éƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä¹Ÿå°±æ˜¯å› ä¸ºå•ç‹¬éƒ¨ç½²å’Œè®¿é—®éƒ½æ²¡é—®é¢˜å°±å¯¼è‡´æ’æŸ¥é—®é¢˜çš„æ—¶å€™ä¸€ç›´æ²¡å¾€è¿™å—æƒ³ï¼å‘æ­»~</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è™½ç„¶åˆšå¼€å§‹çš„æ—¶å€™ä¸¾æ­¥ç»´è‰°ã€é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œä½†æ˜¯é¡¹ç›®åšå®Œä¹‹åå›æ¥æ€»ç»“å´å‘ç°ï¼Œå…¶å®å¹¶ä¸éš¾ï¼ŒçœŸçš„å°±è¿˜æŒºç®€å•çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¾®å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>create-react-appé…ç½®æ•´ç†</title>
      <link href="/2022/01/17/create-react-app2/"/>
      <url>/2022/01/17/create-react-app2/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-ä¿®æ”¹-webpack-é…ç½®"><a href="#ä¸€-ä¿®æ”¹-webpack-é…ç½®" class="headerlink" title="ä¸€. ä¿®æ”¹ webpack é…ç½®"></a>ä¸€. ä¿®æ”¹ webpack é…ç½®</h2><ol><li>éœ€è¦ç”¨åˆ° <a href="https://github.com/timarney/react-app-rewired"><code>react-app-rewired</code></a> <a href="https://github.com/arackaf/customize-cra/blob/master/api.md"><code>customize-cra</code></a></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-app-rewired customize-cra -D</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹<code>package.json</code></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;start&quot;: &quot;react-app-rewired start&quot;,</span><br><span class="line">   &quot;build&quot;: &quot;react-app-rewired build&quot;,</span><br><span class="line">   &quot;test&quot;: &quot;react-app-rewired test&quot;,</span><br><span class="line">   &quot;eject&quot;: &quot;react-app-rewired eject&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>æ›´ç›®å½•ä¸‹åˆ›å»º<code>config-overrides.js</code>ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸‹ä¿®æ”¹ webpack çš„é…ç½®ï¼›</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  override,</span><br><span class="line">  addDecoratorsLegacy,</span><br><span class="line">  addWebpackAlias,</span><br><span class="line">  addPostcssPlugins,</span><br><span class="line">  addWebpackModuleRule,</span><br><span class="line">  fixBabelImports,</span><br><span class="line">  adjustStyleLoaders,</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">&#x27;customize-cra&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">dir</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> path.join(__dirname, <span class="string">&#x27;.&#x27;</span>, dir)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = override(</span><br><span class="line">  <span class="comment">// è£…é¥°å™¨</span></span><br><span class="line">  addDecoratorsLegacy(),</span><br><span class="line">  <span class="comment">// Alias</span></span><br><span class="line">  addWebpackAlias(&#123;</span><br><span class="line">    <span class="string">&#x27;@&#x27;</span>: resolve(<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@comps&#x27;</span>: resolve(<span class="string">&#x27;src/components&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@style&#x27;</span>: resolve(<span class="string">&#x27;src/assets/style&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@images&#x27;</span>: resolve(<span class="string">&#x27;src/assets/images&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@pages&#x27;</span>: resolve(<span class="string">&#x27;src/pages&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@api&#x27;</span>: resolve(<span class="string">&#x27;src/assets/http&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@utils&#x27;</span>: resolve(<span class="string">&#x27;src/utils&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@hooks&#x27;</span>: resolve(<span class="string">&#x27;src/utils/hooks&#x27;</span>),</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// postcss</span></span><br><span class="line">  addPostcssPlugins([</span><br><span class="line">    <span class="comment">// require(&#x27;postcss-px2rem&#x27;)(&#123; remUnit: 75 &#125;),</span></span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>), <span class="comment">// css è‡ªåŠ¨åŠ å‰ç¼€</span></span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&#x27;postcss-autoreset&#x27;</span>)(&#123;</span><br><span class="line">      <span class="comment">// é‡ç½®æµè§ˆå™¨é»˜è®¤æ ·å¼</span></span><br><span class="line">      reset: &#123;</span><br><span class="line">        margin: <span class="number">0</span>,</span><br><span class="line">        padding: <span class="number">0</span>,</span><br><span class="line">        borderRadius: <span class="number">0</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// é€‚é…</span></span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&#x27;postcss-px-to-viewport&#x27;</span>)(&#123;</span><br><span class="line">      unitToConvert: <span class="string">&#x27;px&#x27;</span>, <span class="comment">//éœ€è¦è½¬æ¢çš„å•ä½ï¼Œé»˜è®¤ä¸º&quot;px&quot;</span></span><br><span class="line">      viewportWidth: <span class="number">750</span>, <span class="comment">// è§†çª—çš„å®½åº¦ï¼Œå¯¹åº”çš„æ˜¯æˆ‘ä»¬è®¾è®¡ç¨¿çš„å®½åº¦</span></span><br><span class="line">      viewportHeight: <span class="number">1624</span>, <span class="comment">//è§†çª—çš„é«˜åº¦ï¼Œæ ¹æ®375è®¾å¤‡çš„å®½åº¦æ¥æŒ‡å®šï¼Œä¸€èˆ¬æŒ‡å®š667ï¼Œä¹Ÿå¯ä»¥ä¸é…ç½®</span></span><br><span class="line">      unitPrecision: <span class="number">3</span>, <span class="comment">// æŒ‡å®š`px`è½¬æ¢ä¸ºè§†çª—å•ä½å€¼çš„å°æ•°ä½æ•°ï¼ˆå¾ˆå¤šæ—¶å€™æ— æ³•æ•´é™¤ï¼‰</span></span><br><span class="line">      propList: [<span class="string">&#x27;*&#x27;</span>], <span class="comment">// èƒ½è½¬åŒ–ä¸ºvwçš„å±æ€§åˆ—è¡¨</span></span><br><span class="line">      viewportUnit: <span class="string">&#x27;vw&#x27;</span>, <span class="comment">// æŒ‡å®šéœ€è¦è½¬æ¢æˆçš„è§†çª—å•ä½ï¼Œå»ºè®®ä½¿ç”¨vw</span></span><br><span class="line">      fontViewportUnit: <span class="string">&#x27;vw&#x27;</span>, <span class="comment">//å­—ä½“ä½¿ç”¨çš„è§†å£å•ä½</span></span><br><span class="line">      selectorBlackList: [<span class="string">&#x27;.ignore-&#x27;</span>, <span class="string">&#x27;.hairlines&#x27;</span>, <span class="string">&#x27;am-&#x27;</span>, <span class="string">&#x27;px-&#x27;</span>], <span class="comment">//æŒ‡å®šä¸è½¬æ¢ä¸ºè§†çª—å•ä½çš„ç±»ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼Œå¯ä»¥æ— é™æ·»åŠ ,å»ºè®®å®šä¹‰ä¸€è‡³ä¸¤ä¸ªé€šç”¨çš„ç±»å</span></span><br><span class="line">      minPixelValue: <span class="number">1</span>, <span class="comment">// å°äºæˆ–ç­‰äº`1px`ä¸è½¬æ¢ä¸ºè§†çª—å•ä½ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºä½ æƒ³è¦çš„å€¼</span></span><br><span class="line">      mediaQuery: <span class="literal">false</span>, <span class="comment">// å…è®¸åœ¨åª’ä½“æŸ¥è¯¢ä¸­è½¬æ¢`px`</span></span><br><span class="line">      replace: <span class="literal">true</span>, <span class="comment">//æ˜¯å¦ç›´æ¥æ›´æ¢å±æ€§å€¼ï¼Œè€Œä¸æ·»åŠ å¤‡ç”¨å±æ€§</span></span><br><span class="line">      exclude: [<span class="regexp">/\/Stores\/.*.scss/</span>, <span class="regexp">/global.css/</span>, <span class="regexp">/node_modules/</span>], <span class="comment">//å¿½ç•¥æŸäº›æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æˆ–ç‰¹å®šæ–‡ä»¶ï¼Œä¾‹å¦‚ &#x27;node_modules&#x27; ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line">      landscape: <span class="literal">false</span>, <span class="comment">//æ˜¯å¦æ·»åŠ æ ¹æ® landscapeWidth ç”Ÿæˆçš„åª’ä½“æŸ¥è¯¢æ¡ä»¶ @media (orientation: landscape)</span></span><br><span class="line">      landscapeUnit: <span class="string">&#x27;vw&#x27;</span>, <span class="comment">//æ¨ªå±æ—¶ä½¿ç”¨çš„å•ä½</span></span><br><span class="line">      landscapeWidth: <span class="number">1134</span>, <span class="comment">//æ¨ªå±æ—¶ä½¿ç”¨çš„è§†å£å®½åº¦</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ]),</span><br><span class="line">  <span class="comment">// antd æŒ‰éœ€åŠ è½½</span></span><br><span class="line">  fixBabelImports(<span class="string">&#x27;import&#x27;</span>, &#123;</span><br><span class="line">    libraryName: <span class="string">&#x27;antd-mobile&#x27;</span>,</span><br><span class="line">    style: <span class="string">&#x27;css&#x27;</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// antd æ ·å¼åŠ è½½ä¸å‡ºæ¥é—®é¢˜</span></span><br><span class="line">  addWebpackModuleRule(&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/src/</span>,</span><br><span class="line">    use: [</span><br><span class="line">      &#123; <span class="attr">loader</span>: <span class="string">&#x27;style-loader&#x27;</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        loader: <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          importLoaders: <span class="number">1</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// sasså…¬å…±æ ·å¼ å¼•å…¥</span></span><br><span class="line">  adjustStyleLoaders(<span class="function">(<span class="params">rule</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (rule.test.toString().includes(<span class="string">&#x27;scss&#x27;</span>)) &#123;</span><br><span class="line">      rule.use.push(&#123;</span><br><span class="line">        loader: <span class="built_in">require</span>.resolve(<span class="string">&#x27;sass-resources-loader&#x27;</span>),</span><br><span class="line">        options: &#123;</span><br><span class="line">          resources: [resolve(<span class="string">&#x27;./src/assets/style/common.scss&#x27;</span>)],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// svgå¤„ç†</span></span><br><span class="line">  addWebpackModuleRule(&#123;</span><br><span class="line">    test: <span class="regexp">/\.svg$/</span>,</span><br><span class="line">    exclude: [<span class="regexp">/node_modules/</span>],</span><br><span class="line">    use: [</span><br><span class="line">      &#123;</span><br><span class="line">        loader: <span class="string">&#x27;svg-sprite-loader&#x27;</span>,</span><br><span class="line">        options: &#123;&#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        loader: <span class="string">&#x27;svgo-loader&#x27;</span>,</span><br><span class="line">        options: &#123;&#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="äºŒ-é…ç½®ç¯å¢ƒåŒºåˆ†"><a href="#äºŒ-é…ç½®ç¯å¢ƒåŒºåˆ†" class="headerlink" title="äºŒ. é…ç½®ç¯å¢ƒåŒºåˆ†"></a>äºŒ. é…ç½®ç¯å¢ƒåŒºåˆ†</h2><ol><li>å®‰è£… <code>dotenv</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add dotenv dotenv-cli -D</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹<code>package.json</code></li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;start&quot;: &quot;react-app-rewired start&quot;,</span><br><span class="line">  &quot;build&quot;: &quot;react-app-rewired build&quot;,</span><br><span class="line">  &quot;build:test&quot;: &quot;dotenv -e .env.test react-app-rewired build&quot;,</span><br><span class="line">  &quot;build:uat&quot;: &quot;dotenv -e .env.uat react-app-rewired build&quot;,</span><br><span class="line">  &quot;build:prod&quot;: &quot;dotenv -e .env.prod  react-app-rewired build&quot;,</span><br><span class="line">  &quot;test&quot;: &quot;react-app-rewired test&quot;,</span><br><span class="line">  &quot;eject&quot;: &quot;react-scripts eject&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º <code>.env</code>ã€ <code>.env.test</code> ã€ <code>.env.uat</code>ã€<code>.env.prod</code>,æ ¹æ®ä¸åŒç¯å¢ƒï¼Œåœ¨ä¸åŒçš„ç¯å¢ƒæ–‡ä»¶ä¸‹é…ç½®ç›¸åº”çš„ baseUrl ç­‰æ•°æ®ï¼›</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">REACT_APP_BASE_URL=<span class="string">&#x27;xxxxxx/api&#x27;</span></span><br><span class="line">REACT_APP_REDIRECT_URL=<span class="string">&#x27;xxxxxxx&#x27;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¸‰-PUBLIC-URL"><a href="#ä¸‰-PUBLIC-URL" class="headerlink" title="ä¸‰.  PUBLIC_URL"></a>ä¸‰.  PUBLIC_URL</h2><p>åœ¨<code>.env.[xxx]</code>æ–‡ä»¶é‡Œé…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUBLIC_URL=<span class="regexp">/service-plat/</span></span><br></pre></td></tr></table></figure><h2 id="å››-ä¿®æ”¹æ‰“åŒ…æ–‡ä»¶å¤¹åå­—"><a href="#å››-ä¿®æ”¹æ‰“åŒ…æ–‡ä»¶å¤¹åå­—" class="headerlink" title="å››. ä¿®æ”¹æ‰“åŒ…æ–‡ä»¶å¤¹åå­—"></a>å››. ä¿®æ”¹æ‰“åŒ…æ–‡ä»¶å¤¹åå­—</h2><p>åœ¨<code>.env.[xxx]</code>æ–‡ä»¶é‡Œé…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BUILD_PATH=service-plat</span><br></pre></td></tr></table></figure><h2 id="äº”-ç”Ÿäº§ç¯å¢ƒå»æ‰mapæ–‡ä»¶"><a href="#äº”-ç”Ÿäº§ç¯å¢ƒå»æ‰mapæ–‡ä»¶" class="headerlink" title="äº”. ç”Ÿäº§ç¯å¢ƒå»æ‰mapæ–‡ä»¶"></a>äº”. ç”Ÿäº§ç¯å¢ƒå»æ‰mapæ–‡ä»¶</h2><p>åœ¨<code>.env.prod</code>æ–‡ä»¶é‡Œé…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GENERATE_SOURCEMAP=<span class="literal">false</span> </span><br></pre></td></tr></table></figure><h2 id="å…­-Historyæ¨¡å¼é¡¹ç›®-tomcat-éƒ¨ç½²é…ç½®"><a href="#å…­-Historyæ¨¡å¼é¡¹ç›®-tomcat-éƒ¨ç½²é…ç½®" class="headerlink" title="å…­. Historyæ¨¡å¼é¡¹ç›® tomcat éƒ¨ç½²é…ç½®"></a>å…­. Historyæ¨¡å¼é¡¹ç›® tomcat éƒ¨ç½²é…ç½®</h2><p>æ–°å»ºä¸€ä¸ª <code>WEB-INF</code>æ–‡ä»¶å¤¹ï¼Œ<code>web.xml</code>æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>/<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>/<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">location</span>&gt;</span>/index.html<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä¸ƒ-husky-lint-staged"><a href="#ä¸ƒ-husky-lint-staged" class="headerlink" title="ä¸ƒ. husky + lint-staged"></a>ä¸ƒ. husky + lint-staged</h2><p>è§„èŒƒgitæäº¤messageï¼Œç»Ÿä¸€ä»£ç é£æ ¼<br>æ³¨æ„ï¼šhuskyéœ€è¦æ³¨æ„ç‰ˆæœ¬ï¼Œ5.xçš„åŒ…ä¼šé…ç½®å¤±æ•ˆï¼Œæ‰€ä»¥å®‰è£…çš„æ—¶å€™éœ€è¦å®‰è£…4.xçš„åŒ…<br>é…ç½®å¦‚ä¸‹ï¼š</p><blockquote><p>package.json</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;@commitlint/cli&quot;</span>: <span class="string">&quot;^15.0.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;husky&quot;</span>: <span class="string">&quot;4.3.8&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lint-staged&quot;</span>: <span class="string">&quot;^12.1.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prettier&quot;</span>: <span class="string">&quot;^2.5.1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;husky&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hooks&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;pre-commit&quot;</span>: <span class="string">&quot;lint-staged&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;commit-msg&quot;</span>: <span class="string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;src/**/*.&#123;jsx,js,tsx,ts&#125;&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;prettier --write&quot;</span>,</span><br><span class="line">      <span class="string">&quot;eslint --fix&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>.commitlintrc.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  parserPreset: &#123;</span><br><span class="line">    parserOpts: &#123;</span><br><span class="line">      headerPattern: <span class="regexp">/^(\w*)(?:\((.*)\))?:\s(.*)$/</span>,</span><br><span class="line">      headerCorrespondence: [<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;scope&#x27;</span>, <span class="string">&#x27;subject&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;type-empty&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;type-case&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>, <span class="string">&#x27;lower-case&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;subject-empty&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;type-enum&#x27;</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">      [<span class="string">&#x27;feat&#x27;</span>, <span class="string">&#x27;fix&#x27;</span>, <span class="string">&#x27;update&#x27;</span>, <span class="string">&#x27;docs&#x27;</span>, <span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;refactor&#x27;</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;chore&#x27;</span>, <span class="string">&#x27;release&#x27;</span>, <span class="string">&#x27;revert&#x27;</span>]</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å…«-svgç»„ä»¶å°è£…"><a href="#å…«-svgç»„ä»¶å°è£…" class="headerlink" title="å…«. svgç»„ä»¶å°è£…"></a>å…«. svgç»„ä»¶å°è£…</h2><p>å®‰è£…<code>svg-sprite-loader</code>ã€<code>svgo-loader</code>, é…ç½®è¯¦æƒ…è§ â€œä¸€. ä¿®æ”¹ webpack é…ç½®â€ï¼›</p><ol><li><code>svgæ–‡ä»¶å¤¹</code>ä¸‹<code>index.js</code>ä¸­ç»Ÿä¸€å¼•å…¥<code>.svg</code>æ–‡ä»¶ï¼Œå¹¶å¯¼å‡º<code>Iconç»„ä»¶</code>ä¾›å…¨å±€ä½¿ç”¨ï¼›</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> importAll = <span class="function">(<span class="params">requireContext: __WebpackModuleApi.RequireContext</span>) =&gt;</span></span><br><span class="line">  requireContext.keys().forEach(requireContext)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">// å¼•å…¥å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰åç¼€ä¸º .svg </span></span><br><span class="line">  importAll(<span class="built_in">require</span>.context(<span class="string">&#x27;./&#x27;</span>, <span class="literal">true</span>, <span class="regexp">/\.svg$/</span>))</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface IIconProps &#123;</span><br><span class="line">  name: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Icon: React.FC&lt;IIconProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;svg &#123;...props&#125;&gt;</span><br><span class="line">      &lt;use xlinkHref=&#123;<span class="string">&#x27;#&#x27;</span> + props.name&#125; /&gt;</span><br><span class="line">    &lt;/svg&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Icon</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react-lite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; IIconItemType &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/hmbc/plat.store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Icon <span class="keyword">from</span> <span class="string">&#x27;@/assets/svg&#x27;</span> <span class="comment">// å¼•å…¥ Icon ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.module.scss&#x27;</span></span><br><span class="line"></span><br><span class="line">interface IIconItemCompsProps &#123;</span><br><span class="line">  item: IIconItemType</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> IconItemComps: React.FC&lt;IIconItemCompsProps&gt; = (&#123; item &#125;): React.ReactElement =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; commonStore &#125; = useStore()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div</span><br><span class="line">      className=&#123;<span class="string">`xy-center <span class="subst">$&#123;styles.mainNavItem&#125;</span>`</span>&#125;</span><br><span class="line">      onClick=&#123;<span class="function">() =&gt;</span> commonStore.pushService(item.path)&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;Icon className=&#123;styles.mainIcon&#125; name=&#123;item.icon&#125; /&gt; </span><br><span class="line">      &lt;p&gt;&#123;item.name&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> observer(IconItemComps)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> create-react-app </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021å¹´æœ«â€”â€”å…‰æ€ªé™†ç¦»</title>
      <link href="/2022/01/06/2021YearEnd/"/>
      <url>/2022/01/06/2021YearEnd/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>é£å¹èŠ±æ ‘ï¼Œæˆé•¿æ­£é…£ã€‚</p><h3 id="éšä¾¿ä¸€äº›æ„Ÿæƒ³"><a href="#éšä¾¿ä¸€äº›æ„Ÿæƒ³" class="headerlink" title="éšä¾¿ä¸€äº›æ„Ÿæƒ³"></a>éšä¾¿ä¸€äº›æ„Ÿæƒ³</h3><p>å…‰é˜´å¦‚ç™½é©¹è¿‡éš™ï¼Œçœ¨çœ¼é—´ä¸€å¹´çš„æ—¶é—´åˆè¿‡å»äº†ï¼Œè‡ªå¤æœ‰æ„Ÿäºæ—¶é—´ï¼Œæ— ä¸€ä¸å¹å…¶çŸ­æš‚æ˜“é€ã€‚å­©ç«¥æ—¶æœŸç›¼æœ›ç€å¿«å¿«é•¿å¤§å»é—¯è¡ä¸–ç•Œï¼Œå¦‚ä»Šæ¯•ä¸šå‡ å¹´æ‰çŸ¥è¯»ä¹¦çš„æ—¶å€™æ‰æ˜¯äººç”Ÿæœ€ç¾å¥½çš„ä¸€æ®µæ—¶é—´å•Šï¼<br>æ–°å† ç–«æƒ…çˆ†å‘è‡³ä»Šéƒ½å¿«3å¹´äº†ï¼Œä¸æ•¢ç›¸ä¿¡éƒ½å·²ç»3å¹´è¿‡å»äº†ï¼Œæ¯å¤©éƒ½åœ¨ç›¼æœ›ç–«æƒ…æ—©ç‚¹ç»“æŸï¼Œæ¯å¤©éƒ½ä¼šè¢«æ–°å¢çš„ç¡®è¯Šäººæ•°æ‹‰å›ç°å®ã€‚<br>ä»¥å‰å‡ºé—¨åªéœ€è¦å¸¦ä¸ªé’¥åŒ™ã€æ‰‹æœºå°±è¡Œï¼Œç°åœ¨å£ç½©éƒ½æˆä¸ºå‡ºé—¨å¿…å¤‡ç‰©å“ä¹‹ä¸€äº†ã€‚<br>æ¯æ¯æƒ³åˆ°å¦‚æ­¤å°±éå¸¸åŒæ¶é‚£äº›è‰è…äººå‘½çš„ç¾å›½æ”¿å®¢ã€èµ„æœ¬å®¶ï¼Œåœ¨ä»–ä»¬çš„å¦‚æ„ç®—ç›˜é‡Œå…¨äººç±»çš„å‘½è¿éƒ½èƒ½æˆä¸ºå…¶è¿½åé€åˆ©çš„æ£‹å­ï¼Œä¸€æ¡æ¡é²œæ´»çš„ç”Ÿå‘½å°±è¿™æ ·è‘¬é€åœ¨é˜´è°‹ä¹‹ä¸­ï¼å¯æ¶å¯æ†ï¼</p><h3 id="ä¸çŸ¥é“ä»€ä¹ˆtitle"><a href="#ä¸çŸ¥é“ä»€ä¹ˆtitle" class="headerlink" title="ä¸çŸ¥é“ä»€ä¹ˆtitle"></a>ä¸çŸ¥é“ä»€ä¹ˆtitle</h3><p>2021å¹´æ”¶è·é¢‡ä¸°ï¼Œä¸»è¦åœ¨ï¼šå¿ƒæ€ã€æ€§æ ¼ã€å·¥ä½œæŠ€èƒ½è¿™å‡ ä¸ªæ–¹é¢ï¼›æ„Ÿè§‰ä»Šå¹´æœ€æœ€é‡è¦çš„å°±æ˜¯è‡ªå·±å¯¹äºäººæ€§çš„æ€è€ƒå’Œå¿ƒæ€çš„è°ƒæ•´ã€‚<br>2021ä¸€æ•´å¹´ï¼Œä¸æ„‰å¿«çš„åœ°æ–¹æ˜¯é‡åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒå¹´é•¿çš„åŒäº‹çš„å†·æš´åŠ›ï¼Œæ’æŒ¤ï¼ŒçœŸçš„æ˜¯éå¸¸éš¾è¿‡çš„ä¸€æ®µæ—¶é—´ã€‚</p><p>ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ä½åŒäº‹çš„æŠ˜ç£¨ï¼Œä½¿æˆ‘åœ¨2021å¹´ä¸€ç›´åœ¨å¯»æ±‚ç²¾ç¥ã€å¿ƒæ€ä¸Šçš„è§£è„±ï¼ŒæœŸé—´æ‹œè¯»äº†æŸæ‹‰å›¾çš„ã€Šç†æƒ³å›½ã€‹ã€å¸Œé˜¿è£åšå ªå¸ƒçš„ã€Šæ¬¡ç¬¬èŠ±å¼€ã€‹ã€é™ˆå¿ å®çš„ã€Šç™½é¹¿åŸã€‹ã€ç¨»ç››å’Œå¤«çš„ã€Šå¿ƒã€‹ã€è«è¨€ã€Šæ™šç†Ÿçš„äººã€‹ï¼Œè¿˜å¬äº†å¾ˆå¤šç½—ç¿”è€å¸ˆå¯¹äºäººç”Ÿæ™ºæ…§çš„æ€è€ƒï¼Œæ…¢æ…¢çš„ååˆ†æ‡Šæ‚”è‡ªå·±ä¹‹å‰åœ¨å¤„ç†è¿™ä½åŒäº‹é—®é¢˜ä¸Šçš„æƒ…ç»ªæ–¹é¢çš„é”™è¯¯è¡Œä¸ºï¼›åŒæ—¶ä¹Ÿéå¸¸æ„Ÿè°¢è¿™ä½åŒäº‹ï¼Œå¡ç¿å¤±é©¬ç„‰çŸ¥éç¦ï¼Ÿæ­£æ˜¯æœ‰äº†è¿™æ ·çš„äººåè€Œä¿ƒè¿›äº†è‡ªå·±çš„æˆé•¿ï¼Œä»–çš„åˆéš¾ä¿ƒä½¿æˆ‘å¿ƒæ€èƒ½è¶Šæ¸å¹³ç¨³çš„é¢å¯¹ç”Ÿæ´»ä¸­é‡åˆ°çš„å„ç§å›°éš¾å’Œéš¾ç¼ çš„äººï¼Œä»–å¯¹å·¥ä½œçš„ä¸è´Ÿè´£ä»»ä¿ƒä½¿æˆ‘èƒ½æ¥è§¦åˆ°å„ç§å„æ ·çš„å·¥ä½œåœºæ™¯å¹¶é€šè¿‡è‡ªå·±çš„åŠªåŠ›è¾¾åˆ°ç›®æ ‡ï¼Œè°èƒ½è¯´çš„æ˜ç™½æ˜¯å¦æ˜¯å‘½è¿æ´¾æ¥å¸®åŠ©æˆ‘æˆé•¿è¿›æ­¥çš„åŠ«éš¾å‘¢ï¼Ÿä¸€åˆ‡éƒ½æ˜¯è¾©è¯ç»Ÿä¸€çš„ï¼Œæ²¡æœ‰ç»å¯¹çš„å¥½ä¹Ÿæ²¡æœ‰ç»å¯¹çš„åï¼Œç”Ÿæ´»ä¸­é‡åˆ°éº»çƒ¦çš„æ—¶å€™ï¼Œä¸å¦¨å¤šæ¢ä¸ªè§’åº¦æƒ³æƒ³ï¼Œä¸ä¸€å®šæ˜¯ç”Ÿæ´»åœ¨ä¸ºéš¾ä½ ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åœ¨ä¸ºä½ çš„æˆåŠŸæå‰é“ºè·¯ï¼Ÿ</p><p>ä½ ç»å†çš„æ¯ä¸€æ¬¡è‹¦éš¾ã€ç»“è¯†çš„æ¯ä¸€ä¸ªäººã€å­¦è¿‡çš„æ¯ä¸€æ ·ä¸œè¥¿ï¼Œéƒ½å¯èƒ½åœ¨æœªæ¥çš„æŸä¸€å¤©æ’ä¸Šç”¨åœºï¼å½“ä¸‹å¯èƒ½æ˜¯å¹¸ç¦çš„ä¹Ÿå¯èƒ½æ˜¯ç—›è‹¦çš„ï¼›å¹¸ç¦çš„æ—¶å€™è¦å±…å®‰æ€å±ï¼Œç»™è‡ªå·±åšå¥½ä¸­é•¿æœŸçš„è§„åˆ’ï¼Œå¯ä»¥çŸ­æœŸæ”¾çºµï¼Œä¸å¯æ²‰è¿·é™·è½ï¼ç—›è‹¦çš„æ—¶å€™ï¼Œè¦å­¦ä¼šè°ƒèŠ‚å¿ƒæ€å¹³è¡¡ï¼Œå¤šè§’åº¦æ€è€ƒé—®é¢˜ï¼Œåˆ†è§£å›°éš¾é€ä¸€æ”»ç ´ï¼Œä»»ä½•æ‰“ä¸å€’æˆ‘çš„äººå’Œäº‹ï¼Œç»ˆå°†ä½¿æˆ‘æˆé•¿ä¸ºæ›´åŠ ä¼˜ç§€çš„è‡ªå·±ï¼</p><p>æ¯•ä¸šè¿™å‡ å¹´ç»å†äº†å¾ˆå¤šäº‹ï¼Œè¶Šå‘çš„çš„è®¤çŸ¥åˆ°ï¼šè¶Šæ˜¯åšå­¦çš„äººè¶Šä¼šè§‰å¯Ÿåˆ°è‡ªå·±çš„æ— çŸ¥å’Œæ¸ºå°ï¼Œä»–ä»¬å¾€å¾€æ˜¯è°¦å’Œã€æ¸©æ¶¦ã€å–„å¾…ç”Ÿæ´»ã€å–„å¾…è‡ªå·±ä¸ä»–äººï¼Œä¸è¿™æ ·çš„äººæ²Ÿé€šæ¥è§¦èµ·æ¥ä¼šæ„Ÿè§‰åˆ°å¦‚æ²æ˜¥é£ã€äººé—´ç¾å¥½ï¼›ä¹Ÿä¼šæœ‰çœŸæ­£çš„æ— çŸ¥è€…ï¼Œæ— çŸ¥åˆ°ç”šè‡³æ²¡æœ‰å¬è¿‡ä¸ä¹‹ç›¸å¯¹çš„è§‚ç‚¹ï¼Œä¸”éå¸¸ç»å¯¹åæ¿€çš„è®¤ä¸ºè‡ªå·±ä¸€å®šæ˜¯å¯¹çš„ï¼Œç”Ÿæ´»ä¸­é‡åˆ°è¿™æ ·äººéè¦ä¸ä½ äº‰æ‰§ï¼Œå…¶å®æœ€åº”è¯¥åšçš„å°±æ˜¯ä¸å»ç†ä¼šï¼›è‹¥å¤§çš„ç²¾å½©ä¸–ç•Œä»–é¢†ç•¥çš„å·²ç»å¤Ÿå°‘ï¼Œä¸å¯è°“æ˜¯ä¸æ— çŸ¥ã€ä¸å¯æ€œï¼Œåº”è¯¥ä¸ºä»–æ„Ÿåˆ°æƒ‹æƒœï¼Œè€Œä¸æ˜¯ä¸ä»–äº‰æ‰§ï¼</p><p>äººç”Ÿæ¥å°±è¢«è‹¦éš¾æ‰€å……æ»¡ï¼Œä¸€å®šè¦è®¤è¯†åˆ°ç—›è‹¦æ˜¯å¸¸æ€ï¼Œç¾å¥½çš„ç”Ÿæ´»æ‰æ˜¯çŸ­æš‚çš„ï¼Œä¸è¦ç¥ˆæ±‚ç”Ÿæ´»èƒ½ä¸€ç›´é¡ºé¡ºåˆ©åˆ©ï¼Œä¸€ç”Ÿä¸­ä¼šé‡åˆ°å„è‰²å„æ ·çš„äººï¼Œç»å†å„ç§å¤§å¤§å°å°çš„äº‹ï¼Œæˆ‘ä»¬èƒ½åšçš„ä¹Ÿåº”è¯¥åšçš„å°±æ˜¯å»é¢å¯¹å®ƒã€å»è§£å†³å®ƒï¼</p><p>è¿˜çœ‹åˆ°ã€Šæƒ…ç»ªæ€¥æ•‘ã€‹é‡Œä»¿ä½›è¯´çš„å°±æ˜¯æˆ‘çš„ä¸€æ®µè¯ï¼šâ€œå½“é­é‡ç—›è‹¦çš„ç»å†æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¯¹è¿™äº›ç»å†è¿›è¡Œåæ€ï¼Œä»ä¸­å¯»æ±‚å„ç§è§è§£å’Œé¢†æ‚Ÿï¼Œä»¥å‡å°‘æ²®ä¸§çš„çª˜è¿«æ„Ÿï¼Œä»è€Œç»§ç»­å‰è¿›ã€‚ç„¶è€Œï¼Œå¯¹äºè®¸å¤šäººæ¥è¯´ï¼Œåœ¨è‡ªæˆ‘åæ€çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ä¼šå‡ºç°å·®é”™ï¼Œä»–ä»¬ä¸ä»…æ²¡æœ‰è·å¾—æƒ…æ„Ÿçš„é‡Šæ”¾ï¼Œåè€Œé™·å…¥ååˆçš„æ¶æ€§å¾ªç¯ä¸­ã€‚åœ¨æ­¤å¾ªç¯ä¸­ï¼Œç—›è‹¦çš„åœºæ™¯ã€è®°å¿†å’Œæ„Ÿè§‰ä¸€éä¸€éé‡æ”¾ï¼Œæ¯ä¸€æ¬¡éƒ½ä»¤æˆ‘ä»¬çš„æ„Ÿè§‰æ›´ç³Ÿã€‚æˆ‘ä»¬å˜å¾—åƒå›°åœ¨è½®å­ä¸Šçš„ä»“é¼ ï¼Œæ— ä¼‘æ­¢åœ°è¸©åŠ¨è½®å­ï¼Œå´æ— å¤„å¯å»ã€‚è¿™ç§ååˆå¿ƒç†ä¹‹æ‰€ä»¥æœ‰å®³ï¼Œæ˜¯å› ä¸ºå®ƒæ²¡æœ‰æä¾›æ–°çš„è®¤è¯†ï¼Œæ— æ³•æ²»æ„ˆæˆ‘ä»¬çš„ä¼¤ç—›ï¼Œåè€Œåªä¼šæ­å¼€ç»“ç—‚çš„ä¼¤å£ï¼Œå¸¦æ¥æ–°çš„æ„ŸæŸ“ã€‚â€</p><p>æœ¬æ¥æ˜¯æ‰“ç®—å†™ä¸ªå¹´ç»ˆæ€»ç»“çš„ï¼Œå¥½åƒå†™æˆå‹‰åŠ±è‡ªå·±çš„é¸¡æ±¤æ–‡äº†~~~</p><h3 id="å…³äºå·¥ä½œä¸Š"><a href="#å…³äºå·¥ä½œä¸Š" class="headerlink" title="å…³äºå·¥ä½œä¸Š"></a>å…³äºå·¥ä½œä¸Š</h3><p>2021å¹´ï¼Œå¤§ä½“ä¸Šæ¥è¯´å·¥ä½œè¿˜ç®—æ˜¯é¡ºåˆ©çš„ï¼Œå¼€å§‹æ‹…ä»»å…¬å¸å‰ç«¯å²—ä½çš„é¢è¯•å®˜ï¼Œé¢†å¯¼ä¹Ÿæ¯”è¾ƒè®¤å¯æˆ‘çš„èƒ½åŠ›å’Œé è°±ï¼Œä¹Ÿæå‡ºç»™æˆ‘è°ƒæ•´çº§åˆ«ã€‚ä¸è¿‡è¿˜æ²¡æœ‰è½åœ°ï¼Œå’±ä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯çœŸçš„ï¼Œç­‰çœŸæ­£çœ‹åˆ°äº†å†è¯´å§~ (ps: çº§åˆ«å·²è°ƒ 2022-03-18)</p><blockquote><p>ä»Šå¹´åœ¨å·¥ä½œä¸Šæœ€å¤§çš„æ”¶è·æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>ä»é›¶åˆ°ä¸Šçº¿éƒ¨ç½²äº†ä¸€å¥—å¾®å‰ç«¯çš„æ¶æ„ã€‚è™½ç„¶æœŸé—´é‡åˆ°äº†å¾ˆå¤šçš„å‘ï¼Œå¥½æ­¹éƒ½ä¸€ä¸€è§£å†³æˆåŠŸä¸Šçº¿äº†ï¼Œç”±äºä¸»åº”ç”¨æ˜¯historyæ¨¡å¼çš„è·¯ç”±é…åˆTomcatéƒ¨ç½²å‰ç«¯ï¼Œä¹‹å‰è‡ªå·±ç”¨çš„æ¯”è¾ƒå¤šçš„éƒ½æ˜¯hashæ¨¡å¼é…åˆnginxéƒ¨ç½²å‰ç«¯ï¼Œåœ¨éƒ¨ç½²ä¸Šä¹Ÿé‡åˆ°äº†å¥½å‡ ä¸ªå‘ï¼Œè‡³äºé‡åˆ°äº†ä»€ä¹ˆäº›å‘ï¼Œæ‰“ç®—é€šè¿‡åšå®¢åæœŸæ•´ç†è®°å½•èµ·æ¥ï¼›</li><li>2021é€šè¿‡è‡ªå·±æ‰‹å†™å»å®ç°å½“å‰å‰ç«¯è¡Œä¸šæ¯”è¾ƒæµè¡Œçš„ä¸€äº›åº“æ¥å¢åŠ è‡ªå·±å¯¹åº•å±‚é€»è¾‘çš„ç†è§£ï¼Œç”±äºå¯¹æŠ€èƒ½æŒæ¡çš„æ‰å®ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­èƒ½é¿å…å¾ˆå¤šæ½œåœ¨çš„å‘ï¼Œæ‰€ä»¥ç›®å‰æ‰‹ä¸Šçš„çº¿ä¸Šé¡¹ç›®åŸºæœ¬å¾ˆå°‘å‡ºç°å‰ç«¯æ–¹é¢çš„ç”Ÿäº§bugï¼›</li><li>å—ç›Šäºä¸Šçº§çš„ä¿¡ä»»ï¼Œ2021å¹´æœ‰äº†æ›´å¤šçš„æƒé™èƒ½äº†è§£åˆ°å…¬å¸å¯¹äºæŠ€æœ¯éƒ¨çš„å‘å±•è§„åˆ’ã€é¡¹ç›®è®¡åˆ’ã€äººå‘˜å®‰æ’ç­‰æƒ…å†µï¼Œæ¯”èµ·ä¹‹å‰åŸ‹å¤´ææŠ€æœ¯ï¼Œæ…¢æ…¢çš„å­¦ä¹ åˆ°äº†æ›´å¤šçš„èŒåœºç”Ÿå­˜æŠ€èƒ½ï¼›</li><li>åœ¨è¿™ä¸ªæ¯•ä¸š4å¹´çš„æ‹ç‚¹ä¸Šæœ€å¤§çš„è½¬å˜å°±æ˜¯ï¼Œç”±æ¯•ä¸šå¤´ä¸‰å¹´ä»¥ä¸“ä¸šæŠ€èƒ½ä¸ºå…¨éƒ¨æ³¨æ„ç‚¹çš„å­¦ä¹ æ–¹å¼ï¼Œæ‰©å±•æˆä¸ºæŠ€æœ¯ä¸ºä¸»ã€å­¦ä¹ å…¬å¸ä¸šåŠ¡è¯¦æƒ…å’ŒåŠå…¬å®¤äººæ–‡ä¸ºè¾…çš„å­¦ä¹ æ–¹å¼ï¼›å‰æ®µçœ‹åˆ°è¿‡ä¸€å¥è¯è§‰å¾—éå¸¸çš„èµåŒï¼šâ€œå·¥ä½œ3å¹´çš„æ—¶å€™è§‰å¾—å·¥ä½œæŠ€èƒ½æ˜¯æœ€éš¾çš„ï¼Œå·¥ä½œ5å¹´çš„æ—¶å€™è§‰å¾—äººé™…å…³ç³»æ˜¯æœ€éš¾çš„ï¼Œå·¥ä½œ10å¹´çš„æ—¶å€™è§‰å¾—çœ‹é€äººæ€§æ‰æ˜¯æœ€éš¾çš„ï¼â€ï¼›</li><li>é€šè¿‡å‰ç«¯å²—ä½å€™é€‰äººçš„é¢è¯•ï¼Œè‡ªå·±æœ‰æœºä¼šä¸å¸‚åœºä¸Šçš„å„ç§å¹´é™çš„åŒè¡Œè¿›è¡Œæ¨ªå‘å¯¹æ¯”ï¼Œå¸®åŠ©æˆ‘å¯¹è‡ªå·±çš„å·¥ä½œæ°´å¹³æœ‰ä¸€ä¸ªç²¾å‡†çš„å®šä½ï¼Œè®¤çŸ¥åˆ°äº†ä¸€äº›è‡ªå·±ä¸è¶³çš„åœ°æ–¹ï¼›</li></ol></blockquote><h3 id="æŠ€èƒ½ç‚¹"><a href="#æŠ€èƒ½ç‚¹" class="headerlink" title="æŠ€èƒ½ç‚¹"></a>æŠ€èƒ½ç‚¹</h3><p>è¿™é‡Œå¤§è‡´è®°å½•ä¸€ä¸‹è‡ªå·±è¿™ä¸€å¹´å­¦è¿‡çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œä¸è¿‡å¾ˆå¤šå°çŸ¥è¯†ç‚¹ä¸ä¸€å®šè¿˜è®°å¾—äº†ï¼Œè®°å¾—å¤šå°‘å†™å¤šå°‘å§ï¼›</p><h4 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h4><p>vue3ã€vue3æºç æµç¨‹ã€æ‰‹å†™ç®€ç‰ˆvueå“åº”å¼åŸç†ã€viteã€vuepdfå±•ç¤ºæœ€ä½³æ–¹æ¡ˆã€vue+vantå¤šä¸ªçº¿ä¸Šé¡¹ç›®ç»éªŒï¼›</p><h4 id="react"><a href="#react" class="headerlink" title="react"></a>react</h4><p>hookã€hocã€contextã€react-reduxã€å®ç°react-reduxå¸¸ç”¨ä¸­é—´ä»¶ã€react-router-domæºç ã€react-saga ã€create-react-appæ­å»ºé¡¹ç›®ä¸€ç³»åˆ—é…ç½®ã€umiã€dva ã€react+ant-mobileå¤šä¸ªçº¿ä¸Šé¡¹ç›®ç»éªŒï¼›</p><h4 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h4><p>typescript+reactå¤šä¸ªçº¿ä¸Šé¡¹ç›®ç»éªŒï¼›</p><h4 id="node"><a href="#node" class="headerlink" title="node"></a>node</h4><ol><li>æ­å»ºäº†ä¸€å¥—å‰ç«¯è„šæ‰‹æ¶ï¼Œç”¨äºé¡¹ç›®åˆšå¼€å§‹çš„æ—¶å€™ç›´æ¥ç”ŸæˆåŸºç¡€æ¡†æ¶ï¼Œæ”¯æŒvueã€reacté¡¹ç›®ï¼›æœ¬æ¥æ‰“ç®—åœ¨å…¬å¸ä½¿ç”¨çš„ï¼Œä½†æ˜¯å…¬å¸å‰ç«¯æ¯”è¾ƒè¿½æ±‚ä½¿ç”¨æœ€æ–°æŠ€æœ¯ï¼Œä½¿ç”¨è„šæ‰‹æ¶ç”Ÿæˆæ¡†æ¶å°±æ²¡æœ‰å¤šå¤§çš„ç”¨ï¼Œæ¯æ¬¡éƒ½ä¼šæœ‰æ–°çš„ä¸œè¥¿éœ€è¦æ”¹åŠ¨ï¼›</li><li>ä¸€äº›ä¸çŸ¥åçš„å°å·¥å…·â€¦</li></ol><h4 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h4><p>nginxä»£ç†ã€nginxé…ç½®è·¨åŸŸå¤´ã€tomcatéƒ¨ç½²historyè·¯ç”±æ¨¡å¼éƒ¨ç½²ï¼›</p><h4 id="other"><a href="#other" class="headerlink" title="other"></a>other</h4><p>å¾®å‰ç«¯ï¼ˆqiankunï¼‰ã€rrwebã€åŸ‹ç‚¹ã€npmåŒ…å‘å¸ƒã€gitä½¿ç”¨husk+lint-stagedè§„èŒƒæäº¤messageã€gitå­æ¨¡å—ï¼›</p><h3 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h3><p>æ”¾å¹³å¿ƒæ€ï¼Œè¸è¸å®å®èµ°å¥½æ¯ä¸€æ­¥ï¼Œå‰©ä¸‹çš„å°±äº¤ç»™æ—¶é—´å§~</p>]]></content>
      
      
      
        <tags>
            
            <tag> éšæƒ³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npmå‘åŒ…å°è®°</title>
      <link href="/2021/11/19/npm/"/>
      <url>/2021/11/19/npm/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è®°å½•ä¸€æ¬¡çŠ¯è ¢ç»å†ğŸ˜…ï¼Œä¸»è¦æ˜¯npmç§æœå‘åŒ…å’Œnpmå®˜ç½‘å‘åŒ…æœ‰ä¸€ç‚¹å°åŒºåˆ«ã€‚</p><h1 id="npmå®˜ç½‘"><a href="#npmå®˜ç½‘" class="headerlink" title="npmå®˜ç½‘"></a>npmå®˜ç½‘</h1><p>åŒ…å†™å¥½åï¼Œå…ˆç™»å½•ï¼Œç™»å½•ä¹‹åç›´æ¥publishå°±okäº†ã€‚<br><code>æ³¨æ„ï¼š</code></p><ol><li>ç¡®å®šåœ¨æ‰§è¡Œç™»å½•å‘½ä»¤çš„æ—¶å€™å¤„äºnpmæºä¸‹ï¼Œä¸èƒ½æ˜¯æ·˜å®æºç­‰å…¶ä»–æºï¼Œå¦åˆ™ä¼š401æŠ¥é”™ï¼›</li><li>åŒ…å‘å¸ƒ24å°æ—¶å†…å¯ä»¥ä½¿ç”¨<code>unpublish</code>æ’¤é”€ã€‚</li></ol><p><a href="https://docs.npmjs.com/cli/v8/commands/npm">npmæ–‡æ¡£ä¼ é€é—¨</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// ç™»å½• ä¼šæç¤ºè¾“å…¥è´¦å·ï¼Œå¯†ç ï¼Œé‚®ç®±</span><br><span class="line">npm login</span><br><span class="line"></span><br><span class="line">// é€€å‡ºç™»å½•</span><br><span class="line">npm logout</span><br><span class="line"></span><br><span class="line">// å‘åŒ…</span><br><span class="line">npm publish</span><br><span class="line"></span><br><span class="line">// åˆ é™¤ npm unpublish [&lt;@scope&gt;/]&lt;pkg&gt;@&lt;version&gt;</span><br><span class="line">npm unpublish </span><br><span class="line">npm unpublish [&lt;@scope&gt;/]&lt;pkg&gt;@&lt;version&gt;</span><br><span class="line">npm unpublish [&lt;@scope&gt;/]&lt;pkg&gt; --force</span><br><span class="line"></span><br><span class="line">// deprecateå‘½ä»¤ å¼ƒç”¨ä¸€ä¸ªåŒ… ä¼šç»™ä½¿ç”¨è¿™ä¸ªåŒ…çš„äºº æ¨é€å¼ƒç”¨è­¦ç¤º</span><br><span class="line">npm deprecate &lt;pkg&gt;[@&lt;version range&gt;] &lt;message&gt;</span><br><span class="line">npm deprecate my-thing@1.x &quot;1.x is no longer supported&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>npm login ä¹‹åï¼Œåœ¨npmçš„<code>.npmrc</code>æ–‡ä»¶çš„æœ€åä¸€è¡Œä¼šå‡ºç°<code>_authToken</code>å­˜å‚¨tokenä¿¡æ¯ï¼Œé€€å‡ºç™»å½•ä¹‹åä¼šè¢«æ¸…æ‰ï¼›<br><code>.npmrc</code> æ–‡ä»¶å¯ä»¥é€šè¿‡<code>npm config ls</code>ååœ¨<code>userconfig</code>æ‰¾åˆ°åœ°å€ï¼›</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">//registry.npmjs.org/:_authToken=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</span><br></pre></td></tr></table></figure><h1 id="npmç§æœ"><a href="#npmç§æœ" class="headerlink" title="npmç§æœ"></a>npmç§æœ</h1><p>ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨nexusæ­å»ºçš„ç§æœï¼Œå»ºåº“çš„æ—¶å€™éœ€è¦å»º<code>hosted</code>ç±»å‹çš„åº“ï¼Œç§æœå‘å¸ƒåŒ…éœ€è¦åœ¨æœ¬åœ°é…ç½®å¥½è´¦æˆ·ä¿¡æ¯ï¼Œä¸ç”¨ä½¿ç”¨<code>npm login</code>åšç™»å½•æ“ä½œã€‚<br>ä½¿ç”¨<code>nrm</code>åˆ‡åˆ°ä½ ç§æœçš„æºï¼Œåœ¨æœ¬åœ°é…ç½®å¥½è´¦æˆ·ä¿¡æ¯çš„å‰æä¸‹ï¼Œç›´æ¥<code>npm publish</code>å°±å¯ä»¥å‘æˆåŠŸäº†ã€‚</p><p><a href="https://help.sonatype.com/repomanager2/node-packaged-modules-and-npm-registries#NodePackagedModulesandnpmRegistries-EncodingCredentialsonLinux">nexusæ–‡æ¡£åœ°å€</a></p><p>æ–‡æ¡£å†™çš„å¾ˆæ¸…æ¥šï¼Œå¦‚ä½•å»ºåº“ï¼Œå¦‚ä½•é…ç½®ï¼Œè¯¦ç»†é…ç½®è¯·å‚è€ƒæ–‡æ¡£ã€‚</p><h1 id="å‘åœ¨è¿™é‡Œ"><a href="#å‘åœ¨è¿™é‡Œ" class="headerlink" title="å‘åœ¨è¿™é‡Œ"></a>å‘åœ¨è¿™é‡Œ</h1><p> ä¸€å¼€å§‹å¹¶ä¸çŸ¥é“ç§æœåªè¦é…ç½®äº†æœ¬åœ°çš„è´¦æˆ·ä¿¡æ¯ä¹‹åï¼Œå°±ä¸éœ€è¦å†ç™»å½•äº†ï¼Œé…ç½®å¥½åï¼Œå°è¯•ç™»å½•ä¸€ç›´æŠ¥é”™<code>400 Bad request</code>ä¹Ÿæ²¡æœ‰æ›´åŠ æ˜ç¡®çš„æç¤ºï¼æŸ¥äº†ä¸€å †èµ„æ–™éƒ½æ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œå®åœ¨æ— è¯­ğŸ˜‘ï¼Œäºæ˜¯æƒ³è¯•è¯•çœ‹<code>npm publish</code>ä¼šæŠ¥ä»€ä¹ˆé”™æ¥ç€ï¼Œç»“æœåŒ…å°±ä¸Šå»äº†~ ä¸Šå»äº†~ å‘æˆåŠŸäº†Î£(âŠ™â–½âŠ™â€aï¼å¥½å§ï¼<br>é˜²æ­¢æ˜¯æ„å¤–æˆåŠŸï¼Œæˆ‘åˆåˆ‡å›npmæº<code>npm login</code>è¾“å…¥æ­£ç¡®çš„è´¦å·ã€å¯†ç ã€é‚®ç®±ç™»å½•æˆåŠŸï¼Œä½¿ç”¨<code>npm publish</code>æŠŠåŒ…åœ¨npmä¸Šå‘å¸ƒäº†ä¸€ä»½ï¼Œç„¶å<code>npm logout</code>é€€å‡ºç™»å½•ï¼›å†æ¬¡åˆ‡æ¢åˆ°ç§æœæ”¹äº†ä¸€ä¸‹ç‰ˆæœ¬å·é‡æ–°<code>npm publish</code>ï¼ŒæœçœŸåˆæˆåŠŸäº†ï¼</p><h1 id="è‡ªè¯´è‡ªè¯"><a href="#è‡ªè¯´è‡ªè¯" class="headerlink" title="è‡ªè¯´è‡ªè¯"></a>è‡ªè¯´è‡ªè¯</h1><p>å€Ÿæ­¤ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹ï¼Œè¿‘æ¥çš„æ„Ÿæƒ³ï¼š<br>åœ¨åšä¸€ä»¶äº‹æƒ…çš„æ—¶å€™ï¼Œå¦‚æœæš‚æ—¶è¢«å›°éš¾æŒ¡ä½ï¼Œä¸è¦é‚£ä¹ˆå¿«æ°”é¦ï¼Œæ·±å‘¼å¸å†·é™ä¸€ä¸‹ï¼Œç†æ¸…ä¸€ä¸‹æ€è·¯æ¢ä¸ªæ–¹å¼å†å»è¯•è¯•ï¼Œè¯´ä¸å®šå°±è±ç„¶å¼€æœ—äº†å‘¢ï¼Ÿ<br>ä¸€åˆ‡æ ä¸ä½è‡ªå·±çš„éš¾é¢˜ï¼Œç»ˆå°†æˆä¸ºæˆ‘æˆé•¿è·¯ä¸Šçš„å…»æ–™~</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeå°è®°</title>
      <link href="/2021/11/10/node-path/"/>
      <url>/2021/11/10/node-path/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å¶å°”ä¼šå†™ä¸€äº› node å°å·¥å…·ï¼Œç”±äºä¸æ˜¯ç»å¸¸å†™å¿˜çš„å¾ˆå¿«ï¼Œç‰¹æ­¤è®°å½•ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„ä¾èµ–åŒ…ä¹‹ç±»çš„ï¼›</p><h3 id="æ”¯æŒesmodule"><a href="#æ”¯æŒesmodule" class="headerlink" title="æ”¯æŒesmodule"></a>æ”¯æŒesmodule</h3><p>ä¿®æ”¹<code>type</code>å±æ€§ï¼›</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;server&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;module&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;serve&quot;</span>:<span class="string">&quot;node bin/index.js&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span>: [],</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;chalk&quot;</span>: <span class="string">&quot;^4.1.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;execa&quot;</span>: <span class="string">&quot;^5.1.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;inquirer&quot;</span>: <span class="string">&quot;^8.2.0&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="chalk"><a href="#chalk" class="headerlink" title="chalk"></a>chalk</h3><p>åœ°å€:<a href="https://www.npmjs.com/package/chalk">chalk</a></p><p>ç¾åŒ–æ§åˆ¶å°çš„è¾“å‡º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(chalk.blue(<span class="string">&#x27;Hello world!&#x27;</span>))</span><br><span class="line"><span class="built_in">console</span>.log(chalk.red(<span class="string">&#x27;hello world!&#x27;</span>))</span><br></pre></td></tr></table></figure><h3 id="execa"><a href="#execa" class="headerlink" title="execa"></a>execa</h3><p>åœ°å€ï¼š<a href="https://www.npmjs.com/package/execa">execa</a><br>å¯ä»¥å¼€å­è¿›ç¨‹ï¼Œç”¨æ¥æ‰§è¡Œä¸€äº›å‘½ä»¤</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> child_process = execa(<span class="string">&#x27;yarn serve&#x27;</span>, &#123;</span><br><span class="line">  cwd: url.root, <span class="comment">// å‘½ä»¤æ‰§è¡Œçš„é¡¹ç›®åœ°å€</span></span><br><span class="line">  shell: <span class="literal">true</span>,    </span><br><span class="line">  stdio: [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>] </span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;execa res:&#x27;</span>, res);</span><br><span class="line">  child_process.kill();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="inquirer"><a href="#inquirer" class="headerlink" title="inquirer"></a>inquirer</h3><p>åœ°å€ï¼š<a href="https://www.npmjs.com/package/inquirer">inquirer</a><br>æ§åˆ¶å°è¾“å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> inquirer <span class="keyword">from</span> <span class="string">&#x27;inquirer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> inquirer.prompt([</span><br><span class="line">    &#123;</span><br><span class="line">      type: <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;projectName&#x27;</span>,</span><br><span class="line">      message: <span class="string">&#x27;set project name&#x27;</span>,</span><br><span class="line">      <span class="function"><span class="title">validate</span>(<span class="params">input</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (input) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Please enter project name&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      type: <span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;frame&#x27;</span>,</span><br><span class="line">      message: <span class="string">&#x27;please select a frame&#x27;</span>,</span><br><span class="line">      choices: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;react&#x27;</span>],</span><br><span class="line">      <span class="function"><span class="title">validate</span>(<span class="params">input</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// Declare function as asynchronous, and save the done callback</span></span><br><span class="line">        <span class="keyword">var</span> done = <span class="built_in">this</span>.async()</span><br><span class="line">        <span class="comment">// Do async stuff</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> input !== <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// Pass the return value in the done callback</span></span><br><span class="line">            done(<span class="string">&#x27;You need to select a frame&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// Pass the return value in the done callback</span></span><br><span class="line">          done(<span class="literal">null</span>, <span class="literal">true</span>)</span><br><span class="line">        &#125;, <span class="number">3000</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="dirname"><a href="#dirname" class="headerlink" title="__dirname"></a>__dirname</h3><p>éœ€è¦ç‰¹æ®Šå¤„ç†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fileURLToPath &#125; <span class="keyword">from</span> <span class="string">&#x27;url&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> __dirname = fileURLToPath(<span class="keyword">import</span>.meta.url);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">dir</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> path.join(__dirname, dir);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dvaå°è®°</title>
      <link href="/2021/11/05/react-dvajs/"/>
      <url>/2021/11/05/react-dvajs/</url>
      
        <content type="html"><![CDATA[<h1 id="dva"><a href="#dva" class="headerlink" title="dva"></a>dva</h1><p>dvaæŠŠreduxå’Œredux-sagaç»„åˆèµ·æ¥ï¼Œé¿å…äº†storeä¸­éœ€è¦å†™watcher sagaã€worker sagaã€reducerã€actionç­‰ä¸€å †çš„ä¸œè¥¿ï¼Œå¢åŠ stateçš„æ—¶å€™å‡å°‘å¤šä¸ªæ–‡ä»¶åå¤æ¨ªè·³çš„æƒ…å†µï¼›dvaæå‡ºäº†modelçš„æ¦‚å¿µï¼Œé€šè¿‡reducers, effects å’Œ subscriptions ç»„ç»‡ modelï¼Œå¤§å¤§æé«˜å¼€å‘ä¾¿åˆ©åº¦ï¼å…¶è¿˜é›†æˆäº†react-router, routerçš„apiä¹Ÿå¯ä»dvaä¸­ç›´æ¥å¼•å…¥ã€‚</p><h1 id="ä¼ é€é—¨"><a href="#ä¼ é€é—¨" class="headerlink" title="ä¼ é€é—¨"></a>ä¼ é€é—¨</h1><p>æ–‡æ¡£åœ°å€ï¼š<a href="https://dvajs.com/">dva.js</a></p><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>dvaä½œä¸ºä¸€ä¸ªçº¯æ•°æ®æµæ–¹æ¡ˆï¼Œç®€åŒ–reduxç›¸å…³æŠ€æœ¯æ ˆçš„å¼€å‘æµç¨‹ã€‚ç›®å‰dvaåº“å·²ç»åœæ­¢ç»´æŠ¤ï¼Œæ›´å¤šçš„æ˜¯ä½¿ç”¨umi.jså»åšreacté¡¹ç›®çš„å¼€å‘ï¼Œumié‡Œé¢dvaä½œä¸ºæ’ä»¶é»˜è®¤æ³¨å†Œï¼Œå•å•ç”¨dvaå¼€å‘é¡¹ç›®çš„æƒ…å†µå¾ˆå°‘ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> dva </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€æ˜“ç‰ˆreact-redux</title>
      <link href="/2021/10/26/react-redux2/"/>
      <url>/2021/10/26/react-redux2/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å­¦ä¹  react-redux æºç å¹¶è‡ªå·±å®ç°å…¶ä¸»è¦åŠŸèƒ½ï¼›å­¦ä¹ ä½¿æˆ‘å¿«ä¹~ æ•²ä»£ç ä½¿æˆ‘å¿«ä¹~</p><h2 id="æ‰‹å†™ä¸€ä¸ªç®€å•çš„-react-redux"><a href="#æ‰‹å†™ä¸€ä¸ªç®€å•çš„-react-redux" class="headerlink" title="æ‰‹å†™ä¸€ä¸ªç®€å•çš„ react-redux"></a>æ‰‹å†™ä¸€ä¸ªç®€å•çš„ react-redux</h2><p>react-redux åº“å°† react å’Œ redux ç»“åˆèµ·æ¥ï¼Œä½¿ react é¡¹ç›®ä¸­å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨ redux~</p><p><code>react-redux</code> ä¸»è¦ API æœ‰: <code>Provider</code>ã€<code>connect</code>ã€<code>bindActionCreators</code>ã€<code>useSelector</code>ã€<code>useDispatch</code>ã€</p><h2 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h2><p><code>Provider</code>ç»„ä»¶é€šè¿‡åŒ…è£¹åº”ç”¨æ ¹ç»„ä»¶é€šè¿‡ ReactContext å°† store æ•°æ®ä¼ ç»™å­å­™ç»„ä»¶ï¼›</p><ol><li>ä½¿ç”¨</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&#x27;./myRedux&#x27;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ol start="2"><li>å®ç°</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ReduxContext = React.createContext()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Provider = <span class="function">(<span class="params">&#123; store, children &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">ReduxContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;store&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">ReduxContext.Provider</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h2><p><code>connect</code>æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ HOCï¼Œä¸»è¦ä½œç”¨æ˜¯å°† store ä¸­çš„<code>state</code>å’Œ<code>dispatch</code>æ˜ å°„åˆ°ç»„ä»¶ï¼Œä»¥ä¸‹å®ç°ä»…å†™äº†æœ€å¸¸ç”¨çš„<code>mapStateToProps</code>å’Œ<code>mapDispatchToProps</code>ï¼›</p><ol><li>ä½¿ç”¨</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@connect(<span class="function">(<span class="params">&#123; count &#125;</span>) =&gt;</span> (&#123; count &#125;), &#123;</span><br><span class="line">  add: <span class="function">() =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;),</span><br><span class="line">  minus: <span class="function">() =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">&#x27;MINUS&#x27;</span> &#125;),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReactReduxPage</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; count, dispatch, add, minus &#125; = <span class="built_in">this</span>.props</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;ReactReduxPage&lt;/h1&gt;</span><br><span class="line">        &lt;p&gt;&#123;count&#125;&lt;/p&gt;</span><br><span class="line">        &lt;button onClick=&#123;add&#125;&gt;ADD&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;minus&#125;&gt;MINUS&lt;/button&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;)</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          dispatch</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>å®ç°ï¼ˆä»£ç é‡Œæœ‰è¯¦ç»†è§£é‡Šï¼‰</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// connect æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶hoc</span></span><br><span class="line"><span class="comment">// conent æœ‰ä¸¤ä¸ª() ç¬¬ä¸€ä¸ªæ˜¯ mapStateToProps, mapDispatchToProps ... ç¬¬äºŒä¸ªæ˜¯ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> connect = <span class="function">(<span class="params">mapStateToProps, mapDispatchToProps</span>) =&gt;</span> (</span><br><span class="line">  WrappedComponnet</span><br><span class="line">) =&gt; <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å°†storeçš„æ•°æ® ä¼ åˆ° ä¸‹é¢ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> store = useContext(ReduxContext)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// store.getState()èƒ½æ‹¿åˆ°æ‰€æœ‰çš„stateçš„æ•°æ®ï¼ŒmapStateToPropsåˆ™æ˜¯æŠŠéœ€è¦çš„æ•°æ®è§£æ„å‡ºæ¥ï¼ŒæŒ‚åˆ°ç»„ä»¶çš„propsä¸Š</span></span><br><span class="line">  <span class="keyword">const</span> stateProps = mapStateToProps(store.getState())</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœä¸å†™ mapDispatchToProps , é»˜è®¤æ˜¯ dispatch å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> dispatchProps = &#123; <span class="attr">dispatch</span>: store.dispatch &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// mapDispatchToProps æ”¯æŒ Object å’Œ Function ä¸¤ç§ç±»å‹</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> mapDispatchToProps === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    dispatchProps = mapDispatchToProps(store.dispatch)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> mapDispatchToProps === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// å¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦è‡ªåŠ¨æŠŠdispatchåŠ ä¸Šï¼Œå‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦ç”¨æˆ·åœ¨mapStateToPropsé‡Œé¢æ‰‹åŠ¨bindActionCreators</span></span><br><span class="line">    dispatchProps = bindActionCreators(mapDispatchToProps, store.dispatch)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°ç»„ä»¶æ–¹æ³• useForceUpdateä¸ºè‡ªå®šä¹‰hook</span></span><br><span class="line">  <span class="keyword">const</span> forceUpdate = useForceUpdate()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// useEffect__è®¢é˜… Domæ›´æ–°  useEffectä¼šåœ¨æµè§ˆå™¨ç»˜åˆ¶åå»¶è¿Ÿæ‰§è¡Œ</span></span><br><span class="line">  <span class="comment">// useLayoutEffect-è®¢é˜…-Domæ›´æ–° useLayoutEffect æ²¡æœ‰å»¶è¿Ÿ åŒæ­¥</span></span><br><span class="line">  useLayoutEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å‰¯ä½œç”¨ä¸èƒ½ç›´æ¥å†™åˆ°å‡½æ•°ä½“ï¼Œä¼šé˜»å¡UIæ¸²æŸ“</span></span><br><span class="line">    <span class="comment">// è®¢é˜…</span></span><br><span class="line">    store.subscribe(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      forceUpdate()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, [store])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponnet</span> &#123;<span class="attr">...props</span>&#125; &#123;<span class="attr">...stateProps</span>&#125; &#123;<span class="attr">...dispatchProps</span>&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="bindActionCreators"><a href="#bindActionCreators" class="headerlink" title="bindActionCreators"></a>bindActionCreators</h2><p>è¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯å¯¹<code>mapDispatchToProps</code>åšå¤„ç†ä½¿ç”¨çš„ï¼Œå®ƒä¼šå°†<code>dispatch</code>å’Œ<code>action</code>ç»„åˆèµ·æ¥ï¼›å½“<code>mapDispatchToProps</code>ä¸ºå‡½æ•°ç±»å‹çš„æ—¶å€™<code>mapDispatchToProps</code>å‡½æ•°ä½“é‡Œé¢éœ€è¦ç”¨åˆ°ï¼Œå½“<code>mapDispatchToProps</code>ä¸ºå¯¹è±¡çš„æ—¶å€™ï¼Œ<code>connect</code>å†…éƒ¨ä¹Ÿéœ€è¦å¯¹ä¼ å…¥çš„å¯¹è±¡åšå¤„ç†ï¼Œè¿™éƒ¨åˆ†å¯æŸ¥çœ‹ä¸Šé¢<code>connect</code>å®ç°ä»£ç <code>ç¬¬20è¡Œ</code>ï¼›</p><ol><li>ä½¿ç”¨</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// Fucntion å‚æ•°æ˜¯dispatchä¸ownProps</span></span><br><span class="line"><span class="comment">// !æ…é‡å®šä¹‰ownPropsï¼Œå› ä¸ºä½ ä¸€æ—¦å®šä¹‰ownPropsï¼Œé‚£ä¹ˆæ¯å½“ownPropså‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå½“å‰çš„mapStateToPropséƒ½ä¼šè¢«è°ƒç”¨ï¼Œå®¹æ˜“å½±å“æ€§èƒ½</span></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps =  <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> creators = &#123;</span><br><span class="line">    add: <span class="function">() =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;),</span><br><span class="line">    minus: <span class="function">() =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">&#x27;MINUS&#x27;</span> &#125;),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  creators = bindActionCreators(creators, dispatch)</span><br><span class="line">  <span class="keyword">return</span> &#123; dispatch, ...creators &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(ReactReduxPage)</span><br></pre></td></tr></table></figure><ol start="2"><li>å®ç°<br>å®ç°å…¶å®å¾ˆç®€å•ï¼Œä¸»è¦å°±æ˜¯å¯¹ä¼ å…¥çš„<code>creator</code>å¾ªç¯å¤„ç†ï¼Œç»™<code>action</code>å¥—ä¸Š<code>dispatch</code>;</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bindActionCreator = <span class="function">(<span class="params">creator, dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ³¨æ„ï¼š å‡½æ•°ä¸è¦ä¸¢å‚æ•°</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...agrs</span>) =&gt;</span> dispatch(creator(...agrs))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> bindActionCreators = <span class="function">(<span class="params">creator, dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> creator) &#123;</span><br><span class="line">    obj[key] = bindActionCreator(creator[key], dispatch)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="useSelectorã€useDispatch"><a href="#useSelectorã€useDispatch" class="headerlink" title="useSelectorã€useDispatch"></a>useSelectorã€useDispatch</h2><p><code>useSelector</code>å’Œ<code>useDispatch</code>æ˜¯<code>react-redux</code>æä¾›çš„ hook æ–¹æ³•ï¼Œä¸»è¦æ˜¯é’ˆå¯¹å‡½æ•°ç»„ä»¶ä½¿ç”¨ redux çš„ï¼›</p><ol><li>ä½¿ç”¨</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="comment">// import &#123;useSelector, useDispatch&#125; from &#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="keyword">from</span> <span class="string">&#x27;../myRedux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ReactReduxHookPage = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç±»ä¼¼äº mapStateToProps</span></span><br><span class="line">  <span class="keyword">const</span> count = useSelector(<span class="function">(<span class="params">&#123; count &#125;</span>) =&gt;</span> count)</span><br><span class="line">  <span class="keyword">const</span> dispatch = useDispatch()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> add = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> minus = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;MINUS&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;ReactReduxHookPage&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;&#123;count&#125;&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;add&#125;&gt;ADD&lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;minus&#125;&gt;MINUS&lt;/button&gt;</span><br><span class="line">      &lt;button</span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;)</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        dispatch</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ReactReduxHookPage</span><br></pre></td></tr></table></figure><ol start="2"><li>å®ç°</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useSelector = <span class="function">(<span class="params">selector</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> store = useContext(ReduxContext)</span><br><span class="line">  <span class="keyword">const</span> selectedState = selector(store.getState())</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> forceUpdate = useForceUpdate()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¢é˜…</span></span><br><span class="line">  useLayoutEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//  å‰¯ä½œç”¨ä¸èƒ½ç›´æ¥å†™åˆ°å‡½æ•°ä½“ï¼Œä¼šé˜»å¡UIæ¸²æŸ“</span></span><br><span class="line">    store.subscribe(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      forceUpdate()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, [store])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> selectedState</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useDispatch = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> store = useContext(ReduxContext)</span><br><span class="line">  <span class="keyword">return</span> store.dispatch</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="myReactRedux-å®Œæ•´ä»£ç "><a href="#myReactRedux-å®Œæ•´ä»£ç " class="headerlink" title="myReactRedux å®Œæ•´ä»£ç "></a>myReactRedux å®Œæ•´ä»£ç </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useContext, useLayoutEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useForceUpdate &#125; <span class="keyword">from</span> <span class="string">&#x27;../hooks&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ReduxContext = React.createContext()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Provider = <span class="function">(<span class="params">&#123; store, children &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">ReduxContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;store&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">ReduxContext.Provider</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// connect æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ hoc</span></span><br><span class="line"><span class="comment">// conent æœ‰ä¸¤ä¸ª() ç¬¬ä¸€ä¸ªæ˜¯ mapStateToProps, mapDispatchToProps ... ç¬¬äºŒä¸ªæ˜¯ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> connect = <span class="function">(<span class="params">mapStateToProps, mapDispatchToProps</span>) =&gt;</span> (</span><br><span class="line">  WrappedComponnet</span><br><span class="line">) =&gt; <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å°†storeçš„æ•°æ® ä¼ åˆ° ä¸‹é¢ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> store = useContext(ReduxContext)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> stateProps = mapStateToProps(store.getState())</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœä¸å†™ mapDispatchToProps , é»˜è®¤æ˜¯ dispatch å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> dispatchProps = &#123; <span class="attr">dispatch</span>: store.dispatch &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// mapDispatchToProps æ”¯æŒ Object å’Œ Function ä¸¤ç§æ ¼å¼</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> mapDispatchToProps === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    dispatchProps = mapDispatchToProps(store.dispatch)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> mapDispatchToProps === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// å¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦è‡ªåŠ¨æŠŠdispatchåŠ ä¸Šï¼Œå‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦ç”¨æˆ·åœ¨mapStateToPropsé‡Œé¢æ‰‹åŠ¨bindActionCreators</span></span><br><span class="line">    dispatchProps = bindActionCreators(mapDispatchToProps, store.dispatch)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°hook</span></span><br><span class="line">  <span class="keyword">const</span> forceUpdate = useForceUpdate()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// useEffect__è®¢é˜… Domæ›´æ–°  useEffectä¼šåœ¨æµè§ˆå™¨ç»˜åˆ¶åå»¶è¿Ÿæ‰§è¡Œ</span></span><br><span class="line">  <span class="comment">// useLayoutEffect-è®¢é˜…-Domæ›´æ–° useLayoutEffect æ²¡æœ‰å»¶è¿Ÿ åŒæ­¥</span></span><br><span class="line">  useLayoutEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å‰¯ä½œç”¨ä¸èƒ½ç›´æ¥å†™åˆ°å‡½æ•°ä½“ï¼Œä¼šé˜»å¡UIæ¸²æŸ“</span></span><br><span class="line">    <span class="comment">// è®¢é˜…</span></span><br><span class="line">    store.subscribe(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      forceUpdate()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, [store])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponnet</span> &#123;<span class="attr">...props</span>&#125; &#123;<span class="attr">...stateProps</span>&#125; &#123;<span class="attr">...dispatchProps</span>&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useSelector = <span class="function">(<span class="params">selector</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> store = useContext(ReduxContext)</span><br><span class="line">  <span class="keyword">const</span> selectedState = selector(store.getState())</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> forceUpdate = useForceUpdate()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¢é˜…</span></span><br><span class="line">  useLayoutEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//  å‰¯ä½œç”¨ä¸èƒ½ç›´æ¥å†™åˆ°å‡½æ•°ä½“ï¼Œä¼šé˜»å¡UIæ¸²æŸ“</span></span><br><span class="line">    store.subscribe(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      forceUpdate()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, [store])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> selectedState</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useDispatch = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> store = useContext(ReduxContext)</span><br><span class="line">  <span class="keyword">return</span> store.dispatch</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bindActionCreator = <span class="function">(<span class="params">creator, dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...agrs</span>) =&gt;</span> dispatch(creator(...agrs))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> bindActionCreators = <span class="function">(<span class="params">creator, dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> creator) &#123;</span><br><span class="line">    obj[key] = bindActionCreator(creator[key], dispatch)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>useForceUpdate</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useCallback &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰hook æ¨¡æ‹Ÿç±»ç»„ä»¶çš„forceUpdate</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useForceUpdate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> update = useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setCount(<span class="function"><span class="params">prev</span> =&gt;</span> prev + <span class="number">1</span>)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> update</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react-reduxä½¿ç”¨</title>
      <link href="/2021/10/22/react-redux/"/>
      <url>/2021/10/22/react-redux/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¸Šä¸¤æœˆå¿™å…¶ä»–çš„äº‹æƒ…ï¼Œç”±æ­¤å­¦ä¹ çš„æ­¥ä¼æš‚åœäº†è¿‘ä¸¤ä¸ªæœˆçš„æ—¶é—´ï¼Œç°åœ¨ç»ˆäºæœ‰æ—¶é—´ç»§ç»­å•¦ï¼ä¹‹å‰åœ¨å­¦ä¹  redux çš„è¿‡ç¨‹ä¸­æ²¡æœ‰æ•´ç†ç¬”è®°ï¼Œç»§ç»­å¼€å§‹çš„æ—¶å€™å‘ç°çŸ¥è¯†ç‚¹å±…ç„¶å¿˜è®°äº†å¥½å¤šï¼Œè¿˜æ˜¯è€è¯è¯´çš„å¥½ï¼šâ€œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼â€ï¼›å†™æˆä¸€ç¯‡æ–‡ç« ä¸€æ˜¯å¯¹è‡ªå·±å­¦ä¹ è¿‡ç¨‹çš„è®°å½•ï¼Œä¹Ÿæ˜¯å¯¹çŸ¥è¯†ç‚¹çš„æ€»ç»“ï¼Œæœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†è®©çŸ¥è¯†ç‚¹æŒæ¡çš„æ›´åŠ ç‰¢å›º~</p><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><p>æä¾›äº†ä¸¤ä¸ª api</p><ol><li><code>Provider</code> ä¸ºåä»£ç»„ä»¶æä¾› store</li><li><code>connect</code> ä¸ºç»„ä»¶æä¾›æ•°æ®å’Œå˜æ›´æ–¹æ³•</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-redux</span><br></pre></td></tr></table></figure><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><h4 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h4><p><code>&lt;Provider store&gt;</code> ä½¿ç»„ä»¶å±‚çº§ä¸­çš„ <code>connect()</code> æ–¹æ³•èƒ½å¤Ÿè·å¾— <code>Redux store</code>ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ ¹ç»„ä»¶åº”è¯¥åµŒå¥—åœ¨ <code>&lt;Provider&gt;</code> ä¸­æ‰èƒ½ä½¿ç”¨ <code>connect()</code> æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠProvideræ”¾åœ¨æ ¹ç»„ä»¶å¤–å±‚ï¼Œä½¿å­ç»„ä»¶èƒ½è·å¾—store</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h4><p><code>connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])</code><br>è¿æ¥ React ç»„ä»¶ä¸ Redux store, è¿”å›ä¸€ä¸ªæ–°çš„å·²ä¸ Redux store è¿æ¥çš„ç»„ä»¶ç±»ã€‚</p><ul><li><code>mapStateToProps</code></li><li><code>mapDispatchToProps</code></li><li><code>mergeProps</code><br>å¦‚æœæŒ‡å®šäº†è¿™ä¸ªå‚æ•°ï¼Œ <code>mapStateToProps()</code> ä¸ <code>mapDispatchToProps()</code> çš„æ‰§è¡Œç»“æœå’Œç»„ä»¶è‡ªèº«çš„ <code>props</code> å°†ä¼ å…¥åˆ°è¿™ä¸ªå›è°ƒå‡½æ•°ä¸­ã€‚è¯¥å›è°ƒå‡½æ•°è¿”å›çš„å¯¹è±¡å°†ä½œä¸º <code>props</code> ä¼ é€’åˆ°è¢«åŒ…è£…çš„ç»„ä»¶ä¸­ã€‚ä½ ä¹Ÿè®¸å¯ä»¥ç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œæ ¹æ®ç»„ä»¶çš„ <code>props</code> æ¥ç­›é€‰éƒ¨åˆ†çš„ <code>state</code> æ•°æ®ï¼Œæˆ–è€…æŠŠ <code>props</code> ä¸­ çš„æŸä¸ªç‰¹å®šå˜é‡ä¸ <code>action creator</code> ç»‘å®šåœ¨ä¸€èµ·ã€‚å¦‚æœä½ çœç•¥è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿”å›<code>Object.assign(&#123;&#125;, ownProps, stateProps, dispatchProps)</code> çš„ç»“æœã€‚</li></ul><h3 id="react-redux-ä½¿ç”¨-ç±»ç»„ä»¶"><a href="#react-redux-ä½¿ç”¨-ç±»ç»„ä»¶" class="headerlink" title="react-redux ä½¿ç”¨ ç±»ç»„ä»¶"></a>react-redux ä½¿ç”¨ ç±»ç»„ä»¶</h3><h4 id="store-index"><a href="#store-index" class="headerlink" title="store/index"></a>store/index</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, combineReducers &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span> <span class="comment">// å¼‚æ­¥</span></span><br><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">&#x27;redux-logger&#x27;</span> <span class="comment">// logger</span></span><br><span class="line"><span class="keyword">import</span> promise <span class="keyword">from</span> <span class="string">&#x27;redux-promise&#x27;</span> <span class="comment">// å¤„ç†promise</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countReducer</span>(<span class="params">state = <span class="number">0</span>, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;ADD&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state + (action.payload || <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;MINUS&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state - (action.payload || <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæ•°æ®ä»“åº“ combineReducersç»„åˆreducer  applyMiddlewareæ‰©å±•reduxçš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  combineReducers(&#123; <span class="attr">count</span>: countReducer &#125;),</span><br><span class="line">  applyMiddleware(thunk, promise, logger)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºçš„storeåœ¨ index.js ä¸­é€šè¿‡&lt;Provider store&gt;&lt;/Provider&gt;ç»„ä»¶ä¼ å…¥&lt;App/&gt;æ ¹ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><h4 id="pages-reactReduxPage"><a href="#pages-reactReduxPage" class="headerlink" title="pages/reactReduxPage"></a>pages/reactReduxPage</h4><p>é€šè¿‡ connect çš„<code>mapStateToProps</code>æ˜ å°„<code>state</code>ã€<code>mapDispatchToProps</code>æ˜ å°„<code>dispatch</code>åˆ°ç»„ä»¶çš„<code>props</code>èº«ä¸Šï¼›<br><code>mapDispatchToProps</code> å¯ä»¥æ˜¯å¯¹è±¡å½¢å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°å½¢å¼:<br>å¯¹è±¡ï¼šç»„ä»¶ props èº«ä¸Šå°±ä¼šæœ‰å…·ä½“çš„ dispatch æ–¹æ³•ï¼›<br>å‡½æ•°ï¼šç»„ä»¶èº«ä¸Šä¼šæœ‰å…·ä½“çš„æ–¹æ³•ï¼Œè¿˜æœ‰ redux çš„ dispatch æ–¹æ³•ï¼Œredux æä¾›äº† <code>bindActionCreators</code>å¸®åŠ©æˆ‘ä»¬å†™<code>mapDispatchToProps</code></p><p>æ³¨æ„ï¼š<code>mapStateToProps</code>ã€<code>mapDispatchToProps</code>çš„ç¬¬äºŒä¸ªå‚æ•°éƒ½æ˜¯<code>ownProps</code>,æ…ç”¨ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">@connect(</span><br><span class="line">  (&#123; count &#125;) =&gt; (&#123; count &#125;),</span><br><span class="line">  <span class="comment">// mapDispatchToProps</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. å¯¹è±¡ å¯ä»¥é€šè¿‡ this.props.add() this.props.minus()è°ƒç”¨</span></span><br><span class="line">  <span class="comment">// &#123;</span></span><br><span class="line">  <span class="comment">//     add: () =&gt; (&#123; type: &#x27;ADD&#x27; &#125;),</span></span><br><span class="line">  <span class="comment">//     minus: () =&gt; (&#123; type: &#x27;MINUS&#x27; &#125;)</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. å‡½æ•° å°†dispatchä¹Ÿæ‰©å±•è¿›å»</span></span><br><span class="line">  <span class="comment">// dispatch =&gt; &#123;</span></span><br><span class="line">  <span class="comment">// const add = () =&gt; dispatch(&#123;type: &quot;ADD&quot;&#125;);</span></span><br><span class="line">  <span class="comment">// const minus =() =&gt; dispatch(&#123;type: &quot;MINUS&quot;&#125;);</span></span><br><span class="line">  <span class="comment">// return &#123; dispatch, add, minus &#125;;</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. å‡½æ•° å¦‚æœæ–¹æ³•å¤ªå¤šçš„è¯ï¼Œä¸€ä¸ªä¸€ä¸ªå¯¼å‡ºä¼šå¾ˆéº»çƒ¦ï¼Œç”±æ­¤reduxæä¾›äº†bindActionCreatorså¸®æˆ‘ä»¬ç»„åˆdispatchå’Œaction</span></span><br><span class="line">  (dispatch) =&gt; &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">let</span> creators = &#123;</span><br><span class="line">      add: <span class="function">() =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;),</span><br><span class="line">      minus: <span class="function">() =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">&#x27;MINUS&#x27;</span> &#125;),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    creators = bindActionCreators(creators, dispatch)</span><br><span class="line">    <span class="comment">// ç›´æ¥è¿”å› creators</span></span><br><span class="line">    <span class="keyword">return</span> &#123; dispatch, ...creators &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReactReduxPage</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(&quot;props&quot;, this.props); //sy-log</span></span><br><span class="line">    <span class="keyword">const</span> &#123; count, dispatch, add, minus &#125; = <span class="built_in">this</span>.props</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;ReactReduxPage&lt;/h1&gt;</span><br><span class="line">        &lt;p&gt;&#123;count&#125;&lt;/p&gt;</span><br><span class="line">        &lt;button onClick=&#123;add&#125;&gt;ADD&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;minus&#125;&gt;MINUS&lt;/button&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;)</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          dispatch</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†™è£…é¥°å™¨çš„è¯ï¼Œ@connet é‡Œé¢çœ‹èµ·æ¥ä¼šæ¯”è¾ƒä¹±ï¼Œä¸€èˆ¬åœ¨å†™é¡¹ç›®çš„æ—¶å€™éƒ½ä¼šæŠŠ<code>mapStateToProps</code>å’Œ<code>mapDispatchToProps</code>å†™åˆ°ç»„ä»¶çš„ä¸‹è¾¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; bindActionCreators &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReactReduxPage</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(&quot;props&quot;, this.props); //sy-log</span></span><br><span class="line">    <span class="keyword">const</span> &#123; count, dispatch, add, minus &#125; = <span class="built_in">this</span>.props</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;ReactReduxPage&lt;/h1&gt;</span><br><span class="line">        &lt;p&gt;&#123;count&#125;&lt;/p&gt;</span><br><span class="line">        &lt;button onClick=&#123;add&#125;&gt;ADD&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;minus&#125;&gt;MINUS&lt;/button&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;)</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          dispatch</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mapStateToProps Fucntion</span></span><br><span class="line"><span class="comment">// !æ…é‡å®šä¹‰ownPropsï¼Œå› ä¸ºä½ ä¸€æ—¦å®šä¹‰ownPropsï¼Œé‚£ä¹ˆæ¯å½“ownPropså‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå½“å‰çš„ mapStateToPropséƒ½ä¼šè¢«è°ƒç”¨ï¼Œ</span></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">&#123; count &#125;</span>) =&gt;</span> (&#123; count &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Fucntion å‚æ•°æ˜¯dispatchä¸ownProps</span></span><br><span class="line"><span class="comment">// !æ…é‡å®šä¹‰ownPropsï¼Œå› ä¸ºä½ ä¸€æ—¦å®šä¹‰ownPropsï¼Œé‚£ä¹ˆæ¯å½“ownPropså‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå½“å‰çš„mapStateToPropséƒ½ä¼šè¢«è°ƒç”¨ï¼Œå®¹æ˜“å½±å“æ€§èƒ½</span></span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> creators = &#123;</span><br><span class="line">    add: <span class="function">() =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;),</span><br><span class="line">    minus: <span class="function">() =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">&#x27;MINUS&#x27;</span> &#125;),</span><br><span class="line">  &#125;</span><br><span class="line">  creators = bindActionCreators(creators, dispatch)</span><br><span class="line">  <span class="keyword">return</span> &#123; dispatch, ...creators &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(ReactReduxPage)</span><br></pre></td></tr></table></figure><h3 id="react-redux-ä½¿ç”¨-å‡½æ•°ç»„ä»¶"><a href="#react-redux-ä½¿ç”¨-å‡½æ•°ç»„ä»¶" class="headerlink" title="react-redux ä½¿ç”¨ å‡½æ•°ç»„ä»¶"></a>react-redux ä½¿ç”¨ å‡½æ•°ç»„ä»¶</h3><p>store çš„æ³¨å…¥æ ¹ç»„ä»¶ç­‰æ–¹æ³•å’Œä¸Šé¢çš„ç±»ç»„ä»¶éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«å°±åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ store æ•°æ®çš„åŒºåˆ«ï¼Œhook çš„æ–¹æ³•ä¼šæ›´åŠ çš„ç®€æ´å’Œæ–¹ä¾¿ï¼›<br>ä¸»è¦æ˜¯åˆ©ç”¨<code>react-redux</code>æä¾›çš„ <code>useSelecter</code>ã€<code>useDispatch</code>ä¸¤ä¸ª hook;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ReactReduxHookPage = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç±»ä¼¼äº mapStateToProps</span></span><br><span class="line">  <span class="keyword">const</span> count = useSelector(<span class="function">(<span class="params">&#123; count &#125;</span>) =&gt;</span> count)</span><br><span class="line">  <span class="keyword">const</span> dispatch = useDispatch()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> add = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> minus = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;MINUS&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;ReactReduxHookPage&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;&#123;count&#125;&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;add&#125;&gt;ADD&lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;minus&#125;&gt;MINUS&lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123;dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span> &#125;)&#125;&#125;&gt;dispatch&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ReactReduxHookPage</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä»¥ä¸Šè®°å½•äº†react-reduxçš„åŸºæœ¬ä½¿ç”¨ï¼Œå°šæœªæ¶‰åŠå¤„ç†å¼‚æ­¥æƒ…å†µï¼Œå¤„ç†å¼‚æ­¥é—®é¢˜è®¡åˆ’å¦èµ·ä¸€ç¯‡æ–‡ç« å»è¯¦ç»†è®²è¿°ã€‚<br>å¾ˆå¤šäººåœ¨å­¦ä¹ reactçš„æ—¶å€™æ„Ÿè§‰å¾ˆéš¾ï¼Œæˆ‘çŒœå¤§éƒ¨åˆ†å°±æ˜¯å¯¹è¿™ä¸ªreact-reduxæ‹ä¸æ¸…ï¼Œå…¶å®ä½¿ç”¨æ–¹æ³•éƒ½å¾ˆç®€å•ï¼Œä¸»è¦å°±æ˜¯reactã€react-reduxå†™æ³•éƒ½å¾ˆè‡ªç”±ï¼Œä¸€ä½†é¡¹ç›®å¤§èµ·æ¥ï¼Œå¦‚ä½•ä¼˜é›…çš„å»ç¼–å†™é¡¹ç›®ä»£ç ä¿è¯é¡¹ç›®å…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ã€é˜…è¯»æ€§ã€ä»¥åŠä»£ç çš„å¥å£®æ€§ï¼Œç¡®å®æ˜¯ä¸€ä¸ªéœ€è¦é‡è¦å…³æ³¨çš„ç‚¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pdfjsåœ¨ç§»åŠ¨ç«¯é¢„è§ˆpdf</title>
      <link href="/2021/09/16/pdfjs-dist/"/>
      <url>/2021/09/16/pdfjs-dist/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><a href="https://github.com/mozilla/pdf.js">pdfjsä¼ é€é—¨</a><br>pdfjs + vue ç§»åŠ¨ç«¯ è¸©å‘è®°å½•ï¼Œè¿™ä¸ªé—®é¢˜é‡åˆ°è¿‡å¾ˆå¤šæ¬¡ï¼Œç‰¹æ­¤è®°å½•ã€‚</p><h2 id="æˆåŠŸè§£å†³æ–¹æ¡ˆ"><a href="#æˆåŠŸè§£å†³æ–¹æ¡ˆ" class="headerlink" title="æˆåŠŸè§£å†³æ–¹æ¡ˆ"></a>æˆåŠŸè§£å†³æ–¹æ¡ˆ</h2><ol><li><p>å»pdfjsçš„<a href="https://github.com/mozilla/pdf.js">GitHubåœ°å€</a>æŠŠä»£ç æ‹‰ä¸‹æ¥ï¼›</p></li><li><p>æ²¡æœ‰glupçš„ç¯å¢ƒéœ€è¦å®‰è£…ä¸€ä¸‹gulp:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g gulp-cli</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…é¡¹ç›®ä¾èµ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install </span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæœåŠ¡,è¿è¡Œä¹‹åæ‰“å¼€åœ°å€<code>http://localhost:8888/web/viewer.html</code>ï¼›</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp server</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°pdfjsåº“æœ¬èº«examplesæ–‡ä»¶å¤¹ä¸‹æä¾›äº†å¾ˆå¤šçš„ä¾‹å­ï¼Œéƒ½å¯ä»¥é¢„è§ˆçœ‹çœ‹ï¼Œè‡ªå·±æƒ³è¦ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬ï¼›</p></li><li><p>æ‰“åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp generic-legacy</span><br></pre></td></tr></table></figure><p>æ‰“åŒ…ä¹‹å<code>build/generic-legacy</code>ä¸‹é¢å°±æ˜¯æ‰“åŒ…åçš„å†…å®¹ï¼›</p></li><li><p>å°†<code>generic-legacy</code>æ–‡ä»¶å¤¹æ‹·è´åˆ°vueé¡¹ç›®é‡Œé¢ï¼Œæ”¾åˆ°publicç›®å½•ä¸‹ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œæ²¡å¿…è¦æ”¾åˆ°srcä¸‹ï¼Œä¸ç”¨æ‰“åŒ…åˆ°app.jsä¸­å¾’å¢é¡¹ç›®å¤§å°ã€é™ä½äº†æ€§èƒ½ï¼›ä¸Šçº¿ä¹‹å‰å¯ä»¥æŠŠ<code>generic-legacy</code>ä¸‹çš„ä»£ç éƒ½å‹ç¼©ä¸€ä¸‹~</p></li><li><p>æ–°å»ºä¸€ä¸ªvueæ–‡ä»¶ï¼Œç”¨æ¥é¢„è§ˆpdfï¼Œurléœ€è¦å¡«å†™ä¸ºå…·ä½“é¡¹ç›®çš„çš„å…·ä½“æ–‡ä»¶åœ°å€ï¼Œpdfçš„åœ°å€å¯ä»¥é€šè¿‡queryä¼ åˆ°å½“å‰é¡µé¢(pdfçš„åœ°å€å‚æ•°ï¼Œå…·ä½“é€»è¾‘å…·ä½“åˆ†æ)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"> &lt;template&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;viewPdf&quot;&gt;</span><br><span class="line">    &lt;iframe :src&#x3D;&quot;url&quot;&gt;&lt;&#x2F;iframe&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      url: &#39;&#39;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created: function() &#123;</span><br><span class="line">    let pdflink &#x3D; this.$route.query.url || &#39;&#39;;</span><br><span class="line">    this.url &#x3D; &#96;&#x2F;generic-legacy&#x2F;web&#x2F;viewer.html?file&#x3D;$&#123;pdflink&#125;&#96;;</span><br><span class="line">    console.log(&#39;------&#39; + this.url);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang&#x3D;&quot;less&quot;&gt;</span><br><span class="line">#viewPdf &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  background: #f5f5f5;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  iframe &#123;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    border: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>è¿™æ ·å°±èƒ½æ­£å¸¸çš„é¢„è§ˆäº†ï¼Œè€Œä¸”<code>Android</code>å’Œ<code>ios</code>ç«¯é¢„è§ˆéƒ½æ²¡æœ‰é—®é¢˜ï¼Œæµ‹è¯•ä½¿ç”¨40+é¡µçš„pdf,æ¸²æŸ“é€Ÿåº¦ä¹Ÿæ²¡æœ‰å¤ªæ…¢~</p></li></ol><h2 id="è¸©å‘å†å²"><a href="#è¸©å‘å†å²" class="headerlink" title="è¸©å‘å†å²"></a>è¸©å‘å†å²</h2><ol><li><p>åˆ‡å‹¿ä½¿ç”¨<code>examples</code>ä¸‹é¢çš„<code>mobile-viewer</code>,è¿™ä¸ª<code>mobile-viewer</code>çœŸçš„ä¸€ç‚¹éƒ½ä¸mobile~, ä½¿ç”¨ä¹‹åiosé¢„è§ˆæ˜¯æ­£å¸¸çš„ï¼Œåœ¨å¤§éƒ¨åˆ†Androidæ‰‹æœºä¹Ÿè¡Œï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸å°‘æ¯”ä¾‹çš„å®‰å“æ‰‹æœºä¸Špdfæ— æ³•loadingï¼Œå…¸å‹ä»£è¡¨ï¼šåä¸ºæ‰‹æœºé¸¿è’™ç³»ç»Ÿï¼›</p></li><li><p>pdfjsæœ€å¥½ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€å¼€å§‹ç”¨äº†ä¸€ä¸ªè€ç‰ˆæœ¬ï¼ˆç‰ˆæœ¬å·ä¸è¯¦ï¼Œè€é¡¹ç›®é‡Œçš„ï¼‰ï¼Œå¦‚æœpdfå­˜åœ¨åå°åŠ¨æ€å¡«å……æ•°æ®çš„æƒ…å†µï¼ŒAndroidæ‰‹æœºé¢„è§ˆæ­£å¸¸ï¼Œiosåˆ™ä¸€ç›´loadingï¼›</p></li><li><p>ä¹‹å‰åœ¨vueé¡¹ç›®ä¸­æœ‰ä½¿ç”¨<code>pdfjs-dist</code>åŒ…ï¼Œç„¶åæŒ‰ç…§<code>examples/webpack</code>ç‰ˆçš„ä¾‹å­é›†æˆåˆ°vueæ–‡ä»¶ä¸­ï¼Œpdfé¢„è§ˆæ­£å¸¸ï¼Œä½†æ˜¯æ–‡å­—æ˜¾ç¤ºéå¸¸ç³Šï¼Œå°±ç®—æ˜¯æ”¾å¤§ä¹Ÿçœ‹ä¸æ¸…å­—ï¼›pdfjsé»˜è®¤æ˜¯canvasæ¸²æŸ“ï¼Œæ¢æˆsvgçš„æ–¹å¼æ¸²æŸ“åç”»é¢æ¸…æ™°äº†ï¼Œéå®‹ä½“çš„å­—ä½“å´åˆæ˜¾ç¤ºä¸å‡ºæ¥ï¼æ¨ªç«–æ˜¯å„ç§å‘ï¼›åæ¥é€šè¿‡æŠŠcanvasç”»å¤§ä¸¤å€ï¼Œè§£å†³ç»˜ç”»æ¨¡ç³Šï¼Œä½†æ˜¯æ¸²æŸ“æ€§èƒ½å®åœ¨é¸¡è‚‹ï¼Œæœ€ç»ˆæ”¾å¼ƒè¯¥æ–¹æ¡ˆï¼</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pdfjs-dist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vant 375é€‚é…750é¡¹ç›®</title>
      <link href="/2021/09/01/vuxToVant/"/>
      <url>/2021/09/01/vuxToVant/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å¦‚æœè‡ªå·±çš„é¡¹ç›®æ˜¯æŒ‰ç…§750å°ºå¯¸åšçš„é€‚é…ï¼Œå¼•å…¥vantç»„ä»¶å°±ä¼šå‡ºç°ï¼Œç»„ä»¶çš„æ ·å¼éƒ½ç¼©å°ä¸€åŠçš„æƒ…å†µï¼›<br>githubçš„issuesé‡Œé¢å·²ç»æœ‰å°ä¼™ä¼´æè¿‡ç±»ä¼¼çš„é—®é¢˜<a href="https://github.com/youzan/vant/issues/1181">ä¼ é€é—¨</a></p><h3 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h3><p>æ”¹æ³•ï¼šåˆ©ç”¨<code>postcss-pxtorem</code>å¯¹é¡¹ç›®å’Œvantç»„ä»¶è¿›è¡ŒåŒºåˆ«é€‚é…ï¼Œä¿®æ”¹<code>postcss.config.js</code>æˆ–è€…<code>.postcssrc.js</code>é‡Œé¢çš„é…ç½®:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://github.com/michael-ciniawsky/postcss-load-config</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">&#123; file &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> rootValue;</span><br><span class="line">  <span class="comment">// vantç»„ä»¶ä½¿ç”¨37.5</span></span><br><span class="line">  <span class="keyword">if</span> (file &amp;&amp; file.dirname &amp;&amp; file.dirname.indexOf(<span class="string">&quot;vant&quot;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    rootValue = <span class="number">37.5</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    rootValue = <span class="number">75</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    plugins: &#123;</span><br><span class="line">      <span class="string">&quot;postcss-import&quot;</span>: &#123;&#125;,</span><br><span class="line">      <span class="string">&quot;postcss-pxtorem&quot;</span>: &#123;</span><br><span class="line">        rootValue: rootValue,</span><br><span class="line">        propList: [<span class="string">&quot;*&quot;</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;autoprefixer&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€‚é… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reacté¡¹ç›®npmåº“è®°å½•(æŒç»­æ›´æ–°ä¸­)</title>
      <link href="/2021/08/18/react-utils/"/>
      <url>/2021/08/18/react-utils/</url>
      
        <content type="html"><![CDATA[<h1 id="react-helmet"><a href="#react-helmet" class="headerlink" title="react-helmet"></a>react-helmet</h1><p>React Helmetæ˜¯ä¸€ä¸ªHTMLæ–‡æ¡£headç®¡ç†å·¥å…·ï¼Œç®¡ç†å¯¹æ–‡æ¡£å¤´çš„æ‰€æœ‰æ›´æ”¹; <a href="https://github.com/nfl/react-helmet/">ä¼ é€é—¨</a></p><h1 id="reselect"><a href="#reselect" class="headerlink" title="reselect"></a>reselect</h1><p><a href="https://segmentfault.com/a/1190000011936772">ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦reselect</a><br>Reselect æ˜¯ä¸€ä¸ª Redux çš„é€‰æ‹©å™¨åº“ï¼š</p><ul><li><p>Selector å¯ä»¥è®¡ç®—è¡ç”Ÿçš„æ•°æ®ï¼Œå¯ä»¥è®© Redux å­˜å‚¨å°½å¯èƒ½å°‘çš„ state ã€‚</p></li><li><p>Selector éå¸¸é«˜æ•ˆï¼Œé™¤éæŸä¸ªå‚æ•°å‘ç”Ÿå˜åŒ–ï¼Œå¦åˆ™ä¸ä¼šå‘ç”Ÿè®¡ç®—è¿‡ç¨‹ã€‚</p></li><li><p>Selector æ˜¯å¯ç»„åˆçš„ï¼Œå®ƒä»¬å¯ä»¥è¾“å…¥ã€ä¼ é€’åˆ°å…¶ä»–çš„é€‰æ‹©å™¨ã€‚</p></li></ul><h1 id="history"><a href="#history" class="headerlink" title="history"></a>history</h1><p> æ¶ˆé™¤å¹³å°å·®å¼‚çš„ä¸€ä¸ªhistoryåº“</p><h1 id="invariant"><a href="#invariant" class="headerlink" title="invariant"></a>invariant</h1><p>æ ¡éªŒåº“</p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React.memo()</title>
      <link href="/2021/08/03/reactMemo/"/>
      <url>/2021/08/03/reactMemo/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><code>React.memo()</code>æ˜¯ React çš„ä¸€ä¸ªé¡¶å±‚ API ä¸”ä¸ºé«˜é˜¶ç»„ä»¶ï¼Œå®ƒå¯¹ç»„ä»¶åšçš„äº‹ç±»ä¼¼äº<code>React.PureComponet</code>,ä¸åŒçš„æ˜¯ï¼š<code>React.memo()</code>æ˜¯å¯¹å‡½æ•°ç»„ä»¶è¿›è¡Œä¼˜åŒ–ï¼Œ<code>React.PureComponent</code>æ˜¯å®šä¹‰ç±»ç»„ä»¶ä½¿ç”¨çš„ï¼›</p><h2 id="React-Componentã€React-PureComponent"><a href="#React-Componentã€React-PureComponent" class="headerlink" title="React.Componentã€React.PureComponent"></a>React.Componentã€React.PureComponent</h2><p>äº†è§£<code>React.memo()</code>ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹<code>React.Component</code>ã€<code>React.PureComponent</code>è¿™ä¸¤ä¸ªç»„ä»¶ï¼Œåªè¦ç†è§£äº†è¿™ä¸¤ä¸ªç»„ä»¶<code>React.memo()</code>å°±èƒ½è‡ªç„¶è€Œç„¶çš„ get åˆ°äº†~</p><h3 id="React-Component"><a href="#React-Component" class="headerlink" title="React.Component"></a>React.Component</h3><p>è¿™é‡Œå¼•ç”¨ React å®˜æ–¹ä»‹ç»ï¼š<code>React.Component</code> æ˜¯ä½¿ç”¨ ES6 classes æ–¹å¼å®šä¹‰ React ç»„ä»¶çš„åŸºç±»ï¼›<br>åªè¦æ˜¯å†™ç±»ç»„ä»¶å°±éœ€è¦ç”¨åˆ°å®ƒï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Name</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="React-PureComponent"><a href="#React-PureComponent" class="headerlink" title="React.PureComponent"></a>React.PureComponent</h3><p><code>React.PureComponent</code>ä¸<code>React.Component</code>çš„åŒºåˆ«æ˜¯å†…éƒ¨å®ç°äº†<code>shouldComponentUpdate()</code>, ä¼šå¯¹ç»„ä»¶çš„ props å’Œ state è¿›è¡Œæµ…å±‚æ¯”è¾ƒï¼Œå¦‚æœæ¯”è¾ƒä¸‹æ¥æ•°æ®æ²¡æœ‰æ”¹å˜ï¼Œç»„ä»¶åˆ™ä¸ä¼šé‡å¤åˆ·æ–°ï¼›<br>ä¸¾ä¸ªä¾‹å­ï¼š</p><blockquote><p>å…ˆç”¨ React.Component å†™ä¸€ä¸ªå° demo:</p></blockquote><p><img src="/images/react/memo_5.png"></p><blockquote><p>ç„¶åæˆ‘ä»¬ç‚¹å‡» Add æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°ç‚¹å‡»ä¸€æ¬¡ dom å°±ä¼šé‡æ–°æ¸²æŸ“ä¸€æ¬¡ï¼š</p></blockquote><p><img src="/images/react/memo_3.png"></p><blockquote><p>ç„¶åå†æŠŠ state å›ºå®šè®¾ç½®ä¸º 1ï¼Œçœ‹çœ‹åœ¨æ•°æ®ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œdom æ˜¯å¦ä¼šé‡æ–°æ¸²æŸ“ï¼š</p></blockquote><p><img src="/images/react/memo_6.png"><br><img src="/images/react/memo_2.png"></p><blockquote><p>å¾ˆæ˜æ˜¾ï¼Œä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡ºä¸ç®¡ setState çš„å€¼æ˜¯å¦ç›¸åŒï¼Œdom éƒ½ä¼šæ— å·®åˆ«çš„æ›´æ–°ï¼Œé¡¹ç›®ä¸€æ—¦åºå¤§èµ·æ¥æ€§èƒ½å°±ä¼šå­˜åœ¨å¾ˆå¤§çš„é—®é¢˜ï¼›ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œreact æä¾›äº† React.PureComponentï¼›</p></blockquote><p>ä¸‹é¢è®©æˆ‘ä»¬æŠŠ demo å°å°çš„ä¿®æ”¹ä¸€ä¸‹ï¼š</p><p><img src="/images/react/memo_8.png"></p><blockquote><p>è¿™ä¸ªæ—¶å€™ç‚¹å‡» Add æŒ‰é’®ï¼Œç‚¹å‡»å†å¤šæ¬¡ï¼Œåªè¦ setState çš„å€¼æ˜¯ä¸€æ ·çš„å°±åªä¼šè§¦å‘ä¸€æ¬¡æ›´æ–°ï¼Œé¿å…äº†æ€§èƒ½çš„æµªè´¹ï¼›</p></blockquote><p><img src="/images/react/memo_1.png"></p><p>ä½¿ç”¨ <code>React.PureComponent</code>ä¸»è¦æ³¨æ„çš„ç‚¹ï¼š</p><ol><li>React.PureComponent ä¸­çš„ shouldComponentUpdate() ä»…ä½œå¯¹è±¡çš„æµ…å±‚æ¯”è¾ƒï¼›</li><li>å¦‚æœæ•°æ®ç»“æ„å¾ˆå¤æ‚ï¼Œå¯èƒ½ä¼šäº§ç”Ÿé”™è¯¯ç»“æœï¼›</li></ol><h2 id="React-memo"><a href="#React-memo" class="headerlink" title="React.memo()"></a>React.memo()</h2><p>è¿™é‡Œå¼•ç”¨reactå®˜ç½‘çš„åŸæ–‡ï¼š</p><ol><li>å¦‚æœä½ çš„ç»„ä»¶åœ¨ç›¸åŒ props çš„æƒ…å†µä¸‹æ¸²æŸ“ç›¸åŒçš„ç»“æœï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡å°†å…¶åŒ…è£…åœ¨ React.memo ä¸­è°ƒç”¨ï¼Œä»¥æ­¤é€šè¿‡è®°å¿†ç»„ä»¶æ¸²æŸ“ç»“æœçš„æ–¹å¼æ¥æé«˜ç»„ä»¶çš„æ€§èƒ½è¡¨ç°ã€‚è¿™æ„å‘³ç€åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒReact å°†è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœã€‚</li><li>React.memo <code>ä»…æ£€æŸ¥ props</code> å˜æ›´ã€‚å¦‚æœå‡½æ•°ç»„ä»¶è¢« React.memo åŒ…è£¹ï¼Œä¸”å…¶å®ç°ä¸­æ‹¥æœ‰ useStateï¼ŒuseReducer æˆ– useContext çš„ Hookï¼Œå½“ context å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä»ä¼šé‡æ–°æ¸²æŸ“ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹å…¶åªä¼šå¯¹å¤æ‚å¯¹è±¡åšæµ…å±‚å¯¹æ¯”ï¼Œå¦‚æœä½ æƒ³è¦<code>æ§åˆ¶å¯¹æ¯”è¿‡ç¨‹</code>ï¼Œé‚£ä¹ˆè¯·å°†è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°é€šè¿‡<code>ç¬¬äºŒä¸ªå‚æ•°</code>ä¼ å…¥æ¥å®ç°ã€‚</li></ol><p>ä»¥ä¸Šå¯¹React.memoçš„è®²è§£å·²ç»è¶³å¤Ÿæ¸…æ™°äº†~</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* ä½¿ç”¨ props æ¸²æŸ“ */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">areEqual</span>(<span class="params">prevProps, nextProps</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  å¦‚æœæŠŠ nextProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸</span></span><br><span class="line"><span class="comment">  å°† prevProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸€è‡´åˆ™è¿”å› trueï¼Œ</span></span><br><span class="line"><span class="comment">  å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> React.memo(MyComponent, areEqual);</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬å†æŠŠä¸Šé¢ç‚¹å‡»æŒ‰é’®çš„å°demoæ”¹ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test: React.FC&lt;IObjectProps&gt; = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> [count, setCount] = useState(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> addHandle = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå›ºå®šè®¾ç½®countçš„å€¼ä¸º1</span></span><br><span class="line">    setCount(<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div style=&#123;&#123; <span class="attr">padding</span>: <span class="string">&#x27;10px&#x27;</span> &#125;&#125;&gt;</span><br><span class="line">      &#123;<span class="built_in">console</span>.log(<span class="string">&#x27;dom æ¸²æŸ“&#x27;</span>)&#125;</span><br><span class="line">      &lt;p&gt;&#123;count&#125;&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;addHandle&#125;&gt;Add&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨React.memoåŒ…è£¹ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> React.memo(Test)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™åªä¼šåœ¨countçš„å€¼ç”±0å˜ä¸º1çš„æ—¶å€™è§¦å‘ <code>console.log(&#39;dom æ¸²æŸ“&#39;)</code>, å½“countå€¼ä¸º1å†å»è®¾ç½®æˆ1çš„æ—¶å€™ï¼Œç»„ä»¶å°±ä¸ä¼šå†é‡å¤çš„åˆ·æ–°äº†~</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>React.memo()</code>å‡å°‘å‡½æ•°ç»„ä»¶çš„æ— ç”¨æ¸²æŸ“ï¼Œä¸ºReactå‡½æ•°ç»„ä»¶æ€§èƒ½ä¼˜åŒ–æä¾›äº†ä¸€ä¸ªæœ‰æ•ˆçš„æ–¹æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> memo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰hooks</title>
      <link href="/2021/07/29/react-hooks/"/>
      <url>/2021/07/29/react-hooks/</url>
      
        <content type="html"><![CDATA[<h3 id="è‡ªå®šä¹‰-hooks-è®°å½•"><a href="#è‡ªå®šä¹‰-hooks-è®°å½•" class="headerlink" title="è‡ªå®šä¹‰ hooks è®°å½•"></a>è‡ªå®šä¹‰ hooks è®°å½•</h3><blockquote><p>è®°å½•ä¸€ä¸‹å¸¸ç”¨çš„è‡ªå®šä¹‰ hook~~~</p></blockquote><h3 id="useForceUpdate"><a href="#useForceUpdate" class="headerlink" title="useForceUpdate"></a>useForceUpdate</h3><blockquote><p>å½“æˆ‘ä»¬ä½¿ç”¨<code>React.PureComponent</code>å®šä¹‰ç±»ç»„ä»¶çš„æ—¶å€™ï¼Œå› ä¸º<code>React.PureComponent</code>åªæ˜¯å¯¹æ•°æ®åšæµ…æ¯”è¾ƒï¼Œå½“æ•°æ®ç»“æ„éå¸¸å¤æ‚çš„æƒ…å†µåˆ™å¯èƒ½å‡ºç°æ•°æ®æ›´æ–°é¡µé¢ä¸æ›´æ–°çš„æƒ…å†µï¼Œreact æä¾›äº†ä¸€ä¸ª<code>forceupdate</code>æ–¹æ³•ç”¨æ¥æ‰‹åŠ¨é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œè€Œå‡½æ•°ç»„ä»¶æ˜¯æ²¡æœ‰è¿™ä¸ªæ–¹æ³•çš„ï¼Œå¦‚æœä¹Ÿæƒ³è¦å®ç°æ‰‹åŠ¨åˆ·æ–°ç»„ä»¶å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ hook çš„æ–¹æ³•å»å®ç°ï¼›</p></blockquote><p>ä»¥ä¸‹è®°å½•äº†ä¸¤ç§å®ç° useForceUpdate è‡ªå®šä¹‰ hook çš„æ–¹æ³•ï¼š</p><h4 id="useState-ç‰ˆ"><a href="#useState-ç‰ˆ" class="headerlink" title="useState ç‰ˆ"></a>useState ç‰ˆ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useCallback &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰hook æ¨¡æ‹Ÿç±»ç»„ä»¶çš„forceUpdate</span></span><br><span class="line"><span class="comment"> * å†™æ³•ä¸€ åˆ©ç”¨uesState</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> useForceUpdate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>): <span class="title">Function</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [, setCount] = useState &lt; number &gt; <span class="number">0</span></span><br><span class="line">  <span class="keyword">const</span> update = useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setCount((prev: number): <span class="function"><span class="params">number</span> =&gt;</span> prev + <span class="number">1</span>)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> update</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useForceUpdate</span><br></pre></td></tr></table></figure><h4 id="useReducer-ç‰ˆ"><a href="#useReducer-ç‰ˆ" class="headerlink" title="useReducer ç‰ˆ"></a>useReducer ç‰ˆ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰hook æ¨¡æ‹Ÿç±»ç»„ä»¶çš„forceUpdate</span></span><br><span class="line"><span class="comment"> * å†™æ³•ä¸€ åˆ©ç”¨useReducer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> useForceUpdate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>): <span class="title">Function</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [, forceUpdate] = useReducer((v: number): <span class="function"><span class="params">number</span> =&gt;</span> v + <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">return</span> forceUpdate</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useForceUpdate</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–updater</span></span><br><span class="line"><span class="keyword">const</span> updater = useForceUpdate()</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨åˆ·æ–°æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> handleRefresh = ():<span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  updater()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button onClick=&#123;handleRefresh&#125;&gt;refresh&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;)</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="useClientRect"><a href="#useClientRect" class="headerlink" title="useClientRect"></a>useClientRect</h3><blockquote><p>åŠ¨æ€è·å–å…ƒç´ å¤§å°çš„è‡ªå®šä¹‰ hook</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  useRef,</span><br><span class="line">  useState,</span><br><span class="line">  useCallback,</span><br><span class="line">  RefObject,</span><br><span class="line">  useLayoutEffect</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> debounce <span class="keyword">from</span> <span class="string">&#x27;lodash/debounce&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CLIENT_RECT_DEBOUNCE_INTERVAL = <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŠ¨æ€è·å–å…ƒç´ å¤§å°çš„è‡ªå®šä¹‰hook</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>debounceInterval  é˜²æŠ–é¢‘ç‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="variable">realtime</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useClientRect</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">HTMLElement</span>&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  debounceInterval: number = CLIENT_RECT_DEBOUNCE_INTERVAL,</span></span></span><br><span class="line"><span class="function"><span class="params">  realtime: boolean = <span class="literal">false</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): [<span class="title">DOMRect</span>, <span class="title">RefObject</span>&lt;<span class="title">T</span>&gt;] </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> ref = useRef&lt;T&gt;(<span class="literal">null</span>)</span><br><span class="line">  <span class="comment">// @ts-ignore</span></span><br><span class="line">  <span class="keyword">const</span> [rect, setRect] = useState&lt;DOMRect&gt;(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> resize = useCallback(</span><br><span class="line">    debounce(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (ref.current) &#123;</span><br><span class="line">        setRect(ref.current.getBoundingClientRect())</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, debounceInterval),</span><br><span class="line">    [ref.current, realtime]</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  useLayoutEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!ref.current) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    resize()</span><br><span class="line">    <span class="comment">// ResizeObserver æ¥å£å¯ä»¥ç›‘å¬åˆ° Element çš„å†…å®¹åŒºåŸŸæˆ– SVGElementçš„è¾¹ç•Œæ¡†æ”¹å˜</span></span><br><span class="line">    <span class="comment">// åªä¼šåœ¨ç»˜åˆ¶å‰æˆ–å¸ƒå±€åè§¦å‘è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> ResizeObserver === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// å¼€å§‹è§‚å¯ŸæŒ‡å®šçš„ Elementæˆ– SVGElementã€‚</span></span><br><span class="line">      <span class="keyword">let</span> resizeObserver = <span class="keyword">new</span> ResizeObserver(resize)</span><br><span class="line">      resizeObserver.observe(ref.current)</span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        resizeObserver.disconnect()</span><br><span class="line">        <span class="comment">// @ts-ignore</span></span><br><span class="line">        resizeObserver = <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;resize&#x27;</span>, resize)</span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;resize&#x27;</span>, resize)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [ref.current])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [rect, ref]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useClientRect</span><br><span class="line"></span><br><span class="line"><span class="comment">// refs: https://github.com/rehooks/component-size/blob/master/index.js</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// è‡ªåŠ¨è®¡ç®—å…ƒç´ çš„getBoundingClientRectå€¼ demo</span></span><br><span class="line"><span class="keyword">const</span> [rect, refBackground] = useClientRect&lt;HTMLDivElement&gt;()</span><br><span class="line"></span><br><span class="line">useEffect((): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line"> <span class="comment">// å…ƒç´ æ•°æ®å˜åŒ–æ‰“å°</span></span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;rect&#x27;</span>,rect)</span><br><span class="line">&#125;, [rect])</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line">  &lt;div ref=&#123;refBackground&#125; className=&#123;style.box&#125;&gt; éœ€è¦ç›‘å¬çš„å…ƒç´  &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> hooks </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€æ˜“ç‰ˆreact-router</title>
      <link href="/2021/07/22/react-router-dom/"/>
      <url>/2021/07/22/react-router-dom/</url>
      
        <content type="html"><![CDATA[<ul><li><p><a href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87">å­¦ä¹ ç›®æ ‡</a></p></li><li><p><a href="#%E4%BD%BF%E7%94%A8demo">ä½¿ç”¨ demo</a></p></li><li><p><a href="#react-router%E7%AE%80%E4%BB%8B">react-router ç®€ä»‹</a></p></li><li><p><a href="#%E5%AE%9E%E7%8E%B0">å®ç°</a></p><ul><li><a href="#BrowserRouter">BrowserRouter</a></li><li><a href="#HashRouter">HashRouter</a></li><li><a href="#Router">Router</a></li><li><a href="#Route">Route</a></li><li><a href="#Link">Link</a></li><li><a href="#Switch">Switch</a></li><li><a href="#Redirect">Redirect</a></li><li><a href="#hooks">hooks</a></li><li><a href="#Prompt">Prompt</a></li><li><a href="#WithRouter">WithRouter</a></li><li><a href="#MemoryRouter">MemoryRouter</a></li></ul></li><li><p><a href="#%E5%85%B6%E4%BB%96%E7%BB%84%E4%BB%B6">å…¶ä»–ç»„ä»¶</a></p><ul><li><a href="#RouterContext">RouterContext</a></li><li><a href="#LifeCycle">LifeCycle</a></li><li><a href="#matchpath">matchpath</a></li></ul></li></ul><h2 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h2><p><a name="å­¦ä¹ ç›®æ ‡"></a></p><blockquote><p>é€šè¿‡å¯¹ react-router çš„å­¦ä¹ å’Œè‡ªå·±å®ç°å…¶æ ¸å¿ƒåŠŸèƒ½ï¼Œæ›´åŠ æ·±åº¦çš„æŒæ¡ react-router çš„ä½¿ç”¨å’ŒåŸç†ï¼Œä»¥è¾¾åˆ°æ—¥å¸¸é‡åˆ°ç›¸å…³é—®é¢˜å¯ä»¥ä»æºç è§’åº¦å¿«é€Ÿå®šä½é—®é¢˜å¹¶è§£å†³é—®é¢˜ï¼›(è®°ç¬”è®°è¡Œä¸ºï¼Œä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œä»£ç è§£é‡Šå‡åœ¨æ³¨é‡Šé‡Œ)</p></blockquote><h2 id="react-router-ç®€ä»‹"><a href="#react-router-ç®€ä»‹" class="headerlink" title="react-router ç®€ä»‹"></a>react-router ç®€ä»‹</h2><p><a name="react-routerç®€ä»‹"></a></p><blockquote><p>react-router åŒ…å« 3 ä¸ªåº“ï¼Œreact-routerã€react-router-dom å’Œ react-router-nativeã€‚react-router æä¾› æœ€åŸºæœ¬çš„è·¯ç”±åŠŸèƒ½ï¼Œå®é™…ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬ä¸ä¼šç›´æ¥å®‰è£… react-routerï¼Œè€Œæ˜¯æ ¹æ®åº”ç”¨è¿è¡Œçš„ç¯å¢ƒé€‰æ‹©å®‰ è£… react-router-dom(åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨)æˆ– react-router-native(åœ¨ rn ä¸­ä½¿ç”¨)ã€‚react-router-dom å’Œ react-router-native éƒ½ä¾èµ– react-routerï¼Œæ‰€ä»¥åœ¨å®‰è£…æ—¶ï¼Œreact-router ä¹Ÿä¼šè‡ªåŠ¨å®‰è£…ã€‚</p></blockquote><h2 id="ä½¿ç”¨-demo"><a href="#ä½¿ç”¨-demo" class="headerlink" title="ä½¿ç”¨ demo"></a>ä½¿ç”¨ demo</h2><p><a name="ä½¿ç”¨demo"></a></p><blockquote><ol><li>åˆ›å»º<code>HomePage</code>ã€<code>LoginPage</code>ã€<code>UserPage</code>ã€<code>_404Page</code>å››ä¸ªé¡µé¢ï¼›</li><li>ç„¶ååœ¨ App é¡µé¢å¼•å…¥å¹¶ä½¿ç”¨ï¼Œå†™ä¸€ä¸ªç®€å•çš„ä½¿ç”¨ä¾‹å­ï¼›</li></ol></blockquote><p>é¡µé¢æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/images/react/react-router-blog_2.png" alt="å›¾ä¸€ å››ä¸ªè·³è½¬ï¼Œç‚¹å‡»è·³è½¬ç›¸åº”é¡µé¢"><br><img src="/images/react/react-router-blog_1.png" alt="å›¾äºŒ æµ‹è¯•Promptï¼Œç‚¹å‡»â€˜go homeâ€™æŒ‰é’®è·³å‡ºæç¤º"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  Switch,</span><br><span class="line">  useHistory,</span><br><span class="line">  useLocation,</span><br><span class="line">  useRouteMatch,</span><br><span class="line">  useParams,</span><br><span class="line">  withRouter,</span><br><span class="line">  Redirect,</span><br><span class="line">  Prompt,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./my-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> HomePage <span class="keyword">from</span> <span class="string">&#x27;./pages/HomePage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> UserPage <span class="keyword">from</span> <span class="string">&#x27;./pages/UserPage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> LoginPage <span class="keyword">from</span> <span class="string">&#x27;./pages/LoginPage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> _404Page <span class="keyword">from</span> <span class="string">&#x27;./pages/_404Page&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;Router&gt;</span><br><span class="line">        &lt;Link to=<span class="string">&quot;/&quot;</span>&gt;é¦–é¡µ&lt;/Link&gt;</span><br><span class="line">        &lt;Link to=<span class="string">&quot;/user&quot;</span>&gt;ç”¨æˆ·ä¸­å¿ƒ&lt;/Link&gt;</span><br><span class="line">        &lt;Link to=<span class="string">&quot;/login&quot;</span>&gt;ç™»å½•&lt;/Link&gt;</span><br><span class="line">        &lt;Link to=<span class="string">&quot;/product/123&quot;</span>&gt;å•†å“&lt;/Link&gt;</span><br><span class="line"></span><br><span class="line">        &#123;<span class="comment">/*Switch ç‹¬å è·¯ç”±ï¼š è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„routeæˆ–è€…redirect  */</span>&#125;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &#123;<span class="comment">/* children &gt; component &gt; render */</span>&#125;</span><br><span class="line">          &lt;Route</span><br><span class="line">            path=<span class="string">&quot;/&quot;</span></span><br><span class="line">            exact</span><br><span class="line">            <span class="comment">// children=&#123;children&#125;</span></span><br><span class="line">            component=&#123;HomePage&#125;</span><br><span class="line">            <span class="comment">// render=&#123;render&#125;</span></span><br><span class="line">          &gt;&lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/user&quot;</span> exact component=&#123;UserPage&#125; /&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/login&quot;</span> exact component=&#123;LoginPage&#125; /&gt;</span><br><span class="line">          &#123;<span class="comment">/* åŠ¨æ€è·¯ç”± æµ‹è¯• */</span>&#125;</span><br><span class="line">          &lt;Route</span><br><span class="line">            path=<span class="string">&quot;/product/:id&quot;</span></span><br><span class="line">            component=&#123;Product&#125;</span><br><span class="line">            <span class="comment">// render=&#123;(props) =&gt; &lt;Product &#123;...props&#125; /&gt;&#125;</span></span><br><span class="line">          /&gt;</span><br><span class="line">          &lt;Route component=&#123;_404Page&#125; /&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/Router&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æµ‹è¯•å‡½æ•°ç»„ä»¶ä½¿ç”¨ */</span></span><br><span class="line"><span class="comment">// function Product() &#123;</span></span><br><span class="line"><span class="comment">//   // const histroy= useHistory();</span></span><br><span class="line"><span class="comment">//   // const location= useLocation();</span></span><br><span class="line"><span class="comment">//   const match = useRouteMatch()</span></span><br><span class="line"><span class="comment">//   const &#123; url &#125; = match</span></span><br><span class="line"><span class="comment">//   const &#123; id &#125; = useParams()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//   return (</span></span><br><span class="line"><span class="comment">//     &lt;div&gt;</span></span><br><span class="line"><span class="comment">//       &lt;h1&gt;Search-&#123;id&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">//       &lt;Link to=&#123;url + &#x27;/detail&#x27;&#125;&gt;è¯¦æƒ…&lt;/Link&gt;</span></span><br><span class="line"><span class="comment">//       &lt;Route path=&#123;url + &#x27;/detail&#x27;&#125; component=&#123;Detail&#125; /&gt;</span></span><br><span class="line"><span class="comment">//     &lt;/div&gt;</span></span><br><span class="line"><span class="comment">//   )</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æµ‹è¯•ç±»ç»„ä»¶ä½¿ç”¨ */</span></span><br><span class="line">@withRouter</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.state = &#123; <span class="attr">confirm</span>: <span class="literal">true</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Product&#x27;</span>, <span class="built_in">this</span>.props) <span class="comment">//sy-log</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;Product&lt;/h3&gt;</span><br><span class="line">        &lt;Link to=<span class="string">&quot;/&quot;</span>&gt; go home &lt;/Link&gt;</span><br><span class="line">        &#123;<span class="comment">/*æµ‹è¯• Prompt messageå¯ä»¥ä¼ å…¥å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥å‡½æ•° */</span>&#125;</span><br><span class="line">        &lt;Prompt</span><br><span class="line">          when=&#123;<span class="built_in">this</span>.state.confirm&#125;</span><br><span class="line">          message=<span class="string">&quot;é‚£æˆ‘èµ°?&quot;</span></span><br><span class="line">          <span class="comment">// message=&#123;(location) =&gt; &#123;</span></span><br><span class="line">          <span class="comment">//   return &quot;ä½ ç¡®å®šè¦ç¦»å¼€é¡µé¢å—&quot;;</span></span><br><span class="line">          <span class="comment">// &#125;&#125;</span></span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Detail</span>(<span class="params">&#123; match &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;detail&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•routeæ¸²æŸ“é¡ºåºä½¿ç”¨</span></span><br><span class="line"><span class="comment">// children  &gt; component &gt; render</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">children</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;children props&#x27;</span>, props) <span class="comment">//sy-log</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>children<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;render props&#x27;</span>, props) <span class="comment">//sy-log</span></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>render<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p><a name="å®ç°"></a></p><h3 id="BrowserRouter"><a href="#BrowserRouter" class="headerlink" title="BrowserRouter"></a>BrowserRouter</h3><p><a name="BrowserRouter"></a></p><blockquote><p><BrowserRouter> ä½¿ç”¨ HTML5 æä¾›çš„ <code>history API</code> ( <code>pushState</code> , <code>replaceState</code> å’Œ <code>popstate</code> äº‹ä»¶) æ¥ä¿æŒ UI å’Œ URL çš„åŒæ­¥ã€‚<br><code>react-router</code>ä½¿ç”¨çš„æ˜¯ <a href="https://github.com/ReactTraining/history#readme"><code>history</code></a> è¿™ä¸ªåº“æ¥è¿›è¡Œè·¯ç”±çš„å¤„ç†ï¼Œæä¾›äº†æ“ä½œè·¯ç”±çš„<a href="https://github.com/ReactTraining/history/blob/master/docs/api-reference.md">API</a>å¹¶å¸®æˆ‘ä»¬æŠ¹å¹³äº†å¹³å°å·®å¼‚ï¼Œå¯ä»¥å¾ˆæ”¾å¿ƒçš„ä½¿ç”¨</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createBrowserHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;history&#x27;</span> <span class="comment">// è¯¥åº“ä¸ºæµè§ˆå™¨æŠ¹å¹³å¹³å°å·®å¼‚</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;./Router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BrowserRouter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="comment">// åˆ›å»º history</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ä»€ä¹ˆè·¯ç”±æ¨¡å¼åœ¨è¿™é‡Œæ§åˆ¶ ç„¶åé€šè¿‡contextä¼ ä¸ªå­çº§</span></span><br><span class="line">    <span class="built_in">this</span>.history = createBrowserHistory()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">history</span>=<span class="string">&#123;this.history&#125;</span> <span class="attr">children</span>=<span class="string">&#123;this.props.children&#125;</span> /&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> BrowserRouter</span><br></pre></td></tr></table></figure><h3 id="HashRouter"><a href="#HashRouter" class="headerlink" title="HashRouter"></a>HashRouter</h3><p><a name="HashRouter"></a></p><blockquote><p><HashRouter> ä½¿ç”¨ URL çš„ <code>hash</code> éƒ¨åˆ†(å³ <code>window.location.hash</code> )æ¥ä¿æŒ UI å’Œ URL çš„åŒæ­¥ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;history&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;./Router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BrowserRouter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.history = createHashHistory()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">history</span>=<span class="string">&#123;this.history&#125;</span> <span class="attr">children</span>=<span class="string">&#123;this.props.children&#125;</span> /&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> BrowserRouter</span><br></pre></td></tr></table></figure><h3 id="Router"><a href="#Router" class="headerlink" title="Router"></a>Router</h3><p><a name="Router"></a></p><blockquote><p>Router ç»„ä»¶çš„ä½œç”¨æ˜¯å°†çˆ¶çº§çš„è·¯ç”±æ¨¡å¼ä¼ ç»™ Switchã€Routerã€Redirect ç­‰å­ç»„ä»¶ï¼Œå¹¶ç›‘å¬è·¯ç”±å˜åŒ–ä¸”åˆ·æ–°é¡µé¢ï¼›</p><ol><li>é€šè¿‡<code>Context</code>è¿›è¡Œå­çˆ¶ç»„ä»¶æ•°æ®çš„ä¼ é€’ï¼›</li><li>é€šè¿‡<code>history.listen</code>ç›‘å¬è·¯ç”±ï¼Œå¹¶åœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆç›‘å¬ï¼›</li><li><code>location</code>å­˜åœ¨<code>state</code>ä¸­ï¼Œåˆ©ç”¨<code>setState</code>æ”¹å˜å€¼ä¼šåˆ·æ–°é¡µé¢è¾¾åˆ°é‡æ–°æ¸²æŸ“é¡µé¢çš„æ•ˆæœï¼›</li><li><code>match</code>æ˜¯å¯¹<code>location.pathname</code>å’Œ<code>Route</code>ç»„ä»¶é…ç½®çš„<code>path</code>å±æ€§åšåŒ¹é…çš„ç»“æœï¼Œ<code>Router</code>ç»„ä»¶ä¸­å°†<code>match</code>è®¾ç½®é»˜è®¤åŒ¹é…æ ¹ç›®å½•ï¼Œé¡µé¢é»˜è®¤é¦–å…ˆæ¸²æŸ“æ ¹ç›®å½•åŒ¹é…çš„ç»„ä»¶ï¼›</li><li>å…¶ä¸­<code>RouterContext</code>ä½ç½®åœ¨ä»£ç åœ¨ç›®å½• &gt; å…¶ä»–ç»„ä»¶ &gt; RouterContextï¼›</li></ol></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> RouterContext <span class="keyword">from</span> <span class="string">&#x27;./RouterContext.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨ä»€ä¹ˆè·¯ç”±æ¨¡å¼ ç”±çˆ¶çº§å†³å®š BrowserRouter HashRouter MemoryRouter</span></span><br><span class="line"><span class="comment">// Router éœ€è¦åšçš„æ˜¯æ‹¿åˆ°çˆ¶çº§ä¼ æ¥çš„history å¹¶å¯¹è·¯ç”±å˜åŒ–åšç›‘å¬</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Router</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// èµ‹ä¸€ä¸ªåˆå§‹å€¼</span></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">computeRootMatch</span>(<span class="params">pathname</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      url: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      params: &#123;&#125;,</span><br><span class="line">      isExact: pathname === <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      location: props.history.location, <span class="comment">// è®°å½•ä¸€ä¸‹å½“å‰çš„location ä¸ºç›‘å¬locationçš„å˜åŒ–åšå‡†å¤‡</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬è·¯ç”±çš„å˜åŒ–ï¼Œ</span></span><br><span class="line">    <span class="built_in">this</span>.unlisten = props.history.listen(<span class="function">(<span class="params">location</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123; location &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// ç»„ä»¶å¸è½½ å…³æ‰ç›‘å¬</span></span><br><span class="line">    <span class="built_in">this</span>.unlisten()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;RouterContext.Provider</span><br><span class="line">        value=&#123;&#123;</span><br><span class="line">          history: <span class="built_in">this</span>.props.history,</span><br><span class="line">          location: <span class="built_in">this</span>.state.location,</span><br><span class="line">          match: Router.computeRootMatch(<span class="built_in">this</span>.state.location.pathname),</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.children&#125;</span><br><span class="line">      &lt;/RouterContext.Provider&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Router</span><br></pre></td></tr></table></figure><h3 id="Route"><a href="#Route" class="headerlink" title="Route"></a>Route</h3><p><a name="Route"></a></p><blockquote><ol><li>Route ç»„ä»¶ä¸»è¦ä½œç”¨æ˜¯å¯¹<code>location.pathname</code>å’Œ<code>props.path</code>åšåŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ°å°±è¿”å›<code>match</code>çš„å€¼ï¼Œå¦‚æœæ²¡åŒ¹é…åˆ° match ä¸º nullï¼›</li><li>å¦‚æœ<code>path</code>ä¸å­˜åœ¨ï¼Œåˆ™ Router ä¼ ä¸‹æ¥çš„<code>context.match</code>ä½œä¸ºé»˜è®¤å€¼ï¼Œè¿™æ ·ä¿è¯ match å­˜åœ¨æ‰èƒ½æ¸²æŸ“è¿™ä¸ªæ²¡æœ‰<code>path</code>çš„ç»„ä»¶,ä¾‹å¦‚ 404 é¡µé¢ï¼›</li><li>Route ç»„ä»¶æœ€é‡è¦çš„æ˜¯å¯¹ childrenã€componentã€render ä¸‰ä¸ªå±æ€§çš„æ¸²æŸ“è§„åˆ™ï¼Œè¯¦ç»†è§„åˆ™å†™åœ¨äº†ä»£ç æ³¨é‡Šé‡Œï¼Œè¯·ç›´æ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼›</li><li>å…¶ä¸­çš„<code>matchpath</code>æ˜¯å¯¹locationå’ŒpathåšåŒ¹é…çš„å‡½æ•°ï¼Œä»£ç åœ¨ç›®å½• &gt; å…¶ä»–ç»„ä»¶ &gt; matchpathï¼›</li></ol></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> RouterContext <span class="keyword">from</span> <span class="string">&#x27;./RouterContext&#x27;</span></span><br><span class="line"><span class="keyword">import</span> matchPath <span class="keyword">from</span> <span class="string">&#x27;./matchPath&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Route</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;RouterContext.Consumer&gt;</span><br><span class="line">        &#123;<span class="function">(<span class="params">context</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; location &#125; = context</span><br><span class="line">          <span class="keyword">const</span> &#123; path, children, component, render &#125; = <span class="built_in">this</span>.props</span><br><span class="line">          <span class="comment">// 1.è·¯ç”±çš„åŒ¹é…</span></span><br><span class="line">          <span class="comment">// Public API for matching a URL pathname to a path.</span></span><br><span class="line">          <span class="comment">// 404é¡µé¢æ²¡æœ‰path å°±ä½¿ç”¨ä¸Šçº§ä¼ æ¥çš„é»˜è®¤match</span></span><br><span class="line">          <span class="keyword">const</span> match = path</span><br><span class="line">            ? matchPath(location.pathname, <span class="built_in">this</span>.props)</span><br><span class="line">            : context.match</span><br><span class="line"></span><br><span class="line">          <span class="comment">// ä¼ ç»™ç»„ä»¶çš„props router-dom æŠŠhistoryã€locationç­‰è·¯ç”±çš„æ•°æ®ä¼ ç»™ç»„ä»¶</span></span><br><span class="line">          <span class="keyword">const</span> props = &#123;</span><br><span class="line">            ...context,</span><br><span class="line">            location,</span><br><span class="line">            match,</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;match&#x27;</span>, match)</span><br><span class="line">          <span class="comment">// ç»„ä»¶çš„ä¸¥æ ¼åŒ¹é…</span></span><br><span class="line">          <span class="comment">// return match? React.createElement(component) :null</span></span><br><span class="line">          <span class="comment">// match children &gt; component &gt; render &gt; null</span></span><br><span class="line">          <span class="comment">// no match : children(function) &gt; null</span></span><br><span class="line">          <span class="comment">// è¯¦ç»†è§£æ: 1. å…ˆåˆ¤æ–­matchæ˜¯å¦å­˜åœ¨ï¼ˆå­˜åœ¨åˆ™æ‰¾åˆ°äº†è·¯ç”±å¯¹åº”çš„ç»„ä»¶ï¼‰ï¼Œ</span></span><br><span class="line">          <span class="comment">// 2. å­˜åœ¨çš„è¯æŸ¥æ‰¾childrenå±æ€§æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼šåˆ¤æ–­childrençš„ç±»å‹æ˜¯å¦æ˜¯å‡½æ•°å½¢å¼ï¼Œå¦‚æœæ˜¯å‡½æ•°å½¢å¼éœ€è¦æŠŠpropsä¼ ç»™childrenï¼Œä¸æ˜¯å‡½æ•°å½¢å¼ç›´æ¥æ¸²æŸ“children</span></span><br><span class="line">          <span class="comment">// 3. childrenä¸å­˜åœ¨ï¼šç»§ç»­æ‰¾componentå±æ€§æ˜¯å¦å­˜åœ¨ï¼Œcomponentå­˜åœ¨å°±ç›´æ¥é€šè¿‡React.createElementåˆ›å»ºç»„ä»¶ï¼›</span></span><br><span class="line">          <span class="comment">// 4. componentä¸å­˜åœ¨ï¼šæŸ¥æ‰¾renderå±æ€§å­˜ä¸å­˜åœ¨ï¼Œrenderå±æ€§å­˜åœ¨å°±æ‰§è¡Œrenderå‡½æ•°å¹¶å°†propsä¼ ç»™renderï¼Œrenderä¸å­˜åœ¨å°±ç›´æ¥è¿”å›ä¸ºç©ºï¼›</span></span><br><span class="line">          <span class="comment">// 5. matchå¦‚æœä¸å­˜åœ¨ï¼Œæ¸²æŸ“å‡½æ•°å­ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">// ç”±äºcontextçš„å–å€¼è§„åˆ™æ˜¯ å–åˆ°æœ€è¿‘ä¸€å±‚çš„provideä¼ è¿›æ¥çš„å€¼</span></span><br><span class="line">          <span class="comment">// è¿™é‡Œå†åŒ…ä¸€å±‚ &lt;RouterContext.Provideræ˜¯ä¸ºäº†å†™hook useRouteMatchçš„æ—¶å€™ï¼Œrouteå¯ä»¥æ‹¿åˆ°å½“å‰åŒ¹é…çš„matchä¼ ç»™ç»„ä»¶ï¼Œä¸ä¼ è¿™ä¸€å±‚ï¼Œç»„ä»¶æ‹¿åˆ°çš„matchå°±ä¼šæ˜¯æœ€é¡¶çº§router(browserRouter/hashRouter)ä¼ æ¥çš„é»˜è®¤match</span></span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            &lt;RouterContext.Provider value=&#123;props&#125;&gt;</span><br><span class="line">              &#123;match</span><br><span class="line">                ? children</span><br><span class="line">                  ? <span class="keyword">typeof</span> children === <span class="string">&#x27;function&#x27;</span></span><br><span class="line">                    ? children(props)</span><br><span class="line">                    : children</span><br><span class="line">                  : component</span><br><span class="line">                  ? React.createElement(component, props)</span><br><span class="line">                  : render</span><br><span class="line">                  ? render(props)</span><br><span class="line">                  : <span class="literal">null</span></span><br><span class="line">                : <span class="keyword">typeof</span> children === <span class="string">&#x27;function&#x27;</span></span><br><span class="line">                ? children(props)</span><br><span class="line">                : <span class="literal">null</span>&#125;</span><br><span class="line">            &lt;/RouterContext.Provider&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &lt;/RouterContext.Consumer&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Route</span><br></pre></td></tr></table></figure><h3 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h3><p><a name="Link"></a></p><p>Link.js: è·³è½¬é“¾æ¥ï¼Œå¤„ç†ç‚¹å‡»äº‹ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> RouterContext <span class="keyword">from</span> <span class="string">&#x27;./RouterContext&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Link æœ¬è´¨å°±æ˜¯aæ ‡ç­¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Link</span>(<span class="params">&#123; to, children , ...rest&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ‹¿åˆ°çˆ¶çº§ä¼ æ¥çš„ history</span></span><br><span class="line">  <span class="keyword">const</span> context = useContext(RouterContext)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClick = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="comment">// æ›´æ¢è·¯ç”±</span></span><br><span class="line">    context.history.push(to)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;a href=&#123;to&#125; onClick=&#123;handleClick&#125; &#123;...rest&#125;&gt;</span><br><span class="line">      &#123;children&#125;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Link</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h3><p><a name="Switch"></a></p><blockquote><ol><li>Switchç»„ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯ç‹¬å è·¯ç”±ï¼Œä¿è¯å½“å‰é¡µé¢åªæ¸²æŸ“ match åŒ¹é…çš„ä¸€ä¸ªç»„ä»¶ï¼›</li><li>ä¸åŠ Switchç»„ä»¶ï¼ŒRouteç»„ä»¶çš„ <code>children</code> å±æ€§æ¸²æŸ“å±‚çº§æ¯”è¾ƒé«˜ï¼Œåˆ™éƒ½ä¼šè¢«æ¸²æŸ“ï¼›</li><li>Switchä¸­å¯¹å­ç»„ä»¶è¿›è¡Œå¾ªç¯åŒ¹é…ï¼Œå¦‚æœæ‰¾åˆ°matchåˆ™é€šè¿‡<code>React.cloneElement</code>æ¸²æŸ“å¯¹åº”ç»„ä»¶ï¼Œæ²¡æœ‰åŒ¹é…å°±æ¸²æŸ“404é¡µé¢ï¼ˆå‡è®¾Routeé…ç½®äº†404é¡µé¢ï¼‰ï¼›</li></ol></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> RouterContext <span class="keyword">from</span> <span class="string">&#x27;./RouterContext&#x27;</span></span><br><span class="line"><span class="keyword">import</span> matchpath <span class="keyword">from</span> <span class="string">&#x27;./matchPath&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * switchç‹¬å è·¯ç”±ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„routeæˆ–è€…redirect</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Switch</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;RouterContext.Consumer&gt;</span><br><span class="line">        &#123;<span class="function">(<span class="params">context</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> location = context.location</span><br><span class="line">          <span class="comment">// è®°å½•æ˜¯å¦åŒ¹é…</span></span><br><span class="line">          <span class="keyword">let</span> match</span><br><span class="line">          <span class="comment">// è®°å½•åŒ¹é…çš„å…ƒç´ (route/redirect)</span></span><br><span class="line">          <span class="keyword">let</span> element</span><br><span class="line"></span><br><span class="line">          <span class="comment">// åˆ©ç”¨ React.Children å¯¹switchçš„å­ç»„ä»¶routeä»¬éå†</span></span><br><span class="line">          React.Children.forEach(<span class="built_in">this</span>.props.children, <span class="function">(<span class="params">child</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// matchä¸º null è¯æ˜è¿˜æ²¡åŒ¹é…ä¸Šï¼Œä¸”childæ˜¯æœ‰æ•ˆçš„å…ƒç´ </span></span><br><span class="line">            <span class="keyword">if</span> (match == <span class="literal">null</span> &amp;&amp; React.isValidElement(child)) &#123;</span><br><span class="line">              <span class="comment">// ç¼“å­˜ç»„ä»¶</span></span><br><span class="line">              element = child</span><br><span class="line">              <span class="comment">// åˆ¤æ–­routeæ˜¯å¦å­˜åœ¨path å¦‚æœå­˜åœ¨å°±æ‹¿åˆ°pathå»å’Œå½“å‰locationçš„pathåšå¯¹æ¯”ï¼Œä¸å­˜åœ¨å°±ä½¿ç”¨ç¥–ä¼ çš„é»˜è®¤match</span></span><br><span class="line">              match = child.props.path</span><br><span class="line">                ? matchpath(location.pathname, child.props)</span><br><span class="line">                : context.match</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> match</span><br><span class="line">            ? React.cloneElement(element, &#123; <span class="attr">computedMatch</span>: match &#125;)</span><br><span class="line">            : <span class="literal">null</span></span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &lt;/RouterContext.Consumer&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Switch</span><br></pre></td></tr></table></figure><h3 id="Redirect"><a href="#Redirect" class="headerlink" title="Redirect"></a>Redirect</h3><p><a name="Redirect"></a></p><blockquote><p>Redirectç»„ä»¶ä½œç”¨æ˜¯å¯¹è·¯ç”±è¿›è¡Œé‡å®šå‘</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> RouterContext <span class="keyword">from</span> <span class="string">&#x27;./RouterContext&#x27;</span></span><br><span class="line"><span class="keyword">import</span> LifeCycle <span class="keyword">from</span> <span class="string">&#x27;./LifeCycle&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Redirect</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;RouterContext.Consumer&gt;</span><br><span class="line">        &#123;<span class="function">(<span class="params">context</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; history &#125; = context</span><br><span class="line">          <span class="keyword">const</span> &#123; to, push = <span class="literal">false</span> &#125; = <span class="built_in">this</span>.props</span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            &lt;LifeCycle</span><br><span class="line">              onMount=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                push ? history.push(to) : history.replace(to)</span><br><span class="line">              &#125;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &lt;/RouterContext.Consumer&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Redirect</span><br></pre></td></tr></table></figure><h3 id="hooks"><a href="#hooks" class="headerlink" title="hooks"></a>hooks</h3><p><a name="hooks"></a></p><blockquote><p>hooksç»„ä»¶ä¸»è¦ä½œç”¨æ˜¯ç»™å‡½æ•°ç»„ä»¶æä¾›è·¯ç”±hookï¼Œç¡®ä¿åœ¨å‡½æ•°ç»„ä¸­å¯ä»¥ä½¿ç”¨è·¯ç”±çš„historyã€locationç­‰ä¸€ä¼—å±æ€§å’Œæ–¹æ³•ï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> RouterContext <span class="keyword">from</span> <span class="string">&#x27;./RouterContext&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useHistory</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ‹¿åˆ°Routeç»„ä»¶Providerçš„props</span></span><br><span class="line">  <span class="keyword">return</span> useContext(RouterContext).history</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useLocation</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useContext(RouterContext).location</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useRouteMatch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useContext(RouterContext).match</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useParams</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> match = useContext(RouterContext).match</span><br><span class="line">  <span class="keyword">return</span> match ? match.params : <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Prompt"><a href="#Prompt" class="headerlink" title="Prompt"></a>Prompt</h3><p><a name="Prompt"></a></p><blockquote><p>Promptç»„ä»¶ä¸»è¦ä½œç”¨æ˜¯å¯¹è·¯ç”±ç¦»å¼€ä¹‹å‰è¿›è¡Œæç¤ºï¼›<br>ä¾‹å¦‚ï¼šç”¨æˆ·åœ¨ä¿¡æ¯å¡«å†™é¡µå¡«å†™äº†ä¸€å¤§å †ä¸œè¥¿ä¸”æœªä¿å­˜ï¼Œç„¶åä¸€ä¸å°å¿ƒç‚¹å‡»åˆ°è¿”å›æŒ‰é’®ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æç¤ºç”¨æˆ·æ˜¯å¦ç¦»å¼€ï¼Œå¦åˆ™ç›´æ¥ç¦»å¼€æ•°æ®ä¹Ÿæ²¡äº†ï¼Œç”¨æˆ·ä¼šç›´æ¥å´©æºƒ~ğŸ˜‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> RouterContext <span class="keyword">from</span> <span class="string">&#x27;./RouterContext&#x27;</span></span><br><span class="line"><span class="keyword">import</span> LifeCycle <span class="keyword">from</span> <span class="string">&#x27;./LifeCycle&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Prompt</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;RouterContext.Consumer&gt;</span><br><span class="line">        &#123;<span class="function">(<span class="params">context</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; message, when = <span class="literal">true</span> &#125; = <span class="built_in">this</span>.props</span><br><span class="line">          <span class="keyword">if</span> (!when) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">// åˆ©ç”¨historyåº“çš„ block åœ¨ç¦»å¼€é¡µé¢çš„æ—¶å€™åšæ‹¦æˆª</span></span><br><span class="line">          <span class="keyword">const</span> method = context.history.block</span><br><span class="line">          <span class="comment">// const</span></span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            &lt;LifeCycle</span><br><span class="line">              onMount=&#123;<span class="function">(<span class="params">self</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// ç»„ä»¶æŒ‚è½½çš„æ—¶å€™æŠŠ  method å­˜åœ¨ releaseä¸Š</span></span><br><span class="line">                self.release = method(message)</span><br><span class="line">              &#125;&#125;</span><br><span class="line">              onUpdate=&#123;<span class="function">(<span class="params">self, prevProps</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (prevProps.message !== message) &#123;</span><br><span class="line">                  self.release()</span><br><span class="line">                  self.release = method(message)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;&#125;</span><br><span class="line">              onUnmount=&#123;<span class="function">(<span class="params">self</span>) =&gt;</span> &#123;</span><br><span class="line">                self.release()</span><br><span class="line">              &#125;&#125;</span><br><span class="line">              message=&#123;message&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &lt;/RouterContext.Consumer&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Prompt</span><br></pre></td></tr></table></figure><h3 id="WithRouter"><a href="#WithRouter" class="headerlink" title="WithRouter"></a>WithRouter</h3><p><a name="WithRouter"></a></p><blockquote><p>withRouteræœ¬èº«æ˜¯ä¸€ä¸ªhocé«˜çº§ç»„ä»¶,ä¸ºç±»ç»„ä»¶æä¾›historyçš„æ–¹æ³•ï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> RouterContext <span class="keyword">from</span> <span class="string">&#x27;./RouterContext&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * withrouteræœ¬èº«å°±æ˜¯ä¸€ä¸ªhocé«˜é˜¶ç»„ä»¶ï¼Œé«˜é˜¶ç»„ä»¶æ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªç»„ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> withRouter = <span class="function">(<span class="params">WrapperComponent</span>) =&gt;</span> <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç±»ç»„ä»¶é€šè¿‡withRouteræŠŠ router çš„apiä¼ ç»™ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;RouterContext.Consumer&gt;</span><br><span class="line">      &#123;<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">WrapperComponent</span> &#123;<span class="attr">...props</span>&#125; &#123;<span class="attr">...context</span>&#125; /&gt;</span></span>&#125;</span><br><span class="line">    &lt;/RouterContext.Consumer&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withRouter</span><br></pre></td></tr></table></figure><h3 id="MemoryRouter"><a href="#MemoryRouter" class="headerlink" title="MemoryRouter"></a>MemoryRouter</h3><p><a name="MemoryRouter"></a></p><blockquote><p><code>MemoryRouter</code>ç›´æ¥æ‹·è´çš„ react-router æºç ,<code> MemoryRouter</code>ä¸€èˆ¬å†™<code>native</code>ä¼šç”¨åˆ°ï¼Œ<code>web</code>çš„è¯å¸¸ç”¨<code>BrowserRouter</code>å’Œ<code>HashRouter</code>;</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">&#x27;prop-types&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createMemoryHistory <span class="keyword">as</span> createHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;history&#x27;</span></span><br><span class="line"><span class="keyword">import</span> warning <span class="keyword">from</span> <span class="string">&#x27;tiny-warning&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;./Router.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The public API for a &lt;Router&gt; that stores location in memory.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemoryRouter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  history = createHistory(<span class="built_in">this</span>.props)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">history</span>=<span class="string">&#123;this.history&#125;</span> <span class="attr">children</span>=<span class="string">&#123;this.props.children&#125;</span> /&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">  MemoryRouter.propTypes = &#123;</span><br><span class="line">    initialEntries: PropTypes.array,</span><br><span class="line">    initialIndex: PropTypes.number,</span><br><span class="line">    getUserConfirmation: PropTypes.func,</span><br><span class="line">    keyLength: PropTypes.number,</span><br><span class="line">    children: PropTypes.node,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  MemoryRouter.prototype.componentDidMount = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    warning(</span><br><span class="line">      !<span class="built_in">this</span>.props.history,</span><br><span class="line">      <span class="string">&#x27;&lt;MemoryRouter&gt; ignores the history prop. To use a custom history, &#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;use `import &#123; Router &#125;` instead of `import &#123; MemoryRouter as Router &#125;`.&#x27;</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> MemoryRouter</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–ç»„ä»¶"><a href="#å…¶ä»–ç»„ä»¶" class="headerlink" title="å…¶ä»–ç»„ä»¶"></a>å…¶ä»–ç»„ä»¶</h2><p><a name="å…¶ä»–ç»„ä»¶"></a></p><h3 id="RouterContext"><a href="#RouterContext" class="headerlink" title="RouterContext"></a>RouterContext</h3><p><a name="RouterContext"></a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºrouterä¼ é€’æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> RouterContext = React.createContext()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> RouterContext</span><br></pre></td></tr></table></figure><h3 id="LifeCycle"><a href="#LifeCycle" class="headerlink" title="LifeCycle"></a>LifeCycle</h3><p><a name="LifeCycle"></a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * LifeCycleå°±åšä¸€ä»¶äº‹ï¼Œåœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé‡Œdo something</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LifeCycle</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">componentWillMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.props.onMount) <span class="built_in">this</span>.props.onMount.call(<span class="built_in">this</span>, <span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUpdate</span>(<span class="params">prevProps</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.props.onUpdate) <span class="built_in">this</span>.props.onUpdate.call(<span class="built_in">this</span>, <span class="built_in">this</span>, prevProps)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.props.onUnmount) <span class="built_in">this</span>.props.onUnmount.call(<span class="built_in">this</span>, <span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> LifeCycle</span><br></pre></td></tr></table></figure><h3 id="matchpath"><a href="#matchpath" class="headerlink" title="matchpath"></a>matchpath</h3><p><a name="matchpath"></a></p><blockquote><p><code>path-to-regexp</code>è¿™ä¸ªåº“çœŸçš„è›®å¥½ç”¨çš„ï¼Œ<a href="https://github.com/pillarjs/path-to-regexp">github</a>ã€<a href="http://forbeslindesay.github.io/express-route-tester/">Express Route Tester</a>ï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pathToRegexp <span class="keyword">from</span> <span class="string">&#x27;path-to-regexp&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cache = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> cacheLimit = <span class="number">10000</span></span><br><span class="line"><span class="keyword">let</span> cacheCount = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compilePath</span>(<span class="params">path, options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> cacheKey = <span class="string">`<span class="subst">$&#123;options.end&#125;</span><span class="subst">$&#123;options.strict&#125;</span><span class="subst">$&#123;options.sensitive&#125;</span>`</span></span><br><span class="line">  <span class="keyword">const</span> pathCache = cache[cacheKey] || (cache[cacheKey] = &#123;&#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (pathCache[path]) <span class="keyword">return</span> pathCache[path]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> keys = []</span><br><span class="line">  <span class="keyword">const</span> regexp = pathToRegexp(path, keys, options)</span><br><span class="line">  <span class="keyword">const</span> result = &#123; regexp, keys &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (cacheCount &lt; cacheLimit) &#123;</span><br><span class="line">    pathCache[path] = result</span><br><span class="line">    cacheCount++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Public API for matching a URL pathname to a path.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">matchPath</span>(<span class="params">pathname, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> options === <span class="string">&#x27;string&#x27;</span> || <span class="built_in">Array</span>.isArray(options)) &#123;</span><br><span class="line">    options = &#123; <span class="attr">path</span>: options &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// exactç²¾ç¡®åŒ¹é…  strictä¸¥æ ¼åŒ¹é…  sensitiveåŒºåˆ†å¤§å°å†™</span></span><br><span class="line">  <span class="keyword">const</span> &#123; path, exact = <span class="literal">false</span>, strict = <span class="literal">false</span>, sensitive = <span class="literal">false</span> &#125; = options</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> paths = [].concat(path)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> paths.reduce(<span class="function">(<span class="params">matched, path</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!path &amp;&amp; path !== <span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    <span class="keyword">if</span> (matched) <span class="keyword">return</span> matched</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> &#123; regexp, keys &#125; = compilePath(path, &#123;</span><br><span class="line">      end: exact,</span><br><span class="line">      strict,</span><br><span class="line">      sensitive,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> match = regexp.exec(pathname)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!match) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [url, ...values] = match</span><br><span class="line">    <span class="keyword">const</span> isExact = pathname === url</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (exact &amp;&amp; !isExact) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      path, <span class="comment">// the path used to match</span></span><br><span class="line">      url: path === <span class="string">&#x27;/&#x27;</span> &amp;&amp; url === <span class="string">&#x27;&#x27;</span> ? <span class="string">&#x27;/&#x27;</span> : url, <span class="comment">// the matched portion of the URL</span></span><br><span class="line">      isExact, <span class="comment">// whether or not we matched exactly</span></span><br><span class="line">      params: keys.reduce(<span class="function">(<span class="params">memo, key, index</span>) =&gt;</span> &#123;</span><br><span class="line">        memo[key.name] = values[index]</span><br><span class="line">        <span class="keyword">return</span> memo</span><br><span class="line">      &#125;, &#123;&#125;),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="literal">null</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> matchPath</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react-router </tag>
            
            <tag> react-router-dom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°redux-thunkã€redux-promiseã€redux-logger</title>
      <link href="/2021/07/13/redux/"/>
      <url>/2021/07/13/redux/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p> ä¼—æ‰€å‘¨çŸ¥ï¼Œreduxåªå•çº¯çš„æä¾›æ•°æ®æµçš„ç®¡ç†ï¼Œactionä¹Ÿåªæ¥å—<code>plain object</code>ç±»å‹ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨<code>action</code>ä¸­å†™å¼‚æ­¥å°±éœ€è¦å€ŸåŠ©å…¶ä»–ä¸­é—´ä»¶;<br> å­¦ä¹ çš„æ—¶å€™ç®€é™‹çš„å®ç°äº†ä¸€ä¸‹<code>redux-thunk</code>ã€<code>redux-promise</code>ã€<code>redux-logger</code>ï¼Œ ç‰¹æ­¤è®°å½•ï¼ˆè®°ç¬”è®°è¡Œä¸ºï¼Œä»…ä¾›å­¦ä¹ å‚è€ƒï¼‰ã€‚</p><h3 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°redux-thunk</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">thunk</span>(<span class="params">&#123; getState, dispatch &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">next</span>) =&gt;</span> <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> action === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> action(dispatch, getState)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> next(action)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="redux-promise"><a href="#redux-promise" class="headerlink" title="redux-promise"></a>redux-promise</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> isPromise <span class="keyword">from</span> <span class="string">&#x27;is-promise&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç° redux-promise</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns </span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">promise</span>(<span class="params">&#123; getState, dispatch &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">next</span>) =&gt;</span> <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">    isPromise(action) ? action.then(dispatch) : next(action)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="redux-logger"><a href="#redux-logger" class="headerlink" title="redux-logger"></a>redux-logger</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç° redux-logger</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span>  </span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns </span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logger</span>(<span class="params">&#123; getState, dispatch &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">next</span>) =&gt;</span> <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.group(<span class="string">&#x27;reducer&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> prevState = getState()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;%cprev state&#x27;</span>, <span class="string">&#x27;color:green&#x27;</span>, prevState)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;%caction&#x27;</span>, <span class="string">&#x27;color:blue&#x27;</span>, action)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> returnValue = next(action)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> nextState = getState()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;%cnext state&#x27;</span>, <span class="string">&#x27;color:green&#x27;</span>, nextState)</span><br><span class="line">    <span class="built_in">console</span>.groupEnd(<span class="string">&#x27;reducer&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> returnValue</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½•create-react-appæ­å»ºé¡¹ç›®</title>
      <link href="/2021/07/09/create-react-app/"/>
      <url>/2021/07/09/create-react-app/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>è®°å½•ä¸€æ¬¡é€šè¿‡ create-react-app æ­å»ºä¸€ä¸ª react é¡¹ç›®çš„è¿‡ç¨‹ï¼Œå‘ä¸€ä¸ªæ¥ç€ä¸€ä¸ª~</p><h3 id="1-åˆ›å»ºé¡¹ç›®"><a href="#1-åˆ›å»ºé¡¹ç›®" class="headerlink" title="1. åˆ›å»ºé¡¹ç›®"></a>1. åˆ›å»ºé¡¹ç›®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app my-app --typescript</span><br></pre></td></tr></table></figure><h3 id="2-æ‰©å±•-webpack-é…ç½®"><a href="#2-æ‰©å±•-webpack-é…ç½®" class="headerlink" title="2. æ‰©å±• webpack é…ç½®"></a>2. æ‰©å±• webpack é…ç½®</h3><p>éœ€è¦ç”¨åˆ° <a href="https://github.com/timarney/react-app-rewired"><code>react-app-rewired</code></a> <a href="https://github.com/arackaf/customize-cra/blob/master/api.md"><code>customize-cra</code></a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-app-rewired customize-cra -D</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ”¯æŒè£…é¥°å™¨ã€åˆ«åã€postcss"><a href="#é…ç½®æ”¯æŒè£…é¥°å™¨ã€åˆ«åã€postcss" class="headerlink" title="é…ç½®æ”¯æŒè£…é¥°å™¨ã€åˆ«åã€postcss"></a>é…ç½®æ”¯æŒè£…é¥°å™¨ã€åˆ«åã€postcss</h4><p>æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>config-overrides.js</code>æ–‡ä»¶ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* config-overrides.js */</span></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  override,</span><br><span class="line">  addDecoratorsLegacy,</span><br><span class="line">  addWebpackAlias,</span><br><span class="line">  addPostcssPlugins,</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">&#x27;customize-cra&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">dir</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> path.join(__dirname, <span class="string">&#x27;.&#x27;</span>, dir)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = override(</span><br><span class="line">  <span class="comment">// è£…é¥°å™¨</span></span><br><span class="line">  addDecoratorsLegacy(),</span><br><span class="line">  <span class="comment">// Alias</span></span><br><span class="line">  addWebpackAlias(&#123;</span><br><span class="line">    <span class="string">&#x27;@&#x27;</span>: resolve(<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@comps&#x27;</span>: resolve(<span class="string">&#x27;src/components&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@style&#x27;</span>: resolve(<span class="string">&#x27;src/assets/style&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@images&#x27;</span>: resolve(<span class="string">&#x27;src/assets/images&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@pages&#x27;</span>: resolve(<span class="string">&#x27;src/pages&#x27;</span>),</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="comment">// postcss</span></span><br><span class="line">  addPostcssPlugins([</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&#x27;postcss-px2rem&#x27;</span>)(&#123; <span class="attr">remUnit</span>: <span class="number">37.5</span> &#125;),</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>), <span class="comment">// css è‡ªåŠ¨åŠ å‰ç¼€</span></span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&#x27;postcss-autoreset&#x27;</span>)(&#123;</span><br><span class="line">      <span class="comment">// é‡ç½®æµè§ˆå™¨é»˜è®¤æ ·å¼</span></span><br><span class="line">      reset: &#123;</span><br><span class="line">        margin: <span class="number">0</span>,</span><br><span class="line">        padding: <span class="number">0</span>,</span><br><span class="line">        borderRadius: <span class="number">0</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  ])</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="3-é…ç½®-api-ä»£ç†"><a href="#3-é…ç½®-api-ä»£ç†" class="headerlink" title="3. é…ç½® api ä»£ç†"></a>3. é…ç½® api ä»£ç†</h3><p>ä½¿ç”¨<a href="https://github.com/chimurai/http-proxy-middleware"><code>http-proxy-middleware</code></a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add http-proxy-middleware -D</span><br></pre></td></tr></table></figure><p>src ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>setupProxy.js</code>æ–‡ä»¶ï¼Œåå­—åªèƒ½å«è¿™ä¸ªï¼Œhttp-proxy-middleware è¯»é…ç½®åªä¼šä»<code>src/setupProxy.js</code>è¿™ä¸ªåœ°å€å»è¯»</p><p>æ­¤å¤„æœ‰å‘ï¼ŒæŒ‰ç…§å®˜ç½‘çš„é…ç½®ä¼šæŠ¥é”™ï¼Œå¿ƒç´¯ï¼›ä¸‹é¢ä»£ç ï¼Œäº²æµ‹æœ‰æ•ˆ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createProxyMiddleware &#125; = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">  app.use(</span><br><span class="line">    createProxyMiddleware(<span class="string">&#x27;/api&#x27;</span>, &#123;</span><br><span class="line">      target: <span class="string">&#x27;http://xxx.xxx.xxx.xxx:xxxx/api&#x27;</span>,</span><br><span class="line">      ws: <span class="literal">true</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123;</span><br><span class="line">        <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-é…ç½®-typescript"><a href="#4-é…ç½®-typescript" class="headerlink" title="4. é…ç½® typescript"></a>4. é…ç½® typescript</h3><p>æ­¤å¤„ä¹Ÿæœ‰å‘ï¼Œæ¯æ¬¡é¡¹ç›®é‡å¯<code>tsconfig.json</code>ä¼šè¢«é‡ç½®ï¼Œé…ç½®çš„ä¸œè¥¿å°±ä¼šä¸¢å¤±ï¼å‘å•Š~<br>è§£å†³åŠæ³•ï¼šæ–°å»ºä¸€ä¸ª<code>tsconfig.path.json</code>æ–‡ä»¶ï¼ŒæŠŠå¤šä½™çš„é…ç½®å†™åœ¨è¿™é‡Œï¼Œç„¶ååœ¨<code>tsconfig.json</code>é‡Œé¢é€šè¿‡<code>extends</code>çš„æ–¹æ³•å¯¼å…¥ï¼Œè¿™æ ·å°±ä¸ä¼šè¢«æ¸…é™¤æ‰ï¼›</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;extends&quot;: &quot;./tsconfig.path.json&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;.&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;paths&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span>: [<span class="string">&quot;src/*&quot;</span>],</span><br><span class="line">      <span class="attr">&quot;@pages/*&quot;</span>: [<span class="string">&quot;src/pages/*&quot;</span>],</span><br><span class="line">      <span class="attr">&quot;@style/*&quot;</span>: [<span class="string">&quot;src/assets/style/*&quot;</span>],</span><br><span class="line">      <span class="attr">&quot;@comps/*&quot;</span>: [<span class="string">&quot;src/components/*&quot;</span>],</span><br><span class="line">      <span class="attr">&quot;@asstes/*&quot;</span>: [<span class="string">&quot;src/asstes/*&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-é…ç½®è·¯ç”±"><a href="#5-é…ç½®è·¯ç”±" class="headerlink" title="5. é…ç½®è·¯ç”±"></a>5. é…ç½®è·¯ç”±</h3><h4 id="1-å…¨å±€è·¯ç”±"><a href="#1-å…¨å±€è·¯ç”±" class="headerlink" title="1) å…¨å±€è·¯ç”±"></a>1) å…¨å±€è·¯ç”±</h4><p>æ³¨ï¼š æ­¤å¤„æœ‰ä¸€ä¸ªå°çŸ¥è¯†ç‚¹</p><blockquote><ol><li> Route æ¸²æŸ“ç»„ä»¶æœ‰ä¸‰ä¸ªå±æ€§: <code>component</code>ã€<code>render</code>ã€<code>children</code>, æ¸²æŸ“ä¼˜å…ˆçº§ä¸º<code>children</code> &gt; <code>component</code> &gt; <code>render</code>,</li><li> åªè¦æœ‰<code>children</code>å°±ä¼šä¼˜å…ˆæ¸²æŸ“å­ç»„ä»¶ï¼Œ<code>component</code>ç»„ä»¶æ˜¯ä¼ å…¥ä¸€ä¸ªç»„ä»¶ï¼Œåº•å±‚ä¼šé€šè¿‡<code>React.createElement</code>çš„æ–¹æ³•å»åˆ›å»ºç»„ä»¶ï¼Œå¦‚æœå†™æˆå‡½æ•°å½¢å¼ï¼Œåˆ™æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ç»å†æ–°ç»„ä»¶çš„åˆ›å»ºå’ŒåºŸå¼ƒç»„ä»¶çš„å¸è½½ï¼Œè€Œä¸æ˜¯å¯¹ç»„ä»¶çš„æ›´æ–°ï¼›</li><li> <code>render</code>ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æ›´çµæ´»çš„æ§åˆ¶ç»„ä»¶çš„æ¸²æŸ“ã€‚</li></ol></blockquote><p>ä½¿ç”¨ <code>react-router-dom</code>åŒ…ï¼›ç›´æ¥ä¸Šä»£ç å§~</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Route,</span><br><span class="line">  Switch,</span><br><span class="line">  Redirect,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> NotFound <span class="keyword">from</span> <span class="string">&#x27;@pages/noFound/noFound&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;@pages/home/home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> User <span class="keyword">from</span> <span class="string">&#x27;@pages/user/user&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">&#x27;@comps/loading&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; Suspense &#125; = React</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> RenderRouter = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;Suspense fallback=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Loading</span> /&gt;</span></span>&#125;&gt;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &lt;Redirect path=<span class="string">&quot;/&quot;</span> exact to=<span class="string">&quot;/home&quot;</span>&gt;&lt;/Redirect&gt;</span><br><span class="line">          &lt;Route</span><br><span class="line">            path=<span class="string">&quot;/home&quot;</span></span><br><span class="line">            exact</span><br><span class="line">            component=&#123;Home&#125;</span><br><span class="line">            <span class="comment">// render=&#123;(props)=&gt;(&lt;div&gt;è¿™æ˜¯å†…è”ç»„ä»¶&lt;/div&gt;)&#125;</span></span><br><span class="line">            <span class="comment">// children=&#123;(props)=&gt;&lt;NotFound/&gt;&#125;</span></span><br><span class="line">          &gt;&lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/user&quot;</span> exact component=&#123;User&#125;&gt;&lt;/Route&gt;</span><br><span class="line">          &lt;Route component=&#123;NotFound&#125;&gt;&lt;/Route&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/Suspense&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> RenderRouter</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰åœ¨é¡µé¢ä¸­ä½¿ç”¨"><a href="#2ï¼‰åœ¨é¡µé¢ä¸­ä½¿ç”¨" class="headerlink" title="2ï¼‰åœ¨é¡µé¢ä¸­ä½¿ç”¨"></a>2ï¼‰åœ¨é¡µé¢ä¸­ä½¿ç”¨</h4><blockquote><p>åœ¨é¡µé¢ä¸Šä½¿ç”¨<code>useHistory</code>ã€<code>useLocation</code>ã€<code>useRouteMatch</code> ç­‰hookå¯ä»¥è¿›è¡Œè·¯ç”±è·³è½¬ã€æ‹¿åˆ°å½“å‰è·¯ç”±ä¿¡æ¯ã€ä¼ å‚ç­‰æ“ä½œ</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> history = useHistory()</span><br><span class="line"><span class="keyword">const</span> location = useLocation()</span><br><span class="line"></span><br><span class="line">useEffect((): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// historyä¿¡æ¯</span></span><br><span class="line">  <span class="built_in">console</span>.log(history) </span><br><span class="line">  <span class="comment">// å½“å‰è·¯ç”±ä¿¡æ¯</span></span><br><span class="line">  <span class="built_in">console</span>.log(location) </span><br><span class="line">&#125;, [])</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleToUser = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è·¯ç”±è·³è½¬</span></span><br><span class="line">  history.push(<span class="string">&#x27;user&#x27;</span>) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleBack = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿”å›ä¸Šä¸€é¡µ</span></span><br><span class="line">  history.goBack() </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleSetState = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è·¯ç”±ä¼ å‚ æ–¹å¼ä¸€ </span></span><br><span class="line">  history.push(&#123; <span class="attr">pathname</span>: <span class="string">&#x27;/user&#x27;</span>, <span class="attr">state</span>: &#123; <span class="attr">test</span>: <span class="string">&#x27;aaa&#x27;</span> &#125; &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleSetMatch = (): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è·¯ç”±ä¼ å‚ æ–¹å¼äºŒ è¿™ç§éœ€è¦é…åˆ Routeç»„ä»¶çš„é…ç½®  </span></span><br><span class="line">  <span class="comment">// &lt;Route path=&quot;/user/:id&quot; render=&#123;(props:IRouterProps):ReactElement =&gt; &lt;User &#123;...props&#125; /&gt;&#125; &gt;&lt;/Route&gt;</span></span><br><span class="line">  history.push(<span class="string">&#x27;/user/666&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>useré¡µé¢ æ‹¿åˆ°ä¼ å‚</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, ReactElement &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useRouteMatch, useLocation&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">&#x27;@style/modules/user.module.scss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> User: React.FC&lt;IRouterProps&gt; = (props: IRouterProps): <span class="function"><span class="params">ReactElement</span> =&gt;</span> &#123;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">// ä¼ å‚æ–¹å¼ä¸€ ä»locationèº«ä¸Šå–å‚æ•°</span></span><br><span class="line">  <span class="comment">// const location:ILocationProps = useLocation()</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¼ å‚æ–¹å¼äºŒ åˆ©ç”¨useRouteMatch å–é¤</span></span><br><span class="line">  <span class="keyword">const</span> match:IMatchProps | <span class="literal">null</span> = useRouteMatch(<span class="string">&#x27;/user/:id&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  useEffect((): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// console.log(location?.state?.id)</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(match?.params?.id)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2 className=&#123;style.home&#125;&gt;User&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> User</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6-é…ç½®-sass"><a href="#6-é…ç½®-sass" class="headerlink" title="6. é…ç½® sass"></a>6. é…ç½® sass</h3><ol><li>å®‰è£…<code>node-sass</code>ï¼›è¿™é‡Œå¯èƒ½ä¼šå­˜åœ¨ç‰ˆæœ¬é—®é¢˜ï¼Œå¦‚é‡æŠ¥é”™å›é€€ä¸€ä¸‹<code>node-sass</code>ç‰ˆæœ¬å°± okï¼›</li><li>æŠŠ css æ–‡ä»¶åç¼€æ”¹ä¸º scss å°±å¯ä»¥å¼€å§‹å¼€å‘äº†ï¼›</li></ol><h3 id="7-é…ç½®-axios"><a href="#7-é…ç½®-axios" class="headerlink" title="7. é…ç½® axios"></a>7. é…ç½® axios</h3><ol><li>å®‰è£…<code>axios</code>åŒ…ï¼›</li><li>é…ç½®æ‹¦æˆªå™¨;</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; REQUEST &#125; <span class="keyword">from</span> <span class="string">&#x27;@/assets/constant&#x27;</span></span><br><span class="line"></span><br><span class="line">axios.defaults.timeout = <span class="number">500000</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">&#x27;http://localhost:3000/api&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ‹¦æˆª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  (config) =&gt; &#123;</span><br><span class="line">    <span class="comment">// TODO æ ¹æ®é¡¹ç›® è¯·æ±‚å‰è®¾ç½®tokenç­‰</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å“åº”æ‹¦æˆª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  (response) =&gt; &#123;</span><br><span class="line">    <span class="comment">// TODO æ ¹æ®é¡¹ç›® æ•°æ®å¤„ç†ï¼Œå…¨å±€æ¥å£é”™è¯¯å¤„ç†</span></span><br><span class="line">    <span class="comment">// æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span> (response.status === REQUEST.SUCCESS_CODE) &#123;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¤±è´¥</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response.data</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios</span><br></pre></td></tr></table></figure><ol start="3"><li>æ–°å»º<code>api.js</code> ç»Ÿä¸€ç®¡ç†è¯·æ±‚;</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;./index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> apiTest = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.post(<span class="string">&#x27;/test&#x27;</span>, data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>é¡µé¢ä¸Šä½¿ç”¨ï¼›</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useState, useCallback, ReactElement &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">&#x27;@style/modules/home.module.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; apiTest &#125; <span class="keyword">from</span> <span class="string">&#x27;@/assets/http/api&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Home: React.FC&lt;IRouterProps&gt; = (props: IRouterProps): <span class="function"><span class="params">ReactElement</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = useState(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">  useEffect((): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¯·æ±‚æµ‹è¯•</span></span><br><span class="line">    apiTest(&#123; <span class="attr">appointNo</span>: <span class="string">&#x27;XXX&#x27;</span> &#125;).then(<span class="function">(<span class="params">res: any</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res)</span><br><span class="line">      setUser(res.result)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1 className=&#123;style.home&#125;&gt;Home&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;&#123;<span class="built_in">JSON</span>.stringify(user)&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Home</span><br></pre></td></tr></table></figure><h3 id="8-é¡¹ç›®æ•°æ®æµç®¡ç†åº“"><a href="#8-é¡¹ç›®æ•°æ®æµç®¡ç†åº“" class="headerlink" title="8. é¡¹ç›®æ•°æ®æµç®¡ç†åº“"></a>8. é¡¹ç›®æ•°æ®æµç®¡ç†åº“</h3><p>å½“å‰é¡¹ç›®æ˜¯ reduxï¼Œå°é¡¹ç›®çš„è¯æ­¤é¡¹æ˜¯å¯é€‰çš„ï¼›</p><ol><li>å®‰è£…</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add redux react-redux redux-thunk redux-promise redux-logger</span><br></pre></td></tr></table></figure><ol start="2"><li>æ–°å»º<code>src/store/index.js</code>ã€<code>src/store/home.store.ts</code></li></ol><p><code>src/store/index.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, combineReducers &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span> <span class="comment">// å¤„ç†actionå¼‚æ­¥</span></span><br><span class="line"><span class="keyword">import</span> promise <span class="keyword">from</span> <span class="string">&#x27;redux-promise&#x27;</span> <span class="comment">// å¤„ç†action promiseé£æ ¼</span></span><br><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">&#x27;redux-logger&#x27;</span> <span class="comment">// æ‰“å°log</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; countReducer, userReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;./home.store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  combineReducers(&#123; <span class="attr">count</span>: countReducer, <span class="attr">user</span>: userReducer &#125;),</span><br><span class="line">  applyMiddleware(thunk, promise, logger)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><p><code>src/store/home.store.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; actionType, objType &#125; <span class="keyword">from</span> <span class="string">&#x27;@/@types/global&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; apiTest &#125; <span class="keyword">from</span> <span class="string">&#x27;@/assets/http/api&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> countReducer = <span class="function">(<span class="params">state = <span class="number">0</span>, action: IActionProps</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;ADD&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state + (action.payload || <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;MINUS&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state - (action.payload || <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> userReducer = <span class="function">(<span class="params">state = <span class="literal">null</span>, action: IActionProps</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;SET&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;&#125;, state, action.payload)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨é¡µé¢ä¸­ä½¿ç”¨</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> countRedux = useSelector(<span class="function">(<span class="params">state: IObjectProps</span>) =&gt;</span> state.count)</span><br><span class="line"><span class="keyword">const</span> userRedux = useSelector(<span class="function">(<span class="params">state: IObjectProps</span>) =&gt;</span> state.user)</span><br><span class="line"><span class="keyword">const</span> dispatch = useDispatch()</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * å¼‚æ­¥action</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">const</span> asyncAction = ():<span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  dispatch(<span class="function">(<span class="params">dispatch: any, getState: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æµ‹è¯•api</span></span><br><span class="line">    apiTest(&#123;<span class="attr">appointNo</span>: <span class="string">&#x27;XXXX&#x27;</span>&#125;).then(<span class="function">(<span class="params">res: IObjectProps</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// console.log(res)</span></span><br><span class="line">      <span class="keyword">if</span> (res.success == <span class="string">&#x27;t&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// ä¿®æ”¹storeä¸­çš„æ•°æ®</span></span><br><span class="line">        dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;SET&#x27;</span>, <span class="attr">payload</span>: res.result &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1 className=&#123;style.home&#125;&gt;Home&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;&#123;countRedux&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123; dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span>, <span class="attr">payload</span>: <span class="number">100</span> &#125;) &#125;&#125;&gt; ADD &lt;/button&gt;</span><br><span class="line">    &lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123; dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;MINUS&#x27;</span>, <span class="attr">payload</span>: <span class="number">5</span> &#125;) &#125;&#125;&gt; MINUS &lt;/button&gt;</span><br><span class="line">    &lt;button onClick=&#123;asyncAction&#125;&gt;USER&lt;/button&gt;</span><br><span class="line">    &lt;p&gt;&#123;<span class="built_in">JSON</span>.stringify(userRedux)&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä»¥ä¸Šå°±æ˜¯æœ¬æ¬¡é¡¹ç›®æ­å»ºçš„åŸºæœ¬æµç¨‹ï¼Œæ–‡ç« é‡Œåªè®°å½•é¡¹ç›®æ­å»ºçš„æœ€ç®€å®ç°ç¡®ä¿é¡¹ç›®è¿è¡Œæ­£å¸¸ï¼Œæ›´å¤šéœ€æ±‚è¯·æ ¹æ®é¡¹ç›®å®é™…éœ€è¦è¿›è¡Œå¦è¡Œé…ç½®ï¼Œå¦‚ä¿®æ”¹ router æ¨¡å¼ã€router æƒé™æ§åˆ¶ã€å°è£…å…¨å±€æ ·å¼ã€å…¨å±€ç»„ä»¶ã€å…¨å±€ utilsã€å…¨å±€ api æ‹¦æˆªå¤„ç†ã€é¡¹ç›®æ€§èƒ½ä¼˜åŒ–ç­‰â€¦ éœ€è¦æºä»£ç è¯·ç•™è¨€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> create-react-app </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vueé¡¹ç›®ä¸­ä½¿ç”¨svg</title>
      <link href="/2021/06/10/vue-svg/"/>
      <url>/2021/06/10/vue-svg/</url>
      
        <content type="html"><![CDATA[<h3 id="å…ˆçœ‹ä½¿ç”¨"><a href="#å…ˆçœ‹ä½¿ç”¨" class="headerlink" title="å…ˆçœ‹ä½¿ç”¨"></a>å…ˆçœ‹ä½¿ç”¨</h3><p>åœ¨vueç»„ä»¶ä¸­çš„templateé‡Œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">:icon-class</span>=<span class="string">&quot;icon-name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">svg-icon</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="SvgIcon-vue"><a href="#SvgIcon-vue" class="headerlink" title="SvgIcon.vue"></a>SvgIcon.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">svg</span> <span class="attr">:class</span>=<span class="string">&quot;svgClass&quot;</span> <span class="attr">v-on</span>=<span class="string">&quot;$listeners&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">use</span> <span class="attr">:xlink:href</span>=<span class="string">&quot;iconName&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">&#x27;SvgIcon&#x27;</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line">    iconClass: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">      required: <span class="literal">true</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    className: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">      <span class="keyword">default</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">iconName</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="string">`#icon-<span class="subst">$&#123;<span class="built_in">this</span>.iconClass&#125;</span>`</span>;</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">svgClass</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="built_in">this</span>.className) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="string">&#x27;svg-icon&#x27;</span> + <span class="built_in">this</span>.className;</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="string">&#x27;svg-icon&#x27;</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.svg-icon</span> &#123;</span></span><br><span class="line">  width: 1em;</span><br><span class="line">  height: 1em;</span><br><span class="line">  vertical-align: -0.15em;</span><br><span class="line">  fill: currentColor;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åŠ è½½svgæ–‡ä»¶-æ³¨å†Œæˆè‡ªå®šä¹‰ç»„ä»¶"><a href="#åŠ è½½svgæ–‡ä»¶-æ³¨å†Œæˆè‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="åŠ è½½svgæ–‡ä»¶,æ³¨å†Œæˆè‡ªå®šä¹‰ç»„ä»¶"></a>åŠ è½½svgæ–‡ä»¶,æ³¨å†Œæˆè‡ªå®šä¹‰ç»„ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> SvgIcon <span class="keyword">from</span> <span class="string">&#x27;./svgIcon.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> req = <span class="built_in">require</span>.context(<span class="string">&#x27;./&#x27;</span>, <span class="literal">false</span>, <span class="regexp">/\.svg$/</span>);</span><br><span class="line">req.keys().map(<span class="function"><span class="params">item</span> =&gt;</span> req(item));</span><br><span class="line"></span><br><span class="line"><span class="comment">// register globally</span></span><br><span class="line">Vue.component(<span class="string">&#x27;svg-icon&#x27;</span>, SvgIcon);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="webpacké…ç½®-svg-sprite-loader"><a href="#webpacké…ç½®-svg-sprite-loader" class="headerlink" title="webpacké…ç½®(svg-sprite-loader)"></a>webpacké…ç½®(svg-sprite-loader)</h3><p><code>npm install svg-sprite-loader</code></p><p><code>vue.config.js</code>é‡Œé¢ä¿®æ”¹é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  </span><br><span class="line">   <span class="comment">// é…ç½®svgè§„åˆ™æ’é™¤assetsç›®å½•ä¸­svgæ–‡ä»¶å¤„ç†</span></span><br><span class="line">   <span class="comment">// ç›®æ ‡ç»™svgè§„åˆ™å¢åŠ ä¸€ä¸ªæ’é™¤é€‰é¡¹exclude:</span></span><br><span class="line">   config.module.rule(<span class="string">&#x27;svg&#x27;</span>).exclude.add(resolve(<span class="string">&#x27;src/resources/svg&#x27;</span>));</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æ–°å¢iconè§„åˆ™ï¼Œè®¾ç½®svg-sprite-loaderå¤„ç†assetsç›®å½•ä¸­çš„svg</span></span><br><span class="line">   config.module</span><br><span class="line">     .rule(<span class="string">&#x27;icons&#x27;</span>)</span><br><span class="line">     .test(<span class="regexp">/\.svg$/</span>)</span><br><span class="line">     .include.add(resolve(<span class="string">&#x27;src/resources/svg&#x27;</span>))</span><br><span class="line">     .end()</span><br><span class="line">     .use(<span class="string">&#x27;svg-sprite-loader&#x27;</span>)</span><br><span class="line">     .loader(<span class="string">&#x27;svg-sprite-loader&#x27;</span>)</span><br><span class="line">     .options(&#123; <span class="attr">symbolId</span>: <span class="string">&#x27;icon-[name]&#x27;</span> &#125;)</span><br><span class="line">     .end();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="main-js-ä¸­å¼•å…¥"><a href="#main-js-ä¸­å¼•å…¥" class="headerlink" title="main.js ä¸­å¼•å…¥"></a>main.js ä¸­å¼•å…¥</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./resources/svg/index.js&#x27;</span>; <span class="comment">// svg</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svg </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€æ˜“ç‰ˆantd4.xè¡¨å•å®ç°</title>
      <link href="/2021/06/02/reactMyForm/"/>
      <url>/2021/06/02/reactMyForm/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å­¦ä¹ ç¬”è®°ï¼Œä»…ä¾›å­¦ä¹ å‚è€ƒ</p><h4 id="ä¸»è¦åŠŸèƒ½ç‚¹"><a href="#ä¸»è¦åŠŸèƒ½ç‚¹" class="headerlink" title="ä¸»è¦åŠŸèƒ½ç‚¹"></a>ä¸»è¦åŠŸèƒ½ç‚¹</h4><ol><li>å¯ä»¥è¾“å…¥æ•°æ®ï¼Œæ•°æ®åŠ¨æ€æ›´æ–°ï¼›</li><li>ç‚¹å‡» submitï¼Œè¿›è¡Œæ•°æ®æ ¡éªŒï¼ˆä»…åšå¿…å¡«æ ¡éªŒï¼‰ï¼›</li><li>æ ¡éªŒå¤±è´¥å±•ç¤ºæç¤ºï¼Œæ§åˆ¶å°æ‰“å° Failed è¯¦æƒ…ä¿¡æ¯ï¼›</li><li>æ ¡éªŒæˆåŠŸæ§åˆ¶å°æ‰“å° Success è¯¦æƒ…ä¿¡æ¯ï¼Œå¹¶è¾“å‡º form è¡¨å•æ•°æ®ï¼›</li></ol><p>æ³¨ï¼š ä»…å®ç°æ ¸å¿ƒæ€æƒ³ï¼Œæ›´å¤šä¸šåŠ¡ç»†èŠ‚å¿½ç•¥</p><h4 id="å­¦ä¹ ç›®çš„"><a href="#å­¦ä¹ ç›®çš„" class="headerlink" title="å­¦ä¹ ç›®çš„"></a>å­¦ä¹ ç›®çš„</h4><ol><li>å­¦ä¹  antd4.x å¯¹ form è¡¨å•çš„ä¼˜åŒ–å¤„ç†ï¼Œæ§åˆ¶ dom çš„ç²¾å‡†æ›´æ–°ä»¥æé«˜æ€§èƒ½ï¼›</li><li>å­¦ä¹  antd form è¡¨å•å°è£…æ€è·¯ï¼›</li></ol><h4 id="antd4-x-form-è¡¨å•ä¼˜åŒ–ç‚¹"><a href="#antd4-x-form-è¡¨å•ä¼˜åŒ–ç‚¹" class="headerlink" title="antd4.x form è¡¨å•ä¼˜åŒ–ç‚¹"></a>antd4.x form è¡¨å•ä¼˜åŒ–ç‚¹</h4><ol><li>antd4.x ä¹‹å‰ï¼Œform çš„æ•°æ®éƒ½åšåœ¨ Form çš„ state ä¸­ï¼Œä¸€æ—¦ form è¡¨å•æŸä¸€é¡¹æ•°æ®æ›´æ–°ï¼Œæ•´ä¸ª form è¡¨å•ä¼šå…¨éƒ¨æ›´æ–°ï¼Œä¸€æ—¦è¡¨å•é€»è¾‘å¤æ‚äº†ï¼Œæ€§èƒ½æˆæœ¬å¯æƒ³è€ŒçŸ¥ï¼›</li><li>antd4.x é€šè¿‡æ–°å»ºä¸€ä¸ªç±»ï¼Œå¯¹ form è¡¨å•çš„æ•°æ®è¿›è¡Œç¼“å­˜å’Œå¤„ç†ï¼Œä¸€æ—¦æ•°æ®æ›´æ–°ï¼Œé€šè¿‡<code>forceUpdate</code>æ–¹æ³•å¯¹è¡¨å•æ•°æ®æ›´æ”¹é¡¹ç²¾å‡†æ›´æ–°ï¼›</li><li>å…¼å®¹äº† class ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ï¼›</li></ol><h3 id="ä¸Šä»£ç "><a href="#ä¸Šä»£ç " class="headerlink" title="ä¸Šä»£ç "></a>ä¸Šä»£ç </h3><h4 id="ä»£ç ç›®å½•ç»“æ„"><a href="#ä»£ç ç›®å½•ç»“æ„" class="headerlink" title="ä»£ç ç›®å½•ç»“æ„"></a>ä»£ç ç›®å½•ç»“æ„</h4><p><img src="/images/react/reactform.png"></p><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><blockquote><p>å‡½æ•°ç»„ä»¶ä½¿ç”¨</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Form, &#123; Field &#125; <span class="keyword">from</span> <span class="string">&#x27;@comps/Form&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Input <span class="keyword">from</span> <span class="string">&#x27;@comps/Form/Input&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nameRules = [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥å§“åï¼&#x27;</span> &#125;]</span><br><span class="line"><span class="keyword">const</span> passworRules = [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥å¯†ç ï¼&#x27;</span> &#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">MyForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [form] = Form.useForm()</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®é»˜è®¤å€¼</span></span><br><span class="line">    form.setFieldsValue(&#123; <span class="attr">username</span>: <span class="string">&#x27;default&#x27;</span> &#125;)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> onFinish = <span class="function">(<span class="params">values</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Success:&#x27;</span>, values)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> onFinishFailed = <span class="function">(<span class="params">errorInfo</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Failed:&#x27;</span>, errorInfo)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;my-form&quot;</span>&gt;</span><br><span class="line">      &lt;h2&gt;MyFrom&lt;/h2&gt;</span><br><span class="line">      &lt;Form form=&#123;form&#125; onFinish=&#123;onFinish&#125; onFinishFailed=&#123;onFinishFailed&#125;&gt;</span><br><span class="line">        &lt;Field label=<span class="string">&quot;Username&quot;</span> name=<span class="string">&quot;username&quot;</span> rules=&#123;nameRules&#125;&gt;</span><br><span class="line">          &lt;Input /&gt;</span><br><span class="line">        &lt;/Field&gt;</span><br><span class="line">        &lt;Field label=<span class="string">&quot;Password&quot;</span> name=<span class="string">&quot;password&quot;</span> rules=&#123;passworRules&#125;&gt;</span><br><span class="line">          &lt;Input /&gt;</span><br><span class="line">        &lt;/Field&gt;</span><br><span class="line">        &lt;Field&gt;</span><br><span class="line">          &lt;button&gt; submit &lt;/button&gt;</span><br><span class="line">        &lt;/Field&gt;</span><br><span class="line">      &lt;/Form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>class ç»„ä»¶ä½¿ç”¨æ–¹æ³•</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Form, &#123; Field &#125; <span class="keyword">from</span> <span class="string">&#x27;@comps/Form&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Input <span class="keyword">from</span> <span class="string">&#x27;@comps/Form/Input&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nameRules = [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥å§“åï¼&#x27;</span> &#125;]</span><br><span class="line"><span class="keyword">const</span> passworRules = [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥å¯†ç ï¼&#x27;</span> &#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment">// class ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MyForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  onFinish = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onFinish&#x27;</span>, val) <span class="comment">//sy-log</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¡¨å•æ ¡éªŒå¤±è´¥æ‰§è¡Œ</span></span><br><span class="line">  onFinishFailed = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;onFinishFailed&#x27;</span>, val) <span class="comment">//sy-log</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;MyRCFieldForm&lt;/h3&gt;</span><br><span class="line">        &lt;Form onFinish=&#123;<span class="built_in">this</span>.onFinish&#125; onFinishFailed=&#123;<span class="built_in">this</span>.onFinishFailed&#125;&gt;</span><br><span class="line">          &lt;Field name=<span class="string">&quot;username&quot;</span> rules=&#123;[nameRules]&#125;&gt;</span><br><span class="line">            &lt;Input placeholder=<span class="string">&quot;Username&quot;</span> /&gt;</span><br><span class="line">          &lt;/Field&gt;</span><br><span class="line">          &lt;Field name=<span class="string">&quot;password&quot;</span> rules=&#123;[passworRules]&#125;&gt;</span><br><span class="line">            &lt;Input placeholder=<span class="string">&quot;Password&quot;</span> /&gt;</span><br><span class="line">          &lt;/Field&gt;</span><br><span class="line">          &lt;button&gt;Submit&lt;/button&gt;</span><br><span class="line">        &lt;/Form&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="index"><a href="#index" class="headerlink" title="index"></a>index</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import React from &#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> _Form <span class="keyword">from</span> <span class="string">&#x27;./Form&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Field <span class="keyword">from</span> <span class="string">&#x27;./Field&#x27;</span></span><br><span class="line"><span class="keyword">import</span> useForm <span class="keyword">from</span> <span class="string">&#x27;./useForm&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./Form.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Form = _Form</span><br><span class="line">Form.Field = Field</span><br><span class="line">Form.useForm = useForm</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; Field, useForm &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Form</span><br></pre></td></tr></table></figure><h4 id="Form"><a href="#Form" class="headerlink" title="Form"></a>Form</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> FieldContext <span class="keyword">from</span> <span class="string">&#x27;./FeildContext&#x27;</span></span><br><span class="line"><span class="keyword">import</span> useForm <span class="keyword">from</span> <span class="string">&#x27;./useForm&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Form</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  &#123; form, children, onFinish, onFinishFailed &#125;,</span></span></span><br><span class="line"><span class="function"><span class="params">  ref</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// store å­˜å‚¨æ•°æ®çš„</span></span><br><span class="line">  <span class="keyword">const</span> [formInstance] = useForm(form)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­ç»™çˆ¶çš„refä¼ æ•°æ® æ–°æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// å°† formInstance ä¼ ç»™ Form ç»„ä»¶çš„ä½¿ç”¨è€… ï¼Œç„¶åå†é€šè¿‡</span></span><br><span class="line">  <span class="comment">// React.useImperativeHandle(ref, () =&gt; formInstance)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¼“å­˜ æ–¹æ³•</span></span><br><span class="line">  formInstance.setCallback(&#123;</span><br><span class="line">    onFinish,</span><br><span class="line">    onFinishFailed,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;form</span><br><span class="line">      className=<span class="string">&quot;ll-form&quot;</span></span><br><span class="line">      onSubmit=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        e.preventDefault()</span><br><span class="line">        formInstance.submit()</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;FieldContext.Provider value=&#123;formInstance&#125;&gt;</span><br><span class="line">        &#123;children&#125;</span><br><span class="line">      &lt;/FieldContext.Provider&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Field"><a href="#Field" class="headerlink" title="Field"></a>Field</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> FieldContext <span class="keyword">from</span> <span class="string">&#x27;./FeildContext&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Field</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> contextType = FieldContext</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å°†fieldå®ä¾‹å­˜åˆ°formstoreä¸­ï¼Œåç»­formStoreä¸­çš„æ•°æ®æ›´æ–°äº†ï¼Œé€šè¿‡è°ƒç”¨å®ä¾‹çš„onStoreChangeè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</span></span><br><span class="line">    <span class="keyword">const</span> &#123; setFieldEntities &#125; = <span class="built_in">this</span>.context</span><br><span class="line"></span><br><span class="line">    <span class="comment">// setFieldEntities å‡½æ•°è¿”å›ä¸€ä¸ªé”€æ¯å­˜å‚¨çš„æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">this</span>.unregister = setFieldEntities(<span class="built_in">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ! ç»„ä»¶é”€æ¯åŒæ—¶åˆ é™¤formstoreä¸­å¯¹fieldçš„ç¼“å­˜</span></span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.unregister) &#123;</span><br><span class="line">      <span class="built_in">this</span>.unregister()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// store ä¸­çš„æ•°æ®æ›´æ–°ä¹‹åè¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢</span></span><br><span class="line">  onStoreChange = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.forceUpdate()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getControlled = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; name &#125; = <span class="built_in">this</span>.props</span><br><span class="line">    <span class="keyword">const</span> &#123; setFieldsValue, getFieldValue &#125; = <span class="built_in">this</span>.context</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value: getFieldValue(name),</span><br><span class="line">      onChange: <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> val = e.target.value</span><br><span class="line">        <span class="comment">// store set æ ¹æ® nameçš„å”¯ä¸€æ€§</span></span><br><span class="line">        setFieldsValue(&#123; [name]: val &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; children, label, name &#125; = <span class="built_in">this</span>.props</span><br><span class="line">    <span class="keyword">const</span> &#123; getVaildateErrByName &#125; = <span class="built_in">this</span>.context</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> err = getVaildateErrByName(name)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»™å­ç»„ä»¶å¢åŠ å±æ€§ã€æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">const</span> returnChildrenNode = React.cloneElement(</span><br><span class="line">      children,</span><br><span class="line">      <span class="built_in">this</span>.getControlled()</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div</span><br><span class="line">        className=&#123;<span class="string">`ll-form-field <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="string"><span class="subst">          err &amp;&amp; err.name === name ? <span class="string">&#x27;ll-form-field-err&#x27;</span> : <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="string"><span class="subst">        &#125;</span>`</span>&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;label &amp;&amp; (</span><br><span class="line">          &lt;div className=<span class="string">&quot;ll-form-label ll-form-label-left&quot;</span>&gt;</span><br><span class="line">            &lt;label&gt; &#123;label&#125;&lt;/label&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">        &lt;div className=<span class="string">&quot;ll-form-wrap&quot;</span>&gt;</span><br><span class="line">          &#123;returnChildrenNode&#125;</span><br><span class="line">          &#123;err &amp;&amp; err.name === name &amp;&amp; (</span><br><span class="line">            &lt;div className=<span class="string">&quot;ll-form-field-explain ll-form-field-error&quot;</span>&gt;</span><br><span class="line">              &lt;div role=<span class="string">&quot;alert&quot;</span>&gt;&#123;err.message&#125;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="FeildContext"><a href="#FeildContext" class="headerlink" title="FeildContext"></a>FeildContext</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºcontext</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FieldContext = React.createContext()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> FieldContext</span><br></pre></td></tr></table></figure><h4 id="useForm"><a href="#useForm" class="headerlink" title="useForm"></a>useForm</h4><p>form è¡¨å•çš„æ•°æ®å…¨éƒ¨åœ¨è¿™ä¸ªç±»é‡Œé¢å¤„ç†ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// store çŠ¶æ€ç®¡ç†åº“</span></span><br><span class="line"><span class="comment">// å¼€è¾Ÿä¸€å—ç©ºé—´ï¼Œå­˜å‚¨formä¸­çš„æ•°æ®ï¼Œç©ºé—´æ¢æ€§èƒ½</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormStore</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å­˜çŠ¶æ€</span></span><br><span class="line">    <span class="built_in">this</span>.store = &#123;&#125;</span><br><span class="line">    <span class="comment">// å­˜fields form ä¸‹é¢çš„å­ç»„ä»¶</span></span><br><span class="line">    <span class="built_in">this</span>.fieldEntities = &#123;&#125;</span><br><span class="line">    <span class="comment">// å­˜å‚¨cbs form èº«ä¸Šçš„äº‹ä»¶ ä¾‹å¦‚onFinishç­‰</span></span><br><span class="line">    <span class="built_in">this</span>.callbacks = &#123;&#125;</span><br><span class="line">    <span class="comment">// ç¼“å­˜æ ¡éªŒé”™è¯¯æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.err = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get å•ä¸ªå€¼</span></span><br><span class="line">  getFieldValue = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.store[name]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get æ‰€æœ‰storeæ•°æ®</span></span><br><span class="line">  getFieldsValue = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...this.store &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// set store</span></span><br><span class="line">  setFieldsValue = <span class="function">(<span class="params">newStore</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.store = &#123;</span><br><span class="line">      ...this.store,</span><br><span class="line">      ...newStore,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°è§†å›¾éœ€è¦å‡†ç¡®çš„æ‹¿åˆ°å¯¹åº”çš„ æ•°æ®å˜åŒ–çš„filedå®ä¾‹ è¿›è¡Œæ›´æ–°</span></span><br><span class="line">    <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(newStore)</span><br><span class="line"></span><br><span class="line">    keys.length &amp;&amp;</span><br><span class="line">      keys.forEach(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.onStoreChange(name)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­˜ filed</span></span><br><span class="line">  <span class="comment">// è®¢é˜…å’Œå–æ¶ˆè®¢é˜…ï¼Œç›‘å¬å’Œå–æ¶ˆç›‘å¬è¦æˆå¯¹å‡ºç°</span></span><br><span class="line">  setFieldEntities = <span class="function">(<span class="params">entity</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è®¢é˜…</span></span><br><span class="line">    entity.props.name &amp;&amp; (<span class="built_in">this</span>.fieldEntities[entity.props.name] = entity)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå¸è½½æ–¹æ³• å–æ¶ˆè®¢é˜…</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// åˆ é™¤field å®ä¾‹</span></span><br><span class="line">      <span class="keyword">delete</span> <span class="built_in">this</span>.fieldEntities[entity.props.name]</span><br><span class="line">      <span class="comment">// åˆ é™¤storeå­˜çš„å¯¹åº”çš„æ•°æ®</span></span><br><span class="line">      <span class="keyword">delete</span> <span class="built_in">this</span>.store[entity.props.name]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setCallback = <span class="function">(<span class="params">newCallbacks</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.callbacks = &#123;</span><br><span class="line">      ...this.callbacks,</span><br><span class="line">      ...newCallbacks,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  validate = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> err = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> name <span class="keyword">in</span> <span class="built_in">this</span>.fieldEntities) &#123;</span><br><span class="line">      <span class="keyword">let</span> rules = <span class="built_in">this</span>.fieldEntities[name].props.rules || <span class="literal">null</span></span><br><span class="line">      rules = rules &amp;&amp; rules[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!rules) <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> value = <span class="built_in">this</span>.getFieldValue(name)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!(rules.required &amp;&amp; value)) &#123;</span><br><span class="line">        <span class="keyword">const</span> o = &#123;</span><br><span class="line">          message: rules.message,</span><br><span class="line">          value,</span><br><span class="line">          name: name,</span><br><span class="line">        &#125;</span><br><span class="line">        err.push(o)</span><br><span class="line">        <span class="comment">// ç¼“å­˜æ ¡éªŒå‡ºæ¥çš„err</span></span><br><span class="line">        <span class="built_in">this</span>.err[name] = o</span><br><span class="line">        <span class="built_in">this</span>.onStoreChange(name)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.err[name]) &#123;</span><br><span class="line">          <span class="comment">// æ ¡éªŒæˆåŠŸçš„ æ¸…é™¤è®°å½• å¹¶åˆ·æ–°å¯¹åº”çš„ field</span></span><br><span class="line">          <span class="keyword">delete</span> <span class="built_in">this</span>.err[name]</span><br><span class="line">          <span class="built_in">this</span>.onStoreChange(name)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getVaildateErrByName = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.err[name] || <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  submit = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> err = <span class="built_in">this</span>.validate()</span><br><span class="line">    <span class="keyword">const</span> &#123; onFinish, onFinishFailed &#125; = <span class="built_in">this</span>.callbacks</span><br><span class="line">    <span class="keyword">if</span> (err.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// æ ¡éªŒå‡ºé”™</span></span><br><span class="line">      onFinishFailed(err, <span class="built_in">this</span>.getFieldsValue())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// æ ¡éªŒé€šè¿‡</span></span><br><span class="line">      onFinish(<span class="built_in">this</span>.getFieldsValue())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onStoreChange = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.fieldEntities[name] &amp;&amp; <span class="built_in">this</span>.fieldEntities[name].onStoreChange()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getForm = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      getFieldValue: <span class="built_in">this</span>.getFieldValue,</span><br><span class="line">      getFieldsValue: <span class="built_in">this</span>.getFieldsValue,</span><br><span class="line">      setFieldsValue: <span class="built_in">this</span>.setFieldsValue,</span><br><span class="line">      setFieldEntities: <span class="built_in">this</span>.setFieldEntities,</span><br><span class="line">      getVaildateErrByName: <span class="built_in">this</span>.getVaildateErrByName,</span><br><span class="line">      setCallback: <span class="built_in">this</span>.setCallback,</span><br><span class="line">      submit: <span class="built_in">this</span>.submit,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚¨å­˜çŠ¶æ€ç®¡ç†åº“</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useForm</span>(<span class="params">form</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å®ä¾‹ å…¨å±€åªä¼šç”Ÿæˆä¸€æ¬¡ï¼Œä¸èƒ½æ¯æ¬¡åˆ·æ–°ä¸€æ¬¡ åˆå§‹åŒ–ä¸€æ¬¡</span></span><br><span class="line">  <span class="comment">// React.useRef() æ‹¥æœ‰ è·¨æ¸²æŸ“å‘¨æœŸ ä¿å­˜æ•°æ®çš„ èƒ½åŠ›</span></span><br><span class="line">  <span class="keyword">const</span> formRef = React.useRef()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!formRef.current) &#123;</span><br><span class="line">    <span class="keyword">if</span> (form) &#123;</span><br><span class="line">      formRef.current = form</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// é€šè¿‡getForm è·å–formstoreçš„æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">const</span> formStore = <span class="keyword">new</span> FormStore()</span><br><span class="line">      formRef.current = formStore.getForm()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [formRef.current]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å—æ§ç»„ä»¶ï¼Œå±æ€§ã€æ–¹æ³•å‡æ§åˆ¶åœ¨çˆ¶çº§</span></span><br><span class="line"><span class="keyword">const</span> Input = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">className</span>=<span class="string">&quot;ll-input&quot;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> CustomizeInput = <span class="function">(<span class="params">&#123; value = <span class="string">&#x27;&#x27;</span>, ...props &#125;</span>) =&gt;</span> (</span><br><span class="line">  &lt;div className=<span class="string">&quot;ll-form-input&quot;</span>&gt;</span><br><span class="line">    &lt;Input value=&#123;value&#125; &#123;...props&#125; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> CustomizeInput</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3.0æºç æ‰§è¡Œæµç¨‹å›¾</title>
      <link href="/2021/06/01/vue3-0code/"/>
      <url>/2021/06/01/vue3-0code/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å­¦ä¹ vue3.0.11çš„æºç ï¼Œé¡ºä¾¿ç”»äº†ä¸€ä¸ªæµç¨‹å›¾ã€‚é˜²æ­¢å›¾ç‰‡ä¸¢å¤±ï¼Œè´´åœ¨è¿™é‡Œå§~</p><p><img src="/images/vue/vue3.0.png" alt="vue3.0.11æµç¨‹å›¾"></p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git merge æŒ‡å®šå†…å®¹</title>
      <link href="/2021/05/25/gitCherryPick/"/>
      <url>/2021/05/25/gitCherryPick/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„å•ä¸ªcommit-æ‘˜æ¨±æ¡ƒ"><a href="#åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„å•ä¸ªcommit-æ‘˜æ¨±æ¡ƒ" class="headerlink" title="åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„å•ä¸ªcommit(æ‘˜æ¨±æ¡ƒ)"></a>åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„å•ä¸ªcommit(æ‘˜æ¨±æ¡ƒ)</h2><p>eg: æƒ³æŠŠ<code>develop</code>ä¸Šçš„ç‰ˆæœ¬<code>82ecb31</code>åˆåˆ°<code>master</code>åˆ†æ”¯; </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master  </span><br><span class="line">git cherry-pick 82ecb31</span><br></pre></td></tr></table></figure><p>ä¼šæŠŠ<code>develop</code>ä¸Šçš„<code>82ecb31</code>ç‰ˆæœ¬çš„æ”¹åŠ¨åˆå¹¶åˆ°<code>master</code>ï¼Œä¼šåœ¨<code>master</code>åˆ†æ”¯ä¸Šäº§ç”Ÿä¸€ä¸ªæ–°çš„<code>commit</code>;</p><h2 id="åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„ä¸€ç³»åˆ—commits"><a href="#åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„ä¸€ç³»åˆ—commits" class="headerlink" title="åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„ä¸€ç³»åˆ—commits"></a>åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„ä¸€ç³»åˆ—commits</h2><p>eg: æƒ³æŠŠ<code>develop</code>ä¸Šç‰ˆæœ¬<code>1111~9999</code>åˆå¹¶åˆ°<code>master</code>;</p><ol><li>åŸºäº<code>develop</code>æ‹‰ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œå¹¶æŒ‡å®šæ–°åˆ†æ”¯çš„<code>æœ€åä¸€ä¸ªç‰ˆæœ¬</code>ä¸º<code>9999</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop </span><br><span class="line">git checkout -b newbranch 9999</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li>å˜åŸºï¼ˆ<code>rebase</code>ï¼‰è¿™ä¸ªæ–°åˆ†æ”¯çš„<code>commit</code>åˆ°<code>master</code>åˆ†æ”¯, <code>1111^</code>æŒ‡æ˜ä½ æƒ³ä»å“ªä¸ªç‰ˆæœ¬å¼€å§‹åˆä»£ç ,<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --onto master 1111^ </span><br></pre></td></tr></table></figure></li></ol><h2 id="åˆå¹¶å…·ä½“çš„æ–‡ä»¶åˆ°æŸåˆ†æ”¯"><a href="#åˆå¹¶å…·ä½“çš„æ–‡ä»¶åˆ°æŸåˆ†æ”¯" class="headerlink" title="åˆå¹¶å…·ä½“çš„æ–‡ä»¶åˆ°æŸåˆ†æ”¯"></a>åˆå¹¶å…·ä½“çš„æ–‡ä»¶åˆ°æŸåˆ†æ”¯</h2><p>eg: æŠŠ<code>develop</code>åˆ†æ”¯ä¸Šçš„<code>test.js</code>åˆå¹¶åˆ°<code>master</code>;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git checkout --patch develop test.js</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3.0 è·¯ç”±åˆ‡æ¢åŠ¨ç”»</title>
      <link href="/2021/03/05/vue-transition/"/>
      <url>/2021/03/05/vue-transition/</url>
      
        <content type="html"><![CDATA[<h3 id="router"><a href="#router" class="headerlink" title="router"></a>router</h3><blockquote><p>å…ˆè¦åœ¨routerï¼Œ<code>meta</code>é‡Œç»™é¡µé¢ç¼–å·ï¼Œé€šè¿‡ç›‘å¬<code>route</code>åˆ¤æ–­<code>index</code>çš„å¤§å°æ¥ç¡®å®šæ˜¯è¿›å…¥è¿˜æ˜¯ç¦»å¼€ï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    redirect: <span class="string">&#x27;/home&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/home/index.vue&#x27;</span>), <span class="attr">meta</span>: &#123; <span class="attr">index</span>: <span class="number">0</span> &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/a&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/a.vue&#x27;</span>), <span class="attr">meta</span>: &#123; <span class="attr">index</span>: <span class="number">1</span> &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/b&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/b.vue&#x27;</span>), <span class="attr">meta</span>: &#123; <span class="attr">index</span>: <span class="number">2</span> &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/c&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/c.vue&#x27;</span>), <span class="attr">meta</span>: &#123; <span class="attr">index</span>: <span class="number">3</span> &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/d&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/d.vue&#x27;</span>), <span class="attr">meta</span>: &#123; <span class="attr">index</span>: <span class="number">4</span> &#125; &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="transition"><a href="#transition" class="headerlink" title="transition"></a>transition</h3><blockquote><p>é€šè¿‡vueçš„å†…ç½®ç»„ä»¶<code>transition</code>æ¥åšåŠ¨ç”»ï¼Œè¿™é‡Œæœ‰ä¸ªæ³¨æ„ç‚¹ï¼Œvue3å’Œvue2å†™æ³•ä¸ä¸€æ ·</p></blockquote><ul><li>åœ¨vue2ä¸­:<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">:name</span>=<span class="string">&quot;transitionName&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">&quot;view app-view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>åœ¨vue3ä¸­:<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">&quot;router-view&quot;</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; Component &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition</span> <span class="attr">:name</span>=<span class="string">&quot;transitionName&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;Component&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="app-vue"><a href="#app-vue" class="headerlink" title="app.vue"></a>app.vue</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;router-view class&#x3D;&quot;router-view&quot; v-slot&#x3D;&quot;&#123; Component &#125;&quot;&gt;</span><br><span class="line">    &lt;transition :name&#x3D;&quot;transitionName&quot;&gt;</span><br><span class="line">      &lt;component :is&#x3D;&quot;Component&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;transition&gt;</span><br><span class="line">  &lt;&#x2F;router-view&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &#39;vue&#39;</span><br><span class="line">import &#123; useRoute &#125; from &#39;vue-router&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;App&#39;,</span><br><span class="line">  setup() &#123;</span><br><span class="line"></span><br><span class="line">    const transition &#x3D; [&#39;slide-left&#39;, &#39;slide-right&#39;]</span><br><span class="line">    let transitionName &#x3D; ref(transition[0])</span><br><span class="line"></span><br><span class="line">    const route &#x3D; useRoute()</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ç›‘æ§è·¯ç”±çš„å˜åŒ–</span><br><span class="line">    watch(</span><br><span class="line">      () &#x3D;&gt; route.meta.index,</span><br><span class="line">      (newIndex, oldIndex) &#x3D;&gt; &#123;</span><br><span class="line">        if (newIndex &gt; oldIndex) &#123;</span><br><span class="line">          transitionName.value &#x3D; transition[0]</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          transitionName.value &#x3D; transition[1]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    return &#123; transitionName &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">.router-view &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">  overflow-x: hidden;</span><br><span class="line">  -webkit-overflow-scrolling: touch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.slide-right-enter-active,</span><br><span class="line">.slide-right-leave-active,</span><br><span class="line">.slide-left-enter-active,</span><br><span class="line">.slide-left-leave-active &#123;</span><br><span class="line">  will-change: transform;</span><br><span class="line">  transition: all 500ms;</span><br><span class="line">  position: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.slide-right-enter &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translate3d(-100%, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.slide-right-leave-active &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translate3d(100%, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.slide-left-enter &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translate3d(100%, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.slide-left-leave-active &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translate3d(-100%, 0, 0);</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> transition </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>viteåå‘ä»£ç†ã€è®¾ç½®åˆ«å</title>
      <link href="/2021/03/04/vue3-alias/"/>
      <url>/2021/03/04/vue3-alias/</url>
      
        <content type="html"><![CDATA[<p>æ ¹ç›®å½•ä¸‹<code>vite.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">      target: <span class="string">&#x27;http://*.*.*.*:*&#x27;</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      rewrite: <span class="function"><span class="params">path</span> =&gt;</span> path.replace(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  alias: &#123;</span><br><span class="line">    <span class="string">&#x27;/@/&#x27;</span>: path.resolve(__dirname, <span class="string">&#x27;./src&#x27;</span>),</span><br><span class="line">    <span class="string">&quot;/@assets/&quot;</span>: path.resolve(__dirname, <span class="string">&quot;./src/assets&quot;</span>),</span><br><span class="line">    <span class="string">&quot;/@request/&quot;</span>: path.resolve(__dirname, <span class="string">&quot;./src/framework/request&quot;</span>),</span><br><span class="line">    <span class="string">&quot;/@api/&quot;</span>: path.resolve(__dirname, <span class="string">&quot;./src/framework/api&quot;</span>),</span><br><span class="line">    <span class="string">&quot;/@utils/&quot;</span>: path.resolve(__dirname, <span class="string">&quot;./src/framework/utils&quot;</span>),</span><br><span class="line">    <span class="string">&quot;/@router/&quot;</span>: path.resolve(__dirname, <span class="string">&quot;./src/framework/router&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vite </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’åº</title>
      <link href="/2021/03/02/sort/"/>
      <url>/2021/03/02/sort/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ’åºçš„å¸¸ç”¨ç®—æ³• ä¹‹ æœ‰äº‹æ²¡äº‹æ•²ä¸€éï¼Œä¸‹é¢çš„å›¾ç‰‡æ¥è‡ªç™¾åº¦å›¾ç‰‡ï¼›</p><h3 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h3><p><img src="/images/sort/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F.gif"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1,å†’æ³¡æ’åºï¼ˆä¸¤ä¸¤å¯¹æ¯”ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!arr.length) <span class="keyword">return</span> arr;</span><br><span class="line">  <span class="keyword">const</span> len = arr.length;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; len - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="comment">// äº’æ¢ä½ç½®</span></span><br><span class="line">        [arr[j], arr[j + <span class="number">1</span>]] = [arr[j + <span class="number">1</span>], arr[j]];</span><br><span class="line">        <span class="comment">// åªè¦å¯¹æ¯”è¿˜æœ‰äº¤æ¢ï¼Œå°±è¯æ˜æ’åºè¿˜æ²¡ç»“æŸ</span></span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (flag) <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(bubbleSort([78, 6, 7, 3, 9, 45, 10, 8]))</span></span><br></pre></td></tr></table></figure><h3 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h3><p><img src="/images/sort/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F.gif"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€‰æ‹©æ’åº(é€‰æœ€å°å€¼)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!arr.length) <span class="keyword">return</span> arr;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> len = arr.length;</span><br><span class="line">  <span class="keyword">let</span> minIndex;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    minIndex = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &lt; len; j++) &#123;</span><br><span class="line">      <span class="comment">// è¿˜æœ‰å€¼æ¯”å½“å‰æœ€å°å€¼å°</span></span><br><span class="line">      <span class="keyword">if</span> (arr[minIndex] &gt; arr[j]) &#123;</span><br><span class="line">        <span class="comment">// é‡æ–°èµ‹å€¼minIndex</span></span><br><span class="line">        minIndex = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€å°å€¼indexå˜äº†ï¼Œ æŠŠminIndexä½ç½®ä¸Šçš„å€¼æ›¿æ¢æ‰</span></span><br><span class="line">    <span class="keyword">if</span> (minIndex !== i) &#123;</span><br><span class="line">      [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(selectSort([78, 6, 7, 3, 9, 45, 10, 8]))</span></span><br></pre></td></tr></table></figure><h3 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h3><p><img src="/images/sort/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F.gif"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’å…¥æ’åº(èŒƒå›´æ’åº)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!arr.length) <span class="keyword">return</span> arr;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¼“å­˜æ•°ç»„é•¿åº¦</span></span><br><span class="line">  <span class="keyword">const</span> len = arr.length;</span><br><span class="line">  <span class="comment">// temp ç”¨æ¥ä¿å­˜å½“å‰éœ€è¦æ’å…¥çš„å…ƒç´ </span></span><br><span class="line">  <span class="keyword">let</span> temp;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="comment">// èŒƒå›´</span></span><br><span class="line">    temp = arr[i];</span><br><span class="line">    <span class="keyword">let</span> j = i;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å‰ä¸€ä¸ªæ•°æ®æ˜¯å¦æ¯”åé¢ä¸€ä½å¤§</span></span><br><span class="line">    <span class="keyword">while</span> (j &gt; <span class="number">0</span> &amp;&amp; arr[j - <span class="number">1</span>] &gt; temp) &#123;</span><br><span class="line">      <span class="comment">// å¤§çš„æ•°æ®å‘åç§»åŠ¨ä½ç½®ï¼Œè®©å‡ºä¸€ä¸ªç©ºä½ç”¨æ¥æ”¾å°å€¼</span></span><br><span class="line">      arr[j] = arr[j - <span class="number">1</span>];</span><br><span class="line">      j--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¾ªç¯è®©ä½ï¼Œè®©å‡ºæ¥çš„ç©ºä½å°±æ˜¯è¿™ä¸ª å¾…æ’å…¥å€¼ çš„ä½ç½®</span></span><br><span class="line">    arr[j] = temp;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(insertSort([2, 6, 7, 3, 9, 45, 10, 0]))</span></span><br></pre></td></tr></table></figure><h3 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h3><p>å½’å¹¶æ’åºæ˜¯å¯¹<code>åˆ†æ²»æ€æƒ³</code>çš„å…¸å‹åº”ç”¨ã€‚</p><ul><li>åˆ†è§£å­é—®é¢˜</li><li>æ±‚è§£æ¯ä¸ªå­é—®é¢˜</li><li>åˆå¹¶å­é—®é¢˜çš„è§£ï¼Œå¾—å‡ºå¤§é—®é¢˜çš„è§£</li></ul><blockquote><p>çœ‹å›¾ç†è§£</p></blockquote><p><img src="/images/sort/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F.gif" alt="å›¾ä¸€"></p><p><img src="/images/sort/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F2.gif" alt="å›¾äºŒ"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠŠæ•°ç»„å¹³åˆ†æ‹†åˆ†æˆæœ€å°å•å…ƒï¼Œå†åˆå¹¶ï¼Œåˆå¹¶è¿‡ç¨‹ä¸­æ’åºï¼Œåˆå¹¶ç»“æŸæ’åºç»“æŸ</span></span><br><span class="line"><span class="comment">// æ‹†åˆ† </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mergeSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!arr &amp;&amp; !arr.length) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> len = arr.length;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¾¹ç•Œ</span></span><br><span class="line">  <span class="keyword">if</span> (arr.length === <span class="number">1</span>) <span class="keyword">return</span> arr;</span><br><span class="line">  <span class="comment">// ä¸­ç‚¹</span></span><br><span class="line">  <span class="keyword">const</span> center = <span class="built_in">Math</span>.floor(len / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‹†åˆ†å·¦è¾¹</span></span><br><span class="line">  <span class="keyword">const</span> leftArr = mergeSort(arr.slice(<span class="number">0</span>, center));</span><br><span class="line">  <span class="comment">// æ‹†åˆ†å³è¾¹</span></span><br><span class="line">  <span class="keyword">const</span> rightArr = mergeSort(arr.slice(center, len));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> mergeArr(leftArr, rightArr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(mergeSort([<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">59</span>, <span class="number">12</span>, <span class="number">32</span>, <span class="number">7</span>, <span class="number">21</span>])); <span class="comment">// [ 2,  3,  4,  4, 6, 7, 12, 21, 32, 59 ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„(å°åˆ°å¤§)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mergeArr</span>(<span class="params">arr1, arr2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!arr1 &amp;&amp; !arr2) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>, j = <span class="number">0</span>; <span class="comment">// å£°æ˜æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¼“å­˜æ•°ç»„é•¿åº¦</span></span><br><span class="line">  <span class="keyword">let</span> len1 = arr1.length;</span><br><span class="line">  <span class="keyword">let</span> len2 = arr2.length;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»“æœæ•°ç»„</span></span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆå¹¶</span></span><br><span class="line">  <span class="keyword">while</span> (i &lt; len1 &amp;&amp; j &lt; len2) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr1[i] &lt; arr2[j]) &#123;</span><br><span class="line">      res.push(arr1[i]);</span><br><span class="line">      i++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.push(arr2[j]);</span><br><span class="line">      j++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‰©ä¸‹çš„æ•°æ®ç›´æ¥æ”¾å…¥</span></span><br><span class="line">  <span class="keyword">if</span> (i &lt; len1) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.concat(arr1.slice(i));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> res.concat(arr2.slice(j));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="more"><a href="#more" class="headerlink" title="more"></a>more</h3><blockquote><p>æ’åºç®—æ³•è¿˜æœ‰å¾ˆå¤šï¼Œä»€ä¹ˆæ—¶å€™æ•²äº†å†æ›´æ–°ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>generatoræ‰“å°æ–æ³¢æ‹‰å¥‘æ•°åˆ—</title>
      <link href="/2021/02/26/generator/"/>
      <url>/2021/02/26/generator/</url>
      
        <content type="html"><![CDATA[<h3 id="æ–æ³¢æ‹‰å¥‘æ•°åˆ—"><a href="#æ–æ³¢æ‹‰å¥‘æ•°åˆ—" class="headerlink" title="æ–æ³¢æ‹‰å¥‘æ•°åˆ—"></a>æ–æ³¢æ‹‰å¥‘æ•°åˆ—</h3><p>æ–æ³¢æ‹‰å¥‘æ•°åˆ—åˆç§°â€œå…”å­æ•°åˆ—â€ï¼Œä¾‹å¦‚ <code>[0, 1, 1, 2, 3, 8, 13, 21, 34]</code>;<br>æ•°å­¦å…¬å¼ä¸ºï¼š<code> F(n)=F(n - 1)+F(n - 2)</code></p><h3 id="æ‰“å°æ–æ³¢æ‹‰å¥‘æ•°åˆ—"><a href="#æ‰“å°æ–æ³¢æ‹‰å¥‘æ•°åˆ—" class="headerlink" title="æ‰“å°æ–æ³¢æ‹‰å¥‘æ•°åˆ—"></a>æ‰“å°æ–æ³¢æ‹‰å¥‘æ•°åˆ—</h3><h4 id="æ™®é€šå†™æ³•"><a href="#æ™®é€šå†™æ³•" class="headerlink" title="æ™®é€šå†™æ³•"></a>æ™®é€šå†™æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>len è¿”å›æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setFS</span>(<span class="params">len</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!len) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">let</span> arr = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">0</span>, b = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (arr.length &lt; len) &#123;</span><br><span class="line">    [a, b] = [b, a + b];</span><br><span class="line">    arr.push(b);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(setFS(<span class="number">10</span>))  <span class="comment">// [0, 1, 1, 2, 3, 5, 8, 13, 21, 34 ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="generatorå†™æ³•"><a href="#generatorå†™æ³•" class="headerlink" title="generatorå†™æ³•"></a>generatorå†™æ³•</h4><p>è¿™ç§å†™æ³•å¹¶æ²¡æœ‰æ¯”æ™®é€šå†™æ³•ç®€å•ï¼Œä¸»è¦æ˜¯ä¸ºäº†åˆ©ç”¨generatorçš„æ–¹æ³•ï¼› å…¶ä¸­<code>while (true)</code>æ˜¯è®©FSè¿™ä¸ªè¿­ä»£å™¨æ— é™æ¬¡è¿­ä»£ï¼Œç›¸å½“äºä¸€ç›´ <code>yield b</code>,è¿™æ ·åœ¨ <code>next()</code>æ‰§è¡Œè¿­ä»£å™¨çš„æ—¶å€™ï¼Œ<code>next</code>å¤šå°‘æ¬¡å°±ä¼šæœ‰å¤šå°‘ä¸ª<code>yield b</code>;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">FS</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">0</span>, b = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> a;</span><br><span class="line">  <span class="keyword">yield</span> b;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    [a, b] = [b, a + b];</span><br><span class="line">    <span class="keyword">yield</span> b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setFS</span>(<span class="params">len</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!len) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// generatorå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> geneFS = FS();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    res.push(geneFS.next().value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(setFS(<span class="number">10</span>)) <span class="comment">// [0, 1, 1, 2, 3, 5, 8, 13, 21, 34 ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘ç®—æ³•é¢˜(å­¦ä¹ ç¬”è®°)</title>
      <link href="/2021/02/26/binaryTree2/"/>
      <url>/2021/02/26/binaryTree2/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä»…è®°å½•è‡ªå·±æ•²è¿‡çš„é¢˜ï¼Œç•™ä¸ªçˆªå°ã€‚</p><blockquote><p>æ³¨æ„ï¼šäºŒå‰æ ‘é—®é¢˜ï¼ŒåŸºæœ¬è¦è€ƒè™‘æ˜¯å¦é‡‡ç”¨é€’å½’</p></blockquote><h3 id="äºŒå‰æ ‘ç¿»è½¬"><a href="#äºŒå‰æ ‘ç¿»è½¬" class="headerlink" title="äºŒå‰æ ‘ç¿»è½¬"></a>äºŒå‰æ ‘ç¿»è½¬</h3><p>äºŒå‰æ ‘ç¿»è½¬ä¸ºå·¦å­æ ‘å’Œå³å­æ ‘ç¿»è½¬ä½ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reverse = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> left = reverse(root.left);</span><br><span class="line">    <span class="keyword">const</span> right = reverse(root.right);</span><br><span class="line"></span><br><span class="line">    root.right = left;</span><br><span class="line">    root.left = right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒå‰æœç´¢æ ‘"><a href="#äºŒå‰æœç´¢æ ‘" class="headerlink" title="äºŒå‰æœç´¢æ ‘"></a>äºŒå‰æœç´¢æ ‘</h3><p>ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘ï¼Ÿ<br>äºŒå‰æœç´¢æ ‘ï¼ˆåˆï¼šäºŒå‰æœç´¢æ ‘ï¼ŒäºŒå‰æ’åºæ ‘ï¼‰ï¼Œä¸€æ£µäºŒå‰æœç´¢æ ‘æœ‰å¦‚ä¸‹æ€§è´¨ï¼š</p><ul><li>æ˜¯ä¸€æ£µç©ºæ ‘</li><li>æ˜¯ä¸€æ£µç”±æ ¹ç»“ç‚¹ã€å·¦å­æ ‘ã€å³å­æ ‘ç»„æˆçš„æ ‘ï¼Œ</li><li>åŒæ—¶å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œ</li><li>ä¸”å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„æ•°æ®åŸŸéƒ½å°äºç­‰äºæ ¹ç»“ç‚¹çš„æ•°æ®åŸŸï¼Œå³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„æ•°æ®åŸŸéƒ½å¤§äºç­‰äºæ ¹ç»“ç‚¹çš„æ•°æ®åŸŸ</li></ul><p>ä¾‹å¦‚ï¼š</p><pre><code>         8       /  \      5     9     / \     \    4    6    10</code></pre><p>  å…³äºäºŒå‰æœç´¢æ ‘é«˜é¢‘æ“ä½œï¼š</p><ol><li>æŸ¥æ‰¾æ•°æ®åŸŸä¸ºæŸä¸€ç‰¹å®šå€¼çš„ç»“ç‚¹</li><li>æ’å…¥æ–°ç»“ç‚¹</li><li>åˆ é™¤æŒ‡å®šç»“ç‚¹</li></ol><h4 id="æŸ¥æ‰¾èŠ‚ç‚¹"><a href="#æŸ¥æ‰¾èŠ‚ç‚¹" class="headerlink" title="æŸ¥æ‰¾èŠ‚ç‚¹"></a>æŸ¥æ‰¾èŠ‚ç‚¹</h4><blockquote><p>é¢˜ï¼š1.æŸ¥æ‰¾æ•°æ®åŸŸä¸ºæŸä¸€ç‰¹å®šå€¼çš„ç»“ç‚¹</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> root1 = &#123;</span><br><span class="line">    val: <span class="number">8</span>,</span><br><span class="line">    left: &#123;</span><br><span class="line">        val: <span class="number">6</span>,</span><br><span class="line">        left: &#123;</span><br><span class="line">            val: <span class="number">5</span></span><br><span class="line">        &#125;,</span><br><span class="line">        right: &#123;</span><br><span class="line">            val: <span class="number">7</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    right: &#123;</span><br><span class="line">        val: <span class="number">9</span>,</span><br><span class="line">        right: &#123;</span><br><span class="line">            val: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>data è¦æ‰¾çš„å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>root äºŒå‰æ ‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> search = <span class="function"><span class="keyword">function</span> (<span class="params">data, root</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!data || !root) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root.val === data) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;ç›®æ ‡ç»“ç‚¹æ˜¯ï¼š&#x27;</span>, root)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data &lt; root.val) &#123;</span><br><span class="line">        <span class="comment">// å·¦èŠ‚ç‚¹çš„å€¼å°äºä¸ŠèŠ‚ç‚¹</span></span><br><span class="line">        search(data, root.left)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data &gt; root.val) &#123;</span><br><span class="line">        <span class="comment">// å³èŠ‚ç‚¹çš„å€¼å¤§äºä¸ŠèŠ‚ç‚¹</span></span><br><span class="line">        search(data, root.right)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// search(9, root1)  // ç›®æ ‡ç»“ç‚¹æ˜¯ï¼š &#123; val: 9, right: &#123; val: 10 &#125; &#125;</span></span><br><span class="line"><span class="comment">// search(6, root1)  // ç›®æ ‡ç»“ç‚¹æ˜¯ï¼š &#123; val: 6, left: &#123; val: 5 &#125;, right: &#123; val: 7 &#125; &#125;</span></span><br></pre></td></tr></table></figure><h4 id="æ’å…¥æ–°ç»“ç‚¹"><a href="#æ’å…¥æ–°ç»“ç‚¹" class="headerlink" title="æ’å…¥æ–°ç»“ç‚¹"></a>æ’å…¥æ–°ç»“ç‚¹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> root2 = &#123;</span><br><span class="line">    val: <span class="number">9</span>,</span><br><span class="line">    left: &#123;</span><br><span class="line">        val: <span class="number">5</span>,</span><br><span class="line">        left: &#123;</span><br><span class="line">            val: <span class="number">3</span></span><br><span class="line">        &#125;,</span><br><span class="line">        right: &#123;</span><br><span class="line">            val: <span class="number">7</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    right: &#123;</span><br><span class="line">        val: <span class="number">10</span>,</span><br><span class="line">        right: &#123;</span><br><span class="line">            val: <span class="number">12</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TreeNode</span>(<span class="params">val, left, right</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.val = (val === <span class="literal">undefined</span> ? <span class="number">0</span> : val)</span><br><span class="line">    <span class="built_in">this</span>.left = (left === <span class="literal">undefined</span> ? <span class="literal">null</span> : left)</span><br><span class="line">    <span class="built_in">this</span>.right = (right === <span class="literal">undefined</span> ? <span class="literal">null</span> : right)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>data æ’å…¥çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>root äºŒå‰æ ‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> insert = <span class="function"><span class="keyword">function</span> (<span class="params">data, root</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!data) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœrootæ˜¯ç©ºçš„ï¼Œåˆ™ä¸ºä¸€ä¸ªå¯ä»¥æ’å…¥çš„ç©ºäºŒå‰æ ‘</span></span><br><span class="line">    <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">        <span class="comment">// ç”¨ä¸€ä¸ªå€¼ä¸ºnçš„ç»“ç‚¹å æ®è¿™ä¸ªç©ºä½</span></span><br><span class="line">        root = <span class="keyword">new</span> TreeNode(data)</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root.val &gt; data) &#123;</span><br><span class="line">        root.left = insert(data, root.left)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root.val &lt; data) &#123;</span><br><span class="line">        root.right = insert(data, root.right)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(JSON.stringify(insert(2, root2)))</span></span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤æŒ‡å®šç»“ç‚¹"><a href="#åˆ é™¤æŒ‡å®šç»“ç‚¹" class="headerlink" title="åˆ é™¤æŒ‡å®šç»“ç‚¹"></a>åˆ é™¤æŒ‡å®šç»“ç‚¹</h4><p>è¦ä¿æŒæœç´¢äºŒå‰æ ‘çš„åˆæ³•æ€§ï¼Œä¸­åºéå†æ˜¯<code>æœ‰åº</code>çš„!<br>åˆ é™¤èŠ‚ç‚¹è¿™é‡Œéœ€è¦æ³¨æ„ï¼š</p><ul><li>ç»“ç‚¹ä¸å­˜åœ¨ï¼Œå®šä½åˆ°äº†ç©ºç»“ç‚¹ã€‚ç›´æ¥è¿”å›å³å¯ã€‚</li><li>éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹æ²¡æœ‰å·¦å­©å­ä¹Ÿæ²¡æœ‰å³å­©å­â€”â€”å®ƒæ˜¯ä¸€ä¸ªå¶å­ç»“ç‚¹ï¼Œåˆ æ‰å®ƒä¸ä¼šå¯¹å…¶å®ƒç»“ç‚¹é€ æˆä»»ä½•å½±å“ï¼Œç›´æ¥åˆ é™¤å³å¯ã€‚</li><li>éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹å­˜åœ¨å·¦å­æ ‘ï¼Œé‚£ä¹ˆå°±å»å·¦å­æ ‘é‡Œå¯»æ‰¾å°äºç›®æ ‡ç»“ç‚¹å€¼çš„æœ€å¤§ç»“ç‚¹ï¼Œç”¨è¿™ä¸ªç»“ç‚¹è¦†ç›–æ‰ç›®æ ‡ç»“ç‚¹</li><li>éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹å­˜åœ¨å³å­æ ‘ï¼Œé‚£ä¹ˆå°±å»å³å­æ ‘é‡Œå¯»æ‰¾å¤§äºç›®æ ‡ç»“ç‚¹å€¼çš„æœ€å°ç»“ç‚¹ï¼Œç”¨è¿™ä¸ªç»“ç‚¹è¦†ç›–æ‰ç›®æ ‡ç»“ç‚¹</li><li>éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹æ—¢æœ‰å·¦å­æ ‘ã€åˆæœ‰å³å­æ ‘ï¼Œè¿™æ—¶å°±æœ‰ä¸¤ç§åšæ³•äº†ï¼šè¦ä¹ˆå–å·¦å­æ ‘ä¸­å€¼æœ€å¤§çš„ç»“ç‚¹ï¼Œè¦ä¹ˆå–å³å­æ ‘ä¸­å–å€¼æœ€å°çš„ç»“ç‚¹ã€‚ä¸¤ä¸ªç»“ç‚¹ä¸­ä»»å–ä¸€ä¸ªè¦†ç›–æ‰ç›®æ ‡ç»“ç‚¹ï¼Œéƒ½å¯ä»¥ç»´æŒäºŒå‰æœç´¢æ ‘çš„æ•°æ®æœ‰åºæ€§</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> root3 = &#123;</span><br><span class="line">    val: <span class="number">9</span>,</span><br><span class="line">    left: &#123;</span><br><span class="line">        val: <span class="number">5</span>,</span><br><span class="line">        left: &#123;</span><br><span class="line">            val: <span class="number">3</span></span><br><span class="line">        &#125;,</span><br><span class="line">        right: &#123;</span><br><span class="line">            val: <span class="number">7</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    right: &#123;</span><br><span class="line">        val: <span class="number">11</span>,</span><br><span class="line">        left: &#123;</span><br><span class="line">            val: <span class="number">10</span></span><br><span class="line">        &#125;,</span><br><span class="line">        right: &#123;</span><br><span class="line">            val: <span class="number">12</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// inorder(root3);</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteNode</span>(<span class="params">val, root</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root.val === val) &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤(è¦ä¿æŒæœç´¢äºŒå‰æ ‘çš„åˆæ³•æ€§ï¼Œä¸­åºéå†æ˜¯æœ‰åºçš„)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (root.left) &#123;</span><br><span class="line">            <span class="comment">// ä»å·¦å­æ ‘ä¸­æ‰¾åˆ°æœ€å¤§å€¼</span></span><br><span class="line">            <span class="keyword">const</span> maxNode = findMax(root.left)</span><br><span class="line">            <span class="comment">// ç”¨è¿™ä¸ªæœ€å¤§èŠ‚ç‚¹è¦†ç›–æ‰è¿™ä¸ªåˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line">            root.val = maxNode.val;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°çš„è¿™ä¸ªæœ€å¤§èŠ‚ç‚¹æ›¿æ¢äº†åˆ é™¤èŠ‚ç‚¹ï¼Œéœ€è¦åˆ é™¤ä½ä¸Šçš„è¿™ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            root.left = deleteNode(maxNode.val, root.left)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.right) &#123;</span><br><span class="line">            <span class="comment">// ä»å³å­æ ‘ä¸­æ‰¾åˆ°æœ€å°å€¼ </span></span><br><span class="line">            <span class="keyword">const</span> minNode = findMin(root.right);</span><br><span class="line">            root.val = minNode.val;</span><br><span class="line">            root.right = deleteNode(minNode.val, root.right);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!root.right &amp;&amp; !root.left) &#123;</span><br><span class="line">            <span class="comment">// å·¦å³å­æ ‘éƒ½ä¸å­˜åœ¨</span></span><br><span class="line">            root = <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (val &gt; root.val) &#123;</span><br><span class="line"></span><br><span class="line">        root.right = deleteNode(val, root.right);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (val &lt; root.val) &#123;</span><br><span class="line"></span><br><span class="line">        root.left = deleteNode(val, root.left);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯»æ‰¾å·¦å­æ ‘æœ€å¤§å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMax</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (root.right) &#123;</span><br><span class="line">        root = root.right</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯»æ‰¾å³å­æ ‘çš„æœ€å°å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMin</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (root.left) &#123;</span><br><span class="line">        root = root.left</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(deleteNode(11, root3))</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¯¹å®šä¹‰çš„è€ƒå¯Ÿï¼šäºŒå‰æœç´¢æ ‘çš„éªŒè¯"><a href="#å¯¹å®šä¹‰çš„è€ƒå¯Ÿï¼šäºŒå‰æœç´¢æ ‘çš„éªŒè¯" class="headerlink" title="å¯¹å®šä¹‰çš„è€ƒå¯Ÿï¼šäºŒå‰æœç´¢æ ‘çš„éªŒè¯"></a>å¯¹å®šä¹‰çš„è€ƒå¯Ÿï¼šäºŒå‰æœç´¢æ ‘çš„éªŒè¯</h4><blockquote><p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘(ä¸éœ€è¦è€ƒè™‘ç›¸ç­‰æƒ…å†µ)ã€‚</p></blockquote><ul><li>èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å«å°äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚</li><li>èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å«å¤§äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚</li><li>æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> root4 = &#123;</span><br><span class="line">    val: <span class="number">9</span>,</span><br><span class="line">    left: &#123;</span><br><span class="line">        val: <span class="number">5</span>,</span><br><span class="line">        left: &#123;</span><br><span class="line">            val: <span class="number">4</span></span><br><span class="line">        &#125;,</span><br><span class="line">        right: &#123;</span><br><span class="line">            val: <span class="number">7</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    right: &#123;</span><br><span class="line">        val: <span class="number">8</span>,</span><br><span class="line">        left: &#123;</span><br><span class="line">            val: <span class="number">10</span></span><br><span class="line">        &#125;,</span><br><span class="line">        right: &#123;</span><br><span class="line">            val: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isValidBST = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç©ºæ ‘ä¸ºåˆæ³•</span></span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment">// ä¸‰ä¸ªå€¼æ¯”è¾ƒ æ ¹èŠ‚ç‚¹ å·¦å­æ ‘ å³å­æ ‘</span></span><br><span class="line">    <span class="keyword">if</span> ((root.right &amp;&amp; root.right.val &lt; root.val) || (root.left &amp;&amp; root.left.val &gt; root.val)) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> isValidBST(root.right) &amp;&amp; isValidBST(root.left)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(isValidBST(root4))</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¯¹ç‰¹æ€§çš„è€ƒå¯Ÿï¼šå°†æ’åºæ•°ç»„è½¬åŒ–ä¸ºäºŒå‰æœç´¢æ ‘"><a href="#å¯¹ç‰¹æ€§çš„è€ƒå¯Ÿï¼šå°†æ’åºæ•°ç»„è½¬åŒ–ä¸ºäºŒå‰æœç´¢æ ‘" class="headerlink" title="å¯¹ç‰¹æ€§çš„è€ƒå¯Ÿï¼šå°†æ’åºæ•°ç»„è½¬åŒ–ä¸ºäºŒå‰æœç´¢æ ‘"></a>å¯¹ç‰¹æ€§çš„è€ƒå¯Ÿï¼šå°†æ’åºæ•°ç»„è½¬åŒ–ä¸ºäºŒå‰æœç´¢æ ‘</h4><blockquote><p>é¢˜ç›®æè¿°ï¼šå°†ä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æœ‰åºæ•°ç»„ï¼Œè½¬æ¢ä¸ºä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘<br>ç»™å®šæœ‰åºæ•°ç»„: [-10,-3,0,5,9]</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> sortedArrayToBST = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!(nums &amp;&amp; nums.length)) <span class="keyword">return</span> <span class="keyword">new</span> TreeNode();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> len = nums.length</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å› ä¸ºè¦ä¿è¯äºŒå‰æ ‘çš„å¹³è¡¡ï¼Œæ‰€ä»¥æ•°ç»„ä¸­é—´çš„å€¼ä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">let</span> root = buildBST(<span class="number">0</span>, len - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">buildBST</span>(<span class="params">startIndex, endIndex</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// æ•°ç»„èµ°å®Œäº†</span></span><br><span class="line">        <span class="keyword">if</span> (startIndex &gt; endIndex) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">        <span class="comment">// æ‰¾æ ¹èŠ‚ç‚¹  0,1,2,3, 4,5,6, 7,8 (startIndex + (endIndex - startIndex)/2)ä¸ºè®¡ç®— startIndex, endIndex è¿™ä¸ªä¸¤ä¸ªindexçš„ä¸­é—´indexä¸ºå¤šå°‘</span></span><br><span class="line">        <span class="keyword">let</span> mid = <span class="built_in">Math</span>.floor((startIndex + (endIndex - startIndex) / <span class="number">2</span>));</span><br><span class="line">        <span class="comment">// ç”Ÿæˆæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> cur = <span class="keyword">new</span> TreeNode(nums[mid])</span><br><span class="line">        <span class="comment">// å·¦å­æ ‘</span></span><br><span class="line">        cur.left = buildBST(startIndex, mid - <span class="number">1</span>)</span><br><span class="line">        <span class="comment">// å³å­æ ‘</span></span><br><span class="line">        cur.right = buildBST(mid + <span class="number">1</span>, endIndex)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cur</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(sortedArrayToBST([-10, -3, 0, 5, 9]))</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> BFS </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç•™è¨€æ¿åŠ¨æ€ä¿¡å°æ•ˆæœ</title>
      <link href="/2021/02/05/theme-comments/"/>
      <url>/2021/02/05/theme-comments/</url>
      
        <content type="html"><![CDATA[<p>è¿™é‡Œæ˜¯å‚è€ƒçš„<a href="https://akilar.top/posts/e2d3c450/">ç³–æœå±‹</a>ç•™è¨€æ¿çš„æ•ˆæœï¼Œæ„Ÿè°¢å¤§ä½¬æä¾›çš„æ•™ç¨‹ã€‚<br>é¡ºä¾¿ä¹Ÿä¸ºè‡ªå·±é­”æ”¹ä¸»é¢˜ç•™ä¸ªè®°å½•ï¼Œæ–¹ä¾¿åæœŸä¼˜åŒ–~ğŸ˜‰</p><h3 id="æ–°å»ºç•™è¨€æ¿é¡µé¢"><a href="#æ–°å»ºç•™è¨€æ¿é¡µé¢" class="headerlink" title="æ–°å»ºç•™è¨€æ¿é¡µé¢"></a>æ–°å»ºç•™è¨€æ¿é¡µé¢</h3><blockquote><p>å¦‚æœå·²ç»ç”Ÿæˆè¿‡ç•™è¨€æ¿çš„ç«¥é‹å¯ä»¥ç›´æ¥è·³è¿‡~</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page comments</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹ç•™è¨€æ¿å†…å®¹"><a href="#ä¿®æ”¹ç•™è¨€æ¿å†…å®¹" class="headerlink" title="ä¿®æ”¹ç•™è¨€æ¿å†…å®¹"></a>ä¿®æ”¹ç•™è¨€æ¿å†…å®¹</h3><blockquote><p>æ‰¾åˆ°<code>source/comments/index.md</code>ï¼š</p></blockquote><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: ç•™è¨€æ¿</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">---</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"><span class="xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/commentsbar.css&quot;</span>/&gt;</span></span></span></span><br><span class="line"><span class="emphasis">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;computer&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;maincontent&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">      <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;form-wrap&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/gh/Akilarlxh/Valine-Admin@v1.0/source/img/before.png&quot;</span> <span class="attr">id</span>=<span class="string">&quot;beforeimg&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">        <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;envelope&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">          <span class="xml"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">            <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;formmain&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">              <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;headerimg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U5bb04af32be544c4b41206d9a42fcacfd.jpg&quot;</span>/&gt;</span></span></span></span><br><span class="line"><span class="emphasis">              <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 5px 20px;&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                <span class="xml"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                  <span class="xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">calss</span>=<span class="string">&quot;title3&quot;</span>&gt;</span></span>æ¥è‡ªAkilarçš„ç•™è¨€:<span class="xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                <span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                <span class="xml"><span class="tag">&lt;<span class="name">center</span> <span class="attr">class</span>=<span class="string">&quot;comments&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                  æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                  æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                  æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                  å“ªæ€•æ˜¯æœ‰ä»€ä¹ˆæƒ³åƒçš„ï¼Œéƒ½å¯ä»¥å‘Šè¯‰æˆ‘å“¦~<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                <span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bottomcontent&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;bottomimg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U0968ee80fd5c4f05a02bdda9709b041eE.png&quot;</span>/&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;bottomhr&quot;</span>&gt;</span></span>è‡ªåŠ¨ä¹¦è®°äººå¶ç«­è¯šä¸ºæ‚¨æœåŠ¡ï¼<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">              <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">            <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">          <span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">        <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;afterimg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/gh/Akilarlxh/Valine-Admin@v1.0/source/img/after.png&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">      <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">    <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">  <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mobile&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">    <span class="xml"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">      <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;formmain&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;headerimg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U5bb04af32be544c4b41206d9a42fcacfd.jpg&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="emphasis">        <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 5px 20px;&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">          <span class="xml"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">            <span class="xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title3&quot;</span>&gt;</span></span>æ¥è‡ªAkilarçš„ç•™è¨€:<span class="xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">          <span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">          <span class="xml"><span class="tag">&lt;<span class="name">center</span> <span class="attr">class</span>=<span class="string">&quot;comments&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">            æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">            æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">            æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">            å“ªæ€•æ˜¯æœ‰ä»€ä¹ˆæƒ³åƒçš„ï¼Œéƒ½å¯ä»¥å‘Šè¯‰æˆ‘å“¦~<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">          <span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">          <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bottomcontent&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U0968ee80fd5c4f05a02bdda9709b041eE.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bottomhr&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">          <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;bottomhr&quot;</span>&quot;&gt;</span></span>è‡ªåŠ¨ä¹¦è®°äººå¶ç«­è¯šä¸ºæ‚¨æœåŠ¡ï¼<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">        <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">      <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">    <span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">  <span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br></pre></td></tr></table></figure><h3 id="å¢åŠ æ ·å¼"><a href="#å¢åŠ æ ·å¼" class="headerlink" title="å¢åŠ æ ·å¼"></a>å¢åŠ æ ·å¼</h3><p>åœ¨<code>/butterfly/source/css/self.css</code>ä¸­å¢åŠ å¦‚ä¸‹æ ·å¼ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ»šåŠ¨æ¡éšè— */</span></span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç¦ç”¨å›¾ç‰‡ç‚¹å‡»,butterflyæ¸²æŸ“åä¼šç»™å›¾ç‰‡å¥—ä¸Šfancyboxï¼Œç‚¹å¼€åä¼šé€ æˆä¿¡ç¬ºåç§»*/</span></span><br><span class="line"><span class="selector-class">.fancybox</span>&#123;</span><br><span class="line">   <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* top-imgéšè— */</span></span><br><span class="line"><span class="selector-id">#page-header</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å®½åº¦å°äº530pxéšè—ä¿¡å° */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">530px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#computer</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">530px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#mobile</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">0rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#form-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">447px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> ease-in-out .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è°ƒæ•´ä¿¡å°åˆ’å‡ºé«˜åº¦ï¼Œæ¢ä¿¡ç¬ºå†…å®¹ä»¥åå¯åœ¨æ­¤è®¾ç½®height */</span></span><br><span class="line"><span class="selector-id">#form-wrap</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1050px</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#beforeimg</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">126px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">530px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">317px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">100</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#afterimg</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">530px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">259px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#envelope</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: visible;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span> auto;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> ease-in-out .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#maincontent</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">530px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span> auto <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.headerimg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.formmain</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: white;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">95%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto auto;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.12</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.18</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title3</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">246</span>, <span class="number">214</span>, <span class="number">175</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.comments</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">#ddd</span> <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">#ddd</span> <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">#ddd</span> <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">#ddd</span> <span class="number">1px</span> solid;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Arial&quot;</span>, <span class="string">&quot;Microsoft YaHei&quot;</span>, <span class="string">&quot;é»‘ä½“&quot;</span>, <span class="string">&quot;å®‹ä½“&quot;</span>, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bottomcontent</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bottomimg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5px</span> auto <span class="number">5px</span> auto;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bottomhr</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å¤œé—´æ¨¡å¼ */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span></span><br><span class="line">  <span class="selector-class">.formmain</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span></span><br><span class="line">  <span class="selector-class">.comments</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">90</span>, <span class="number">90</span>, <span class="number">90</span>, <span class="number">0.8</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="å°†æ ·å¼æ³¨å…¥ä¸»é¢˜"><a href="#å°†æ ·å¼æ³¨å…¥ä¸»é¢˜" class="headerlink" title="å°†æ ·å¼æ³¨å…¥ä¸»é¢˜"></a>å°†æ ·å¼æ³¨å…¥ä¸»é¢˜</h3><p>åœ¨ä¸»é¢˜çš„<code>_config.yml</code>ä¸­,æ‰¾åˆ°<code>inject</code>,<code>self.css</code>æ˜¯è‡ªå·±åˆ›å»ºç”¨æ¥é­”æ”¹ä¸»é¢˜ä½¿çš„æ ·å¼æ–‡ä»¶:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/self.css&quot;&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç•™è¨€æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»™butterflyä¸»é¢˜æ·»åŠ çœ‹æ¿å¨˜</title>
      <link href="/2021/02/03/theme_live2d/"/>
      <url>/2021/02/03/theme_live2d/</url>
      
        <content type="html"><![CDATA[<h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><p><img src="/images/live2d/live2d.gif" alt="å°å¯çˆ±"></p><h3 id="ç®€å•ç‰ˆï¼ˆå•ä¸€æ¨¡å‹ï¼‰"><a href="#ç®€å•ç‰ˆï¼ˆå•ä¸€æ¨¡å‹ï¼‰" class="headerlink" title="ç®€å•ç‰ˆï¼ˆå•ä¸€æ¨¡å‹ï¼‰"></a>ç®€å•ç‰ˆï¼ˆå•ä¸€æ¨¡å‹ï¼‰</h3><p><a href="https://github.com/EYHN/hexo-helper-live2d">ä¼ é€é—¨</a></p><h4 id="1ï¼Œå®‰è£…ä¾èµ–"><a href="#1ï¼Œå®‰è£…ä¾èµ–" class="headerlink" title="1ï¼Œå®‰è£…ä¾èµ–"></a>1ï¼Œå®‰è£…ä¾èµ–</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add  hexo-helper-live2d</span><br></pre></td></tr></table></figure><h4 id="2-åœ¨hexoæ ¹ç›®å½•-config-ymlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š"><a href="#2-åœ¨hexoæ ¹ç›®å½•-config-ymlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š" class="headerlink" title="2.åœ¨hexoæ ¹ç›®å½•_config.ymlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š"></a>2.åœ¨hexoæ ¹ç›®å½•<code>_config.yml</code>ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Live2D</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># https://github.com/EYHN/hexo-helper-live2d</span></span></span><br><span class="line">live2d:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="meta">  #</span><span class="bash"> <span class="built_in">enable</span>: <span class="literal">false</span></span></span><br><span class="line">  scriptFrom: local # é»˜è®¤</span><br><span class="line">  pluginRootPath: live2dw/ # æ’ä»¶åœ¨ç«™ç‚¹ä¸Šçš„æ ¹ç›®å½•(ç›¸å¯¹è·¯å¾„)</span><br><span class="line">  pluginJsPath: lib/ # è„šæœ¬æ–‡ä»¶ç›¸å¯¹ä¸æ’ä»¶æ ¹ç›®å½•è·¯å¾„</span><br><span class="line">  pluginModelPath: assets/ # æ¨¡å‹æ–‡ä»¶ç›¸å¯¹ä¸æ’ä»¶æ ¹ç›®å½•è·¯å¾„</span><br><span class="line"><span class="meta">  #</span><span class="bash"> scriptFrom: jsdelivr <span class="comment"># jsdelivr CDN</span></span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> scriptFrom: unpkg <span class="comment"># unpkg CDN</span></span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> scriptFrom: https://www.unpkg.com/npm/live2d-widget@3.x/lib/L2Dwidget.min.js <span class="comment"># ä½ çš„è‡ªå®šä¹‰ url</span></span></span><br><span class="line">  tagMode: false # æ ‡ç­¾æ¨¡å¼, æ˜¯å¦ä»…æ›¿æ¢ live2d tagæ ‡ç­¾è€Œéæ’å…¥åˆ°æ‰€æœ‰é¡µé¢ä¸­</span><br><span class="line">  debug: false # è°ƒè¯•, æ˜¯å¦åœ¨æ§åˆ¶å°è¾“å‡ºæ—¥å¿—</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-wanko # npm-module package name</span><br><span class="line">    # use: wanko # åšå®¢æ ¹ç›®å½•/live2d_models/ ä¸‹çš„ç›®å½•å</span><br><span class="line">    # use: ./wives/wanko # ç›¸å¯¹äºåšå®¢æ ¹ç›®å½•çš„è·¯å¾„</span><br><span class="line">    # use: https://www.unpkg.com/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # ä½ çš„è‡ªå®šä¹‰ url</span><br><span class="line">  display:</span><br><span class="line">    position: right</span><br><span class="line">    width: 150</span><br><span class="line">    height: 300</span><br><span class="line">  mobile:</span><br><span class="line">    show: true # æ‰‹æœºä¸­æ˜¯å¦å±•ç¤º</span><br></pre></td></tr></table></figure><h4 id="3-æ¨¡å‹ä¸‹è½½"><a href="#3-æ¨¡å‹ä¸‹è½½" class="headerlink" title="3.æ¨¡å‹ä¸‹è½½"></a>3.æ¨¡å‹ä¸‹è½½</h4><p><a href="https://github.com/xiazeyu/live2d-widget-models">ä¸‹è½½åœ°å€</a><br>æ¨èä½¿ç”¨<code>yarn add &lt;package-name&gt;</code>çš„æ–¹å¼ä¸‹è½½æ¨¡å‹ï¼Œä¸‹è½½å®Œæˆååœ¨ä¸Šé¢ç¬¬2æ­¥ä¸­æ‰¾åˆ° <code>model:</code> <code>use:</code> åé¢å†™ä¸Šä½ ä¸‹è½½çš„æ¨¡å‹çš„åå­—å°±å¥½ï¼Œé‡å¯ä¸€ä¸‹hexoæœåŠ¡å°±okå•¦ã€‚</p><h3 id="é«˜çº§ç‰ˆï¼ˆæ›´æ¢æ¨¡å‹â€¦ï¼‰"><a href="#é«˜çº§ç‰ˆï¼ˆæ›´æ¢æ¨¡å‹â€¦ï¼‰" class="headerlink" title="é«˜çº§ç‰ˆï¼ˆæ›´æ¢æ¨¡å‹â€¦ï¼‰"></a>é«˜çº§ç‰ˆï¼ˆæ›´æ¢æ¨¡å‹â€¦ï¼‰</h3><h4 id="1-å»https-github-com-stevenjoezhang-live2d-widgetæŠŠåº“cloneä¸‹æ¥"><a href="#1-å»https-github-com-stevenjoezhang-live2d-widgetæŠŠåº“cloneä¸‹æ¥" class="headerlink" title="1. å»https://github.com/stevenjoezhang/live2d-widgetæŠŠåº“cloneä¸‹æ¥;"></a>1. å»<a href="https://github.com/stevenjoezhang/live2d-widget">https://github.com/stevenjoezhang/live2d-widget</a>æŠŠåº“cloneä¸‹æ¥;</h4><h4 id="2-æ”¾åˆ°-themes-butterfly-source-ä¸‹ï¼Œå¹¶æ”¹åä¸ºlive2d-widget-ä¿®æ”¹é¡¹ç›®ä¸­çš„-autoload-js-æ–‡ä»¶"><a href="#2-æ”¾åˆ°-themes-butterfly-source-ä¸‹ï¼Œå¹¶æ”¹åä¸ºlive2d-widget-ä¿®æ”¹é¡¹ç›®ä¸­çš„-autoload-js-æ–‡ä»¶" class="headerlink" title="2. æ”¾åˆ° /themes/butterfly/source/ä¸‹ï¼Œå¹¶æ”¹åä¸ºlive2d-widget,ä¿®æ”¹é¡¹ç›®ä¸­çš„ autoload.js æ–‡ä»¶:"></a>2. æ”¾åˆ° <code>/themes/butterfly/source/</code>ä¸‹ï¼Œå¹¶æ”¹åä¸º<code>live2d-widget</code>,ä¿®æ”¹é¡¹ç›®ä¸­çš„ <code>autoload.js</code> æ–‡ä»¶:</h4><p> å°†ï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> live2d_path = <span class="string">&quot;https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget/&quot;</span>;</span><br></pre></td></tr></table></figure><p> æ”¹ä¸ºï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> live2d_path = <span class="string">&quot;/live2d-widget/&quot;</span>;</span><br></pre></td></tr></table></figure><h4 id="3-å°†autoload-jsæ³¨å…¥ä¸»é¢˜ï¼Œåœ¨ä¸»é¢˜çš„-config-ymlä¸­æ‰¾åˆ°inject"><a href="#3-å°†autoload-jsæ³¨å…¥ä¸»é¢˜ï¼Œåœ¨ä¸»é¢˜çš„-config-ymlä¸­æ‰¾åˆ°inject" class="headerlink" title="3. å°†autoload.jsæ³¨å…¥ä¸»é¢˜ï¼Œåœ¨ä¸»é¢˜çš„_config.ymlä¸­æ‰¾åˆ°inject"></a>3. å°†<code>autoload.js</code>æ³¨å…¥ä¸»é¢˜ï¼Œåœ¨ä¸»é¢˜çš„<code>_config.yml</code>ä¸­æ‰¾åˆ°<code>inject</code></h4> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Inject</span><br><span class="line"># Insert the code to head (before &#39;&lt;&#x2F;head&gt;&#39; tag) and the bottom (before &#39;&lt;&#x2F;body&gt;&#39; tag)</span><br><span class="line"># æ’å…¥ä»£ç åˆ°å¤´éƒ¨ &lt;&#x2F;head&gt; ä¹‹å‰ å’Œ åº•éƒ¨ &lt;&#x2F;body&gt; ä¹‹å‰</span><br><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    - &lt;script src&#x3D;&quot;&#x2F;live2d-widget&#x2F;autoload.js&quot;&gt;&lt;&#x2F;script&gt;  </span><br><span class="line">  bottom:</span><br></pre></td></tr></table></figure><h4 id="4-é‡å¯hexoæœåŠ¡"><a href="#4-é‡å¯hexoæœåŠ¡" class="headerlink" title="4. é‡å¯hexoæœåŠ¡"></a>4. é‡å¯hexoæœåŠ¡</h4><h4 id="5-æ³¨æ„"><a href="#5-æ³¨æ„" class="headerlink" title="5. æ³¨æ„"></a>5. æ³¨æ„</h4><p>ä»<code>stevenjoezhang</code>ä¸‹è½½ä¸‹æ¥çš„åº“ä½¿ç”¨çš„æ˜¯cdnè¿‡åçš„apiï¼Œä¼šå¯¼è‡´æ¢çš®è‚¤åŠŸèƒ½æ²¡æœ‰æ•ˆæœï¼Œåªéœ€è¦æ‰¾åˆ° <code>live2d-widget/autoload.js</code> ä¸­å°†<code>cdnPath</code>æ³¨é‡Šï¼Œæ‰“å¼€<code>apiPath</code>å°±å¥½äº†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠ è½½ waifu.css live2d.min.js waifu-tips.js</span></span><br><span class="line"><span class="keyword">if</span> (screen.width &gt;= <span class="number">768</span>) &#123;</span><br><span class="line"><span class="built_in">Promise</span>.all([</span><br><span class="line">loadExternalResource(live2d_path + <span class="string">&quot;waifu.css&quot;</span>, <span class="string">&quot;css&quot;</span>),</span><br><span class="line">loadExternalResource(live2d_path + <span class="string">&quot;live2d.min.js&quot;</span>, <span class="string">&quot;js&quot;</span>),</span><br><span class="line">loadExternalResource(live2d_path + <span class="string">&quot;waifu-tips.js&quot;</span>, <span class="string">&quot;js&quot;</span>)</span><br><span class="line">]).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">initWidget(&#123;</span><br><span class="line">waifuPath: live2d_path + <span class="string">&quot;waifu-tips.json&quot;</span>,</span><br><span class="line">apiPath: <span class="string">&quot;https://live2d.fghrsh.net/api/&quot;</span>,</span><br><span class="line"><span class="comment">// cdnPath: &quot;https://fastly.jsdelivr.net/gh/fghrsh/live2d_api/&quot; // ä½¿ç”¨cdnä¼šæ— æ³•æ¢çš®è‚¤</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> live2d </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èµ·ä¼</title>
      <link href="/2021/01/22/mood/"/>
      <url>/2021/01/22/mood/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘æ€æ•…æˆ‘åœ¨â€¦â€¦</p><blockquote><p>Brain:All units function report!<br>Heart: Function loss 99%.<br>Liver: Function loss 99%.<br>Spleen: Function loss 99%.<br>Lung: Function loss 99%.<br>Brain:External support wonâ€™t reverse the situation.<br>How much adrenaline left?<br>Paranephros:Remaining 5%,unable to synthesize.<br>Brain:All remaining adrenaline allocates to nervous system and vocal muscles.<br>Prepare to send the last message to the outside world.<br>Brain:All other units,prepare to cease the function!<br>This instruction wonâ€™t repeat!<br>Thanks you for your tens of years sincere cooperation,farewell!</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> æƒ…ç»ª </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ˆç»ƒä¹ é¢˜(å­¦ä¹ ç¬”è®°)</title>
      <link href="/2021/01/22/stack/"/>
      <url>/2021/01/22/stack/</url>
      
        <content type="html"><![CDATA[<h3 id="é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªåªåŒ…æ‹¬-â€˜-â€˜ï¼Œâ€™-â€™ï¼Œâ€™-â€˜ï¼Œâ€™-â€™ï¼Œâ€™-â€˜ï¼Œâ€™-â€™-çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚"><a href="#é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªåªåŒ…æ‹¬-â€˜-â€˜ï¼Œâ€™-â€™ï¼Œâ€™-â€˜ï¼Œâ€™-â€™ï¼Œâ€™-â€˜ï¼Œâ€™-â€™-çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚" class="headerlink" title="é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™ çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚"></a>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™ çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</h3><ul><li>å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚</li><li>å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚</li><li>æ³¨æ„ç©ºå­—ç¬¦ä¸²å¯è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> strKey = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">strKey.set(<span class="string">&quot;&#123;&quot;</span>, <span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">strKey.set(<span class="string">&quot;[&quot;</span>, <span class="string">&quot;]&quot;</span>);</span><br><span class="line">strKey.set(<span class="string">&quot;(&quot;</span>, <span class="string">&quot;)&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¦æ‹¬å·é›†åˆ</span></span><br><span class="line"><span class="keyword">const</span> left = [<span class="string">&#x27;&#123;&#x27;</span>, <span class="string">&#x27;[&#x27;</span>, <span class="string">&#x27;(&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isValid = <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç©ºå­—ç¬¦ä¸²æ— æ¡ä»¶åˆ¤æ–­ä¸º true</span></span><br><span class="line">  <span class="keyword">if</span> (!str) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿæ ˆ</span></span><br><span class="line">  <span class="keyword">const</span> stack = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> len = str.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> item = str[i];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯å·¦æ‹¬å·ï¼Œé‚£æŠŠå¯¹åº”çš„å³æ‹¬å·æ”¾è¿›æ ˆé‡Œé¢</span></span><br><span class="line">    <span class="keyword">if</span> (left.indexOf(item) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">      stack.push(strKey.get(item));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ç”±äºæ ˆçš„åè¿›å…ˆå‡ºåŸåˆ™ï¼Œé¢˜ä¸­`å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆ`,</span></span><br><span class="line">      <span class="comment">// å½“itemä¸ºå³æ‹¬å·æ—¶ï¼Œåº”è¯¥å’Œæ ˆé¡¶çš„å³æ‹¬å·ç›¸ç­‰ï¼Œå¦åˆ™æ‹¬å·çš„é—­åˆè§„åˆ™é”™è¯¯è¿”å›false</span></span><br><span class="line">      <span class="comment">// å¦‚æœæ ˆé‡Œé¢å·²ç»æ²¡æœ‰æ•°æ®äº†,å­—ç¬¦ä¸²è¿˜æ²¡ç»“æŸï¼Œç›´æ¥ é—­åˆè§„åˆ™ ä¸æˆç«‹ï¼Œè¿”å›false</span></span><br><span class="line">      <span class="keyword">if</span> (!stack.length || stack.pop() !== item) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ ¡éªŒç»“æŸï¼Œæ ˆåº”è¯¥æ˜¯ç©ºçš„</span></span><br><span class="line">  <span class="keyword">return</span> !stack.length</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> str1 = <span class="string">&quot;&#123;&#125;[]()&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> str2 = <span class="string">&quot;&#123;[()]&#125;&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> str3 = <span class="string">&quot;&#123;&#125;&#123;&#125;&#123;()&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> str4 = <span class="string">&quot;&#123;[()]&#125;&#125;&#125;&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> str5 = <span class="string">&quot;&#123;[)()]&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(isValid(str1)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isValid(str2)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isValid(str3)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(isValid(str4)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(isValid(str5)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="é¢˜ç›®æè¿°-æ ¹æ®æ¯æ—¥æ°”æ¸©åˆ—è¡¨ï¼Œè¯·é‡æ–°ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¯¹åº”ä½ç½®çš„è¾“å‡ºæ˜¯éœ€è¦å†ç­‰å¾…å¤šä¹…æ¸©åº¦æ‰ä¼šå‡é«˜è¶…è¿‡è¯¥æ—¥çš„å¤©æ•°ã€‚å¦‚æœä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨-0-æ¥ä»£æ›¿ã€‚"><a href="#é¢˜ç›®æè¿°-æ ¹æ®æ¯æ—¥æ°”æ¸©åˆ—è¡¨ï¼Œè¯·é‡æ–°ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¯¹åº”ä½ç½®çš„è¾“å‡ºæ˜¯éœ€è¦å†ç­‰å¾…å¤šä¹…æ¸©åº¦æ‰ä¼šå‡é«˜è¶…è¿‡è¯¥æ—¥çš„å¤©æ•°ã€‚å¦‚æœä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨-0-æ¥ä»£æ›¿ã€‚" class="headerlink" title="é¢˜ç›®æè¿°: æ ¹æ®æ¯æ—¥æ°”æ¸©åˆ—è¡¨ï¼Œè¯·é‡æ–°ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¯¹åº”ä½ç½®çš„è¾“å‡ºæ˜¯éœ€è¦å†ç­‰å¾…å¤šä¹…æ¸©åº¦æ‰ä¼šå‡é«˜è¶…è¿‡è¯¥æ—¥çš„å¤©æ•°ã€‚å¦‚æœä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ 0 æ¥ä»£æ›¿ã€‚"></a>é¢˜ç›®æè¿°: æ ¹æ®æ¯æ—¥æ°”æ¸©åˆ—è¡¨ï¼Œè¯·é‡æ–°ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¯¹åº”ä½ç½®çš„è¾“å‡ºæ˜¯éœ€è¦å†ç­‰å¾…å¤šä¹…æ¸©åº¦æ‰ä¼šå‡é«˜è¶…è¿‡è¯¥æ—¥çš„å¤©æ•°ã€‚å¦‚æœä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ 0 æ¥ä»£æ›¿ã€‚</h3><ul><li><p>ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ªåˆ—è¡¨ temperatures = [73, 74, 75, 71, 69, 72, 76, 73]ï¼Œä½ çš„è¾“å‡ºåº”è¯¥æ˜¯ [1, 1, 4, 2, 1, 1, 0, 0]ã€‚</p></li><li><p>æç¤ºï¼šæ°”æ¸© åˆ—è¡¨é•¿åº¦çš„èŒƒå›´æ˜¯ [1, 30000]ã€‚æ¯ä¸ªæ°”æ¸©çš„å€¼çš„å‡ä¸ºåæ°åº¦ï¼Œéƒ½æ˜¯åœ¨ [30, 100] èŒƒå›´å†…çš„æ•´æ•°ã€‚</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> temp = [<span class="number">73</span>, <span class="number">74</span>, <span class="number">75</span>, <span class="number">71</span>, <span class="number">69</span>, <span class="number">72</span>, <span class="number">76</span>, <span class="number">73</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dailyTemperatures = <span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> len = arr.length;</span><br><span class="line">  <span class="keyword">let</span> resArr = (<span class="keyword">new</span> <span class="built_in">Array</span>(len)).fill(<span class="number">0</span>); <span class="comment">// ç»“æœæ•°ç»„ï¼Œå’Œæ¸©åº¦æ•°ç»„ç­‰é•¿ï¼Œå…ˆå ä½ä¸º0</span></span><br><span class="line">  <span class="keyword">let</span> stack = []; <span class="comment">// åˆå§‹åŒ–æ ˆ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> item = arr[i];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹æ¯” ä¸‹ä¸€ä¸ªå€¼æ˜¯å¦å¤§äºå½“å‰å€¼</span></span><br><span class="line">    <span class="keyword">while</span> (stack.length &amp;&amp; item &gt; arr[stack[stack.length - <span class="number">1</span>]]) &#123;</span><br><span class="line">      <span class="comment">// åˆ™æ‰¾åˆ°äº†ä¸‹ä¸€ä¸ªæ¯”å½“å‰å€¼å¤§çš„æ•°æ®ï¼Œå–å‡ºæ ˆé¡¶çš„æ•°æ®</span></span><br><span class="line">      <span class="keyword">let</span> top = stack.pop();</span><br><span class="line">      <span class="comment">// ä¸¤ä¸ªindex ç›¸å‡ï¼Œç®—å‡ºè¿‡äº†å‡ å¤©æ¸©åº¦è¶…è¿‡</span></span><br><span class="line">      resArr[top] = i - top</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stack.push(i) <span class="comment">// åƒæ ˆé‡Œpushå½“å‰æ•°æ®çš„index</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> resArr</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dailyTemperatures(temp))</span><br></pre></td></tr></table></figure><h3 id="é¢˜ç›®æè¿°ï¼šè®¾è®¡ä¸€ä¸ªæ”¯æŒ-push-ï¼Œpop-ï¼Œtop-æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚"><a href="#é¢˜ç›®æè¿°ï¼šè®¾è®¡ä¸€ä¸ªæ”¯æŒ-push-ï¼Œpop-ï¼Œtop-æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚" class="headerlink" title="é¢˜ç›®æè¿°ï¼šè®¾è®¡ä¸€ä¸ªæ”¯æŒ push ï¼Œpop ï¼Œtop æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚"></a>é¢˜ç›®æè¿°ï¼šè®¾è®¡ä¸€ä¸ªæ”¯æŒ push ï¼Œpop ï¼Œtop æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚</h3><blockquote><p>æ ˆçš„è®¾è®¡â€”â€”â€œæœ€å°æ ˆâ€é—®é¢˜</p></blockquote><ul><li><p><code>push(x)</code>  â€”â€” å°†å…ƒç´  x æ¨å…¥æ ˆä¸­ã€‚</p></li><li><p><code>pop()</code>    â€”â€” åˆ é™¤æ ˆé¡¶çš„å…ƒç´ ã€‚</p></li><li><p><code>getTop()</code> â€”â€” è·å–æ ˆé¡¶å…ƒç´ ã€‚</p></li><li><p><code>getMin()</code> â€”â€” æ£€ç´¢æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚</p></li><li><p><code>æœ€å°æ ˆæ€è·¯</code>ï¼š</p></li><li><p>åˆ›å»ºä¸€ä¸ª<code>é€’å‡æ ˆ</code>ï¼åœ¨æ“ä½œæ ˆpush,popæ—¶ï¼Œè¿™ä¸ªæ ˆçš„æ ˆé¡¶æ°¸è¿œä¿æŒæœ€å°æ•°æ®ï¼Œè¿™æ ·å–æœ€å°å€¼åªéœ€è¦å–ä¸€ä¸‹è¿™ä¸ªæ ˆçš„æ ˆé¡¶ï¼Œè·Ÿ<code>å¾ªç¯</code>æ ˆç„¶åæ‰¾åˆ°æœ€å°å€¼æ¯”ï¼Œæ˜¯ç©ºé—´æ¢æ—¶é—´ï¼Œ<code>O(n) -&gt; O(1)</code></p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MinStack</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–æ ˆ</span></span><br><span class="line">  <span class="built_in">this</span>.stack = [];</span><br><span class="line">  <span class="comment">// é€’å‡æ ˆ</span></span><br><span class="line">  <span class="built_in">this</span>.minStack = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MinStack.prototype = &#123;</span><br><span class="line">  <span class="title">constructor</span>: <span class="title">MinStack</span>,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * å…¥æ ˆ</span><br><span class="line">   * @<span class="title">param</span> &#123;*&#125; data  å…¥æ ˆæ•°æ®</span><br><span class="line">   */</span><br><span class="line">  push: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (data === <span class="literal">null</span> || data === <span class="literal">undefined</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">this</span>.stack.push(data);</span><br><span class="line">    <span class="comment">// å½“æ ˆè¿˜æ˜¯ç©ºå’Œpushçš„æ•°æ®å°äºç­‰äº minStackæ ˆé¡¶çš„å€¼ï¼Œå°±æŠŠè¿™ä¸ªæ›´å°çš„å€¼pushå…¥minStack</span></span><br><span class="line">    <span class="comment">// æ¯”æ ˆé¡¶è¿˜å¤§çš„æ•°æ®ï¼Œå°±è‚¯å®šä¸æ˜¯æœ€å°å€¼ï¼Œä¸ç”¨å…¥minStackæ ˆ</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.minStack.length || <span class="built_in">this</span>.minStack[<span class="built_in">this</span>.minStack.length - <span class="number">1</span>] &gt;= data) &#123;</span><br><span class="line">      <span class="built_in">this</span>.minStack.push(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å‡ºæ ˆ</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  pop: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.stack.length) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœå‡ºæ ˆçš„å€¼ç­‰äºæœ€å°æ ˆé¡¶çš„å€¼ï¼Œè¯æ˜æœ€å°å€¼å‡ºæ ˆäº†ï¼Œåˆ™minStackä¹Ÿéœ€è¦æŠŠè¿™ä¸ªæœ€å°å€¼å‡ºæ ˆï¼Œç¡®ä¿æ ˆæœ€å°å€¼çš„æ­£ç¡®æ€§</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.stack.pop() === <span class="built_in">this</span>.minStack[<span class="built_in">this</span>.minStack.length - <span class="number">1</span>]) &#123;</span><br><span class="line">      <span class="built_in">this</span>.minStack.pop()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å–æ ˆé¡¶çš„æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  getTop: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.stack.length) <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.stack[<span class="built_in">this</span>.stack.length - <span class="number">1</span>];</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è·å–æ ˆä¸­æœ€å°å€¼</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  getMin: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.minStack.length) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.minStack[<span class="built_in">this</span>.minStack.length - <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Stack = <span class="keyword">new</span> MinStack();</span><br><span class="line">Stack.push(<span class="number">0</span>)</span><br><span class="line">Stack.push(<span class="number">1</span>)</span><br><span class="line">Stack.push(-<span class="number">1</span>)</span><br><span class="line">Stack.push(-<span class="number">3</span>)</span><br><span class="line">Stack.push(<span class="number">1</span>)</span><br><span class="line">Stack.push(<span class="number">7</span>)</span><br><span class="line">Stack.pop()</span><br><span class="line">Stack.push(<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Stack.stack)    <span class="comment">// [ 0, 1, -1, -3, 1, 6 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(Stack.minStack) <span class="comment">// [ 0, -1, -3 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(Stack.getMin()) <span class="comment">// -3</span></span><br><span class="line"><span class="built_in">console</span>.log(Stack.getTop()) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure><h3 id="é¢˜ç›®æè¿°ï¼šä½¿ç”¨æ ˆå®ç°é˜Ÿåˆ—çš„ä¸‹åˆ—æ“ä½œï¼š"><a href="#é¢˜ç›®æè¿°ï¼šä½¿ç”¨æ ˆå®ç°é˜Ÿåˆ—çš„ä¸‹åˆ—æ“ä½œï¼š" class="headerlink" title="é¢˜ç›®æè¿°ï¼šä½¿ç”¨æ ˆå®ç°é˜Ÿåˆ—çš„ä¸‹åˆ—æ“ä½œï¼š"></a>é¢˜ç›®æè¿°ï¼šä½¿ç”¨æ ˆå®ç°é˜Ÿåˆ—çš„ä¸‹åˆ—æ“ä½œï¼š</h3><ul><li><code>push(x)</code>   â€“ å°†ä¸€ä¸ªå…ƒç´ æ”¾å…¥é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚</li><li><code>pop()</code>     â€“ ä»é˜Ÿåˆ—é¦–éƒ¨ç§»é™¤å…ƒç´ ã€‚</li><li><code>peek()</code>    â€“ è¿”å›é˜Ÿåˆ—é¦–éƒ¨çš„å…ƒç´ ã€‚</li><li><code>empty()</code>   â€“ è¿”å›é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€‚</li></ul><blockquote><p>ç¤ºä¾‹:<br>MyQueue queue = new MyQueue();<br>queue.push(1);<br>queue.push(2);<br>queue.peek(); // è¿”å› 1<br>queue.pop(); // è¿”å› 1<br>queue.empty(); // è¿”å› false</p></blockquote><blockquote><p>è¯´æ˜:<br>ä½ åªèƒ½ä½¿ç”¨æ ‡å‡†çš„æ ˆæ“ä½œ â€“ ä¹Ÿå°±æ˜¯åªæœ‰ push to top, peek/pop from top, size, å’Œ is empty æ“ä½œæ˜¯åˆæ³•çš„ã€‚<br>ä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ä¹Ÿè®¸ä¸æ”¯æŒæ ˆã€‚ä½ å¯ä»¥ä½¿ç”¨ list æˆ–è€… dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ ˆï¼Œåªè¦æ˜¯æ ‡å‡†çš„æ ˆæ“ä½œå³å¯ã€‚<br>å‡è®¾æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰æ•ˆçš„ ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç©ºçš„é˜Ÿåˆ—ä¸ä¼šè°ƒç”¨ pop æˆ–è€… peek æ“ä½œï¼‰ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ€è·¯: æ ˆï¼šå…ˆè¿›åå‡º ï¼Œé˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆå‡ºï¼Œ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyQueue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.stack1 = [];</span><br><span class="line">  <span class="built_in">this</span>.stack2 = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  å…¥é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MyQueue.prototype.push = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.stack1.push(x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  å‡ºé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MyQueue.prototype.pop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¦‚æœstack2ä¸ºç©ºï¼Œåˆ™æŠŠstack1å‡ºæ ˆåˆ°stack2ï¼Œè¾¾åˆ°ç¿»è½¬stack1çš„ç›®çš„ï¼Œè¿™æ ·ç”±stack1å…¥æ ˆï¼Œstack2 å‡ºæ ˆï¼Œå®ç°äº†é˜Ÿåˆ—çš„å…ˆè¿›å…ˆå‡ºï¼›</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">this</span>.stack2.length &amp;&amp; <span class="built_in">this</span>.stack1.length) &#123;</span><br><span class="line">    <span class="comment">// å½“ stack1 ä¸ä¸ºç©ºæ—¶ï¼Œå‡ºæ ˆ</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">this</span>.stack1.length) &#123;</span><br><span class="line">      <span class="comment">// å°† stack1 å‡ºæ ˆçš„å…ƒç´ æ¨å…¥ stack2</span></span><br><span class="line">      <span class="built_in">this</span>.stack2.push(<span class="built_in">this</span>.stack1.pop())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// stack2 å‡ºæ ˆ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.stack2.pop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›é˜Ÿåˆ—é¦–éƒ¨çš„å…ƒç´ ï¼Œè·Ÿpopæ¯”peekå¹¶æ²¡æœ‰å°†æ•°æ®å‡ºæ ˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MyQueue.prototype.peek = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¦‚æœstack2æ˜¯ç©ºçš„ï¼Œéœ€è¦æŠŠstack1å‡ºæ ˆåˆ°stack2</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">this</span>.stack2.length &amp;&amp; <span class="built_in">this</span>.stack1.length) &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">this</span>.stack1.length) &#123;</span><br><span class="line">      <span class="built_in">this</span>.stack2.push(<span class="built_in">this</span>.stack1.pop());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> len = <span class="built_in">this</span>.stack2.length;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.stack2[len - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ¤æ–­æ˜¯å¦é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MyQueue.prototype.empty = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !<span class="built_in">this</span>.stack1.length &amp;&amp; !<span class="built_in">this</span>.stack2.length</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Queue = <span class="keyword">new</span> MyQueue();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Queue.isEmpty()) <span class="comment">// true</span></span><br><span class="line">Queue.push(<span class="number">1</span>)</span><br><span class="line">Queue.push(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(Queue.isEmpty()) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(Queue.peek())    <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(Queue.pop())     <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(Queue.pop())     <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(Queue.empty())   <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é“¾è¡¨ç»ƒä¹ é¢˜(å­¦ä¹ ç¬”è®°)</title>
      <link href="/2021/01/15/linkedList/"/>
      <url>/2021/01/15/linkedList/</url>
      
        <content type="html"><![CDATA[<h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><h4 id="1-çœŸé¢˜æè¿°ï¼šå°†ä¸¤ä¸ªæœ‰åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºé“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰ç»“ç‚¹ç»„æˆçš„ã€‚"><a href="#1-çœŸé¢˜æè¿°ï¼šå°†ä¸¤ä¸ªæœ‰åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºé“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰ç»“ç‚¹ç»„æˆçš„ã€‚" class="headerlink" title="1. çœŸé¢˜æè¿°ï¼šå°†ä¸¤ä¸ªæœ‰åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºé“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰ç»“ç‚¹ç»„æˆçš„ã€‚"></a>1. çœŸé¢˜æè¿°ï¼šå°†ä¸¤ä¸ªæœ‰åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºé“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰ç»“ç‚¹ç»„æˆçš„ã€‚</h4><blockquote><p>ç¤ºä¾‹ è¾“å…¥ï¼š1-&gt;2-&gt;4, 1-&gt;3-&gt;4 è¾“å‡ºï¼š1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  val: <span class="number">1</span>,</span><br><span class="line">  next: &#123;</span><br><span class="line">    val: <span class="number">2</span>,</span><br><span class="line">    next: &#123;</span><br><span class="line">      val: <span class="number">4</span>,</span><br><span class="line">      next: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> b = &#123;</span><br><span class="line">  val: <span class="number">1</span>,</span><br><span class="line">  next: &#123;</span><br><span class="line">    val: <span class="number">3</span>,</span><br><span class="line">    next: &#123;</span><br><span class="line">      val: <span class="number">4</span>,</span><br><span class="line">      next: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é“¾è¡¨æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ListNode</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.val = val || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="built_in">this</span>.next = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mergeLists = <span class="function"><span class="keyword">function</span> (<span class="params">list1, list2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> head = <span class="keyword">new</span> ListNode();</span><br><span class="line">  <span class="keyword">let</span> cur = head;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åªè¦æœ‰ä¸€ä¸ªç»“æŸäº†å°±ç»“æŸ</span></span><br><span class="line">  <span class="keyword">while</span> (list1 &amp;&amp; list2) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (list1.val &lt;= list2.val) &#123;</span><br><span class="line"></span><br><span class="line">      cur.next = list1;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// list å‘å‰ä¸€æ­¥</span></span><br><span class="line">      list1 = list1.next;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (list1.val &gt; list2.val) &#123;</span><br><span class="line"></span><br><span class="line">      cur.next = list2;</span><br><span class="line">      <span class="comment">// list å‘å‰ä¸€æ­¥</span></span><br><span class="line">      list2 = list2.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡é’ˆå‘å‰ä¸€æ­¥</span></span><br><span class="line">    cur = cur.next;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ä¸ç­‰é•¿æƒ…å†µ</span></span><br><span class="line">  cur.next === list1 === <span class="literal">null</span> ? list2 : list1</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> head.next</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(JSON.stringify(mergeLists(a, b)))</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚"><a href="#2-çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚" class="headerlink" title="2.çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚"></a>2.çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚</h4><blockquote><p>ç¤ºä¾‹ 1:è¾“å…¥: 1-&gt;1-&gt;2-&gt;3-&gt;3 è¾“å‡º: 1-&gt;2-&gt;3</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> c = &#123;</span><br><span class="line">  val: <span class="number">1</span>,</span><br><span class="line">  next: &#123;</span><br><span class="line">    val: <span class="number">1</span>,</span><br><span class="line">    next: &#123;</span><br><span class="line">      val: <span class="number">2</span>,</span><br><span class="line">      next: &#123;</span><br><span class="line">        val: <span class="number">3</span>,</span><br><span class="line">        next: &#123;</span><br><span class="line">          val: <span class="number">3</span>,</span><br><span class="line">          next: <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filterList = <span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> head = list; <span class="comment">// æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (list.next) &#123;</span><br><span class="line">    <span class="keyword">if</span> (list.val === list.next.val) &#123;</span><br><span class="line">      list.next = list.next.next;</span><br><span class="line">      <span class="comment">// å…ˆå‰èµ°ä¸€æ­¥</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      list = list.next;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> head</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(JSON.stringify(filterList(c)))</span></span><br></pre></td></tr></table></figure><h3 id="å¿«æ…¢æŒ‡é’ˆâ€”â€”åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-N-ä¸ªç»“ç‚¹"><a href="#å¿«æ…¢æŒ‡é’ˆâ€”â€”åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-N-ä¸ªç»“ç‚¹" class="headerlink" title="å¿«æ…¢æŒ‡é’ˆâ€”â€”åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹"></a>å¿«æ…¢æŒ‡é’ˆâ€”â€”åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</h3><h4 id="çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-n-ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚"><a href="#çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-n-ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚" class="headerlink" title="çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚"></a>çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</h4><blockquote><p>ä¸‹æ–¹é“¾è¡¨åˆ é™¤å€’æ•°ç¬¬2ä¸ªèŠ‚ç‚¹</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> d = &#123;</span><br><span class="line">  val: <span class="number">1</span>,</span><br><span class="line">  next: &#123;</span><br><span class="line">    val: <span class="number">2</span>,</span><br><span class="line">    next: &#123;</span><br><span class="line">      val: <span class="number">3</span>,</span><br><span class="line">      next: &#123;</span><br><span class="line">        val: <span class="number">4</span>,</span><br><span class="line">        next: &#123;</span><br><span class="line">          val: <span class="number">5</span>,</span><br><span class="line">          next: &#123;</span><br><span class="line">            val: <span class="number">6</span>,</span><br><span class="line">            next: <span class="literal">null</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> removeList = <span class="function"><span class="keyword">function</span> (<span class="params">list, n</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> head = <span class="keyword">new</span> ListNode;</span><br><span class="line">  head.next = list</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> fast = head; <span class="comment">// å¿«æŒ‡é’ˆ</span></span><br><span class="line">  <span class="keyword">let</span> slow = head; <span class="comment">// æ…¢æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¿«æŒ‡é’ˆå…ˆèµ°</span></span><br><span class="line">  <span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    fast = fast.next</span><br><span class="line">    n--</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼€å§‹èµ°é“¾è¡¨</span></span><br><span class="line">  <span class="keyword">while</span> (fast.next) &#123;</span><br><span class="line">    <span class="comment">// å¿«æ…¢æŒ‡é’ˆåŒæ—¶èµ°</span></span><br><span class="line">    fast = fast.next;</span><br><span class="line">    slow = slow.next;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ­¤æ—¶æ…¢æŒ‡é’ˆå°±åœ¨å€’æ•°ç¬¬Nä½ä¸Šï¼Œåˆ é™¤è¯¥èŠ‚ç‚¹</span></span><br><span class="line">  slow.next = slow.next.next</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> head.next</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(JSON.stringify(removeList(d, 2)))</span></span><br></pre></td></tr></table></figure><h3 id="é€’å½’æ³•â€”-é“¾è¡¨çš„åè½¬"><a href="#é€’å½’æ³•â€”-é“¾è¡¨çš„åè½¬" class="headerlink" title="é€’å½’æ³•â€”-é“¾è¡¨çš„åè½¬"></a>é€’å½’æ³•â€”-é“¾è¡¨çš„åè½¬</h3><h4 id="çœŸé¢˜æè¿°ï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚"><a href="#çœŸé¢˜æè¿°ï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚" class="headerlink" title="çœŸé¢˜æè¿°ï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚"></a>çœŸé¢˜æè¿°ï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</h4><blockquote><p>æ€è·¯ï¼šç¿»è½¬å…¶å®å°±æ˜¯å°†nextçš„æŒ‡å‘ç¿»è½¬ï¼Œåç»­èŠ‚ç‚¹çš„nextæŒ‡å‘å‰èŠ‚ç‚¹</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> e = &#123;</span><br><span class="line">  val: <span class="number">1</span>,</span><br><span class="line">  next: &#123;</span><br><span class="line">    val: <span class="number">2</span>,</span><br><span class="line">    next: &#123;</span><br><span class="line">      val: <span class="number">3</span>,</span><br><span class="line">      next: &#123;</span><br><span class="line">        val: <span class="number">4</span>,</span><br><span class="line">        next: &#123;</span><br><span class="line">          val: <span class="number">5</span>,</span><br><span class="line">          next: <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€’å½’æ³•</span></span><br><span class="line"><span class="keyword">const</span> reverseList = <span class="function"><span class="keyword">function</span> (<span class="params">head, list</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (list &amp;&amp; head) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ºäº†è¿”å›æ–°é“¾è¡¨ï¼Œä¸æ”¹å˜åŸé“¾è¡¨</span></span><br><span class="line">    list = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(list))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¼“å­˜é“¾è¡¨åŸæœ¬çš„next</span></span><br><span class="line">    <span class="keyword">let</span> cur = list.next;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åå‘, ç¬¬ä¸€ä¸ªèŠ‚ç‚¹nextå¤„ç†</span></span><br><span class="line">    list.next = head.val ? head : <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> reverseList(list, cur)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> head</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> head = <span class="keyword">new</span> ListNode()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(reverseList(head, e))) <span class="comment">// &#123;&quot;val&quot;:5,&quot;next&quot;:&#123;&quot;val&quot;:4,&quot;next&quot;:&#123;&quot;val&quot;:3,&quot;next&quot;:&#123;&quot;val&quot;:2,&quot;next&quot;:&#123;&quot;val&quot;:1,&quot;next&quot;:null&#125;&#125;&#125;&#125;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(e)) <span class="comment">// &#123;&quot;val&quot;:1,&quot;next&quot;:&#123;&quot;val&quot;:2,&quot;next&quot;:&#123;&quot;val&quot;:3,&quot;next&quot;:&#123;&quot;val&quot;:4,&quot;next&quot;:&#123;&quot;val&quot;:5,&quot;next&quot;:null&#125;&#125;&#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½•åœ¨Linuxä¸­å®‰è£…MongoDB</title>
      <link href="/2020/12/22/linux-mongod/"/>
      <url>/2020/12/22/linux-mongod/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line"></span><br><span class="line">mkdir mongodb</span><br><span class="line"></span><br><span class="line">cd mongodb/</span><br><span class="line"></span><br><span class="line">wget  https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-4.0.7.tgz  ä¸‹è½½</span><br><span class="line"> </span><br><span class="line">tar -zxvf  mongodb-linux-x86_64-4.0.7.tgz è§£å‹</span><br></pre></td></tr></table></figure><h4 id="æ–°å»ºæ–‡ä»¶å¤¹æ”¾æ•°æ®åº“æ•°æ®å’Œlog"><a href="#æ–°å»ºæ–‡ä»¶å¤¹æ”¾æ•°æ®åº“æ•°æ®å’Œlog" class="headerlink" title="æ–°å»ºæ–‡ä»¶å¤¹æ”¾æ•°æ®åº“æ•°æ®å’Œlog"></a>æ–°å»ºæ–‡ä»¶å¤¹æ”¾æ•°æ®åº“æ•°æ®å’Œlog</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd mongodb-linux-x86_64-4.0.7/bin</span><br><span class="line"></span><br><span class="line">mkdir -p logs</span><br><span class="line">mkdir -p data/db</span><br></pre></td></tr></table></figure><h4 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod  777  logs</span><br><span class="line">chmod  777  data</span><br></pre></td></tr></table></figure><h4 id="æ–°å»ºmongodb-conf"><a href="#æ–°å»ºmongodb-conf" class="headerlink" title="æ–°å»ºmongodb.conf"></a>æ–°å»º<code>mongodb.conf</code></h4><p>åˆ›å»ºä¸€ä¸ªmongodb.conf  ç›´æ¥ vim mongodb.conf</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dbpath = /usr/local/mongodb/mongodb-linux-x86_64-4.0.7/bin/data/db #æ•°æ®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">logpath =/usr/local/mongodb/mongodb-linux-x86_64-4.0.7/bin/logs/mongodb.log #æ—¥è®°æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">port = 27017 #ç«¯å£å· é»˜è®¤</span><br><span class="line"></span><br><span class="line">fork = true  #åå°å¯åŠ¨</span><br><span class="line"></span><br><span class="line">bind_ip=0.0.0.0  #å¯å¤–ç½‘è®¿é—®</span><br><span class="line"></span><br><span class="line">auth = true #å¢åŠ ç”¨æˆ·æˆæƒè®¤è¯ åˆ›å»ºç”¨æˆ·åå†åŠ è¿™ä¸ª</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h4><p>binç›®å½•ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mongod -f mongodb.conf</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹è¿›ç¨‹"><a href="#æŸ¥çœ‹è¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹è¿›ç¨‹"></a>æŸ¥çœ‹è¿›ç¨‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux |grep mongodb</span><br></pre></td></tr></table></figure><h4 id="æ€æ­»-mongodb-çš„è¿›ç¨‹"><a href="#æ€æ­»-mongodb-çš„è¿›ç¨‹" class="headerlink" title="æ€æ­» mongodb çš„è¿›ç¨‹"></a>æ€æ­» mongodb çš„è¿›ç¨‹</h4><p>å°½é‡ä¸è¦  kill -9 è¿›ç¨‹çš„ pid 58784<br>æ•°æ®åº“ç›´æ¥å…³é—­ï¼Œæ•°æ®ä¸¢å¤±ï¼Œæ•°æ®æ–‡ä»¶æŸå¤±ï¼Œä¿®å¤æ•°æ®åº“ï¼ˆæˆæœ¬é«˜ï¼Œæœ‰é£é™©ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -2 è¿›ç¨‹å·</span><br></pre></td></tr></table></figure><h4 id="mongodbå¸¸ç”¨å‘½ä»¤"><a href="#mongodbå¸¸ç”¨å‘½ä»¤" class="headerlink" title="mongodbå¸¸ç”¨å‘½ä»¤"></a>mongodbå¸¸ç”¨å‘½ä»¤</h4><h5 id="å¼€å¯ç”¨æˆ·éªŒè¯"><a href="#å¼€å¯ç”¨æˆ·éªŒè¯" class="headerlink" title="å¼€å¯ç”¨æˆ·éªŒè¯"></a>å¼€å¯ç”¨æˆ·éªŒè¯</h5><p>ä¸ºäº†å®‰å…¨æ€§ï¼Œé“¾æ¥æ•°æ®åº“æ—¶æœ€å¥½å¼€å¯ç”¨æˆ·éªŒè¯ï¼Œ<code>mongodb.conf</code>ä¸­åŠ ä¸Š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auth=true</span><br></pre></td></tr></table></figure><h5 id="æ–°å»ºè´¦æˆ·"><a href="#æ–°å»ºè´¦æˆ·" class="headerlink" title="æ–°å»ºè´¦æˆ·"></a>æ–°å»ºè´¦æˆ·</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.createUser(&#123;user:â€è´¦å·â€,pwd:â€å¯†ç â€,roles:[&#123;â€œroleâ€:â€userAdminâ€,â€dbâ€:â€adminâ€&#125;,&#123;â€œroleâ€:â€rootâ€,â€dbâ€:â€adminâ€&#125;,&#123;â€œroleâ€:â€userAdminAnyDatabaseâ€,â€dbâ€:â€adminâ€&#125;]&#125;)</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">db.createUser(&#123;user:&quot;lili&quot;,pwd:&quot;password&quot;,roles:[&quot;userAdmin&quot;]&#125;)</span><br></pre></td></tr></table></figure><h5 id="roles"><a href="#roles" class="headerlink" title="roles"></a>roles</h5><ul><li><p><code>Read</code>ï¼šå…è®¸ç”¨æˆ·è¯»å–æŒ‡å®šæ•°æ®åº“</p></li><li><p><code>readWrite</code>ï¼šå…è®¸ç”¨æˆ·è¯»å†™æŒ‡å®šæ•°æ®åº“</p></li><li><p><code>dbAdmin</code>ï¼šå…è®¸ç”¨æˆ·åœ¨æŒ‡å®šæ•°æ®åº“ä¸­æ‰§è¡Œç®¡ç†å‡½æ•°ï¼Œå¦‚ç´¢å¼•åˆ›å»ºã€åˆ é™¤ï¼ŒæŸ¥çœ‹ç»Ÿè®¡æˆ–è®¿é—®system.profile</p></li><li><p><code>userAdmin</code>ï¼šå…è®¸ç”¨æˆ·å‘system.usersé›†åˆå†™å…¥ï¼Œå¯ä»¥æ‰¾æŒ‡å®šæ•°æ®åº“é‡Œåˆ›å»ºã€åˆ é™¤å’Œç®¡ç†ç”¨æˆ·</p></li><li><p><code>clusterAdmin</code>ï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰åˆ†ç‰‡å’Œå¤åˆ¶é›†ç›¸å…³å‡½æ•°çš„ç®¡ç†æƒé™ã€‚</p></li><li><p><code>readAnyDatabase</code>ï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„è¯»æƒé™</p></li><li><p><code>readWriteAnyDatabase</code>ï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„è¯»å†™æƒé™</p></li><li><p><code>userAdminAnyDatabase</code>ï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„userAdminæƒé™</p></li><li><p><code>dbAdminAnyDatabase</code>ï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„dbAdminæƒé™ã€‚</p></li><li><p><code>root</code>ï¼šåªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ã€‚è¶…çº§è´¦å·ï¼Œè¶…çº§æƒé™(æœ¬æ¬¡åˆ›å»ºçš„å°±æ˜¯è¶…çº§è´¦å·)</p></li></ul><h5 id="æŸ¥çœ‹æ‰€æœ‰è´¦æˆ·"><a href="#æŸ¥çœ‹æ‰€æœ‰è´¦æˆ·" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰è´¦æˆ·"></a>æŸ¥çœ‹æ‰€æœ‰è´¦æˆ·</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.system.users.find()</span><br></pre></td></tr></table></figure><h5 id="åˆ é™¤è´¦æˆ·"><a href="#åˆ é™¤è´¦æˆ·" class="headerlink" title="åˆ é™¤è´¦æˆ·"></a>åˆ é™¤è´¦æˆ·</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.dropUser(&quot;username&quot;)</span><br></pre></td></tr></table></figure><h5 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.auth(&quot;admin&quot;,&quot;password&quot;)</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹æ‰€æœ‰çš„åº“"><a href="#æŸ¥çœ‹æ‰€æœ‰çš„åº“" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰çš„åº“"></a>æŸ¥çœ‹æ‰€æœ‰çš„åº“</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br></pre></td></tr></table></figure><h5 id="åˆ‡æ¢åº“"><a href="#åˆ‡æ¢åº“" class="headerlink" title="åˆ‡æ¢åº“"></a>åˆ‡æ¢åº“</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use admin</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹æ‰€æœ‰çš„é›†åˆ-è¡¨"><a href="#æŸ¥çœ‹æ‰€æœ‰çš„é›†åˆ-è¡¨" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰çš„é›†åˆ(è¡¨)"></a>æŸ¥çœ‹æ‰€æœ‰çš„é›†åˆ(è¡¨)</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show collections</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹è¡¨æ•°æ®"><a href="#æŸ¥çœ‹è¡¨æ•°æ®" class="headerlink" title="æŸ¥çœ‹è¡¨æ•°æ®"></a>æŸ¥çœ‹è¡¨æ•°æ®</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.è¡¨å.find()</span><br><span class="line">db.è¡¨å.find().pretty()</span><br></pre></td></tr></table></figure><h4 id="æœ¬åœ°é“¾æ¥"><a href="#æœ¬åœ°é“¾æ¥" class="headerlink" title="æœ¬åœ°é“¾æ¥"></a>æœ¬åœ°é“¾æ¥</h4><p>macä½¿ç”¨å›¾å½¢åŒ–å·¥å…·<code>mongoHub</code>, nodeä¸­ä½¿ç”¨<code>mongooes</code>;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  é“¾æ¥è§„åˆ™</span></span><br><span class="line"><span class="comment">// mongodb://username:password@host:port/dbName?authSource=dbName</span></span><br><span class="line"><span class="comment">// eg:</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; dbName, host, port, user, password &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../config/config&#x27;</span>).database;</span><br><span class="line"><span class="keyword">const</span> db = <span class="string">`mongodb://<span class="subst">$&#123;user&#125;</span>:<span class="subst">$&#123;password&#125;</span>@<span class="subst">$&#123;host&#125;</span>:<span class="subst">$&#123;port&#125;</span>/<span class="subst">$&#123;dbName&#125;</span>?authSource=<span class="subst">$&#123;dbName&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.connect = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿æ¥æ•°æ®åº“</span></span><br><span class="line">  mongoose.connect(db, &#123; <span class="attr">useNewUrlParser</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> maxConnectTimes = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">//ç›‘å¬äº‹ä»¶</span></span><br><span class="line">  mongoose.connection.on(<span class="string">&#x27;disconnected&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;disconnected&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (maxConnectTimes &lt;= <span class="number">3</span>) &#123;</span><br><span class="line">      maxConnectTimes++;</span><br><span class="line">      mongoose.connect(db);</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;db error&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  mongoose.connection.on(<span class="string">&#x27;error&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (maxConnectTimes &lt;= <span class="number">3</span>) &#123;</span><br><span class="line">      maxConnectTimes++;</span><br><span class="line">      mongoose.connect(db);</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;db error:&#x27;</span> + err);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  mongoose.connection.on(<span class="string">&#x27;connected&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;mongo connect success&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mongod </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pdfjs-dist + react ä½¿ç”¨è®°å½•</title>
      <link href="/2020/12/21/pdfJs-React-js/"/>
      <url>/2020/12/21/pdfJs-React-js/</url>
      
        <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><blockquote><p>æœ¬ç‰‡æ–‡ç« ä»…ä¸ºç¬”è®°ï¼Œä¸åšå…·ä½“è®²è§£ã€‚<br>æ–‡æ¡£åœ°å€ï¼š<a href="https://github.com/mozilla/pdf.js">https://github.com/mozilla/pdf.js</a><br>å‚è€ƒä¾‹å­ï¼š pdf.js/examples/mobile-viewer/</p></blockquote><h4 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h4><p><img src="/images/react/pdfjs.jpg" alt="æ•ˆæœ"></p><h4 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line">import * as PDFJS from &#39;pdfjs-dist&#39;</span><br><span class="line">import * as PDFViewer from &#39;pdfjs-dist&#x2F;web&#x2F;pdf_viewer&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default class PDF extends React.Component&lt;any, any&gt;&#123;</span><br><span class="line">  pageRenderRef: React.RefObject&lt;any&gt;;</span><br><span class="line">  errorWrapper: React.RefObject&lt;any&gt;;</span><br><span class="line">  pageRenders: []</span><br><span class="line">  pdfViewer: any  &#x2F;&#x2F; ä¸çŸ¥é“pdfjså¯¼å‡ºçš„æ•°æ®æ˜¯ä»€ä¹ˆç±»å‹ï¼Œç»Ÿä¸€ä½¿ç”¨any</span><br><span class="line">  eventBus: any</span><br><span class="line">  pdfLinkService: any</span><br><span class="line">  l10n: any</span><br><span class="line">  pdfHistory: any</span><br><span class="line">  pdfLoadingTask: any</span><br><span class="line">  pdfDocument: any</span><br><span class="line">  &#x2F;&#x2F; loadingBar: any</span><br><span class="line"></span><br><span class="line">  constructor(props: any) &#123;</span><br><span class="line">    super(props)</span><br><span class="line">    this.pageRenders &#x3D; [];   &#x2F;&#x2F; å­˜æ”¾æ¯é¡µpdfå½¢æˆçš„canvas</span><br><span class="line">    this.pageRenderRef &#x3D; React.createRef();  &#x2F;&#x2F; æ¸²æŸ“pdfçš„å®¹å™¨</span><br><span class="line">    this.errorWrapper &#x3D; React.createRef();</span><br><span class="line">    this.pdfViewer &#x3D; null</span><br><span class="line">    this.eventBus &#x3D; null</span><br><span class="line">    this.pdfLinkService &#x3D; null</span><br><span class="line">    this.l10n &#x3D; null</span><br><span class="line">    this.pdfHistory &#x3D; null</span><br><span class="line">    this.pdfLoadingTask &#x3D; null</span><br><span class="line">    this.pdfDocument &#x3D; null</span><br><span class="line"></span><br><span class="line">    this.state &#x3D; &#123;</span><br><span class="line">      USE_ONLY_CSS_ZOOM: true,</span><br><span class="line">      TEXT_LAYER_MODE: 0, &#x2F;&#x2F; DISABLE</span><br><span class="line">      MAX_IMAGE_SIZE: 1024 * 1024,</span><br><span class="line">      CMAP_URL: &quot;https:&#x2F;&#x2F;unpkg.com&#x2F;pdfjs-dist@2.2.228&#x2F;cmaps&#x2F;&quot;, &#x2F;&#x2F; å¼•å…¥pdf.jsçš„å­—ä½“</span><br><span class="line">      CMAP_PACKED: true,</span><br><span class="line">      &#x2F;&#x2F; DEFAULT_URL: &quot;.&#x2F;compressed.tracemonkey-pldi-09.pdf&quot;,</span><br><span class="line">      DEFAULT_URL: &#39;http:&#x2F;&#x2F;localhost:8082&#x2F;pdfLocal&#x2F;compressed.tracemonkey-pldi-09.pdf&#39;,  &#x2F;&#x2F; æœ¬åœ°é¢„è§ˆ éœ€è¦ä»£ç†</span><br><span class="line">      DEFAULT_SCALE_DELTA: 1.1,</span><br><span class="line">      MIN_SCALE: 0.25,</span><br><span class="line">      MAX_SCALE: 10.0,</span><br><span class="line">      DEFAULT_SCALE_VALUE: &quot;auto&quot;,</span><br><span class="line">      pdfLoadingTask: null,</span><br><span class="line">      toPageNumber: &#39;1&#39;,</span><br><span class="line">      preDisabled: false,</span><br><span class="line">      nextDisabled: false,</span><br><span class="line">      errorWrapperHide: true,</span><br><span class="line">      errorMoreInfoHide: true,</span><br><span class="line">      title: &#39;&#39;,</span><br><span class="line">      url: &#39;&#39;,</span><br><span class="line">      errorMessage: &#39;&#39;,</span><br><span class="line">      errorMoreInfo: &#39;&#39;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    this.init()</span><br><span class="line">    this.animationStartedPromise().then(res &#x3D;&gt; &#123;</span><br><span class="line">      this.open(&#123;</span><br><span class="line">        url: this.state.DEFAULT_URL</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  animationStartedPromise &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    return new Promise((resolve) &#x3D;&gt; &#123;</span><br><span class="line">      window.requestAnimationFrame(resolve);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getloadingBar &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    let bar &#x3D; new PDFViewer.ProgressBar(&quot;#loadingBar&quot;, &#123;&#125;);</span><br><span class="line">    return PDFJS.shadow(this, &quot;loadingBar&quot;, bar);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;**</span><br><span class="line">   * æ¸²æŸ“pdf</span><br><span class="line">   *&#x2F;</span><br><span class="line">  open &#x3D; (params: any) &#x3D;&gt; &#123;</span><br><span class="line">    if (this.pdfLoadingTask) &#123;</span><br><span class="line">      &#x2F;&#x2F; We need to destroy already opened document</span><br><span class="line">      return this.close().then(</span><br><span class="line">        () &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F; ... and repeat the open() call.</span><br><span class="line">          return this.open(params);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    let url: string &#x3D; params.url;</span><br><span class="line">    let self &#x3D; this;</span><br><span class="line">    this.setTitleUsingUrl(url);</span><br><span class="line">    &#x2F;&#x2F; Loading document.</span><br><span class="line">    const loadingTask &#x3D; PDFJS.getDocument(&#123;</span><br><span class="line">      url: url,</span><br><span class="line">      maxImageSize: this.state.MAX_IMAGE_SIZE,</span><br><span class="line">      cMapUrl: this.state.CMAP_URL,</span><br><span class="line">      cMapPacked: this.state.CMAP_PACKED,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    this.pdfLoadingTask &#x3D; loadingTask;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; è¿›åº¦æ¡</span><br><span class="line">    loadingTask.onProgress &#x3D; (progressData: any) &#x3D;&gt; &#123;</span><br><span class="line">      self.progress(progressData.loaded &#x2F; progressData.total);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return loadingTask.promise.then(</span><br><span class="line">      (pdfDocument: any) &#x3D;&gt; &#123;</span><br><span class="line">        console.log(&#39;pdfDocument&#39;, pdfDocument)</span><br><span class="line">        &#x2F;&#x2F; Document loaded, specifying document for the viewer.</span><br><span class="line">        self.pdfDocument &#x3D; pdfDocument;</span><br><span class="line">        self.pdfViewer.setDocument(pdfDocument);</span><br><span class="line">        self.pdfLinkService.setDocument(pdfDocument);</span><br><span class="line">        self.pdfHistory.initialize(&#123; fingerprint: pdfDocument.fingerprint &#125;);</span><br><span class="line"></span><br><span class="line">        self.getloadingBar().hide();</span><br><span class="line">        &#x2F;&#x2F; self.setTitleUsingMetadata(pdfDocument);</span><br><span class="line">      &#125;,</span><br><span class="line">      (exception: any) &#x3D;&gt; &#123;</span><br><span class="line">        console.log(&#39;exception&#39;, exception)</span><br><span class="line">        let message &#x3D; exception &amp;&amp; exception.message;</span><br><span class="line">        let l10n &#x3D; self.l10n;</span><br><span class="line">        let loadingErrorMessage;</span><br><span class="line"></span><br><span class="line">        if (exception instanceof PDFJS.InvalidPDFException) &#123;</span><br><span class="line">          &#x2F;&#x2F; change error message also for other builds</span><br><span class="line">          loadingErrorMessage &#x3D; l10n.get(</span><br><span class="line">            &quot;invalid_file_error&quot;,</span><br><span class="line">            null,</span><br><span class="line">            &quot;Invalid or corrupted PDF file.&quot;</span><br><span class="line">          );</span><br><span class="line">        &#125; else if (exception instanceof PDFJS.MissingPDFException) &#123;</span><br><span class="line">          &#x2F;&#x2F; special message for missing PDFs</span><br><span class="line">          loadingErrorMessage &#x3D; l10n.get(</span><br><span class="line">            &quot;missing_file_error&quot;,</span><br><span class="line">            null,</span><br><span class="line">            &quot;Missing PDF file.&quot;</span><br><span class="line">          );</span><br><span class="line">        &#125; else if (exception instanceof PDFJS.UnexpectedResponseException) &#123;</span><br><span class="line">          loadingErrorMessage &#x3D; l10n.get(</span><br><span class="line">            &quot;unexpected_response_error&quot;,</span><br><span class="line">            null,</span><br><span class="line">            &quot;Unexpected server response.&quot;</span><br><span class="line">          );</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          loadingErrorMessage &#x3D; l10n.get(</span><br><span class="line">            &quot;loading_error&quot;,</span><br><span class="line">            null,</span><br><span class="line">            &quot;An error occurred while loading the PDF.&quot;</span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        loadingErrorMessage.then((msg: any) &#x3D;&gt; &#123;</span><br><span class="line">          self.error(msg, &#123; message: message &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        self.getloadingBar().hide();</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  close &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      errorWrapperHide: true</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    if (!this.pdfLoadingTask) &#123;</span><br><span class="line">      return Promise.resolve();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    let promise &#x3D; this.pdfLoadingTask.destroy();</span><br><span class="line">    this.pdfLoadingTask &#x3D; null;</span><br><span class="line"></span><br><span class="line">    if (this.pdfDocument) &#123;</span><br><span class="line">      this.pdfDocument &#x3D; null;</span><br><span class="line"></span><br><span class="line">      this.pdfViewer.setDocument(null);</span><br><span class="line">      this.pdfLinkService.setDocument(null, null);</span><br><span class="line"></span><br><span class="line">      if (this.pdfHistory) &#123;</span><br><span class="line">        this.pdfHistory.reset();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return promise;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  progress &#x3D; (level: any) &#x3D;&gt; &#123;</span><br><span class="line">    let percent &#x3D; Math.round(level * 100);</span><br><span class="line">    &#x2F;&#x2F; Updating the bar if value increases.</span><br><span class="line">    if (percent &gt; this.getloadingBar().percent || isNaN(percent)) &#123;</span><br><span class="line">      this.getloadingBar().percent &#x3D; percent;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  error &#x3D; (message: any, moreInfo: any) &#x3D;&gt; &#123;</span><br><span class="line">    let l10n &#x3D; this.l10n;</span><br><span class="line">    let moreInfoText &#x3D; [</span><br><span class="line">      l10n.get(</span><br><span class="line">        &quot;error_version_info&quot;,</span><br><span class="line">        &#123; version: PDFJS.version || &quot;?&quot;, build: PDFJS.build || &quot;?&quot; &#125;,</span><br><span class="line">        &quot;PDF.js v&#123;&#123;version&#125;&#125; (build: &#123;&#123;build&#125;&#125;)&quot;</span><br><span class="line">      ),</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    if (moreInfo) &#123;</span><br><span class="line">      moreInfoText.push(</span><br><span class="line">        l10n.get(</span><br><span class="line">          &quot;error_message&quot;,</span><br><span class="line">          &#123; message: moreInfo.message &#125;,</span><br><span class="line">          &quot;Message: &#123;&#123;message&#125;&#125;&quot;</span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line">      if (moreInfo.stack) &#123;</span><br><span class="line">        moreInfoText.push(</span><br><span class="line">          l10n.get(&quot;error_stack&quot;, &#123; stack: moreInfo.stack &#125;, &quot;Stack: &#123;&#123;stack&#125;&#125;&quot;)</span><br><span class="line">        );</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        if (moreInfo.filename) &#123;</span><br><span class="line">          moreInfoText.push(</span><br><span class="line">            l10n.get(</span><br><span class="line">              &quot;error_file&quot;,</span><br><span class="line">              &#123; file: moreInfo.filename &#125;,</span><br><span class="line">              &quot;File: &#123;&#123;file&#125;&#125;&quot;</span><br><span class="line">            )</span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line">        if (moreInfo.lineNumber) &#123;</span><br><span class="line">          moreInfoText.push(</span><br><span class="line">            l10n.get(</span><br><span class="line">              &quot;error_line&quot;,</span><br><span class="line">              &#123; line: moreInfo.lineNumber &#125;,</span><br><span class="line">              &quot;Line: &#123;&#123;line&#125;&#125;&quot;</span><br><span class="line">            )</span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      errorWrapperHide: false,</span><br><span class="line">      errorMessage: message</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    Promise.all(moreInfoText).then((parts) &#x3D;&gt; &#123;</span><br><span class="line">      this.setState(&#123;</span><br><span class="line">        errorMoreInfo: parts.join(&quot;\n&quot;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  errorClose &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      errorWrapperHide: true,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  errorShowMore &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line"></span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      errorMoreInfoHide: false,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  errorShowLess &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      errorMoreInfoHide: true,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;**</span><br><span class="line">   * è·å–pdfåç§°</span><br><span class="line">   * @param url </span><br><span class="line">   *&#x2F;</span><br><span class="line">  setTitleUsingUrl &#x3D; (url: string) &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      url: url</span><br><span class="line">    &#125;)</span><br><span class="line">    let title &#x3D; PDFJS.getFilenameFromUrl(url) || url;</span><br><span class="line">    try &#123;</span><br><span class="line">      title &#x3D; decodeURIComponent(title);</span><br><span class="line">    &#125; catch (e) &#123;</span><br><span class="line">      &#x2F;&#x2F; decodeURIComponent may throw URIError,</span><br><span class="line">      &#x2F;&#x2F; fall back to using the unprocessed url in that case</span><br><span class="line">    &#125;</span><br><span class="line">    this.setTitle(title);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;**</span><br><span class="line">   * è®¾ç½®title</span><br><span class="line">   * @param title pdfåå­—</span><br><span class="line">   *&#x2F;</span><br><span class="line">  setTitle &#x3D; (title: string) &#x3D;&gt; &#123;</span><br><span class="line">    document.title &#x3D; title;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      title: title</span><br><span class="line">    &#125;)</span><br><span class="line">    &#x2F;&#x2F; ä¼ ç»™çˆ¶çº§</span><br><span class="line">    this.props.getTitle(title)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  init &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;PDF init&#39;)</span><br><span class="line">    PDFJS.GlobalWorkerOptions.workerSrc &#x3D; import(&#39;pdfjs-dist&#x2F;build&#x2F;pdf.worker&#39;)</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; è·³é¡µåˆå§‹åŒ–</span><br><span class="line">    const eventBus &#x3D; new PDFViewer.EventBus();</span><br><span class="line">    this.eventBus &#x3D; eventBus;</span><br><span class="line"></span><br><span class="line">    let linkService &#x3D; new PDFViewer.PDFLinkService(&#123;</span><br><span class="line">      eventBus: eventBus,</span><br><span class="line">    &#125;);</span><br><span class="line">    this.pdfLinkService &#x3D; linkService;</span><br><span class="line"></span><br><span class="line">    let pdfViewer &#x3D; new PDFViewer.PDFViewer(&#123;</span><br><span class="line">      container: this.pageRenderRef?.current,</span><br><span class="line">      eventBus: eventBus,</span><br><span class="line">      linkService: linkService,</span><br><span class="line">      l10n: this.state.l10n,</span><br><span class="line">      useOnlyCssZoom: this.state.USE_ONLY_CSS_ZOOM,</span><br><span class="line">      textLayerMode: this.state.TEXT_LAYER_MODE,</span><br><span class="line">    &#125;);</span><br><span class="line">    this.pdfViewer &#x3D; pdfViewer;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    linkService.setViewer(pdfViewer);</span><br><span class="line"></span><br><span class="line">    this.l10n &#x3D; PDFViewer.NullL10n;</span><br><span class="line"></span><br><span class="line">    this.pdfHistory &#x3D; new PDFViewer.PDFHistory(&#123;</span><br><span class="line">      eventBus: eventBus,</span><br><span class="line">      linkService: linkService,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    linkService.setHistory(this.pdfHistory);</span><br><span class="line"></span><br><span class="line">    eventBus.on(&quot;pagesinit&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F; We can use pdfViewer now, e.g. let&#39;s change default scale.</span><br><span class="line">      pdfViewer.currentScaleValue &#x3D; this.state.DEFAULT_SCALE_VALUE;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    eventBus.on(</span><br><span class="line">      &quot;pagechanging&quot;,</span><br><span class="line">      (evt: any) &#x3D;&gt; &#123;</span><br><span class="line">        let page: number &#x3D; evt.pageNumber; &#x2F;&#x2F; å½“å‰é¡µæ•°</span><br><span class="line">        let numPages: number &#x3D; this.pdfDocument.numPages;  &#x2F;&#x2F; æ€»é¡µæ•°</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">          toPageNumber: page,</span><br><span class="line">          preDisabled: page &lt;&#x3D; 1,</span><br><span class="line">          nextDisabled: page &gt;&#x3D; numPages</span><br><span class="line">        &#125;)</span><br><span class="line">        &#x2F;&#x2F; è¿”å›ç»™çˆ¶çº§</span><br><span class="line">        this.props.getPageNumber(page, numPages)</span><br><span class="line">      &#125;,</span><br><span class="line">      true</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;** </span><br><span class="line">  * å‰ä¸€é¡µ</span><br><span class="line">  *&#x2F;</span><br><span class="line">  previous &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    if (this.state.preDisabled) return;</span><br><span class="line">    this.pdfViewer.currentPageNumber--;</span><br><span class="line">    console.log(this.pdfViewer)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;** </span><br><span class="line">  * åä¸€é¡µ</span><br><span class="line">  *&#x2F;</span><br><span class="line">  next &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    if (this.state.nextDisabled) return;</span><br><span class="line">    this.pdfViewer.currentPageNumber++;</span><br><span class="line">    console.log(this.pdfViewer)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;**</span><br><span class="line">   * ç¼©å°</span><br><span class="line">   *&#x2F;</span><br><span class="line">  zoomOut &#x3D; (ticks: any) &#x3D;&gt; &#123;</span><br><span class="line">    let newScale &#x3D; this.pdfViewer.currentScale;</span><br><span class="line">    do &#123;</span><br><span class="line">      newScale &#x3D; (newScale &#x2F; this.state.DEFAULT_SCALE_DELTA).toFixed(2);</span><br><span class="line">      newScale &#x3D; Math.floor(newScale * 10) &#x2F; 10;</span><br><span class="line">      newScale &#x3D; Math.max(this.state.MIN_SCALE, newScale);</span><br><span class="line">    &#125; while (--ticks &amp;&amp; newScale &gt; this.state.MIN_SCALE);</span><br><span class="line">    this.pdfViewer.currentScaleValue &#x3D; newScale;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;**</span><br><span class="line">    * æ”¾å¤§</span><br><span class="line">    *&#x2F;</span><br><span class="line">  zoomIn &#x3D; (ticks: any) &#x3D;&gt; &#123;</span><br><span class="line">    let newScale &#x3D; this.pdfViewer.currentScale;</span><br><span class="line">    do &#123;</span><br><span class="line">      newScale &#x3D; (newScale * this.state.DEFAULT_SCALE_DELTA).toFixed(2);</span><br><span class="line">      newScale &#x3D; Math.ceil(newScale * 10) &#x2F; 10;</span><br><span class="line">      newScale &#x3D; Math.min(this.state.MAX_SCALE, newScale);</span><br><span class="line">    &#125; while (--ticks &amp;&amp; newScale &lt; this.state.MAX_SCALE);</span><br><span class="line">    this.pdfViewer.currentScaleValue &#x3D; newScale;</span><br><span class="line">    console.log(this.pdfViewer.currentScaleValue)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;**</span><br><span class="line">   * è·³è½¬é¡µæ•°</span><br><span class="line">   *&#x2F;</span><br><span class="line">  toPage &#x3D; (page: string | number) &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      toPageNumber: page</span><br><span class="line">    &#125;)</span><br><span class="line">    if (page) &#123;</span><br><span class="line">      this.pdfViewer.currentPageNumber &#x3D; Number(page)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div id&#x3D;&quot;viewerContainer&quot; ref&#x3D;&#123;this.pageRenderRef&#125;&gt;</span><br><span class="line">          &lt;div id&#x3D;&quot;viewer&quot; className&#x3D;&quot;pdfViewer&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div id&#x3D;&quot;loadingBar&quot;&gt;</span><br><span class="line">          &lt;div className&#x3D;&quot;progress&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">          &lt;div className&#x3D;&quot;glimmer&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div id&#x3D;&quot;errorWrapper&quot; ref&#x3D;&#123;this.errorWrapper&#125; hidden&#x3D;&#123;this.state.errorWrapperHide&#125;&gt;</span><br><span class="line">          &lt;div id&#x3D;&quot;errorMessageLeft&quot;&gt;</span><br><span class="line">            &lt;span id&#x3D;&quot;errorMessage&quot;&gt;&#123;this.state.errorMessage&#125;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;button id&#x3D;&quot;errorShowMore&quot; onClick&#x3D;&#123;this.errorShowMore&#125;&gt;More Information&lt;&#x2F;button&gt;</span><br><span class="line">            &lt;button id&#x3D;&quot;errorShowLess&quot; onClick&#x3D;&#123;this.errorShowLess&#125;&gt;Less Information&lt;&#x2F;button&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">          &lt;div id&#x3D;&quot;errorMessageRight&quot;&gt;</span><br><span class="line">            &lt;button id&#x3D;&quot;errorClose&quot; onClick&#x3D;&#123;this.errorClose&#125;&gt;Close&lt;&#x2F;button&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">          &lt;div className&#x3D;&quot;clearBoth&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">          &lt;textarea id&#x3D;&quot;errorMoreInfo&quot; disabled hidden&#x3D;&#123;this.state.errorMoreInfoHide&#125; value&#x3D;&#123;this.state.errorMoreInfo&#125;&gt;&lt;&#x2F;textarea&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;footer&gt;</span><br><span class="line">          &lt;button className&#x3D;&quot;toolbarButton pageUp&quot; title&#x3D;&quot;Previous Page&quot; id&#x3D;&quot;previous&quot; onClick&#x3D;&#123;this.previous&#125;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">          &lt;button className&#x3D;&quot;toolbarButton pageDown&quot; title&#x3D;&quot;Next Page&quot; id&#x3D;&quot;next&quot; onClick&#x3D;&#123;this.next&#125;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">          &lt;input type&#x3D;&#39;text&#39; id&#x3D;&quot;pageNumber&quot; className&#x3D;&quot;toolbarField pageNumber&quot; value&#x3D;&#123;this.state.toPageNumber&#125; onChange&#x3D;&#123;e &#x3D;&gt; this.toPage(e?.target?.value)&#125; size&#x3D;&#123;4&#125; min&#x3D;&quot;1&quot; &#x2F;&gt;</span><br><span class="line">          &lt;button className&#x3D;&quot;toolbarButton zoomOut&quot; title&#x3D;&quot;Zoom Out&quot; id&#x3D;&quot;zoomOut&quot; onClick&#x3D;&#123;this.zoomOut&#125;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">          &lt;button className&#x3D;&quot;toolbarButton zoomIn&quot; title&#x3D;&quot;Zoom In&quot; id&#x3D;&quot;zoomIn&quot; onClick&#x3D;&#123;this.zoomIn&#125;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;&#x2F;footer&gt;</span><br><span class="line">      &lt;&#x2F;React.Fragment&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/document_bg.png);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">font-family</span>: sans-serif;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">section</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">footer</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/toolbar_background.png);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> -<span class="number">0.2rem</span> <span class="number">0.5rem</span> <span class="built_in">rgba</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">0.75</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toolbarButton</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: center center;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toolbarButton</span><span class="selector-class">.pageUp</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icon_previous_page.png);</span><br><span class="line">  <span class="attribute">background-size</span>: .<span class="number">4rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toolbarButton</span><span class="selector-class">.pageDown</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">18%</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icon_next_page.png);</span><br><span class="line">  <span class="attribute">background-size</span>: .<span class="number">4rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#pageNumber</span> &#123;</span><br><span class="line">  <span class="attribute">-moz-appearance</span>: textfield; <span class="comment">/* hides the spinner in moz */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">28%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">36%</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="attribute">font-size</span>: .<span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/div_line_left.png),</span><br><span class="line">    <span class="built_in">url</span>(../images/div_line_right.png);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span>: left, right;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">0.2rem</span>, <span class="number">0.2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toolbarButton</span><span class="selector-class">.zoomOut</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">64%</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icon_zoom_out.png);</span><br><span class="line">  <span class="attribute">background-size</span>: .<span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toolbarButton</span><span class="selector-class">.zoomIn</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">82%</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/icon_zoom_in.png);</span><br><span class="line">  <span class="attribute">background-size</span>: .<span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toolbarButton</span><span class="selector-attr">[disabled]</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hidden</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[hidden]</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#viewerContainer</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  // height: 100%;</span><br><span class="line">  <span class="selector-tag">top</span>: 1<span class="selector-tag">rem</span>;</span><br><span class="line">  <span class="selector-tag">bottom</span>: 0;</span><br><span class="line">  <span class="selector-tag">left</span>: 0;</span><br><span class="line">  <span class="selector-tag">right</span>: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">canvas</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loadingBar</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0.6rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">51</span>, <span class="number">51</span>, <span class="number">51</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loadingBar</span> <span class="selector-class">.progress</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">221</span>, <span class="number">221</span>, <span class="number">221</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">transition</span>: width <span class="number">200ms</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> progressIndeterminate &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loadingBar</span> <span class="selector-class">.progress</span><span class="selector-class">.indeterminate</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">153</span>, <span class="number">153</span>, <span class="number">153</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">transition</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#loadingBar</span> <span class="selector-class">.indeterminate</span> <span class="selector-class">.glimmer</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    to right,</span><br><span class="line">    rgba(<span class="number">153</span>, <span class="number">153</span>, <span class="number">153</span>, <span class="number">1</span>) <span class="number">0%</span>,</span><br><span class="line">    <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">1</span>) <span class="number">50%</span>,</span><br><span class="line">    <span class="built_in">rgba</span>(<span class="number">153</span>, <span class="number">153</span>, <span class="number">153</span>, <span class="number">1</span>) <span class="number">100%</span></span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">animation</span>: progressIndeterminate <span class="number">2s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#errorWrapper</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: none repeat scroll <span class="number">0</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">85</span>, <span class="number">85</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">3.2rem</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1000</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.3rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#errorMessageLeft</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#errorMessageRight</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#errorMoreInfo</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.3rem</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0.3rem</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">98%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pdf-wrap</span>&#123;</span><br><span class="line">  .page-title&#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-id">#555</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pdfjs-dist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹å†™Promiseï¼Œä»£ç è®°å½•</title>
      <link href="/2020/12/15/promiseJs/"/>
      <url>/2020/12/15/promiseJs/</url>
      
        <content type="html"><![CDATA[<h4 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a>è§„èŒƒ</h4><p> 1.1 â€œpromiseâ€æ˜¯ä¸€ä¸ªå…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°ï¼Œå…¶è¡Œä¸ºç¬¦åˆæ­¤è§„èŒƒã€‚ä¹Ÿå°±æ˜¯è¯´Promiseæ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ã€‚<br> 1.2 â€œthenableâ€æ˜¯ä¸€ä¸ªå®šä¹‰thenæ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°ï¼Œè¯´å¥äººè¯ä¹Ÿå°±æ˜¯è¿™ä¸ªå¯¹è±¡å¿…é¡»è¦æ‹¥æœ‰thenæ–¹æ³•ã€‚<br> 1.3 â€œvalueâ€æ˜¯ä»»ä½•åˆæ³•çš„JavaScriptå€¼ï¼ˆåŒ…æ‹¬undefinedã€æˆ–è€…promiseï¼‰ã€‚<br> 1.4 promiseä¸­çš„å¼‚å¸¸éœ€è¦ä½¿ç”¨throwè¯­å¥æŠ›å‡ºã€‚<br> 1.5 å½“promiseå¤±è´¥çš„æ—¶å€™éœ€è¦ç»™å‡ºå¤±è´¥çš„åŸå› ã€‚</p><h4 id="çŠ¶æ€"><a href="#çŠ¶æ€" class="headerlink" title="çŠ¶æ€"></a>çŠ¶æ€</h4><p> 1.1 promiseå¿…é¡»è¦æ‹¥æœ‰ä¸‰ä¸ªçŠ¶æ€: pending, fulfilled å’Œ rejectedã€‚<br> 1.2 å½“promiseçš„çŠ¶æ€æ˜¯pendingæ—¶ï¼Œä»–å¯ä»¥å˜ä¸ºæˆåŠŸfulfilledæˆ–è€…å¤±è´¥rejectedã€‚<br> 1.3 å¦‚æœpromiseæ˜¯æˆåŠŸçŠ¶æ€ï¼Œåˆ™ä»–ä¸èƒ½è½¬æ¢æˆä»»ä½•çŠ¶æ€ï¼Œè€Œä¸”éœ€è¦ä¸€ä¸ªæˆåŠŸçš„å€¼ï¼Œå¹¶ä¸”è¿™ä¸ªå€¼ä¸èƒ½è¢«æ”¹å˜ã€‚<br> 1.4 å¦‚æœpromiseæ˜¯å¤±è´¥çŠ¶æ€ï¼Œåˆ™ä»–ä¸èƒ½è½¬æ¢æˆä»»ä½•çŠ¶æ€ï¼Œè€Œä¸”éœ€è¦ä¸€ä¸ªå¤±è´¥çš„åŸå› ï¼Œå¹¶ä¸”è¿™ä¸ªå€¼ä¸èƒ½è¢«æ”¹å˜ã€‚</p><h4 id="thenæ–¹æ³•è¯´æ˜"><a href="#thenæ–¹æ³•è¯´æ˜" class="headerlink" title="thenæ–¹æ³•è¯´æ˜"></a>thenæ–¹æ³•è¯´æ˜</h4><p> 1.1 ä¸€ä¸ªpromiseå¿…é¡»è¦æœ‰ä¸€ä¸ªthenæ–¹æ³•ï¼Œè€Œä¸”å¯ä»¥è®¿é—®promiseæœ€ç»ˆçš„ç»“æœï¼ŒæˆåŠŸçš„å€¼ã€‚<br> 1.2 thenæ–¹æ³•éœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ŒonFulfilled å’Œ onRejectedè¿™ä¸¤ä¸ªå‚æ•°æ˜¯å¯é€‰å‚æ•°ã€‚</p><h4 id="catchæ–¹æ³•è¯´æ˜"><a href="#catchæ–¹æ³•è¯´æ˜" class="headerlink" title="catchæ–¹æ³•è¯´æ˜"></a>catchæ–¹æ³•è¯´æ˜</h4><p> 1.1 ä¸€ä¸ªpromiseå¿…é¡»è¦æœ‰ä¸€ä¸ªcatchæ–¹æ³•ï¼Œè€Œä¸”å¯ä»¥è®¿é—®promiseæœ€ç»ˆçš„ç»“æœï¼Œå¤±è´¥çš„å€¼ã€‚</p><h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">executor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> _self = <span class="built_in">this</span>;</span><br><span class="line">    _self.status = <span class="string">&#x27;pending&#x27;</span>       <span class="comment">// ä¸‰ä¸ªçŠ¶æ€ pending / resolved / rejected</span></span><br><span class="line">    _self.result                   <span class="comment">// å­˜æ”¾æˆåŠŸresolveçš„æ•°æ®</span></span><br><span class="line">    _self.error                    <span class="comment">// å­˜æ”¾å¤±è´¥rejectçš„æ•°æ®</span></span><br><span class="line">    _self.onResolvedCallbacks = [] <span class="comment">// å­˜æ”¾æ‰€æœ‰æˆåŠŸçš„å›è°ƒ</span></span><br><span class="line">    _self.onRejectedCallbacks = [] <span class="comment">// å­˜æ”¾æ‰€æœ‰å¤±è´¥çš„å›è°ƒ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// resolve reject æ¥å—è¿”å›ç»™thenå‡½æ•°çš„ æ•°æ®ã€</span></span><br><span class="line">    <span class="comment">// resolve å’Œrejectåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œä¸”åªä¼šè§¦å‘ä¸€ä¸ªï¼Œè¦ä¹ˆæˆåŠŸresolveï¼Œè¦ä¹ˆå¤±è´¥reject</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (_self.status !== <span class="string">&#x27;pending&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">      <span class="comment">// æ›´æ”¹çŠ¶æ€</span></span><br><span class="line">      _self.status = <span class="string">&#x27;fulfilled&#x27;</span></span><br><span class="line">      <span class="comment">// ç¼“å­˜ç»“æœç»™thenå‡½æ•°ä½¿ç”¨</span></span><br><span class="line">      _self.result = res</span><br><span class="line"></span><br><span class="line">      _self.onResolvedCallbacks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">        fn();</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (_self.status !== <span class="string">&#x27;pending&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">      _self.status = <span class="string">&#x27;rejected&#x27;</span></span><br><span class="line">      _self.error = error</span><br><span class="line">      _self.onRejectedCallbacks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">        fn(_self.error);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. promise ä¼ å…¥çš„å‡½æ•°ç«‹å³æ‰§è¡Œï¼Œå¹¶æ¥å—ä¸¤ä¸ªå‚æ•° resolve reject</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      executor(resolve, reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      reject(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// then æ–¹æ³• æ¥å—æˆåŠŸçš„å›è°ƒonFulfilled å¤±è´¥çš„å›è°ƒonRejected</span></span><br><span class="line">  <span class="built_in">Promise</span>.prototype.then = <span class="function"><span class="keyword">function</span> (<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> _self = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// thenå€¼ç©¿é€ï¼Œ eg: p.then().then(data =&gt; &#123;console.log(&#x27;then2:&#x27;, data)&#125;)</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªthenæ²¡æœ‰ä¼ å€¼ï¼Œéœ€è¦æŠŠæ•°æ®ä¼ å…¥ä¸‹ä¸€ä¸ª</span></span><br><span class="line">    onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">&#x27;function&#x27;</span> ? onFulfilled : <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123; <span class="keyword">return</span> data; &#125;;</span><br><span class="line">    onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">&#x27;function&#x27;</span> ? onRejected : <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123; <span class="keyword">throw</span> err; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> nextPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (_self.status === <span class="string">&#x27;fulfilled&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> thenFnRes = onFulfilled(_self.result);</span><br><span class="line">          <span class="comment">// å‰ä¸€ä¸ªthenå…¥å‚å‡½æ•°å¦‚æœreturnäº†æ•°æ®ï¼Œéœ€è¦æŠŠæ•°æ®ä¼ ç»™ä¸‹ä¸€ä¸ªthen</span></span><br><span class="line">          resolvePromise(nextPromise, thenFnRes, resolve, reject);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          reject(e)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// promiseæ˜¯å¯ä»¥å¤šä¸ªthenå‡½æ•°</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (_self.status === <span class="string">&#x27;rejected&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> thenFnRes = onRejected(_self.error);</span><br><span class="line">          resolvePromise(nextPromise, thenFnRes, resolve, reject);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          reject(e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å½“å¼‚æ­¥è¿˜å¤„äºpendingçŠ¶æ€æ”¶é›†callback</span></span><br><span class="line">      <span class="keyword">if</span> (_self.status === <span class="string">&#x27;pending&#x27;</span>) &#123;</span><br><span class="line">        _self.onResolvedCallbacks.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> thenFnRes = onFulfilled(_self.result);</span><br><span class="line">            <span class="comment">// è¿™é‡Œéœ€è¦æŠŠ onFulfilledæ‰§è¡Œçš„ç»“æœä½œä¸ºresult resolveç»™ä¸‹ä¸€ä¸ªthen</span></span><br><span class="line">            resolvePromise(nextPromise, thenFnRes, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            reject(e)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        _self.onRejectedCallbacks.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> catchFnRes = onRejected(_self.error);</span><br><span class="line">            resolvePromise(nextPromise, thenFnRes, resolve, reject);</span><br><span class="line">            resolve(catchFnRes)</span><br><span class="line">          &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            reject(e)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// return promise ä¿è¯å¯ä»¥é“¾å¼è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">return</span> nextPromise</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Promise</span>.prototype.catch = <span class="function"><span class="keyword">function</span> (<span class="params">errorhandler</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">Promise</span>.then(<span class="literal">null</span>, errorhandler)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å¤„ç†thenå…¥å‚å‡½æ•°</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>nextPromise thenæ‰§è¡Œåreturnçš„Promiseï¼Œä¿è¯é“¾å¼è°ƒç”¨</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>thenFnRes thenä¼ å…¥å‡½æ•°æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>resolve  nextPromise çš„ resolve</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>reject nextPromise çš„ reject</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolvePromise</span>(<span class="params">nextPromise, thenFnRes, resolve, reject</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// thenå‡½æ•°çš„å…¥å‚å‡½æ•°æ²¡æœ‰returnæ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (!thenFnRes) &#123;</span><br><span class="line">      resolve(thenFnRes)</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬çš„Promiseå¯èƒ½ä¼šå’Œåˆ«äººçš„PromiseåµŒå¥—ä½¿ç”¨ï¼Œå®˜æ–¹æ–‡æ¡£è¦æ±‚ï¼ŒPromiseä¸­è¦ä¹¦å†™åˆ¤æ–­ï¼Œé¿å…å¯¹æ–¹Promiseä¸è§„èŒƒäº§ç”Ÿçš„å½±å“ã€‚</span></span><br><span class="line">    <span class="comment">// æ¯”å¦‚å¯¹æ–¹çš„PromiseæˆåŠŸå’Œå¤±è´¥éƒ½è°ƒç”¨äº†ï¼Œæˆ–è€…å¤šæ¬¡è°ƒç”¨äº†æˆåŠŸã€‚éœ€è¦ä½¿ç”¨ä¸€ä¸ªcalledçš„å˜é‡æ¥è¡¨ç¤ºPromiseæœ‰æ²¡æœ‰è¢«è°ƒç”¨è¿‡ã€‚</span></span><br><span class="line">    <span class="keyword">let</span> called; <span class="comment">// è¡¨ç¤ºPromiseæœ‰æ²¡æœ‰è¢«è°ƒç”¨è¿‡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// thenå‡½æ•°è¿”å›ä¸€ä¸ªpromiseï¼Œæä¾›é“¾å¼è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// é˜²æ­¢thenå…¥å‚å‡½æ•°returnè¿”å›çš„è¿™ä¸ªpromiseç»™promise, è¿™æ ·ä¼šé‡å¤è°ƒç”¨åŒä¸€ä¸ªpromise</span></span><br><span class="line">    <span class="keyword">if</span> (nextPromise === thenFnRes) &#123;</span><br><span class="line">      <span class="keyword">return</span> reject(<span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;å¾ªç¯å¼•ç”¨äº†ï¼Œè¯·æ£€æŸ¥thenå‡½æ•°returnæ•°æ®æ˜¯å¦æ­£ç¡®ï¼&#x27;</span>))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœè¿”å›çš„æ˜¯objectç±»å‹ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯promise,è¿˜æ˜¯æ™®é€šçš„æ•°æ®</span></span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯promiseéœ€è¦æ‰§è¡Œè¿™ä¸ªpromiseå¹¶æ‹¿åˆ°resolveçš„ç»“æœè¿”å›ç»™ä¸‹ä¸€ä¸ªthenå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> thenFnRes === <span class="string">&#x27;object&#x27;</span> || <span class="keyword">typeof</span> thenFnRes === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// then å­˜åœ¨æ˜¯promise </span></span><br><span class="line">        <span class="keyword">let</span> then = thenFnRes.then;</span><br><span class="line">        <span class="comment">// è°ƒç”¨then, è¿™ä¸ªthenå‡½æ•°çš„thisåº”è¯¥æŒ‡å‘ thenFnRes</span></span><br><span class="line">        then.call(thenFnRes, <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (called) &#123; <span class="comment">// æ˜¯å¦è°ƒç”¨è¿‡</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          called = <span class="literal">true</span>;</span><br><span class="line">          <span class="comment">// æˆåŠŸçš„ç»“æœï¼Œè®©nextPromiseå˜ä¸ºæˆåŠŸçŠ¶æ€</span></span><br><span class="line">          <span class="comment">// yä¹Ÿæœ‰å¯èƒ½æ˜¯promiseï¼Œéœ€è¦é€’å½’è°ƒç”¨ resolvePromise</span></span><br><span class="line">          resolvePromise(nextPromise, y, resolve, reject)</span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">r</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (called) &#123; <span class="comment">// æ˜¯å¦è°ƒç”¨è¿‡</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          called = <span class="literal">true</span>;</span><br><span class="line">          reject(r);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">if</span> (called) &#123; <span class="comment">// æ˜¯å¦è°ƒç”¨è¿‡</span></span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        called = <span class="literal">true</span>;</span><br><span class="line">        reject(e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (called) &#123; <span class="comment">// æ˜¯å¦è°ƒç”¨è¿‡</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      called = <span class="literal">true</span>;</span><br><span class="line">      resolve(thenFnRes)</span><br><span class="line">    &#125;</span><br><span class="line">    resolve(thenFnRes)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    resolve(<span class="number">1</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;then1:&#x27;</span>, res)</span><br><span class="line">  <span class="keyword">return</span> res + <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then()</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;then3:&#x27;</span>, res)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">new</span> <span class="built_in">Error</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;catch:&#x27;</span>, res)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// then1: 1</span></span><br><span class="line"><span class="comment">// then3: 2</span></span><br><span class="line"><span class="comment">// catch: TypeError: (intermediate value) is not a constructor</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Promise </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EventLoopäº‹ä»¶å¾ªç¯ç»ƒä¹ é¢˜</title>
      <link href="/2020/12/10/taskdemo/"/>
      <url>/2020/12/10/taskdemo/</url>
      
        <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;timeout&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;then&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// start =&gt; then =&gt; timeout</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;timeout1&#x27;</span>);</span><br><span class="line">    <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;then1&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;then2&#x27;</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;timeout2&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// then2 =&gt; timeout1 =&gt; then1 =&gt; timeout2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    reject();</span><br><span class="line">    resolve();</span><br><span class="line">&#125;);</span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æˆåŠŸ&#x27;</span>);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å¤±è´¥&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤±è´¥</span></span><br><span class="line"><span class="comment">// åªä¼šæ‰“å°å¤±è´¥ï¼Œå› ä¸ºPromiseçš„çŠ¶æ€åªä¼šå˜åŒ–ä¸€æ¬¡ã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">    resolve();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ï¼Œ 2ï¼Œ 3</span></span><br><span class="line"><span class="comment">// new Promiseä¼ å…¥çš„å‡½æ•°æ˜¯åŒæ­¥ä»£ç ï¼Œç«‹åˆ»å°±ä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º1å’Œ2ï¼Œ</span></span><br><span class="line"><span class="comment">// Promise.thenæ˜¯å¾®ä»»åŠ¡ï¼Œå½“ä»£ç è‡ªè¡Œç»“æŸï¼Œä¼šæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º3.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(<span class="number">1</span>)</span><br><span class="line">.then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="number">2</span>)</span><br><span class="line">.catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="number">3</span>)</span><br><span class="line">.then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">console</span>.log(res));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(<span class="number">1</span>)</span><br><span class="line">.then(<span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>)</span><br><span class="line">.then(<span class="function"><span class="params">x</span> =&gt;</span> &#123; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;My Error&#x27;</span>)&#125;)</span><br><span class="line">.catch(<span class="function">() =&gt;</span> <span class="number">1</span>)</span><br><span class="line">.then(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>)</span><br><span class="line">.then(<span class="function"><span class="params">x</span> =&gt;</span> <span class="built_in">console</span>.log(x))</span><br><span class="line">.catch(<span class="built_in">console</span>.error);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> <span class="title">executor</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>;j&lt;<span class="number">100</span>;j++)&#123;</span><br><span class="line">    j=<span class="number">99</span>&amp;&amp;resolve()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 3 5 4 1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;async1 start&#x27;</span>); <span class="comment">// 2</span></span><br><span class="line">    <span class="keyword">await</span> async2(); </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;async2&#x27;</span>); <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script start&#x27;</span>); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout&#x27;</span>); <span class="comment">// 7</span></span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">async1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise1&#x27;</span>); <span class="comment">// 4</span></span><br><span class="line">    resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise2&#x27;</span>); <span class="comment">// 6</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script end2&#x27;</span>); <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 start&#x27;</span>)  <span class="comment">// 2</span></span><br><span class="line">  <span class="keyword">await</span> async2()               <span class="comment">// awaitåé¢çš„å‡½æ•°ï¼Œç›¸å½“äºnew Promiseä¼ å…¥çš„å‡½æ•°æ˜¯ç«‹å³æ‰§è¡Œçš„</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 end&#x27;</span>)    <span class="comment">// 5 awaitä¸‹é¢çš„ä»£ç åœ¨awaitæˆåŠŸä¹‹åæ‰§è¡Œï¼Œç›¸å½“äºPromise.thenï¼Œæ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œä¸è¿‡æ˜¯è¯­æ³•ç³–è®©è¿™è¡Œä»£ç çœ‹èµ·æ¥æ˜¯åŒæ­¥çš„ï¼Œå…¶å®ä¸æ˜¯çš„</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async2&#x27;</span>) <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script start&#x27;</span>) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout&#x27;</span>) <span class="comment">// 7</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"> </span><br><span class="line">async1(); </span><br><span class="line">   </span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function"><span class="keyword">function</span>(<span class="params"> resolve </span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;promise1&#x27;</span>) <span class="comment">// 4</span></span><br><span class="line"> resolve();</span><br><span class="line">&#125;).then( <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;promise2&#x27;</span>)  <span class="comment">// 6</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EventLoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-cli2 / vue-cli3 / vite+vue3.0 æ‰“åŒ…ç¯å¢ƒåŒºåˆ†</title>
      <link href="/2020/12/07/vue-bulid-env/"/>
      <url>/2020/12/07/vue-bulid-env/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åˆšå¥½æœ€è¿‘æŠŠ vue-cli2 / vue-cli3 / vite+vue3.0 çš„ç¯å¢ƒåŒºåˆ†éƒ½æ¥äº†ä¸€éï¼Œç‰¹æ­¤è®°å½•ã€‚ä¸‹æ–‡çš„æ–¹æ³•éƒ½æ˜¯è‡ªå·±ä½¿ç”¨äº²æµ‹æœ‰æ•ˆçš„ï¼Œä¸è¿‡ä¹Ÿä¸æ˜¯å”¯ä¸€çš„æ–¹æ³•ã€‚</p><h3 id="vue-cli2"><a href="#vue-cli2" class="headerlink" title="vue-cli2"></a>vue-cli2</h3><p>vue-cli2ç”Ÿæˆçš„é¡¹ç›®ç›®å½•ä¸‹æœ‰<code>build</code>ã€<code>config</code>è¿™ä¸¤ä¸ªç›®å½•ï¼Œé¡¹ç›®çš„<code>webpacké…ç½®</code>å’Œ<code>è¿è¡Œç¯å¢ƒçš„åŒºåˆ†</code>å°±æ˜¯åœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸‹å»å¤„ç†çš„ï¼›</p><h4 id="1-ä¸‹è½½cross-env"><a href="#1-ä¸‹è½½cross-env" class="headerlink" title="1.ä¸‹è½½cross-env"></a>1.ä¸‹è½½cross-env</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cross-env --save-dev</span><br></pre></td></tr></table></figure><h4 id="2-ä¿®æ”¹pageage-jsonä¸­script"><a href="#2-ä¿®æ”¹pageage-jsonä¸­script" class="headerlink" title="2.ä¿®æ”¹pageage.jsonä¸­script"></a>2.ä¿®æ”¹pageage.jsonä¸­script</h4><blockquote><p>å¢åŠ <code>build:test</code>ã€<code>build:uat</code></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;build&quot;: &quot;node build/build.js&quot;,</span><br><span class="line">  &quot;build:test&quot;: &quot;cross-env NODE_ENV=production ENV_CONFIG=test node build/build.js&quot;,</span><br><span class="line">  &quot;build:uat&quot;: &quot;cross-env NODE_ENV=production ENV_CONFIG=uat node build/build.js&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-æ›´æ”¹å„ç§ç¯å¢ƒä¸‹çš„baseUrl"><a href="#3-æ›´æ”¹å„ç§ç¯å¢ƒä¸‹çš„baseUrl" class="headerlink" title="3.æ›´æ”¹å„ç§ç¯å¢ƒä¸‹çš„baseUrl"></a>3.æ›´æ”¹å„ç§ç¯å¢ƒä¸‹çš„baseUrl</h4><p>åœ¨<code>config -&gt; dev.env.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> prodEnv = <span class="built_in">require</span>(<span class="string">&#x27;./prod.env&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(prodEnv, &#123;</span><br><span class="line">    NODE_ENV: <span class="string">&#x27;&quot;development&quot;&#x27;</span>,</span><br><span class="line">    API: <span class="string">&#x27;&quot;http://localhost:8083&quot;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨<code>config -&gt; prod.env.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> API = <span class="string">&#x27;&quot;https://prod/&quot;&#x27;</span> <span class="comment">// prod </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (process.env.ENV_CONFIG === <span class="string">&#x27;test&#x27;</span>) &#123;</span><br><span class="line">    API = <span class="string">&#x27;&quot;https://test/&quot;&#x27;</span> <span class="comment">// test</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (process.env.ENV_CONFIG === <span class="string">&#x27;uat&#x27;</span>) &#123;</span><br><span class="line">    API = <span class="string">&#x27;&quot;https://UAT/&quot;&#x27;</span>  <span class="comment">// uat</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    NODE_ENV: <span class="string">&#x27;&quot;production&quot;&#x27;</span>,</span><br><span class="line">    API: API</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>å®šä¹‰<code>axios</code>çš„ <code>baseUrl</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// create an axios instance</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">    baseURL: process.env.API, <span class="comment">// apiçš„base_url</span></span><br><span class="line">    timeout: <span class="number">500000</span>, <span class="comment">// request timeout</span></span><br><span class="line">    withCredentials: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="vue-cli3"><a href="#vue-cli3" class="headerlink" title="vue-cli3"></a>vue-cli3</h3><p>vue-cli3ç”Ÿçš„é¡¹ç›®webpackçš„é…ç½®æ–‡ä»¶éƒ½æ˜¯å½±è—èµ·æ¥çš„ï¼Œæä¾›äº†<code>vue.config.js</code>å»é…ç½®ä¸€äº›webpackã€‚</p><h4 id="1-ä¿®æ”¹pageage-jsonä¸­script"><a href="#1-ä¿®æ”¹pageage-jsonä¸­script" class="headerlink" title="1.ä¿®æ”¹pageage.jsonä¸­script"></a>1.ä¿®æ”¹pageage.jsonä¸­script</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;build&quot;: &quot;vue-cli-service build&quot;, </span><br><span class="line">  &quot;build:test&quot;: &quot;vue-cli-service build --mode test&quot;,</span><br><span class="line">  &quot;build:uat&quot;: &quot;vue-cli-service build --mode uat&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="2-æ–°å»º-envæ–‡ä»¶"><a href="#2-æ–°å»º-envæ–‡ä»¶" class="headerlink" title="2.æ–°å»º.envæ–‡ä»¶"></a>2.æ–°å»º<code>.env</code>æ–‡ä»¶</h4><p>åœ¨æ ¹ç›®å½•ä¸‹å»º <code>.env.test</code>ã€<code>.env.uat</code> ä¸¤ä¸ªæ–‡ä»¶, ç”¨<code>VUE_APP_</code>æ¥å¢åŠ ç¯å¢ƒåŒºåˆ†æ ‡è¯†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// .env.test</span><br><span class="line"></span><br><span class="line">NODE_ENV = &#x27;production&#x27;</span><br><span class="line">VUE_APP_TITLE  = &#x27;test&#x27;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// .env.uat</span><br><span class="line"></span><br><span class="line">NODE_ENV = &#x27;production&#x27;</span><br><span class="line">VUE_APP_TITLE  = &#x27;uat&#x27;</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-è®¾ç½®baseUrl"><a href="#3-è®¾ç½®baseUrl" class="headerlink" title="3.è®¾ç½®baseUrl"></a>3.è®¾ç½®baseUrl</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// base.url.js</span></span><br><span class="line"><span class="keyword">const</span> BASE_URL = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> baseUrl = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">switch</span> (process.env.NODE_ENV) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;development&#x27;</span>:</span><br><span class="line">      <span class="comment">// æœ¬åœ°çš„è¯·æ±‚url</span></span><br><span class="line">      baseUrl = <span class="string">&#x27;http://localhost:8080/api&#x27;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;production&#x27;</span>:</span><br><span class="line">      <span class="comment">// ç”Ÿäº§ç¯å¢ƒurl</span></span><br><span class="line">      baseUrl = <span class="string">&#x27;https://prod/api&#x27;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (process.env.VUE_APP_TITLE === <span class="string">&#x27;test&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// æµ‹è¯•ç¯å¢ƒåœ°å€</span></span><br><span class="line">        baseUrl = <span class="string">&#x27;https://test/api&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (process.env.VUE_APP_TITLE === <span class="string">&#x27;uat&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// uat ç¯å¢ƒåœ°å€</span></span><br><span class="line">        baseUrl = <span class="string">&#x27;https://uat/api&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> baseUrl;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> BASE_URL;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">import</span> BASE_URL <span class="keyword">from</span> <span class="string">&#x27;./base.url&#x27;</span>;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; baseUrl &#125; = BASE_URL;</span><br><span class="line"></span><br><span class="line">axios.defaults.timeout = <span class="number">500000</span>;</span><br><span class="line">axios.defaults.baseURL = baseUrl;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="vite-vue3-0"><a href="#vite-vue3-0" class="headerlink" title="vite+vue3.0"></a>vite+vue3.0</h3><p>vite+vue3.0åšç¯å¢ƒåŒºåˆ†æ˜¯æœ€ç®€å•çš„ã€‚</p><h4 id="1-ä¿®æ”¹pageage-jsonä¸­script-1"><a href="#1-ä¿®æ”¹pageage-jsonä¸­script-1" class="headerlink" title="1.ä¿®æ”¹pageage.jsonä¸­script"></a>1.ä¿®æ”¹pageage.jsonä¸­script</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;build&quot;: &quot;vite build --mode dev&quot;,</span><br><span class="line">&quot;build:test&quot;: &quot;vite build --mode test&quot;,</span><br><span class="line">&quot;build:uat&quot;: &quot;vite build --mode uat&quot;</span><br></pre></td></tr></table></figure><h4 id="2-æ–°å»ºç¯å¢ƒæ–‡ä»¶"><a href="#2-æ–°å»ºç¯å¢ƒæ–‡ä»¶" class="headerlink" title="2.æ–°å»ºç¯å¢ƒæ–‡ä»¶"></a>2.æ–°å»ºç¯å¢ƒæ–‡ä»¶</h4><p>åœ¨æ ¹ç›®å½•ä¸‹å»º <code>.env.[ç¯å¢ƒå]</code>ï¼Œç„¶åæ‰“å¼€æ–‡ä»¶å†™å…¥ä»¥<code>VITE_</code>ä¸ºå¼€å¤´çš„key</p><ul><li><code>.env.dev</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VITE_ENV=&#x27;dev&#x27;</span><br><span class="line">VITE_BASE_URL=&#x27;http://localhost:3001/api&#x27;</span><br></pre></td></tr></table></figure><ul><li><code>.env.prod</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VITE_ENV=&#x27;prod&#x27;</span><br><span class="line">VITE_BASE_URL=&#x27;http://prod/api&#x27;</span><br></pre></td></tr></table></figure><ul><li><code>.env.test</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VITE_ENV=&#x27;test&#x27;</span><br><span class="line">VITE_BASE_URL=&#x27;http://test/api&#x27;</span><br></pre></td></tr></table></figure><h4 id="3-è®¾ç½®baseUrl-1"><a href="#3-è®¾ç½®baseUrl-1" class="headerlink" title="3.è®¾ç½®baseUrl"></a>3.è®¾ç½®baseUrl</h4><p><code>vite</code>è¿™é‡Œä¸å†æ˜¯ä»<code>process.env</code>è·å–ç¯å¢ƒå˜é‡äº†ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL = <span class="keyword">import</span>.meta.env.VITE_BASE_URL;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vueé¡¹ç›®ç¯å¢ƒåŒºåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3.0 + less/sass</title>
      <link href="/2020/12/03/less/"/>
      <url>/2020/12/03/less/</url>
      
        <content type="html"><![CDATA[<h3 id="vue3-0é¡¹ç›®å¢åŠ less-sass"><a href="#vue3-0é¡¹ç›®å¢åŠ less-sass" class="headerlink" title="vue3.0é¡¹ç›®å¢åŠ less/sass"></a>vue3.0é¡¹ç›®å¢åŠ less/sass</h3><blockquote><p>å…ˆå®‰è£…less less-loader / scss  scss-loader  / style-loader</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yarn add less less-loader style-loader -DEV</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">yarn add scss scss-loader style-loader -DEV</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue add style-resources-loader</span><br></pre></td></tr></table></figure><p><img src="/images/vue/vue3.0+less.jpg"></p><blockquote><p>ç„¶åä¼šåœ¨æ ¹ç›®å½•ä¸‹è‡ªåŠ¨å»ºä¸€ä¸ª<code>vue.config.js</code></p></blockquote><p><img src="/images/vue/vue3.0+less1.jpg"></p><h3 id="æ›´æ”¹ä¸€ä¸‹é…ç½®å°±OKäº†"><a href="#æ›´æ”¹ä¸€ä¸‹é…ç½®å°±OKäº†" class="headerlink" title="æ›´æ”¹ä¸€ä¸‹é…ç½®å°±OKäº†"></a>æ›´æ”¹ä¸€ä¸‹é…ç½®å°±OKäº†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  pluginOptions: &#123;</span><br><span class="line">    <span class="string">&#x27;style-resources-loader&#x27;</span>: &#123;</span><br><span class="line">      preProcessor: <span class="string">&#x27;less&#x27;</span>,</span><br><span class="line">      patterns: [</span><br><span class="line">        path.resolve(__dirname, <span class="string">&#x27;./src/assets/style/*.less&#x27;</span>)</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>H5å…¼å®¹é—®é¢˜è®°å½•</title>
      <link href="/2020/11/26/compatibility/"/>
      <url>/2020/11/26/compatibility/</url>
      
        <content type="html"><![CDATA[<h4 id="å‡†å¤‡ä½œå¦–"><a href="#å‡†å¤‡ä½œå¦–" class="headerlink" title="å‡†å¤‡ä½œå¦–"></a>å‡†å¤‡ä½œå¦–</h4><h6 id="1-ç§»åŠ¨ç«¯h5é¡µé¢è½¯é”®ç›˜å¼¹å‡ºå-èƒŒæ™¯å›¾ç‰‡è¢«é¡¶ä¸Šå»-é«˜é¢‘"><a href="#1-ç§»åŠ¨ç«¯h5é¡µé¢è½¯é”®ç›˜å¼¹å‡ºå-èƒŒæ™¯å›¾ç‰‡è¢«é¡¶ä¸Šå»-é«˜é¢‘" class="headerlink" title="1.ç§»åŠ¨ç«¯h5é¡µé¢è½¯é”®ç›˜å¼¹å‡ºå èƒŒæ™¯å›¾ç‰‡è¢«é¡¶ä¸Šå»(é«˜é¢‘)"></a>1.ç§»åŠ¨ç«¯h5é¡µé¢è½¯é”®ç›˜å¼¹å‡ºå èƒŒæ™¯å›¾ç‰‡è¢«é¡¶ä¸Šå»(é«˜é¢‘)</h6><blockquote><p>ç§»åŠ¨ç«¯h5é¡µé¢åœ¨è½¯é”®ç›˜å¼¹å‡ºåbodyçš„é«˜åº¦ä¼šè¢«å‹ç¼©ï¼Œå°±å¯¼è‡´åŸæœ¬é«˜åº¦100%çš„èƒŒæ™¯å›¾è¢«é¡¶ä¸Šå»ä¸€æˆªï¼Œéœ€è¦æŠŠdivçš„é«˜åº¦å¼ºè¡Œè®¾å›100%æ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;app&quot; :style&#x3D;&quot;&#123; height: bodyHeight + &#39;px&#39; &#125;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"> </span><br><span class="line">mounted()&#123;</span><br><span class="line"> this.bodyHeight&#x3D;document.documentElement.clientHeight</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="2-iosæ‰‹æœºinputã€textareaç­‰å…ƒç´ çš„placeholderå¦‚æœæœ‰å¤šè¡Œï¼Œè½¯é”®ç›˜è¾“å…¥æ•°æ®ç„¶åå†åˆ é™¤ï¼Œplaceholderå°±åªèƒ½æ˜¾ç¤ºä¸€è¡Œäº†ï¼Œä¸èƒ½å…¨éƒ¨å±•ç¤º-é«˜é¢‘-ï¼›"><a href="#2-iosæ‰‹æœºinputã€textareaç­‰å…ƒç´ çš„placeholderå¦‚æœæœ‰å¤šè¡Œï¼Œè½¯é”®ç›˜è¾“å…¥æ•°æ®ç„¶åå†åˆ é™¤ï¼Œplaceholderå°±åªèƒ½æ˜¾ç¤ºä¸€è¡Œäº†ï¼Œä¸èƒ½å…¨éƒ¨å±•ç¤º-é«˜é¢‘-ï¼›" class="headerlink" title="2. iosæ‰‹æœºinputã€textareaç­‰å…ƒç´ çš„placeholderå¦‚æœæœ‰å¤šè¡Œï¼Œè½¯é”®ç›˜è¾“å…¥æ•°æ®ç„¶åå†åˆ é™¤ï¼Œplaceholderå°±åªèƒ½æ˜¾ç¤ºä¸€è¡Œäº†ï¼Œä¸èƒ½å…¨éƒ¨å±•ç¤º(é«˜é¢‘)ï¼›"></a>2. iosæ‰‹æœºinputã€textareaç­‰å…ƒç´ çš„placeholderå¦‚æœæœ‰å¤šè¡Œï¼Œè½¯é”®ç›˜è¾“å…¥æ•°æ®ç„¶åå†åˆ é™¤ï¼Œplaceholderå°±åªèƒ½æ˜¾ç¤ºä¸€è¡Œäº†ï¼Œä¸èƒ½å…¨éƒ¨å±•ç¤º(é«˜é¢‘)ï¼›</h6><blockquote><p>è¿™ä¸ªbug åªæœ‰iosæ‰‹æœºæ‰æœ‰ï¼›<br>è§£å†³æ€è·¯ï¼šåœ¨inputè¾“å…¥çš„æœ‰å€¼å¾—æ—¶å€™ç»™å…ƒç´ <code>position:relative</code>,æ²¡æ•°æ®çš„æ—¶å€™<code>position:static</code>,é€šè¿‡æ”¹å˜cssè®©å…ƒç´ é‡æ–°æ¸²æŸ“ã€‚è¿™é‡Œä¸ä¸€å®šå°±è¦ç”¨<code>position</code>ï¼Œå…¶ä»–æ ·å¼éƒ½å¯ä»¥ï¼Œä¸»è¦æ˜¯è¦è®©å…ƒç´ é‡æ–°æ¸²æŸ“ï¼›</p></blockquote><h6 id="3-ios-è½¯é”®ç›˜å°†é¡µé¢é¡¶åˆ°ä¸Šé¢ï¼Œé¡µé¢è½¯é”®ç›˜å…³æ‰ä¹‹åé¡µé¢ä¸‹éƒ¨åˆ†ç©ºç™½ï¼Œéœ€è¦æ‰‹åŠ¨æŠŠé¡µé¢æ»šåŠ¨åˆ°åº•éƒ¨çš„é—®é¢˜"><a href="#3-ios-è½¯é”®ç›˜å°†é¡µé¢é¡¶åˆ°ä¸Šé¢ï¼Œé¡µé¢è½¯é”®ç›˜å…³æ‰ä¹‹åé¡µé¢ä¸‹éƒ¨åˆ†ç©ºç™½ï¼Œéœ€è¦æ‰‹åŠ¨æŠŠé¡µé¢æ»šåŠ¨åˆ°åº•éƒ¨çš„é—®é¢˜" class="headerlink" title="3. ios è½¯é”®ç›˜å°†é¡µé¢é¡¶åˆ°ä¸Šé¢ï¼Œé¡µé¢è½¯é”®ç›˜å…³æ‰ä¹‹åé¡µé¢ä¸‹éƒ¨åˆ†ç©ºç™½ï¼Œéœ€è¦æ‰‹åŠ¨æŠŠé¡µé¢æ»šåŠ¨åˆ°åº•éƒ¨çš„é—®é¢˜"></a>3. ios è½¯é”®ç›˜å°†é¡µé¢é¡¶åˆ°ä¸Šé¢ï¼Œé¡µé¢è½¯é”®ç›˜å…³æ‰ä¹‹åé¡µé¢ä¸‹éƒ¨åˆ†ç©ºç™½ï¼Œéœ€è¦æ‰‹åŠ¨æŠŠé¡µé¢æ»šåŠ¨åˆ°åº•éƒ¨çš„é—®é¢˜</h6><blockquote><p>è®©inputåœ¨å¤±å»ç„¦ç‚¹çš„æ—¶å€™ï¼Œæ»šåŠ¨åˆ°é¡µé¢æœ€é¡¶éƒ¨</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.scrollTo(<span class="number">0</span>, <span class="number">0</span>) <span class="comment">//é¡µé¢æ»šåŠ¨åˆ°é¡¶éƒ¨</span></span><br></pre></td></tr></table></figure><p>é•¿æœŸæ›´æ–°ã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3.0åˆ›å»ºé¡¹ç›®åˆä½“éªŒ</title>
      <link href="/2020/09/27/vue3-0init/"/>
      <url>/2020/09/27/vue3-0init/</url>
      
        <content type="html"><![CDATA[<h3 id="vue3-0å·²ç»å‘å¸ƒå•¦"><a href="#vue3-0å·²ç»å‘å¸ƒå•¦" class="headerlink" title="vue3.0å·²ç»å‘å¸ƒå•¦~"></a>vue3.0å·²ç»å‘å¸ƒå•¦~</h3><p>è®°å½•ä¸€ä¸‹è‡ªå·±åˆ›å»ºvue3.0é¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚</p><h3 id="æ›´æ–°çš„ä¸€äº›ä¸œè¥¿"><a href="#æ›´æ–°çš„ä¸€äº›ä¸œè¥¿" class="headerlink" title="æ›´æ–°çš„ä¸€äº›ä¸œè¥¿"></a>æ›´æ–°çš„ä¸€äº›ä¸œè¥¿</h3><blockquote><ol><li>Object.defineProperty =&gt; Proxy</li><li>vdom é™æ€æ ‡è®°æ›´åŠ å¼ºå¤§</li><li>Composition API</li><li>vite</li></ol></blockquote><h3 id="åˆå§‹é¡¹ç›®"><a href="#åˆå§‹é¡¹ç›®" class="headerlink" title="åˆå§‹é¡¹ç›®"></a>åˆå§‹é¡¹ç›®</h3><p>ä¸€æ”¹vue2.xä½¿ç”¨vue-cli, vue3.0åŸºäºviteå»åˆ›å»ºé¡¹ç›®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line">cd &lt;project-name&gt;</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ index.html</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚Â Â  â””â”€â”€ favicon.ico</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â”œâ”€â”€ App.vue</span><br><span class="line">    â”œâ”€â”€ assets</span><br><span class="line">    â”‚Â Â  â””â”€â”€ logo.png</span><br><span class="line">    â”œâ”€â”€ components</span><br><span class="line">    â”‚Â Â  â””â”€â”€ HelloWorld.vue</span><br><span class="line">    â”œâ”€â”€ index.css</span><br><span class="line">    â””â”€â”€ main.js</span><br></pre></td></tr></table></figure><h3 id="index-html-main-js"><a href="#index-html-main-js" class="headerlink" title="index.html/main.js"></a>index.html/main.js</h3><p>å¯ä»¥çœ‹åˆ° main.jsçš„å¼•ç”¨å†™äº†<code>type=&quot;module&quot;</code>,åˆ©ç”¨æµè§ˆå™¨çš„è‡ªå¸¦çš„importæœºåˆ¶ï¼›</p><blockquote><p>index.html</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;link rel&#x3D;&quot;icon&quot; href&#x3D;&quot;&#x2F;favicon.ico&quot; &#x2F;&gt;</span><br><span class="line">  &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;Vite App&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;app&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;script type&#x3D;&quot;module&quot; src&#x3D;&quot;&#x2F;src&#x2F;main.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure><ul><li>main.js åˆå§‹å®ä¾‹ä¸å†æ˜¯ <code>new vue(option)</code>ï¼Œæ”¹ä¸ºäº†<code>createApp(App)</code></li><li><code>Vue.prototype</code>æ‰©å±•æ–¹æ³•æ”¹ä¸ºäº†<code>app.config.globalProperties</code></li><li>è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œvue3.0 setupå†…éƒ¨ä¸æ”¯æŒthisï¼Œåƒvue2.xé‡Œå¯ä»¥ Vue.prototypeæ‰©å±•ä¸€äº›å…¨å±€æ–¹æ³•ï¼Œåœ¨é¡µé¢ä½¿ç”¨ç›´æ¥thiså°±å¯ä»¥è®¿é—®ï¼Œåœ¨<code>Composition API</code>é‡Œé¢å·²ç»ä¸èƒ½è¿™ä¹ˆç©äº†ğŸ˜‚ã€‚</li></ul><blockquote><p>main.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/index.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> config <span class="keyword">from</span> <span class="string">&#x27;./utils/config_globalProperties.ts&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App);</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.config: å…¨å±€é…ç½®çš„å¯¹è±¡ </span></span><br><span class="line"><span class="comment">// app.config.globalPropertiesä»£æ›¿Vue 2.x Vue.prototype æ‰©å±•</span></span><br><span class="line"><span class="comment">// vue3.0 setupå†…éƒ¨ä¸æ”¯æŒthis, ä¸€äº›å…¬å…±æ–¹æ³•æŒ‚è½½vueä¹Ÿæ˜¯è®¿é—®ä¸åˆ°çš„</span></span><br><span class="line"><span class="built_in">Object</span>.keys(config).forEach(<span class="function"><span class="params">ele</span> =&gt;</span> &#123;</span><br><span class="line">  app.config.globalProperties[ele] = config[ele]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨æŒ‚è½½</span></span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Composition-API"><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API</h3><h4 id="1-setup"><a href="#1-setup" class="headerlink" title="1.setup"></a>1.setup</h4><p>ç»„ä»¶é€‰é¡¹åˆ›å»ºååœ¨ç»„ä»¶åˆ›å»ºä¹‹å‰æ‰§è¡Œçš„ç»„ä»¶é€‰é¡¹ï¼Œå®ƒç”¨ä½œç»„åˆAPIçš„å…¥å£ç‚¹,ç›¸å½“äº<code>beforCreated()</code>ã€<code>created()</code>ï¼›<br>vue2.x åœ¨å†™é¡µé¢çš„æ—¶å€™ï¼Œ<code>script</code>é‡Œé¢ï¼Œæ˜¯å†™çš„<code>option Api</code>å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œé¢å°±æ˜¯<code>data</code>ã€<code>methods</code>ã€<code>mounted</code>â€¦..<br>ç°åœ¨ç›´æ¥ä¸€ä¸ª<code>setup</code>å‡½æ•°ï¼Œåœ¨<code>setup</code>é‡Œé¢æŠŠæ•°æ®returnç»™templateï¼›<br>ä¸‹é¢æ˜¯å®˜ç½‘çš„ä¾‹å­ï¼Œéå¸¸æ¸…æ™°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- MyBook.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; readersNumber &#125;&#125; &#123;&#123; book.title &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123; ref, reactive &#125; from &#39;vue&#39;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    setup() &#123;</span><br><span class="line">      const readersNumber &#x3D; ref(0)</span><br><span class="line">      const book &#x3D; reactive(&#123; title: &#39;Vue 3 Guide&#39; &#125;)</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; expose to template</span><br><span class="line">      return &#123;</span><br><span class="line">        readersNumber,</span><br><span class="line">        book</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h4 id="2-ref"><a href="#2-ref" class="headerlink" title="2.ref"></a>2.ref</h4><p>æ˜¯å¯¹åŸºç¡€æ•°æ®è¿›è¡ŒåŒå‘ç»‘å®šçš„Apiï¼Œç»è¿‡refè¿‡çš„æ•°æ®ï¼Œéœ€è¦é€šè¿‡valueå±æ€§æ‹¿åˆ°å€¼ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = ref(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.value) <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="3-reactive"><a href="#3-reactive" class="headerlink" title="3.reactive"></a>3.reactive</h4><p>å¼•ç”¨ç±»å‹çš„æ•°æ®ç»“æ„ä½¿ç”¨<code>reactive</code>,ä½¿ç”¨<code>reactive</code>æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„ç‚¹ï¼Œæœ€å¥½ä¸è¦å¯¹reactiveè¿‡çš„å¯¹è±¡åšç»“æ„æ“ä½œï¼Œä¼šä½¿reactiveè¿‡çš„å¯¹è±¡é‡Œé¢çš„åŸºæœ¬æ•°æ®ç±»å‹å¤±å»åŒå‘ç»‘å®šï¼Œå¯¹è§£æ„çš„æ•°æ®åšæ›´æ”¹æ˜¯ä¸ä¼šå†å»æ›´æ–°reactiveçš„è¿™ä¸ªå¯¹è±¡äº†ã€‚å»ºè®®å¯¹reactiveçš„æ•°æ®æ…ç”¨è§£æ„ï¼Œç›´æ¥æ“ä½œreactiveçš„å¯¹è±¡ï¼Œå…å¾—å¯¼è‡´ä¸€äº›ä¸å¿…è¦çš„å‘;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> obj = reactive(&#123;</span><br><span class="line">    a: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">    b: <span class="string">&quot;b&quot;</span>,</span><br><span class="line">    c: &#123;</span><br><span class="line">      c1: <span class="string">&quot;c1&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ•°æ®æ›´æ–°</span></span><br><span class="line">  obj.a = <span class="string">&quot;æˆ‘æ˜¯aå‘€&quot;</span>;</span><br><span class="line">  obj.b = <span class="string">&quot;æˆ‘æ˜¯bå‘€&quot;</span>;</span><br><span class="line">  obj.c.c1 = <span class="string">&quot;æˆ‘æ˜¯c1å‘€&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ³¨æ„ï¼šå¯¹reactiveçš„æ•°æ®è§£æ„ä¼šå¯¼è‡´ åŸºç¡€æ•°æ®ç±»å‹ å¤±å»reactive</span></span><br><span class="line">  <span class="keyword">let</span> &#123; a, c &#125; = obj;</span><br><span class="line">  a = <span class="string">&quot;æˆ‘æ˜¯è¢«è§£æ„çš„a&quot;</span>;     <span class="comment">// å·²ç»è„±ç¦»reactive</span></span><br><span class="line">  c.c1 = <span class="string">&quot;æˆ‘æ˜¯è¢«è§£æ„çš„c1&quot;</span>; <span class="comment">// è¿˜æ˜¯å¯ä»¥æ›´æ”¹åˆ°obj</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(obj); <span class="comment">// &#123;a: &quot;æˆ‘æ˜¯aå‘€&quot;,b: &quot;æˆ‘æ˜¯bå‘€&quot;,c: &#123;c1: &quot;æˆ‘æ˜¯è¢«è§£æ„çš„c1&quot;&#125;&#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(a);   <span class="comment">// æˆ‘æ˜¯è¢«è§£æ„çš„a</span></span><br><span class="line">  <span class="built_in">console</span>.log(c);   <span class="comment">// &#123;c1: &quot;æˆ‘æ˜¯è¢«è§£æ„çš„c1&quot;&#125;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-Lifecycle-Hooks-ç”Ÿå‘½å‘¨æœŸ"><a href="#4-Lifecycle-Hooks-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4.Lifecycle Hooks ç”Ÿå‘½å‘¨æœŸ"></a>4.Lifecycle Hooks ç”Ÿå‘½å‘¨æœŸ</h4><p><code>composition Api</code>é‡Œé¢ç”Ÿå‘½å‘¨æœŸä¹Ÿæœ‰æ‰€å˜åŒ–ï¼Œ<code>beforeCreate</code>ã€<code>created</code>è¢«setupæ›¿ä»£ï¼Œå…¶ä»–ç”Ÿå‘½å‘¨æœŸå‡å¤šäº†<code>on</code>:</p><ul><li><del><code>beforeCreate</code></del> -&gt; <code>use setup()</code></li><li><del><code>created</code></del> -&gt; <code>use setup()</code></li><li><code>beforeMount</code> -&gt; <code>onBeforeMount</code></li><li><code>mounted</code> -&gt; <code>onMounted</code></li><li><code>beforeUpdate</code> -&gt; <code>onBeforeUpdate</code></li><li><code>updated</code> -&gt; <code>onUpdated</code></li><li><code>beforeUnmount</code> -&gt; <code>onBeforeUnmount</code></li><li><code>unmounted</code> -&gt; <code>onUnmounted</code></li><li><code>errorCaptured</code> -&gt; <code>onErrorCaptured</code></li><li><code>renderTracked</code> -&gt; <code>onRenderTracked</code></li><li><code>renderTriggered</code> -&gt; <code>onRenderTriggered</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted, onUpdated, onUnmounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyComponent = &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;mounted!&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    onUpdated(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;updated!&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    onUnmounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;unmounted!&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-Provide-Inject"><a href="#5-Provide-Inject" class="headerlink" title="5.Provide / Inject"></a>5.Provide / Inject</h4><p>å…¶å®è¿™ä¸ªè·Ÿ<code>React.context</code>å¾ˆç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†è§£å†³ç»„ä»¶åµŒå¥—å¤šå±‚propsä¼ å€¼çš„é—®é¢˜(é¿å…æ•°æ®å¤šå±‚ä¼ é€’çš„ç¹çæ€§)ï¼Œåœ¨çˆ¶çº§æŠŠéœ€è¦ä¼ é€’çš„æ•°æ®é€šè¿‡<code>Provide</code>åŒ…è£¹ï¼Œåœ¨éœ€è¦ç”¨åˆ°æ•°æ®çš„å­ç»„ä»¶ä½¿ç”¨<code>Inject</code>æ³¨å…¥å³å¯ä½¿ç”¨ï¼Œåœ¨å­çº§ä¿®æ”¹<code>Inject</code>åçš„å€¼çˆ¶çº§çš„å€¼æ˜¯åŠ¨æ€æ”¹å˜çš„ã€‚</p><blockquote><p>app.vue çˆ¶çº§</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img alt&#x3D;&quot;Vue logo&quot; src&#x3D;&quot;.&#x2F;assets&#x2F;logo.png&quot; &#x2F;&gt;</span><br><span class="line">  &lt;HelloWorld &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HelloWorld from &quot;.&#x2F;components&#x2F;HelloWorld.vue&quot;;</span><br><span class="line">import &#123; provide, ref &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloWorld,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let msg &#x3D; ref(&quot;Hello Vue 3.0 + Vite&quot;);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æä¾›æ•°æ® provide inject</span><br><span class="line">    &#x2F;&#x2F; vue3.0 ä¸€æ”¹ç»„ä»¶</span><br><span class="line">    &#x2F;&#x2F; ç±»ä¼¼äº React.context(), myContext.provider myCcontent.consumer</span><br><span class="line">    provide(&quot;msg&quot;, msg);</span><br><span class="line"></span><br><span class="line">    return &#123; msg &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>helloworld.vue å­çº§ä¸­ä½¿ç”¨</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// æ¥æ”¶ çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> msg = inject(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; msg &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="6-è‡ªå·±æ­å»ºçš„å°é¡¹ç›®é‡Œæš‚æ—¶åªä½¿ç”¨åˆ°äº†ï¼š"><a href="#6-è‡ªå·±æ­å»ºçš„å°é¡¹ç›®é‡Œæš‚æ—¶åªä½¿ç”¨åˆ°äº†ï¼š" class="headerlink" title="6.è‡ªå·±æ­å»ºçš„å°é¡¹ç›®é‡Œæš‚æ—¶åªä½¿ç”¨åˆ°äº†ï¼š"></a>6.è‡ªå·±æ­å»ºçš„å°é¡¹ç›®é‡Œæš‚æ—¶åªä½¿ç”¨åˆ°äº†ï¼š</h4><ul><li>ref</li><li>reactive</li><li>provide inject</li></ul><blockquote><p>helloword.vue</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; obj.a &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; obj.b &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; obj.c &amp;&amp; obj.c.c1 &#125;&#125;ã€&#123;&#123; obj.c &amp;&amp; obj.c.c2 &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">  &lt;button @click&#x3D;&quot;addCount&quot;&gt;count is: &#123;&#123; count &#125;&#125;&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import helloworld from &quot;.&#x2F;helloworld&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    &#x2F;&#x2F; helloworld() ä¸ºé€»è¾‘ä»£ç ï¼Œå¯ä»¥å•ç‹¬æ‹å‡ºå»ï¼Œè¿™ä¹Ÿæ˜¯composition Apiçš„ä¸€å¤§å¥½å¤„ï¼Œé€»è¾‘ä»£ç å¯ä»¥é«˜åº¦è§£è€¦ï¼Œå¯å¤ç”¨æ€§æ›´å¼ºï¼</span><br><span class="line">    return Object.assign(&#123;&#125;, helloworld());</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>helloworld.ts </p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, inject &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; $log, $info, $test &#125; <span class="keyword">from</span> <span class="string">&quot;../modules-index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> helloworld = ():<span class="function"><span class="params">object</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ¥æ”¶ çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> msg = inject(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. ref</span></span><br><span class="line">  <span class="keyword">const</span> count = ref(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> addCount = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    count.value++;</span><br><span class="line">    $log(count.value, <span class="string">&quot;count:&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. reactive</span></span><br><span class="line">  <span class="keyword">const</span> obj = reactive(&#123;</span><br><span class="line">    a: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">    b: <span class="string">&quot;b&quot;</span>,</span><br><span class="line">    c: &#123;</span><br><span class="line">      c1: <span class="string">&quot;c1&quot;</span>,</span><br><span class="line">      c2: <span class="string">&quot;c2&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  obj.a = <span class="string">&quot;æˆ‘æ˜¯aå‘€&quot;</span>;</span><br><span class="line">  obj.b = <span class="string">&quot;æˆ‘æ˜¯bå‘€&quot;</span>;</span><br><span class="line">  obj.c.c1 = <span class="string">&quot;æˆ‘æ˜¯c1å‘€&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ³¨æ„ï¼šå¯¹reactiveçš„æ•°æ®è§£æ„ä¼šå¯¼è‡´ åŸºç¡€æ•°æ®ç±»å‹ å¤±å»reactive</span></span><br><span class="line">  <span class="keyword">let</span> &#123; a, c &#125; = obj;</span><br><span class="line">  a = <span class="string">&quot;æˆ‘æ˜¯è¢«è§£æ„çš„a&quot;</span>;</span><br><span class="line">  c.c1 = <span class="string">&quot;æˆ‘æ˜¯è¢«è§£æ„çš„c1&quot;</span>;</span><br><span class="line"></span><br><span class="line">  $log(obj);     <span class="comment">// &#123;a: &quot;æˆ‘æ˜¯aå‘€&quot;,b: &quot;æˆ‘æ˜¯bå‘€&quot;,c: &#123;c1: &quot;æˆ‘æ˜¯è¢«è§£æ„çš„c1&quot;,c2: &quot;c2&quot;,&#125;,&#125;</span></span><br><span class="line">  $log(a, <span class="string">&#x27;a:&#x27;</span>); <span class="comment">// æˆ‘æ˜¯è¢«è§£æ„çš„a </span></span><br><span class="line">  $log(c, <span class="string">&#x27;c:&#x27;</span>); <span class="comment">// &#123;c1: &quot;æˆ‘æ˜¯è¢«è§£æ„çš„c1&quot;, c2: &quot;c2&quot;&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æµ‹è¯•å¼•ç”¨</span></span><br><span class="line">  $log($info, <span class="string">&quot;æµ‹è¯•å¼•ç”¨:&quot;</span>);</span><br><span class="line">  $test();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡returnæŠŠæ•°æ®æš´éœ²ç»™template</span></span><br><span class="line">  <span class="keyword">return</span> &#123; msg, count, addCount, obj &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> helloworld;</span><br></pre></td></tr></table></figure><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>ä»¥ä¸Šç¤ºä¾‹çš„ä»£ç æ”¾åœ¨äº†GitHubä¸Šï¼š <a href="https://github.com/LLDLLY/vue3.0-init.git">https://github.com/LLDLLY/vue3.0-init.git</a></p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Composition API å’Œ React HookåŒºåˆ« (å­¦ä¹ ç¬”è®°)</title>
      <link href="/2020/09/18/compositionApi/"/>
      <url>/2020/09/18/compositionApi/</url>
      
        <content type="html"><![CDATA[<p><code>Composition API</code>ä¸<code>React Hook</code>å¾ˆåƒï¼Œè¯´è¯´åŒºåˆ«ï¼Ÿ</p><h4 id="React-Hook"><a href="#React-Hook" class="headerlink" title="React Hook"></a>React Hook</h4><blockquote><p>ä»React Hookçš„å®ç°è§’åº¦çœ‹ï¼ŒReact Hookæ˜¯æ ¹æ®<code>useState</code>è°ƒç”¨çš„é¡ºåºæ¥ç¡®å®šä¸‹ä¸€æ¬¡é‡æ¸²æŸ“æ—¶çš„stateæ˜¯æ¥æºäºå“ªä¸ª<code>useState</code>ï¼Œæ‰€ä»¥å‡ºç°äº†ä»¥ä¸‹é™åˆ¶ï¼š</p></blockquote><p>1.ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶ã€åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨Hookï¼›<br>2.å¿…é¡»ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„Reactå‡½æ•°çš„é¡¶å±‚è°ƒç”¨Hookï¼›<br>3.<code>useEffect</code>ã€<code>useMemo</code>ç­‰å‡½æ•°å¿…é¡»æ‰‹åŠ¨ç¡®å®šä¾èµ–å…³ç³»ï¼›</p><h4 id="Composition-API"><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API</h4><blockquote><p>è€ŒComposition APIæ˜¯åŸºäºVueçš„å“åº”å¼ç³»ç»Ÿå®ç°çš„ï¼Œä¸React Hookçš„ç›¸æ¯”å£°æ˜åœ¨<code>setup</code>å‡½æ•°å†…ï¼Œä¸€æ¬¡ç»„ä»¶å®ä¾‹åŒ–åªè°ƒç”¨ä¸€æ¬¡<code>setup</code>ï¼Œ<br>è€ŒReact Hookæ¯æ¬¡é‡æ¸²æŸ“éƒ½éœ€è¦è°ƒç”¨Hookï¼Œä½¿å¾—Reactçš„GC( åƒåœ¾å›æ”¶ )æ¯”Vueæ›´æœ‰å‹åŠ›ï¼Œæ€§èƒ½ä¹Ÿç›¸å¯¹äºVueæ¥è¯´ä¹Ÿè¾ƒæ…¢,<br>Compositon APIçš„è°ƒç”¨ä¸éœ€è¦é¡¾è™‘è°ƒç”¨é¡ºåºï¼Œä¹Ÿå¯ä»¥åœ¨å¾ªç¯ã€æ¡ä»¶ã€åµŒå¥—å‡½æ•°ä¸­ä½¿ç”¨,<br>å“åº”å¼ç³»ç»Ÿè‡ªåŠ¨å®ç°äº†ä¾èµ–æ”¶é›†ï¼Œè¿›è€Œç»„ä»¶çš„éƒ¨åˆ†çš„æ€§èƒ½ä¼˜åŒ–ç”±Vueå†…éƒ¨è‡ªå·±å®Œæˆï¼Œ<br>è€ŒReact Hookéœ€è¦æ‰‹åŠ¨ä¼ å…¥ä¾èµ–ï¼Œè€Œä¸”å¿…é¡»å¿…é¡»ä¿è¯ä¾èµ–çš„é¡ºåºï¼Œè®©<code>useEffect</code>ã€<code>useMemo</code>ç­‰å‡½æ•°æ­£ç¡®çš„æ•è·ä¾èµ–å˜é‡ï¼Œå¦åˆ™ä¼šç”±äºä¾èµ–ä¸æ­£ç¡®ä½¿å¾—ç»„ä»¶æ€§èƒ½ä¸‹é™ã€‚</p></blockquote><p>è™½ç„¶Compositon APIçœ‹èµ·æ¥æ¯”React Hookå¥½ç”¨ï¼Œä½†æ˜¯å…¶è®¾è®¡æ€æƒ³ä¹Ÿæ˜¯å€Ÿé‰´React Hookçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°å·¥å…·è®°å½•</title>
      <link href="/2020/08/10/utils/"/>
      <url>/2020/08/10/utils/</url>
      
        <content type="html"><![CDATA[<h3 id="node-çƒ­æ›´æ–°å·¥å…·nodemon"><a href="#node-çƒ­æ›´æ–°å·¥å…·nodemon" class="headerlink" title="node çƒ­æ›´æ–°å·¥å…·nodemon"></a>node çƒ­æ›´æ–°å·¥å…·nodemon</h3><p><a href="https://www.npmjs.com/package/nodemon">https://www.npmjs.com/package/nodemon</a></p><h3 id="nodeç‰ˆæœ¬ç®¡ç†å·¥å…·"><a href="#nodeç‰ˆæœ¬ç®¡ç†å·¥å…·" class="headerlink" title="nodeç‰ˆæœ¬ç®¡ç†å·¥å…·"></a>nodeç‰ˆæœ¬ç®¡ç†å·¥å…·</h3><p><a href="https://github.com/nvm-sh/nvm">https://github.com/nvm-sh/nvm</a><br><a href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a><br><a href="https://github.com/tj/n">https://github.com/tj/n</a></p><h3 id="npm-æºç®¡ç†å·¥å…·-nrm"><a href="#npm-æºç®¡ç†å·¥å…·-nrm" class="headerlink" title="npm æºç®¡ç†å·¥å…· nrm"></a>npm æºç®¡ç†å·¥å…· nrm</h3><p><a href="https://github.com/Pana/nrm">https://github.com/Pana/nrm</a></p><h3 id="yarn-resolutions"><a href="#yarn-resolutions" class="headerlink" title="yarn resolutions"></a>yarn resolutions</h3><p><a href="https://classic.yarnpkg.com/en/docs/selective-version-resolutions/">https://classic.yarnpkg.com/en/docs/selective-version-resolutions/</a><br><a href="https://blog.csdn.net/qq_21567385/article/details/112644629">https://blog.csdn.net/qq_21567385/article/details/112644629</a><br><a href="https://blog.csdn.net/qq_21567385/article/details/113066012">https://blog.csdn.net/qq_21567385/article/details/113066012</a></p><h3 id="æŠŠpng-jpgè½¬svg-çš„ç½‘ç«™"><a href="#æŠŠpng-jpgè½¬svg-çš„ç½‘ç«™" class="headerlink" title="æŠŠpng/jpgè½¬svg çš„ç½‘ç«™"></a>æŠŠpng/jpgè½¬svg çš„ç½‘ç«™</h3><p><a href="https://www.vectorizer.io/images/upload.html">https://www.vectorizer.io/images/upload.html</a></p><h3 id="æŠŠsvgè½¬iconfont"><a href="#æŠŠsvgè½¬iconfont" class="headerlink" title="æŠŠsvgè½¬iconfont"></a>æŠŠsvgè½¬iconfont</h3><p><a href="https://icomoon.io/app/#/select/font">https://icomoon.io/app/#/select/font</a></p><h3 id="æ‰“å¼€-ttf-æ–‡ä»¶å·¥å…·"><a href="#æ‰“å¼€-ttf-æ–‡ä»¶å·¥å…·" class="headerlink" title="æ‰“å¼€ .ttf æ–‡ä»¶å·¥å…·"></a>æ‰“å¼€ .ttf æ–‡ä»¶å·¥å…·</h3><p><a href="http://fontstore.baidu.com/static/editor/">http://fontstore.baidu.com/static/editor/</a></p><h3 id="èƒŒæ™¯å¤§å›¾åœ°å€"><a href="#èƒŒæ™¯å¤§å›¾åœ°å€" class="headerlink" title="èƒŒæ™¯å¤§å›¾åœ°å€"></a>èƒŒæ™¯å¤§å›¾åœ°å€</h3><p><a href="https://picsum.photos/">https://picsum.photos/</a></p><h3 id="H5æ‰‹å†™ç­¾åæ’ä»¶"><a href="#H5æ‰‹å†™ç­¾åæ’ä»¶" class="headerlink" title="H5æ‰‹å†™ç­¾åæ’ä»¶"></a>H5æ‰‹å†™ç­¾åæ’ä»¶</h3><p><a href="https://www.npmjs.com/package/signature_pad">https://www.npmjs.com/package/signature_pad</a></p><h3 id="H5é¢„è§ˆ-docx-excel-xlsx-ppt"><a href="#H5é¢„è§ˆ-docx-excel-xlsx-ppt" class="headerlink" title="H5é¢„è§ˆ docx excel xlsx ppt"></a>H5é¢„è§ˆ docx excel xlsx ppt</h3><p><a href="https://view.officeapps.live.com/op/view.aspx?src=">https://view.officeapps.live.com/op/view.aspx?src=</a></p><h3 id="ç½‘ç«™å¯ä»¥ä½¿ç”¨çš„ä¼˜ç¾å¥å­-api"><a href="#ç½‘ç«™å¯ä»¥ä½¿ç”¨çš„ä¼˜ç¾å¥å­-api" class="headerlink" title="ç½‘ç«™å¯ä»¥ä½¿ç”¨çš„ä¼˜ç¾å¥å­ api"></a>ç½‘ç«™å¯ä»¥ä½¿ç”¨çš„ä¼˜ç¾å¥å­ api</h3><p><a href="https://hitokoto.cn/#">https://hitokoto.cn/#</a></p><h3 id="GitHub-JsDeliver-é™æ€èµ„æºåŠ é€Ÿ"><a href="#GitHub-JsDeliver-é™æ€èµ„æºåŠ é€Ÿ" class="headerlink" title="GitHub+JsDeliver é™æ€èµ„æºåŠ é€Ÿ"></a>GitHub+JsDeliver é™æ€èµ„æºåŠ é€Ÿ</h3><p>JSD çš„é“¾æ¥æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ç›´æ¥å¼•ç”¨</p><p>æ ¼å¼ä¸ºï¼š<a href="https://fastly.jsdelivr.net/gh/">https://fastly.jsdelivr.net/gh/</a>&lt;ç”¨æˆ·å&gt;/&lt;ä»“åº“å&gt;/&lt;æ–‡ä»¶åŠè·¯å¾„&gt;</p><p>ä¾‹å¦‚ï¼š<a href="https://fastly.jsdelivr.net/gh/blogimg/HexoStaticFile2/2020/05/28/911db4c3b95ed896b066b6e9aabae311.png">https://fastly.jsdelivr.net/gh/blogimg/HexoStaticFile2/2020/05/28/911db4c3b95ed896b066b6e9aabae311.png</a> ä»£è¡¨ç”¨æˆ·å blogimg ä¸‹çš„ HexoStaticFlle2 ä»“åº“ä¸­æ–‡ä»¶å¤¹ /2020/05/28/ é‡Œçš„ 911db4c3b95ed896b066b6e9aabae311.png æ–‡ä»¶ã€‚</p><p>åˆ†æ”¯åŠç‰ˆæœ¬å·</p><p>åˆ†æ”¯ä¸ç‰ˆæœ¬å·åŠ åˆ°ä»“åº“åå˜ï¼Œç”¨ @ç¬¦é“¾æ¥ã€‚æ ¼å¼ä¸ºï¼š<a href="https://fastly.jsdelivr.net/gh/">https://fastly.jsdelivr.net/gh/</a>&lt;ç”¨æˆ·å&gt;/&lt;ä»“åº“å&gt;@[åˆ†æ”¯/ç‰ˆæœ¬å·]/&lt;æ–‡ä»¶åŠè·¯å¾„&gt;</p><h3 id="å›¾ç‰‡å‹ç¼©å·¥å…·"><a href="#å›¾ç‰‡å‹ç¼©å·¥å…·" class="headerlink" title="å›¾ç‰‡å‹ç¼©å·¥å…·"></a>å›¾ç‰‡å‹ç¼©å·¥å…·</h3><p>å¯ä»¥æ‰¹é‡å‹ç¼©<br>imagine</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git æ›´æ”¹è´¦æˆ·å’Œå¯†ç </title>
      <link href="/2020/08/03/gitRename/"/>
      <url>/2020/08/03/gitRename/</url>
      
        <content type="html"><![CDATA[<p>gitæŠ¥é”™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: Authentication failed for &#x27;http://--.--.--.--:---/-/-.git/&#x27;</span><br></pre></td></tr></table></figure><p>è§£å†³åŠæ³•ï¼šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œé‡ç½®æƒé™éªŒè¯ä¿¡æ¯ã€‚ </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --system --unset credential.helper</span><br></pre></td></tr></table></figure><p>ä¹‹åå†è¾“å…¥cloneçš„å‘½ä»¤ï¼Œgitä¼šå¼¹å‡ºè¾“å…¥çš„è´¦æˆ·å’Œå¯†ç çš„çª—å£ï¼Œé‡æ–°è¾“å…¥ä¸€ä¸‹å°±å¥½å•¦~</p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>uni-app è¸©å‘</title>
      <link href="/2020/07/30/uni-app/"/>
      <url>/2020/07/30/uni-app/</url>
      
        <content type="html"><![CDATA[<h3 id="H5ç«¯-uni-load-more-è§¦åº•ä¸åˆ·æ–°é—®é¢˜"><a href="#H5ç«¯-uni-load-more-è§¦åº•ä¸åˆ·æ–°é—®é¢˜" class="headerlink" title="H5ç«¯ uni-load-more è§¦åº•ä¸åˆ·æ–°é—®é¢˜"></a>H5ç«¯ uni-load-more è§¦åº•ä¸åˆ·æ–°é—®é¢˜</h3><blockquote><p><code>uni-page</code>æ ‡ç­¾ <code>height</code>ä¸èƒ½å†™æˆ<code>100%</code>ï¼Œè¦å†™<code>height: auto;</code>.</p></blockquote><h3 id="å¾®ä¿¡å°ç¨‹åºæ›´æ”¹CheckBoxæ ·å¼"><a href="#å¾®ä¿¡å°ç¨‹åºæ›´æ”¹CheckBoxæ ·å¼" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºæ›´æ”¹CheckBoxæ ·å¼"></a>å¾®ä¿¡å°ç¨‹åºæ›´æ”¹CheckBoxæ ·å¼</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* #ifdef APP-PLUS || MP-WEIXIN */</span></span><br><span class="line"><span class="selector-tag">checkbox</span> <span class="selector-class">.wx-checkbox-input</span>&#123;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">30</span>rpx;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">30</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">checkbox</span>  <span class="selector-class">.wx-checkbox-input</span><span class="selector-class">.wx-checkbox-input-checked</span>&#123;</span><br><span class="line"><span class="attribute">background-color</span>: @theme;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#FFFFFF</span> <span class="meta">!important</span>;</span><br><span class="line"><span class="attribute">border-color</span>: @theme;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">checkbox</span>  <span class="selector-class">.wx-checkbox-input</span><span class="selector-class">.wx-checkbox-input-checked</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>) <span class="built_in">scale</span>(.<span class="number">45</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* #endif */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¾®ä¿¡å°ç¨‹åºæ›´æ”¹radioæ ·å¼"><a href="#å¾®ä¿¡å°ç¨‹åºæ›´æ”¹radioæ ·å¼" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºæ›´æ”¹radioæ ·å¼"></a>å¾®ä¿¡å°ç¨‹åºæ›´æ”¹radioæ ·å¼</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* #ifdef APP-PLUS || MP-WEIXIN */</span></span><br><span class="line">    <span class="selector-tag">radio</span> <span class="selector-class">.wx-radio-input</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30</span>rpx;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">radio</span> <span class="selector-class">.wx-radio-input</span><span class="selector-class">.wx-radio-input-checked</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">30</span>rpx;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30</span>rpx;</span><br><span class="line">        <span class="attribute">background</span>:@theme <span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: @theme <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">radio</span> <span class="selector-class">.wx-radio-input</span><span class="selector-class">.wx-radio-input-checked</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>) <span class="built_in">scale</span>(.<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/* #endif */</span></span><br></pre></td></tr></table></figure><h3 id="å¾®ä¿¡å°ç¨‹åºä¿®æ”¹switchæ ·å¼"><a href="#å¾®ä¿¡å°ç¨‹åºä¿®æ”¹switchæ ·å¼" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºä¿®æ”¹switchæ ·å¼"></a>å¾®ä¿¡å°ç¨‹åºä¿®æ”¹switchæ ·å¼</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* #ifdef APP-PLUS || MP-WEIXIN  */</span></span><br><span class="line"><span class="selector-tag">switch</span> <span class="selector-class">.wx-switch-input</span>&#123;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">56</span>rpx ;</span><br><span class="line"><span class="attribute">background</span>: @theme <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#ccc</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*ç™½è‰²æ ·å¼ï¼ˆfalseçš„æ ·å¼ï¼‰*/</span></span><br><span class="line"><span class="selector-tag">switch</span> <span class="selector-class">.wx-switch-input</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">52</span>rpx ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*ï¼ˆtrueçš„æ ·å¼ï¼‰*/</span></span><br><span class="line"><span class="selector-tag">switch</span> <span class="selector-class">.wx-switch-input</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">52</span>rpx;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">52</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* #endif */</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€ä¿®æ”¹å¯¼èˆªæ çš„icon"><a href="#åŠ¨æ€ä¿®æ”¹å¯¼èˆªæ çš„icon" class="headerlink" title="åŠ¨æ€ä¿®æ”¹å¯¼èˆªæ çš„icon"></a>åŠ¨æ€ä¿®æ”¹å¯¼èˆªæ çš„icon</h3><p>æ­¤æ–¹æ¡ˆæ”¹äº†iconæ ·å¼åï¼ŒonNavigationBarButtonTapå°†ä¸å†è§¦å‘ï¼Œå‘ï¼è¿˜æ˜¯ç”¨è‡ªå®šä¹‰å¯¼èˆªæ å§ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">flag: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">computed: &#123;</span><br><span class="line">...mapState(&#123;</span><br><span class="line">list: <span class="function"><span class="params">state</span> =&gt;</span> state.home.list,</span><br><span class="line">theme: <span class="function"><span class="params">state</span> =&gt;</span> state.common.theme,</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">onNavigationBarButtonTap</span>(<span class="params">btn</span>)</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(btn)</span><br><span class="line"><span class="comment">// åˆ†äº«</span></span><br><span class="line"><span class="keyword">if</span> (btn.index === <span class="number">0</span>) &#123;</span><br><span class="line">uni.showToast(&#123;</span><br><span class="line">icon: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">title:<span class="string">&#x27;åˆ†äº«&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// çˆ±å¿ƒ</span></span><br><span class="line"><span class="keyword">if</span> (btn.index === <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> pages = getCurrentPages();</span><br><span class="line"><span class="keyword">let</span> page = pages[pages.length - <span class="number">1</span>];</span><br><span class="line"><span class="comment">// #ifdef APP-PLUS </span></span><br><span class="line"><span class="keyword">let</span> currentWebview = page.$getAppWebview();</span><br><span class="line"><span class="keyword">let</span> titleObj = currentWebview.getStyle().titleNView;</span><br><span class="line"><span class="keyword">if</span> (!titleObj.buttons) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>.flag) &#123;</span><br><span class="line">titleObj.buttons[<span class="number">1</span>].fontSrc = <span class="string">&quot;/static/style/fonts/font.ttf&quot;</span>;</span><br><span class="line">titleObj.buttons[<span class="number">1</span>].text = <span class="string">&quot;\ue645&quot;</span>;</span><br><span class="line">titleObj.buttons[<span class="number">1</span>].fontSize = <span class="number">24</span>;</span><br><span class="line">titleObj.buttons[<span class="number">1</span>].color = <span class="built_in">this</span>.theme == <span class="string">&#x27;theme-deep-pink&#x27;</span>? <span class="string">&#x27;#FC6BC0&#x27;</span>:<span class="string">&#x27;#ffb1a7&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">titleObj.buttons[<span class="number">1</span>].text = <span class="string">&quot;/static/style/fonts/other.ttf&quot;</span>;</span><br><span class="line">titleObj.buttons[<span class="number">1</span>].text = <span class="string">&quot;\ue900&quot;</span>;</span><br><span class="line">titleObj.buttons[<span class="number">1</span>].fontSize = <span class="number">18</span>;</span><br><span class="line">titleObj.buttons[<span class="number">1</span>].color = <span class="string">&#x27;#333333&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.flag = !<span class="built_in">this</span>.flag;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(this.flag);</span></span><br><span class="line"></span><br><span class="line">titleObj.buttons[<span class="number">1</span>].width = <span class="string">&#x27;40px&#x27;</span>;</span><br><span class="line">currentWebview.setStyle(&#123;</span><br><span class="line">titleNView: titleObj</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// #endif</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é¡µé¢å±•ç¤ºbase64å›¾ç‰‡ä¸æ˜¾ç¤ºçš„å‘"><a href="#é¡µé¢å±•ç¤ºbase64å›¾ç‰‡ä¸æ˜¾ç¤ºçš„å‘" class="headerlink" title="é¡µé¢å±•ç¤ºbase64å›¾ç‰‡ä¸æ˜¾ç¤ºçš„å‘"></a>é¡µé¢å±•ç¤ºbase64å›¾ç‰‡ä¸æ˜¾ç¤ºçš„å‘</h3><p>è¿™ä¸ªæ˜¯å­—ç¬¦ä¸²å¤ªé•¿ä¼ è¾“ä¸­åŠ å…¥å›è½¦å¯¼è‡´, éœ€è¦æŠŠå›è½¦å’Œæ¢è¡Œéƒ½å»æ‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = base64Data.replace(<span class="regexp">/[\r\n]/g</span>, <span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> uni-app </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-appè¸©å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é“¾è¡¨åˆ é™¤(å­¦ä¹ ç¬”è®°)</title>
      <link href="/2020/07/27/exercise1/"/>
      <url>/2020/07/27/exercise1/</url>
      
        <content type="html"><![CDATA[<h4 id="ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚"><a href="#ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚" class="headerlink" title="ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚"></a>ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ListNode</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.val = val;</span><br><span class="line">    <span class="built_in">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">    val: <span class="number">1</span>,</span><br><span class="line">    next: &#123;</span><br><span class="line">        val: <span class="number">1</span>,</span><br><span class="line">        next: &#123;</span><br><span class="line">            val: <span class="number">2</span>,</span><br><span class="line">            next: &#123;</span><br><span class="line">                val: <span class="number">3</span>,</span><br><span class="line">                next: &#123;</span><br><span class="line">                    val: <span class="number">4</span>,</span><br><span class="line">                    next: <span class="literal">null</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params">node</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> cur = node;</span><br><span class="line">    <span class="keyword">while</span> (cur &amp;&amp; cur.next) &#123;</span><br><span class="line">        <span class="keyword">if</span>(cur.val === cur.next.val)&#123;</span><br><span class="line">            cur.next = cur.next.next;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(fn(node))); <span class="comment">// &#123;&quot;val&quot;:1,&quot;next&quot;:&#123;&quot;val&quot;:2,&quot;next&quot;:&#123;&quot;val&quot;:3,&quot;next&quot;:&#123;&quot;val&quot;:4,&quot;next&quot;:null&#125;&#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure><h4 id="ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰å«æœ‰é‡å¤æ•°å­—çš„ç»“ç‚¹ï¼Œåªä¿ç•™åŸå§‹é“¾è¡¨ä¸­-æ²¡æœ‰é‡å¤å‡ºç°çš„æ•°å­—ã€‚"><a href="#ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰å«æœ‰é‡å¤æ•°å­—çš„ç»“ç‚¹ï¼Œåªä¿ç•™åŸå§‹é“¾è¡¨ä¸­-æ²¡æœ‰é‡å¤å‡ºç°çš„æ•°å­—ã€‚" class="headerlink" title="ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰å«æœ‰é‡å¤æ•°å­—çš„ç»“ç‚¹ï¼Œåªä¿ç•™åŸå§‹é“¾è¡¨ä¸­ æ²¡æœ‰é‡å¤å‡ºç°çš„æ•°å­—ã€‚"></a>ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰å«æœ‰é‡å¤æ•°å­—çš„ç»“ç‚¹ï¼Œåªä¿ç•™åŸå§‹é“¾è¡¨ä¸­ æ²¡æœ‰é‡å¤å‡ºç°çš„æ•°å­—ã€‚</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// é“¾è¡¨æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ListNode</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.val = val;</span><br><span class="line">    <span class="built_in">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> node = &#123;</span><br><span class="line">    val: <span class="number">1</span>,</span><br><span class="line">    next: &#123;</span><br><span class="line">        val: <span class="number">2</span>,</span><br><span class="line">        next: &#123;</span><br><span class="line">            val: <span class="number">4</span>,</span><br><span class="line">            next: &#123;</span><br><span class="line">                val: <span class="number">4</span>,</span><br><span class="line">                next: &#123;</span><br><span class="line">                    val: <span class="number">4</span>,</span><br><span class="line">                    next: <span class="literal">null</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn2 = <span class="function"><span class="keyword">function</span> (<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç‰¹æ®Šæƒ…å†µï¼Œæ²¡æœ‰ç»“ç‚¹ï¼Œåªæœ‰ä¸€ä¸ªç»“ç‚¹ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (!head &amp;&amp; !head.next) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªç©ºèŠ‚ç‚¹ï¼Œä¿è¯é“¾è¡¨å¯ä»¥è®¿é—®</span></span><br><span class="line">    <span class="keyword">let</span> dummy = <span class="keyword">new</span> ListNode(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    dummy.next = head;</span><br><span class="line">    <span class="comment">// å¯ä»¥ç†è§£ä¸ºæŒ‡é’ˆï¼Œè®°å½•å¾ªç¯åˆ°é‚£ä¸€æ­¥</span></span><br><span class="line">    <span class="keyword">let</span> cur = dummy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (cur.next &amp;&amp; cur.next.next) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur.next.val === cur.next.next.val) &#123;</span><br><span class="line">            <span class="comment">// è®°å½•é‡å¤çš„å€¼</span></span><br><span class="line">            <span class="keyword">let</span> value = cur.next.val;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­åç»­ç»“ç‚¹æ˜¯å¦è¿˜æœ‰é‡å¤</span></span><br><span class="line">            <span class="keyword">while</span> (cur.next &amp;&amp; cur.next.val === value) &#123;</span><br><span class="line">                <span class="comment">// é‡å¤å°±åˆ é™¤è¯¥ç»“ç‚¹</span></span><br><span class="line">                cur.next = cur.next.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn2(node));  <span class="comment">// &#123; val: 1, next: &#123; val: 2, next: null &#125; &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lessã€sassæ¢è‚¤æ–¹æ¡ˆè®°å½•</title>
      <link href="/2020/07/16/lessSass/"/>
      <url>/2020/07/16/lessSass/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ç°åœ¨æ¢è‚¤çš„åœºæ™¯è¶Šæ¥è¶Šå¤šï¼Œç‰¹æ­¤æ€»ç»“ä¸€ä¸‹è‡ªå·±ä½¿ç”¨è¿‡åˆ‡å®å¯è¡Œçš„ä¸¤ç§æ¢è‚¤æ–¹æ¡ˆï¼Œlesså’Œsasså„ä¸€ç§ï¼Œlessé…åˆçš„vueé¡¹ç›®ï¼Œsassé…åˆçš„reacté¡¹ç›®ï¼›å¤§ä½“çš„æ€è·¯éƒ½æ˜¯ä¸€æ ·çš„ï¼š</p><blockquote><p>1.å°†ä¸»é¢˜ä¼šç”¨åˆ°çš„é¢œè‰²éƒ½ä½¿ç”¨å˜é‡å®šä¹‰ï¼›<br>2.ä½¿ç”¨<code>less/sass</code>mixinå’Œå‡½æ•°å®ç°ä¸åŒä¸»é¢˜çš„é¢œè‰²é€‰å–ï¼›<br>3.åœ¨bodyä¸Šæ”¾ä¸€ä¸ªç”¨äºåŒºåˆ«ä¸»é¢˜çš„ç±»åæˆ–è€…å±æ€§ï¼Œé€šè¿‡åŠ¨æ€æ›´æ¢è¿™ä¸ªç±»åï¼Œå®ç°ä¸»é¢˜çš„åˆ‡æ¢ï¼›</p></blockquote><h3 id="Less"><a href="#Less" class="headerlink" title="Less"></a>Less</h3><h4 id="1-æ•ˆæœ"><a href="#1-æ•ˆæœ" class="headerlink" title="1.æ•ˆæœ"></a>1.æ•ˆæœ</h4><p>å®šä¹‰äº†ä¸¤å¥—ä¸»é¢˜ï¼šè“è‰²å’Œæ©™è‰²<br>å…ˆçœ‹æ•ˆæœå§ï¼ŒæŠŠç±»åæ”¹ä¸º<code>theme_blue</code>åˆ‡æ¢ä¸º<code>theme_orange</code>ä¸»é¢˜ç›´æ¥å°±æ¢æ‰å•¦~<br> <img src="/images/css/2.jpg" alt="è“è‰²ä¸»é¢˜"><br> <img src="/images/css/1.jpg" alt="æ©™è‰²ä¸»é¢˜"></p><h4 id="2-å®šä¹‰å˜é‡"><a href="#2-å®šä¹‰å˜é‡" class="headerlink" title="2.å®šä¹‰å˜é‡"></a>2.å®šä¹‰å˜é‡</h4><ol><li>å®šä¹‰å˜é‡;</li><li>å®šä¹‰äº†ä¸€ä¸ªå«themeçš„mixinï¼ŒæŠŠå®šä¹‰çš„å˜é‡ä¼ å…¥mixinå†…éƒ¨;</li></ol><p><code>theme.blue.less</code></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸»é¢˜é¢œè‰² è“</span></span><br><span class="line"><span class="variable">@theme:</span> <span class="number">#1989fa</span>;</span><br><span class="line"><span class="variable">@theme_to:</span> <span class="number">#1989fa</span>;</span><br><span class="line"><span class="variable">@theme_black:</span> <span class="number">#272b2e</span>;             <span class="comment">// å®˜ç½‘é»‘</span></span><br><span class="line"><span class="comment">// æ¸å˜</span></span><br><span class="line"><span class="variable">@linear:</span> <span class="number">#1989fa</span>;</span><br><span class="line"><span class="variable">@linear_to:</span> <span class="number">#1989fa</span>;</span><br><span class="line"><span class="comment">//å¸¸ç”¨é¢œè‰²</span></span><br><span class="line"><span class="variable">@Black:</span> <span class="number">#000000</span>;                   <span class="comment">// ç™½åº•çš„é¡»çŸ¥</span></span><br><span class="line"><span class="variable">@White:</span> <span class="number">#ffffff</span>;                   <span class="comment">// ç™½è‰²åº•æˆ–æ–‡å­—</span></span><br><span class="line"><span class="variable">@GeneralGray:</span> <span class="number">#999999</span>;             <span class="comment">// æ­£å¸¸ç°è‰²å­—ä½“ï¼Œå¤šç”¨äºå€¼çš„æ˜¾ç¤º</span></span><br><span class="line"><span class="variable">@DeepGray:</span> <span class="number">#333333</span>;                <span class="comment">// æ·±ç°è‰²å­—ä½“ï¼Œå¤šç”¨äºè¡¨å•é¡µé¢çš„å‚æ•°åå’Œæ ‡é¢˜</span></span><br><span class="line"><span class="variable">@AuxiliaryGray:</span> <span class="number">#dcdcdc</span>;           <span class="comment">// å¸¸ç”¨äºåˆ†å‰²çº¿</span></span><br><span class="line"><span class="variable">@WhiteGray:</span> <span class="number">#f8f8f8</span>;               <span class="comment">// é¡µé¢æœ€åº•å±‚ç°è‰²èƒŒæ™¯</span></span><br><span class="line"><span class="variable">@borderGray:</span> <span class="number">#ebedf0</span>;              <span class="comment">// border</span></span><br><span class="line"><span class="variable">@Divider:</span> <span class="number">#dcdcdc</span>;</span><br><span class="line"><span class="variable">@backgroundAlert:</span> <span class="number">#f1f3f4</span>;         <span class="comment">// alertèƒŒæ™¯è‰²</span></span><br><span class="line"><span class="variable">@buttonShadowColor:</span> <span class="number">#1989fa</span>;       <span class="comment">// button shadow</span></span><br><span class="line"><span class="variable">@LightGrey:</span> rgba(<span class="number">77</span>, <span class="number">85</span>, <span class="number">93</span>, <span class="number">0.2</span>); <span class="comment">// æ·¡ç°è‰², ä¸€èˆ¬ç”¨äºæŒ‰é’®ç­‰</span></span><br><span class="line"><span class="variable">@border:</span> <span class="number">1px</span> solid <span class="number">#ebedf0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// theme mixinæŠŠå˜é‡ä¼ å…¥</span></span><br><span class="line"><span class="selector-class">.theme</span>(</span><br><span class="line">  <span class="variable">@theme</span>,</span><br><span class="line">  <span class="variable">@theme_to</span>,</span><br><span class="line">  <span class="variable">@Black</span>,</span><br><span class="line">  <span class="variable">@White</span>,</span><br><span class="line">  <span class="variable">@GeneralGray</span>,</span><br><span class="line">  <span class="variable">@DeepGray</span>,</span><br><span class="line">  <span class="variable">@AuxiliaryGray</span>,</span><br><span class="line">  <span class="variable">@WhiteGray</span>,</span><br><span class="line">  <span class="variable">@backgroundAlert</span>,</span><br><span class="line">  <span class="variable">@borderGray</span>,</span><br><span class="line">  <span class="variable">@Divider</span>,</span><br><span class="line">  <span class="variable">@buttonShadowColor</span>,</span><br><span class="line">  <span class="variable">@LightGrey</span>,</span><br><span class="line">  <span class="variable">@linear</span>,</span><br><span class="line">  <span class="variable">@linear_to</span>,</span><br><span class="line">  <span class="variable">@theme_black</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>theme.orange.less</code></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//ä¸»é¢˜é¢œè‰² æ©™</span></span><br><span class="line"><span class="variable">@theme:</span> <span class="number">#f87f24</span>;                  <span class="comment">// æ©™è‰²é€‰ä¸­é«˜äº® #ee4a02</span></span><br><span class="line"><span class="variable">@theme_to:</span> <span class="number">#ff8917</span>;               <span class="comment">// é€‰ä¸­é«˜äº® #ff8917</span></span><br><span class="line"><span class="variable">@theme_black:</span> <span class="number">#272b2e</span>;            <span class="comment">// å®˜ç½‘é»‘</span></span><br><span class="line"><span class="comment">// æ¸å˜</span></span><br><span class="line"><span class="variable">@linear:</span> <span class="number">#ff8700</span>;</span><br><span class="line"><span class="variable">@linear_to:</span> <span class="number">#ffbd37</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸ç”¨é¢œè‰²</span></span><br><span class="line"><span class="variable">@Black:</span> <span class="number">#000000</span>;                  <span class="comment">// ç™½åº•çš„é¡»çŸ¥</span></span><br><span class="line"><span class="variable">@White:</span> <span class="number">#ffffff</span>;                  <span class="comment">// ç™½è‰²åº•æˆ–æ–‡å­—</span></span><br><span class="line"><span class="variable">@GeneralGray:</span> <span class="number">#999999</span>;            <span class="comment">// æ­£å¸¸ç°è‰²å­—ä½“ï¼Œå¤šç”¨äºå€¼çš„æ˜¾ç¤º</span></span><br><span class="line"><span class="variable">@DeepGray:</span> <span class="number">#333333</span>;               <span class="comment">// æ·±ç°è‰²å­—ä½“ï¼Œå¤šç”¨äºè¡¨å•é¡µé¢çš„å‚æ•°åå’Œæ ‡é¢˜</span></span><br><span class="line"><span class="variable">@AuxiliaryGray:</span> <span class="number">#dcdcdc</span>;          <span class="comment">// å¸¸ç”¨äºåˆ†å‰²çº¿</span></span><br><span class="line"><span class="variable">@WhiteGray:</span> <span class="number">#f5f5f5</span>;              <span class="comment">// é¡µé¢æœ€åº•å±‚ç°è‰²èƒŒæ™¯</span></span><br><span class="line"><span class="variable">@borderGray:</span> <span class="number">#ebedf0</span>;             <span class="comment">// border</span></span><br><span class="line"><span class="variable">@Divider:</span> <span class="number">#dcdcdc</span>;</span><br><span class="line"><span class="variable">@backgroundAlert:</span> rgba(<span class="number">255</span>, <span class="number">108</span>, <span class="number">108</span>, <span class="number">0.2</span>);</span><br><span class="line"><span class="variable">@buttonShadowColor:</span> rgba(<span class="number">255</span>, <span class="number">134</span>, <span class="number">0</span>, <span class="number">0.51</span>);   <span class="comment">// button shadow</span></span><br><span class="line"><span class="variable">@LightGrey:</span> rgba(<span class="number">211</span>, <span class="number">211</span>, <span class="number">211</span>, <span class="number">0.4</span>);          <span class="comment">// æ·¡ç°è‰², ä¸€èˆ¬ç”¨äºæŒ‰é’®ç­‰</span></span><br><span class="line"><span class="variable">@border:</span> <span class="number">1px</span> solid <span class="number">#ebedf0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// theme mixinæŠŠå˜é‡ä¼ å…¥</span></span><br><span class="line"><span class="selector-class">.theme</span>(</span><br><span class="line">  <span class="variable">@theme</span>,</span><br><span class="line">  <span class="variable">@theme_to</span>,</span><br><span class="line">  <span class="variable">@Black</span>,</span><br><span class="line">  <span class="variable">@White</span>,</span><br><span class="line">  <span class="variable">@GeneralGray</span>,</span><br><span class="line">  <span class="variable">@DeepGray</span>,</span><br><span class="line">  <span class="variable">@AuxiliaryGray</span>,</span><br><span class="line">  <span class="variable">@WhiteGray</span>,</span><br><span class="line">  <span class="variable">@backgroundAlert</span>,</span><br><span class="line">  <span class="variable">@borderGray</span>,</span><br><span class="line">  <span class="variable">@Divider</span>,</span><br><span class="line">  <span class="variable">@buttonShadowColor</span>,</span><br><span class="line">  <span class="variable">@LightGrey</span>,</span><br><span class="line">  <span class="variable">@linear</span>,</span><br><span class="line">  <span class="variable">@linear_to</span>,</span><br><span class="line">  <span class="variable">@theme_black</span></span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-åœ¨lessä¸­ä½¿ç”¨"><a href="#3-åœ¨lessä¸­ä½¿ç”¨" class="headerlink" title="3.åœ¨lessä¸­ä½¿ç”¨"></a>3.åœ¨lessä¸­ä½¿ç”¨</h4><p><code>index.less</code></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¬å…±æ ·å¼</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;../common.less&#x27;</span>;</span><br><span class="line"><span class="comment">// é¡µé¢æ ·å¼å…¥å£</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;../main.less&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// theme_blueã€theme_orangeæ˜¯ç”¨æ¥åˆ‡æ¢ä¸»é¢˜çš„ç±»åï¼Œç±»åä¸åŒåº”ç”¨ä¸åŒçš„ä¸»é¢˜å˜é‡</span></span><br><span class="line"><span class="selector-class">.theme_blue</span> &#123;</span><br><span class="line">  <span class="comment">// å¼•å…¥å®šä¹‰çš„themeå‡½æ•°å’Œå˜é‡</span></span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./theme.blue.less&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.theme_orange</span> &#123;</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./theme.orange.less&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯æ‰©å±•å…¶ä»–ä¸»é¢˜ ...</span></span><br></pre></td></tr></table></figure><blockquote><p>æŠŠæœ‰ä¸»é¢˜å˜åŠ¨çš„å…ƒç´ å†™åœ¨<code>mixin</code>å†…éƒ¨ï¼Œé¢œè‰²éƒ½è¦ä½¿ç”¨<code>mixin</code>ä¼ è¿›æ¥çš„å˜é‡ï¼Œè¿™æ ·å½“ä¸»é¢˜ç±»åæ›´æ¢äº†ä¹‹åï¼Œ<code>mixin</code>ä¼ å…¥çš„å˜é‡å€¼å°±éšä¹‹æ›´æ¢ï¼Œä»è€Œæ›´æ¢äº†ä¸»é¢˜ï¼›</p></blockquote><p><code>main.less</code></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// mixinè°ƒç”¨</span></span><br><span class="line"><span class="selector-class">.theme</span>(</span><br><span class="line">  <span class="variable">@theme</span>,</span><br><span class="line">  <span class="variable">@theme_to</span>,</span><br><span class="line">  <span class="variable">@Black</span>,</span><br><span class="line">  <span class="variable">@White</span>,</span><br><span class="line">  <span class="variable">@GeneralGray</span>,</span><br><span class="line">  <span class="variable">@DeepGray</span>,</span><br><span class="line">  <span class="variable">@AuxiliaryGray</span>,</span><br><span class="line">  <span class="variable">@WhiteGray</span>,</span><br><span class="line">  <span class="variable">@backgroundAlert</span>,</span><br><span class="line">  <span class="variable">@borderGray</span>,</span><br><span class="line">  <span class="variable">@Divider</span>,</span><br><span class="line">  <span class="variable">@buttonShadowColor</span>,</span><br><span class="line">  <span class="variable">@LightGrey</span>,</span><br><span class="line">  <span class="variable">@linear</span>,</span><br><span class="line">  <span class="variable">@linear_to</span>,</span><br><span class="line">  <span class="variable">@theme_black</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.text_width_limit</span>() &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.bgc_Gray</span>() &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="variable">@WhiteGray</span>; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//èƒŒæ™¯æ¸å˜é¢œè‰² Gradual change</span></span><br><span class="line">  <span class="selector-class">.theme_linear</span>() &#123;</span><br><span class="line">    <span class="attribute">background</span>: linear-gradient(<span class="number">90deg</span>, <span class="variable">@linear</span> <span class="number">25%</span>, <span class="variable">@linear_to</span> <span class="number">100%</span>) <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.theme_shadow</span>() &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">1px</span> <span class="number">1px</span> <span class="number">5px</span> <span class="number">0</span> <span class="variable">@theme</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œå¼•å…¥å…·ä½“çš„æ¨¡å—çš„æ ·å¼æ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./a.less&#x27;</span>;</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;./b.less&#x27;</span>;</span><br><span class="line">  <span class="comment">// more ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="sass"><a href="#sass" class="headerlink" title="sass"></a>sass</h3><h4 id="1-æ•ˆæœ-1"><a href="#1-æ•ˆæœ-1" class="headerlink" title="1.æ•ˆæœ"></a>1.æ•ˆæœ</h4><blockquote><p>è¿™é‡Œä½¿ç”¨äº†React16çš„<code>context</code>é…åˆåšçš„ä¸»é¢˜çš„åˆ‡æ¢ï¼›å…·ä½“ä»£ç å¯ä»¥æŸ¥çœ‹ <a href="https://lldlly.github.io/2020/07/08/reactcreatcontext/">ä¸Šä¸€ç¯‡åšå®¢</a>ï¼›åœ¨è¿™é‡Œæˆ‘ä»¬åªå…³æ³¨åˆ‡æ¢ä»£ç çš„csséƒ¨åˆ†å¦‚ä½•å»å®ç°ï¼›</p></blockquote><p><img src="/images/context/1.jpg"><br><img src="/images/context/2.png"><br><img src="/images/context/3.png"></p><h4 id="2-å®šä¹‰å˜é‡-1"><a href="#2-å®šä¹‰å˜é‡-1" class="headerlink" title="2.å®šä¹‰å˜é‡"></a>2.å®šä¹‰å˜é‡</h4><p><code>_variable.scss</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¨å±€å˜é‡</span></span><br><span class="line"><span class="variable">$white</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line"><span class="variable">$grayTheme</span>:<span class="number">#262D33</span>;</span><br><span class="line"><span class="variable">$gray</span>:<span class="number">#b5b5b5</span>;</span><br><span class="line"><span class="variable">$blue</span>:<span class="number">#2173dc</span>;</span><br><span class="line"><span class="variable">$deepBlue</span>:<span class="number">#3f51b5</span>;</span><br><span class="line"><span class="variable">$purple</span>: <span class="number">#673ab7</span>;</span><br><span class="line"><span class="variable">$mask</span>:rgba(<span class="number">55</span>, <span class="number">55</span>, <span class="number">55</span>, .<span class="number">5</span>);</span><br><span class="line"><span class="variable">$defaultFontColor</span>:<span class="number">#515a6e</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»é¢˜ [&#x27;theme-gray&#x27;, &quot;theme-blue&quot;, &quot;theme-deepBlue&quot;, &#x27;theme-purple&#x27;]</span></span><br><span class="line"><span class="comment">// ä¸»é¢˜å®šä¹‰</span></span><br><span class="line"><span class="variable">$themes</span>:(</span><br><span class="line">    gray:(</span><br><span class="line">        theme: <span class="number">#262D33</span>,</span><br><span class="line">        deep-theme: <span class="number">#131619</span>,</span><br><span class="line">        bg-color: <span class="variable">$white</span>,</span><br><span class="line">        font-color: <span class="number">#b5b5b5</span>,</span><br><span class="line">        deep-font-color: <span class="variable">$defaultFontColor</span>,</span><br><span class="line">        header-font: <span class="number">#515a6e</span>,</span><br><span class="line">        header-bgc: <span class="variable">$white</span>,</span><br><span class="line">        menu-bgc: <span class="number">#262D33</span>,</span><br><span class="line">        menu-hover: <span class="variable">$white</span>,</span><br><span class="line">        menu-hover-bgc: <span class="number">#414d58</span>,</span><br><span class="line">        menu-active: <span class="variable">$white</span>,</span><br><span class="line">        menu-active-bgc: <span class="variable">$blue</span></span><br><span class="line">    ),</span><br><span class="line">    blue:(</span><br><span class="line">        theme: <span class="variable">$blue</span>,</span><br><span class="line">        deep-theme: <span class="variable">$blue</span>,</span><br><span class="line">        bg-color: <span class="variable">$white</span>,</span><br><span class="line">        font-color: <span class="variable">$defaultFontColor</span>,</span><br><span class="line">        deep-font-color: <span class="variable">$defaultFontColor</span>,</span><br><span class="line">        header-font: <span class="variable">$white</span>,</span><br><span class="line">        header-bgc: <span class="variable">$blue</span>,</span><br><span class="line">        menu-bgc: <span class="variable">$white</span>,</span><br><span class="line">        menu-hover: <span class="variable">$blue</span>,</span><br><span class="line">        menu-hover-bgc: <span class="number">#f0faff</span>,</span><br><span class="line">        menu-active: <span class="variable">$white</span>,</span><br><span class="line">        menu-active-bgc: <span class="variable">$blue</span>,</span><br><span class="line">    ),</span><br><span class="line">    deepBlue:(</span><br><span class="line">        theme: <span class="variable">$deepBlue</span>,</span><br><span class="line">        deep-theme: <span class="variable">$deepBlue</span>,</span><br><span class="line">        bg-color: <span class="variable">$white</span>,</span><br><span class="line">        font-color: <span class="variable">$defaultFontColor</span>,</span><br><span class="line">        deep-font-color: <span class="variable">$defaultFontColor</span>,</span><br><span class="line">        header-font: <span class="variable">$white</span>,</span><br><span class="line">        header-bgc: <span class="variable">$deepBlue</span>,</span><br><span class="line">        menu-bgc: <span class="variable">$white</span>,</span><br><span class="line">        menu-hover: <span class="variable">$deepBlue</span>,</span><br><span class="line">        menu-hover-bgc: <span class="number">#f0faff</span>,</span><br><span class="line">        menu-active: <span class="variable">$white</span>,</span><br><span class="line">        menu-active-bgc: <span class="variable">$deepBlue</span>,</span><br><span class="line">    ),</span><br><span class="line">    purple:(</span><br><span class="line">        theme: <span class="variable">$purple</span>,</span><br><span class="line">        deep-theme:<span class="variable">$purple</span>,</span><br><span class="line">        bg-color: <span class="variable">$white</span>,</span><br><span class="line">        font-color: <span class="variable">$defaultFontColor</span>,</span><br><span class="line">        deep-font-color: <span class="variable">$defaultFontColor</span>,</span><br><span class="line">        header-font: <span class="variable">$white</span>,</span><br><span class="line">        header-bgc: <span class="variable">$purple</span>,</span><br><span class="line">        menu-bgc: <span class="variable">$white</span>,</span><br><span class="line">        menu-hover: <span class="variable">$purple</span>,</span><br><span class="line">        menu-hover-bgc: <span class="number">#eee6fb</span>,</span><br><span class="line">        menu-active: <span class="variable">$white</span>,</span><br><span class="line">        menu-active-bgc: <span class="variable">$purple</span>,</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-å®šä¹‰mixin"><a href="#3-å®šä¹‰mixin" class="headerlink" title="3.å®šä¹‰mixin"></a>3.å®šä¹‰mixin</h4><p><code>_theme.scss</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥å˜é‡</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./_variable.scss&#x27;</span>;</span><br><span class="line"><span class="comment">// ä¸»é¢˜ [&#x27;theme-gray&#x27;, &quot;theme-blue&quot;, &quot;theme-deepBlue&quot;, &#x27;theme-purple&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†ä¸»é¢˜map å–å½“å‰ä¸»é¢˜ä¸‹çš„å˜é‡ï¼›$theme-mapå°±æ˜¯å¯¹åº”ä¸»é¢˜çš„é…ç½®</span></span><br><span class="line"><span class="keyword">@mixin</span> themeify &#123;</span><br><span class="line">    <span class="keyword">@each</span> <span class="variable">$theme-name</span>, <span class="variable">$theme-map</span> in <span class="variable">$themes</span> &#123;</span><br><span class="line">        <span class="comment">// !global æŠŠå±€éƒ¨å˜é‡å¼ºå‡ä¸ºå…¨å±€å˜é‡</span></span><br><span class="line">        <span class="variable">$theme-map</span>: <span class="variable">$theme-map</span> !global;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­htmlçš„data-themeçš„å±æ€§å€¼  #&#123;&#125;æ˜¯sassçš„æ’å€¼è¡¨è¾¾å¼</span></span><br><span class="line">        <span class="comment">// &amp; sassåµŒå¥—é‡Œçš„çˆ¶å®¹å™¨æ ‡è¯†   @contentæ˜¯æ··åˆå™¨æ’æ§½ï¼Œåƒvueçš„slot</span></span><br><span class="line">        <span class="selector-attr">[data-theme=&quot;theme-#&#123;$theme-name&#125;&quot;]</span> &amp; &#123;</span><br><span class="line">            <span class="keyword">@content</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªæ ¹æ®Keyè·å–é¢œè‰²çš„function</span></span><br><span class="line"><span class="keyword">@function</span> themed(<span class="variable">$key</span>) &#123;</span><br><span class="line">    <span class="comment">// map-get æ ¹æ®å¯¹åº”çš„keyå€¼è¿”å›mapä¸­å¯¹åº”çš„å€¼</span></span><br><span class="line">    <span class="comment">// map-get($map, $key)</span></span><br><span class="line">    <span class="keyword">@return</span> map-get(<span class="variable">$theme-map</span>, <span class="variable">$key</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»é¢˜èƒŒæ™¯é¢œè‰²</span></span><br><span class="line"><span class="keyword">@mixin</span> background_color(<span class="variable">$color</span>) &#123;</span><br><span class="line">    <span class="keyword">@include</span> themeify &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: themed(<span class="variable">$color</span>) <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å­—ä½“é¢œè‰²</span></span><br><span class="line"><span class="keyword">@mixin</span> font_color(<span class="variable">$color</span>) &#123;</span><br><span class="line">    <span class="keyword">@include</span> themeify &#123;</span><br><span class="line">        <span class="attribute">color</span>: themed(<span class="variable">$color</span>) <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–è¾¹æ¡†é¢œè‰²</span></span><br><span class="line"><span class="keyword">@mixin</span> border_color(<span class="variable">$color</span>) &#123;</span><br><span class="line">    <span class="keyword">@include</span> themeify &#123;</span><br><span class="line">        <span class="attribute">border-color</span>: themed(<span class="variable">$color</span>) <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¹svgé¢œè‰²</span></span><br><span class="line"><span class="keyword">@mixin</span> svg_color(<span class="variable">$color</span>) &#123;</span><br><span class="line">    <span class="keyword">@include</span> themeify &#123;</span><br><span class="line">        fill: themed(<span class="variable">$color</span>) <span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-åœ¨sassä¸­ä½¿ç”¨mixin"><a href="#4-åœ¨sassä¸­ä½¿ç”¨mixin" class="headerlink" title="4.åœ¨sassä¸­ä½¿ç”¨mixin"></a>4.åœ¨sassä¸­ä½¿ç”¨mixin</h4><p><code>layout.scss</code></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥mixin</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;./theme/_theme.scss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 1 header &amp; header elements */</span></span><br><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">    svg&#123;</span><br><span class="line">        <span class="keyword">@include</span> svg_color(<span class="string">&quot;header-font&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@include</span> font_color(<span class="string">&quot;header-font&quot;</span>);</span><br><span class="line">    <span class="keyword">@include</span> background_color(<span class="string">&quot;header-bgc&quot;</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">3</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2 menu */</span></span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">220px</span>;</span><br><span class="line">    <span class="keyword">@include</span> background_color(<span class="string">&quot;menu-bgc&quot;</span>);</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">transition</span>: width .<span class="number">3s</span> ease;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.logo</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">55px</span>;</span><br><span class="line">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#f5f4f4</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.nav-item</span> &#123;</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">        <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">        <span class="attribute">transition</span>: height .<span class="number">5s</span> ease;</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">p</span> &#123;</span><br><span class="line">            <span class="keyword">@include</span> font_color(<span class="string">&#x27;font-color&#x27;</span>);</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">            <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">            <span class="attribute">text-decoration</span>: none;</span><br><span class="line"></span><br><span class="line">            <span class="selector-tag">i</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">                <span class="attribute">margin-right</span>: <span class="number">12px</span>;</span><br><span class="line">                <span class="keyword">@include</span> font_color(<span class="string">&#x27;font-color&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2.2 menu normal */</span></span><br><span class="line"><span class="selector-class">.sidebar_normal</span> &#123;</span><br><span class="line">    <span class="selector-class">.nav-item</span> &#123;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">p</span> &#123;</span><br><span class="line">            &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">                <span class="keyword">@include</span> font_color(<span class="string">&#x27;menu-hover&#x27;</span>);</span><br><span class="line">                <span class="keyword">@include</span> background_color(<span class="string">&#x27;menu-bg-hover&#x27;</span>);</span><br><span class="line">                <span class="attribute">border-right</span>: <span class="number">2px</span> solid;</span><br><span class="line">                <span class="keyword">@include</span> border_color(<span class="string">&#x27;theme&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            &amp;<span class="selector-class">.active</span> &#123;</span><br><span class="line">                <span class="selector-tag">i</span> &#123;</span><br><span class="line">                    <span class="keyword">@include</span> font_color(<span class="string">&#x27;menu-active&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">@include</span> font_color(<span class="string">&#x27;menu-active&#x27;</span>);</span><br><span class="line">                <span class="keyword">@include</span> background_color(<span class="string">&#x27;menu-active-bgc&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2.2 menu mini */</span></span><br><span class="line"><span class="selector-class">.sidebar-mini</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">70px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: width .<span class="number">3s</span> ease;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.child-item</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.nav-item</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">p</span> &#123;</span><br><span class="line">            <span class="keyword">@include</span> font_color(<span class="string">&#x27;deep-font-color&#x27;</span>);</span><br><span class="line">            <span class="selector-tag">i</span> &#123;</span><br><span class="line">                <span class="keyword">@include</span> font_color(<span class="string">&#x27;menu-hover&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">                <span class="keyword">@include</span> font_color(<span class="string">&#x27;menu-hover&#x27;</span>);</span><br><span class="line">                <span class="keyword">@include</span> background_color(<span class="string">&#x27;menu-bg-hover&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            &amp;<span class="selector-class">.active</span> &#123;</span><br><span class="line">                <span class="selector-tag">i</span> &#123;</span><br><span class="line">                    <span class="keyword">@include</span> font_color(<span class="string">&#x27;menu-active&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">@include</span> font_color(<span class="string">&#x27;menu-active&#x27;</span>);</span><br><span class="line">                <span class="keyword">@include</span> background_color(<span class="string">&#x27;menu-active-bgc&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">            <span class="selector-class">.child-item</span> &#123;</span><br><span class="line">                <span class="attribute">display</span>: block;</span><br><span class="line">                <span class="attribute">position</span>: absolute;</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">220px</span>;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">@include</span> background_color(<span class="string">&#x27;bg-color&#x27;</span>);</span><br><span class="line">                <span class="attribute">left</span>: <span class="number">68px</span>;</span><br><span class="line">                <span class="attribute">top</span>: <span class="number">0px</span>;</span><br><span class="line">                <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">3px</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.fa-angle-down</span> &#123;</span><br><span class="line">        <span class="attribute">transition</span>: all .<span class="number">2s</span> ease;</span><br><span class="line">        <span class="attribute">transform</span>: rotate(-<span class="number">90deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¢è‚¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React.createContext( )</title>
      <link href="/2020/07/08/reactcreatcontext/"/>
      <url>/2020/07/08/reactcreatcontext/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¹‹å‰è‡ªå·±å†™demoé¡¹ç›®çš„æ—¶å€™ç”¨åˆ°äº†React16æ–°å‡ºçš„<code>Context</code>æ–¹æ³•ï¼Œç¡®å®æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼é¿å…å¿˜è®°ç‰¹æ­¤è®°å½•ã€‚<br>å…¶å®å®˜ç½‘ä¸Šå¯¹<a href="https://react.docschina.org/docs/context.html#when-to-use-context">Context</a>çš„è®²è§£å·²ç»å¾ˆè¯¦ç»†äº†ï¼Œæ¥ä¸‹æ¥å°±è®°å½•ä¸€ä¸‹æˆ‘è‡ªå·±å¯¹Contextçš„ç†è§£å’Œä½¿ç”¨ï¼›<br>å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œæˆ‘ç›¸ä¿¡è¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯~</p><h3 id="äº§ç”Ÿ"><a href="#äº§ç”Ÿ" class="headerlink" title="äº§ç”Ÿ"></a>äº§ç”Ÿ</h3><p>reactç»„ä»¶ä¹‹é—´(çˆ¶ä¼ å­)ä½¿ç”¨<code>props</code>æ¥ä¼ é€’æ•°æ®ï¼Œå­ç»„ä»¶é‡Œé¢é€šè¿‡<code>this.props</code>å°±èƒ½æ‹¿åˆ°çˆ¶çº§ä¼ æ¥çš„å€¼ã€‚ä¸€æ—¦ç»„ä»¶æ·±åº¦åµŒå¥—ï¼Œæ•°æ®åˆåœ¨é¡¶çº§çˆ¶çº§çš„èº«ä¸Šï¼Œæœ€æœ«çº§ç»„ä»¶ç”¨è¿™äº›æ•°æ®å°±è¦ä¼ é€’å¾ˆå¤šå±‚ï¼Œè€Œä¸”è¿˜æœ‰å¯èƒ½è¿™äº›æ•°æ®ä¸­é—´ç»„ä»¶æ˜¯å®Œå…¨ç”¨ä¸åˆ°çš„ã€‚é¡¹ç›®å¤æ‚åº¦ä¸€ä¸Šæ¥ï¼Œéœ€è¦ä¼ çš„æ•°æ®é‡ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ï¼Œå¯æƒ³è€ŒçŸ¥æ˜¯å¤šä¹ˆçš„ç¹çï¼Œå­ç»„ä»¶åœ¨è°ƒè¯•æ•°æ®æ—¶ï¼Œæ‰¾æ•°æ®çš„æ¥æºä¹Ÿæ˜¯ä¸ªéº»çƒ¦äº‹ï¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; page æŠŠ user avatarSize ä¼ ç»™PageLayout</span><br><span class="line">&lt;Page user&#x3D;&#123;user&#125; avatarSize&#x3D;&#123;avatarSize&#125; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; PageLayout å†æŠŠ user avatarSize ä¼ ç»™NavigationBar</span><br><span class="line">&lt;PageLayout user&#x3D;&#123;user&#125; avatarSize&#x3D;&#123;avatarSize&#125; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; NavigationBar å†ä¼ ç»™ å†…éƒ¨Avatarç»„ä»¶</span><br><span class="line">&lt;NavigationBar user&#x3D;&#123;user&#125; avatarSize&#x3D;&#123;avatarSize&#125; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Avatar ç»„ä»¶é‡Œé¢æ‰çœŸæ­£ä½¿ç”¨ user avatarSize ï¼</span><br><span class="line">&lt;Link href&#x3D;&#123;user.permalink&#125;&gt;</span><br><span class="line">  &lt;Avatar user&#x3D;&#123;user&#125; size&#x3D;&#123;avatarSize&#125; &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;Link&gt;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†é¿å…è¿™ç§ç¹ççš„æ‰‹åŠ¨ä¼ é€’æ•°æ®ï¼Œ<code>Context</code>æ–¹æ³•åº”è¿è€Œç”Ÿã€‚æ­¤å¤„å¼•ç”¨å®˜æ–¹æ–‡æ¡£åŸè¯ï¼šâ€œ<code>Context æä¾›äº†ä¸€ä¸ªæ— éœ€ä¸ºæ¯å±‚ç»„ä»¶æ‰‹åŠ¨æ·»åŠ  propsï¼Œå°±èƒ½åœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•ã€‚</code>â€ã€‚</p><h3 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h3><p><code>React.createContext</code>åˆ›å»ºå‡ºä¸€ä¸ªContextå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æä¾›äº†å››ä¸ªapiï¼š</p><ul><li>Context.Provider</li><li>Context.Consumer</li><li>Class.contextType</li><li>Context.displayName</li></ul><h4 id="React-createContext-åˆ›å»º"><a href="#React-createContext-åˆ›å»º" class="headerlink" title="React.createContext åˆ›å»º"></a>React.createContext åˆ›å»º</h4><blockquote><p>åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡çš„å¯¹è±¡<code>Context</code>ï¼ŒåŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼šç”Ÿäº§è€…ï¼ˆProviderï¼‰æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰; defaultValueå¯ä»¥è®¾ç½®å…±äº«çš„é»˜è®¤æ•°æ®</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MyContext = React.createContext(defaultValue);</span><br></pre></td></tr></table></figure><h4 id="Context-Provider-ç”Ÿäº§è€…"><a href="#Context-Provider-ç”Ÿäº§è€…" class="headerlink" title="Context.Provider ç”Ÿäº§è€…"></a>Context.Provider ç”Ÿäº§è€…</h4><blockquote><p>Providerå°†æ•°æ®é€šè¿‡valueæä¾›ç»™<code>Consumer</code>(æ¶ˆè´¹è€…);</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyContext.Provider value&#x3D;&#123;&#x2F;* éœ€è¦æä¾›ç»™å­ç»„ä»¶çš„æ•°æ® *&#x2F;&#125;&gt;</span><br><span class="line">     &#123;&#x2F;* è¿™é‡Œæ”¾æ¶ˆè´¹ç»„ä»¶ *&#x2F;&#125;</span><br><span class="line">&lt;&#x2F;MyContext.Provider&gt;</span><br></pre></td></tr></table></figure><h4 id="Context-Consumer-æ¶ˆè´¹è€…"><a href="#Context-Consumer-æ¶ˆè´¹è€…" class="headerlink" title="Context.Consumer æ¶ˆè´¹è€…"></a>Context.Consumer æ¶ˆè´¹è€…</h4><blockquote><p>ç”¨æ¶ˆè´¹è€…ç»„ä»¶åŒ…è£¹å­ç»„ä»¶ï¼Œé€šè¿‡å‡½æ•°ä¼ å‚çš„æ–¹å¼ï¼ŒæŠŠå…±äº«çš„æ•°æ®æä¾›ç»™å­ç»„ä»¶ï¼›valueå°±æ˜¯å…±äº«çš„æ•°æ®ï¼›</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyContext.Consumer&gt;</span><br><span class="line">    &#123;value &#x3D;&gt; &#x2F;* å­ç»„ä»¶*&#x2F;&#125;</span><br><span class="line">&lt;&#x2F;MyContext.Consumer&gt;</span><br></pre></td></tr></table></figure><h4 id="Class-contextType"><a href="#Class-contextType" class="headerlink" title="Class.contextType"></a>Class.contextType</h4><blockquote><p>å­ç»„ä»¶è¢«æ¶ˆè´¹è€…åŒ…è£¹åï¼Œå°±å¯ä»¥æŠŠ MyContext é€šè¿‡contextTypeæ–¹æ³•ï¼Œå°†æ•°æ®æ³¨å…¥ç»„ä»¶è¿›è¡Œä½¿ç”¨äº†ï¼Œè€Œä¸”æ•°æ®æ˜¯åŠ¨æ€æ”¹å˜çš„ï¼Œçˆ¶çº§çš„æ•°æ®æ”¹å˜ä¼šè‡ªåŠ¨é€šçŸ¥ä½¿ç”¨è¿‡æ•°æ®çš„å­ç»„ä»¶æ›´æ–°æ•°æ®ï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="built_in">this</span>.context;</span><br><span class="line">    <span class="comment">/* åœ¨ç»„ä»¶æŒ‚è½½å®Œæˆåï¼Œä½¿ç”¨ MyContext ç»„ä»¶çš„å€¼æ¥æ‰§è¡Œä¸€äº›æœ‰å‰¯ä½œç”¨çš„æ“ä½œ */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentDidUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="built_in">this</span>.context;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="built_in">this</span>.context;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="built_in">this</span>.context;</span><br><span class="line">    <span class="comment">/* åŸºäº MyContext ç»„ä»¶çš„å€¼è¿›è¡Œæ¸²æŸ“ */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">MyClass.contextType = MyContext;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå®˜æ–¹æä¾›äº†ä¸¤ä¸ªåœ¨å­ç»„ä»¶æ‹¿åˆ°æ•°æ®çš„æ–¹æ³•ï¼›<br>ï¼ˆ1ï¼‰åˆ›å»ºMyContextï¼Œçˆ¶çº§ç”¨MyContext.ProvideråŒ…è£¹ï¼Œå­ç»„ä»¶é€šè¿‡<code>Component.contextType = MyContext</code>æ³¨å…¥æ•°æ®ã€‚ ä½†æ˜¯ç»è¿‡è‡ªå·±å®é™…æµ‹è¯•ï¼Œè¿™æ ·æ‹¿åˆ°çš„æ•°æ®æ˜¯æ­»äº†ï¼Œå¦‚æœçˆ¶çº§æŠŠæ•°æ®æ”¹å˜äº†æ˜¯ä¸ä¼šé€šçŸ¥å­ç»„ä»¶æ›´æ–°æ•°æ®çš„ï¼›<br>ï¼ˆ2ï¼‰æƒ³è¦æ•°æ®æ›´æ–°ï¼Œéœ€è¦Providerå¥—Consumerï¼Œç„¶ååœ¨å­ç»„ä»¶ä½¿ç”¨<code>Component.contextType = MyContext</code>æ‰èƒ½åœ¨ç»„ä»¶å†…éƒ¨æ‹¿åˆ°<code>this.context</code>ä¸”æ•°æ®æ˜¯åŠ¨æ€æ›´æ–°çš„ã€‚</p><h4 id="Context-displayName"><a href="#Context-displayName" class="headerlink" title="Context.displayName"></a>Context.displayName</h4><p>è¿™ä¸ªå¯ä»¥ç†è§£ä¸ºç»™context åœ¨ React DevTools ä¸­æ”¹åå­—ç”¨çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆå®é™…çš„ä½œç”¨ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MyContext = React.createContext(<span class="comment">/* some value */</span>);</span><br><span class="line">MyContext.displayName = <span class="string">&#x27;MyDisplayName&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&lt;MyContext.Provider&gt; <span class="comment">// &quot;MyDisplayName.Provider&quot; åœ¨ DevTools ä¸­</span></span><br><span class="line">&lt;MyContext.Consumer&gt; <span class="comment">// &quot;MyDisplayName.Consumer&quot; åœ¨ DevTools ä¸­</span></span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote><ul><li>åŒºåˆ«äºpropsä¸€å±‚ä¸€å±‚ä¼ å‚ï¼ŒContextå¯ä»¥æ”¯æŒè·¨å±‚çº§ç»„ä»¶é€šä¿¡ï¼›</li><li>Context APIçš„ä½¿ç”¨åŸºäºç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼›</li><li>å¼€å‘æ—¶éœ€è¦è€ƒè™‘å¯æ§å¯å¤ç”¨æ€§ï¼Œåœ¨ä¸ç ´åç»„ä»¶æ ‘ä¾èµ–å…³ç³»ã€å½±å“èŒƒå›´å°çš„æƒ…å†µå¯ä»¥ä½¿ç”¨Contextï¼Œå½±å“èŒƒå›´å¤§è¿˜æ˜¯éœ€è¦å€ŸåŠ©<code>redux</code>ã€<code>mobx</code>ç­‰å·¥å…·ï¼›</li></ul></blockquote><h3 id="åœ¨demoé¡¹ç›®ä¸­çš„ä½¿ç”¨è®°å½•"><a href="#åœ¨demoé¡¹ç›®ä¸­çš„ä½¿ç”¨è®°å½•" class="headerlink" title="åœ¨demoé¡¹ç›®ä¸­çš„ä½¿ç”¨è®°å½•"></a>åœ¨demoé¡¹ç›®ä¸­çš„ä½¿ç”¨è®°å½•</h3><p>ä¸ºäº†ç»ƒä¹ <code>ConText</code>ï¼Œ ç”¨æ¥åšäº†é¡¹ç›®çš„æ¢è‚¤åŠŸèƒ½ï¼Œé…è‰²æœ‰ç‚¹ä¸‘(æ¯•ç«Ÿä¸æ˜¯ä¸“ä¸šUIğŸ˜…)ï¼Œå’±æš‚ä¸”å°±çœ‹åŠŸèƒ½ç‚¹ï¼Œå…ˆçœ‹ä¸€ä¸‹æ•ˆæœï¼š<br><img src="/images/context/1.jpg"><br><img src="/images/context/2.png"><br><img src="/images/context/3.png"></p><h4 id="theme-context-tsxï¼ˆCreateï¼‰"><a href="#theme-context-tsxï¼ˆCreateï¼‰" class="headerlink" title="theme.context.tsxï¼ˆCreateï¼‰"></a>theme.context.tsxï¼ˆCreateï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;  ThemeContext ä¸º Contextå¯¹è±¡ï¼Œtheme-grayæ˜¯defaultValueç”¨æ¥å…±äº«çš„é»˜è®¤æ•°æ®</span><br><span class="line">export const ThemeContext &#x3D; React.createContext(&#39;theme-gray&#39;);</span><br></pre></td></tr></table></figure><p><code>ThemeContext.Provider</code> æŠŠLayoutç»„ä»¶åŒ…è£¹èµ·æ¥ï¼ŒæŠŠéœ€è¦å…±äº«çš„æ•°æ®é€šè¿‡<code>value</code>å±æ€§æä¾›è¿›Layoutç»„ä»¶ä¸­ï¼›</p><h4 id="theme-tsx-Provider"><a href="#theme-tsx-Provider" class="headerlink" title="theme.tsx (Provider)"></a>theme.tsx (Provider)</h4><p>é¡¹ç›®ä½¿ç”¨äº†<code>mobx</code>ï¼Œæ•°æ®å­˜åœ¨storeä¸­ï¼›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &quot;react&quot;;</span><br><span class="line">import &#123; inject, observer &#125; from &quot;mobx-react&quot;;</span><br><span class="line">import &#123; withRouter &#125; from &quot;react-router&quot;;</span><br><span class="line">import &#123; ThemeContext &#125; from &#39;.&#x2F;theme.context&#39;;</span><br><span class="line">import Layout from &#39;..&#x2F;layout&#39;;</span><br><span class="line"></span><br><span class="line">@inject(&#39;LayoutStore&#39;)</span><br><span class="line">@observer</span><br><span class="line">class Theme extends React.PureComponent&lt;IProps, any&gt; &#123;</span><br><span class="line">    readonly store: any &#x3D; null;</span><br><span class="line"></span><br><span class="line">    constructor(props: any) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.store &#x3D; this.props.LayoutStore;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        &#x2F;&#x2F; currentTheme ä¸ºä¸»é¢˜å</span><br><span class="line">        const &#123; currentTheme &#125; &#x3D; this.store;</span><br><span class="line">        return (</span><br><span class="line">            &lt;ThemeContext.Provider value&#x3D;&#123;currentTheme&#125;&gt;</span><br><span class="line">                &lt;Layout &#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;ThemeContext.Provider&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default withRouter(Theme);</span><br></pre></td></tr></table></figure><h4 id="layout-tsx-Consumer"><a href="#layout-tsx-Consumer" class="headerlink" title="layout.tsx (Consumer)"></a>layout.tsx (Consumer)</h4><p>Layoutç»„ä»¶é‡Œè°ƒç”¨<code>Consumer</code>æ¥ä½¿ç”¨contextä¸­å…±äº«çš„æ•°æ®ï¼›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ThemeContext &#125; from &#39;.&#x2F;theme&#x2F;theme.context&#39;;</span><br><span class="line"></span><br><span class="line">class Layout extends React.Component&lt;any, any&gt;&#123;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;ThemeContext.Consumer&gt;</span><br><span class="line">                &#123;</span><br><span class="line">                    theme &#x3D;&gt; (</span><br><span class="line">                        &lt;div className&#x3D;&#123;theme&#125;&gt;</span><br><span class="line">                            &#123;()&#x3D;&gt; console.log(theme) &#x2F;* ä¸»é¢˜å *&#x2F;&#125;  </span><br><span class="line">                        &lt;&#x2F;div&gt;</span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            &lt;&#x2F;ThemeContext.Consumer&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Context </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reduce ä¸ reduceRight ä¸ compose</title>
      <link href="/2020/07/07/compose/"/>
      <url>/2020/07/07/compose/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>reduceè¿™ä¸ªæ–¹æ³•çœŸçš„å·²ç»å­¦ä¹ è¿‡å¾ˆå¤šæ¬¡äº†ï¼Œå­¦äº†ä¹‹åä¹Ÿå¾ˆå°‘ç”¨ï¼Œåˆä¸è®°å¾—äº†~ :joy:å†æ¥å¤ä¹ ä¸€éã€‚</p></blockquote><h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><p>arr.reduce(fn)çš„è¿”å›å€¼æ˜¯å¤„ç†çš„ç»“æœï¼›<br>reduceÂ å‡½æ•°æ¥æ”¶4ä¸ªå‚æ•°:</p><ul><li>Accumulator (acc) (ç´¯è®¡å™¨)Â </li><li>Current Value (cur) (å½“å‰å€¼)</li><li>Current Index (idx) (å½“å‰ç´¢å¼•)</li><li>Source Array (src) (æºæ•°ç»„)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹æ•°æ®è¿›è¡Œç´¯åŠ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>acc ç´¯è®¡çš„å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>item æ•°ç»„çš„æ¯ä¸€é¡¹æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params">acc, item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> acc + item</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = arr.reduce(fn);      <span class="comment">// è¿è¡Œè¿‡ç¨‹ 1 + 2 + 3 + 4 + 5 + 6</span></span><br><span class="line"><span class="keyword">let</span> result_1 = arr.reduce(fn, <span class="number">0</span>); <span class="comment">// è¿è¡Œè¿‡ç¨‹ 0 + 1 + 2 + 3 + 4 + 5 + 6</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result);   <span class="comment">// 21</span></span><br><span class="line"><span class="built_in">console</span>.log(result_1); <span class="comment">// 21</span></span><br></pre></td></tr></table></figure><h3 id="reduceRight"><a href="#reduceRight" class="headerlink" title="reduceRight"></a>reduceRight</h3><p><code>reduceRight</code>æ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼ˆaccumulatorï¼‰å’Œæ•°ç»„çš„æ¯ä¸ªå€¼ï¼ˆä»å³åˆ°å·¦ï¼‰å°†å…¶å‡å°‘ä¸ºå•ä¸ªå€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>, <span class="number">2</span>],[<span class="number">3</span>, <span class="number">4</span>],[<span class="number">5</span>, <span class="number">6</span>]];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params">acc, item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> acc.concat(item)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> result = arr.reduce(fn); </span><br><span class="line"><span class="keyword">let</span> result_1 = arr.reduceRight(fn); </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result);         <span class="comment">// [ 1, 2, 3, 4, 5, 6 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(result_1);       <span class="comment">// [ 5, 6, 3, 4, 1, 2 ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="compose"><a href="#compose" class="headerlink" title="compose"></a>compose</h3><p>è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°,Â å…¥å‚ä¹Ÿæ˜¯å‡½æ•°,Â æ‰§è¡Œçš„ç»“æœä½œä¸ºä¸‹ä¸€ä¸ªæ‰§è¡Œå‡½æ•°çš„å…¥å‚.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">initArg</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> args.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">init, current</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> current(init);</span><br><span class="line">        &#125;,initArg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Â  Â  Â Â </span><br><span class="line"><span class="comment">// ä½¿ç”¨ä¾‹å­</span></span><br><span class="line"><span class="keyword">const</span> g = <span class="function">(<span class="params">y</span>) =&gt;</span> y + <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> f = <span class="function">(<span class="params">x</span>) =&gt;</span> <span class="number">2</span> * x</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> w = compose(g, f);</span><br><span class="line"><span class="built_in">console</span>.log(w(<span class="number">1</span>)) <span class="comment">// 4</span></span><br><span class="line"><span class="built_in">console</span>.log(w(<span class="number">2</span>)) <span class="comment">// 6</span></span><br><span class="line"><span class="built_in">console</span>.log(w(<span class="number">3</span>)) <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>create-react-app åˆ›å»ºé¡¹ç›®æ›´æ”¹webpacké…ç½®</title>
      <link href="/2020/07/07/react/"/>
      <url>/2020/07/07/react/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä½¿ç”¨<code>create-react-app</code>åˆ›å»ºçš„é¡¹ç›®<code>webpack</code>é…ç½®æ–‡ä»¶æ˜¯éšè—èµ·æ¥çš„ï¼Œå¦‚æœæƒ³è¦æŠŠé…ç½®æš´éœ²å‡ºæ¥æ›´æ”¹ï¼Œéœ€è¦è¿è¡Œ <code>npm run eject </code>å‘½ä»¤ã€‚<br>ä¸è¿‡è¿™ç§æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š</p><ul><li>npm run ejectå‘½åä¸å¯é€†ï¼Œä¸€æ—¦é…ç½®æ–‡ä»¶æš´éœ²åå°±ä¸å¯å†éšè—ï¼›</li><li>æ‰©å±•çš„é…ç½®å’Œcreate-react-appå†…å»ºçš„webpacké…ç½®æ··åˆåœ¨äº†ä¸€èµ·ï¼Œä¸åˆ©äºé…ç½®å‡ºç°é—®é¢˜åçš„æ’æŸ¥ã€‚</li></ul><p>æ³¨æ„ï¼šè¿˜æœ‰cracoä¹Ÿå¯åšcreate-react-app é¡¹ç›®çš„webpacké…ç½®æ‰©å±•ï¼Œä½†æ˜¯cracoå¯åŠ¨é¡¹ç›®å¤ªæ…¢äº†ï¼Œæ”¾å¼ƒäº†~</p><h3 id="react-app-rewiredä»‹ç»"><a href="#react-app-rewiredä»‹ç»" class="headerlink" title="react-app-rewiredä»‹ç»"></a>react-app-rewiredä»‹ç»</h3><p> ä½¿ç”¨<a href="https://github.com/timarney/react-app-rewired/blob/HEAD/README_zh.md">react-app-rewired</a>è¿™ä¸ªnpmåŒ…å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸æ”¹<code>create-react-app</code>æœ¬èº«çš„é…ç½®åŸºç¡€ä¸Šå»æ‰©å±•é…ç½®ï¼Œæ˜¯ä¸ªéå¸¸niceçš„å·¥å…·ã€‚</p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><h5 id="1ï¼‰å®‰è£…"><a href="#1ï¼‰å®‰è£…" class="headerlink" title="1ï¼‰å®‰è£…"></a>1ï¼‰å®‰è£…</h5><p>npmå®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install customize-cra react-app-rewired --save-dev</span><br></pre></td></tr></table></figure><p>yarnå®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add customize-cra react-app-rewired -D</span><br></pre></td></tr></table></figure><h5 id="2ï¼‰åœ¨æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª-config-overrides-js-æ–‡ä»¶"><a href="#2ï¼‰åœ¨æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª-config-overrides-js-æ–‡ä»¶" class="headerlink" title="2ï¼‰åœ¨æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª config-overrides.js æ–‡ä»¶"></a>2ï¼‰åœ¨<code>æ ¹ç›®å½•</code>ä¸­åˆ›å»ºä¸€ä¸ª <code>config-overrides.js</code> æ–‡ä»¶</h5><h5 id="3-ä¿®æ”¹-package-json-é‡Œçš„å¯åŠ¨é…ç½®"><a href="#3-ä¿®æ”¹-package-json-é‡Œçš„å¯åŠ¨é…ç½®" class="headerlink" title="3) ä¿®æ”¹ package.json é‡Œçš„å¯åŠ¨é…ç½®"></a>3) ä¿®æ”¹ package.json é‡Œçš„å¯åŠ¨é…ç½®</h5><blockquote><p>æ³¨æ„ï¼šä¸ç”¨æ›¿æ¢ eject éƒ¨åˆ†ã€‚å·¥å…·ä¸­æ²¡æœ‰é’ˆå¯¹ eject çš„é…ç½®æ›¿æ¢ï¼Œæ‰§è¡Œäº† eject å‘½ä»¤ä¼šè®©å·¥å…·å¤±å»ä½œç”¨ã€‚</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/* package.json */</span></span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">-   &quot;start&quot;: &quot;react-scripts start&quot;,</span><br><span class="line">+   &quot;start&quot;: &quot;react-app-rewired start&quot;,</span><br><span class="line">-   &quot;build&quot;: &quot;react-scripts build&quot;,</span><br><span class="line">+   &quot;build&quot;: &quot;react-app-rewired build&quot;,</span><br><span class="line">-   &quot;test&quot;: &quot;react-scripts test --env=jsdom&quot;,</span><br><span class="line">+   &quot;test&quot;: &quot;react-app-rewired test --env=jsdom&quot;,</span><br><span class="line">    &quot;eject&quot;: &quot;react-scripts eject&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-é…ç½®config-overrides-js"><a href="#4-é…ç½®config-overrides-js" class="headerlink" title="4) é…ç½®config-overrides.js"></a>4) é…ç½®config-overrides.js</h5><ul><li>å¯ç”¨ES7çš„ä¿®æ”¹å™¨è¯­æ³•ï¼ˆbabel 7ï¼‰</li><li>é…ç½®åˆ«å</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/plugin-proposal-decorators  // ä¿®é¥°å™¨</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* config-overrides.js */</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; override, addDecoratorsLegacy, addWebpackAlias &#125; = <span class="built_in">require</span>(<span class="string">&#x27;customize-cra&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">dir</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> path.join(__dirname, <span class="string">&#x27;.&#x27;</span>, dir)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = override(</span><br><span class="line">  <span class="comment">// è£…é¥°å™¨</span></span><br><span class="line">  addDecoratorsLegacy(),</span><br><span class="line">  addWebpackAlias(&#123;</span><br><span class="line">    <span class="string">&#x27;@&#x27;</span>: resolve(<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@comps&#x27;</span>: resolve(<span class="string">&#x27;src/components&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@style&#x27;</span>: resolve(<span class="string">&#x27;src/assets/style&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@images&#x27;</span>: resolve(<span class="string">&#x27;src/assets/images&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;@pages&#x27;</span>: resolve(<span class="string">&#x27;src/pages&#x27;</span>),</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn run start </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react-app-rewired </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é“¾è¡¨ï¼ˆå­¦ä¹ è®°å½•ï¼‰</title>
      <link href="/2020/06/30/ListNode/"/>
      <url>/2020/06/30/ListNode/</url>
      
        <content type="html"><![CDATA[<h3 id="é“¾è¡¨æ˜¯ä»€ä¹ˆ"><a href="#é“¾è¡¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="é“¾è¡¨æ˜¯ä»€ä¹ˆ"></a>é“¾è¡¨æ˜¯ä»€ä¹ˆ</h3><ol><li>é“¾è¡¨å’Œæ•°ç»„ç›¸ä¼¼ï¼Œéƒ½æ˜¯æœ‰åºçš„åˆ—è¡¨ï¼Œéƒ½æ˜¯çº¿æ€§ç»“æ„ã€‚</li><li>ä¸åŒçš„æ˜¯ï¼Œæ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯ä¸€æ®µ<code>è¿ç»­çš„å†…å­˜ç©ºé—´</code>ï¼Œç”±æ­¤éå†æ•°ç»„æ˜¯å¯ä»¥é€šè¿‡ä¸‹æ ‡ç›´æ¥å®šä½å…ƒç´ çš„ï¼Œè€Œé“¾è¡¨æ˜¯<code>ç¦»æ•£</code>çš„å†…å­˜ï¼Œå¯èƒ½æ•£æ’­åœ¨å†…å­˜çš„å„ä¸ªè§’è½ï¼Œæ‰€ä»¥é“¾è¡¨ä¹‹é—´éœ€è¦é€šè¿‡ä¸€ä¸ª<code>å…³è”</code>æŠŠå‰åèŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œå°±åƒç”¨çº¿ä¸²ç å­ä¸€æ ·ï¼Œéœ€è¦æŠŠç å­ä¸€ä¸ªä¸€ä¸ªçš„ä¸²èµ·æ¥ï¼›</li><li>åœ¨é“¾è¡¨ä¸­ä¸€ä¸ªå…ƒç´ ç§°ä¸º<code>ç»“ç‚¹</code>ï¼Œç»“ç‚¹ä¸­åŒ…æ‹¬<code>æ•°æ®åŸŸ</code>(ç å­)å’Œ<code>æŒ‡é’ˆåŸŸ</code>ï¼ˆçº¿ï¼‰ï¼›</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ•°æ®åŸŸ</span></span><br><span class="line">    val: <span class="number">1</span>,</span><br><span class="line">    <span class="comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">    next: &#123;</span><br><span class="line">        val:<span class="number">2</span>,</span><br><span class="line">        next: ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><p><code>æ•°æ®åŸŸ</code>å­˜ç€è¿™ä¸ªç»“ç‚¹çš„æ•°æ®å€¼ï¼Œè€Œ<code>æŒ‡é’ˆåŸŸ</code>åˆ™ä»£è¡¨ç€ä¸‹ä¸€ä¸ªç»“ç‚¹çš„å¼•ç”¨ï¼Œè¿™æ ·å°±çŸ¥é“ä¸‹ä¸€ä¸ªç»“ç‚¹æ˜¯è°å•¦ï¼</p><h3 id="åˆ›å»ºé“¾è¡¨"><a href="#åˆ›å»ºé“¾è¡¨" class="headerlink" title="åˆ›å»ºé“¾è¡¨"></a>åˆ›å»ºé“¾è¡¨</h3><p>åˆ›å»ºé“¾è¡¨éœ€è¦å€ŸåŠ©ä¸€ä¸ªæ„é€ å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ListNode</span>(<span class="params">val</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.val = val;   <span class="comment">// æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="built_in">this</span>.next = <span class="literal">null</span>; <span class="comment">// æŒ‡é’ˆåŸŸ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> node = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line">node.next = <span class="keyword">new</span> ListNode(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>é€šè¿‡ListNodeå»åˆ›å»ºç»“ç‚¹ï¼Œå…¥å‚<code>val</code>ä¸º<code>æ•°æ®åŸŸ</code>,<code>next</code>ä¸º<code>æŒ‡é’ˆåŸŸ</code>ï¼›<br><img src="/images/listNode/1_2.png"><br>æƒ³è¦è®¿é—®é“¾è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ªæ•°æ®ï¼Œéƒ½éœ€è¦ä»èµ·å§‹ç»“ç‚¹å¼€å§‹ï¼Œé€ä¸ªè®¿é—®nextåˆ°ç›®æ ‡ç»“ç‚¹ä¸ºæ­¢ã€‚ä¸ºäº†ä¿è¯èµ·å§‹ç»“ç‚¹å¯è®¿é—®æ€§ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåˆ›å»ºä¸€ä¸ªå¤´ç»“ç‚¹æŒ‡å‘èµ·å§‹ç»“ç‚¹;<br><img src="/images/listNode/1.png"></p><h3 id="é“¾è¡¨æ·»åŠ ã€åˆ é™¤"><a href="#é“¾è¡¨æ·»åŠ ã€åˆ é™¤" class="headerlink" title="é“¾è¡¨æ·»åŠ ã€åˆ é™¤"></a>é“¾è¡¨æ·»åŠ ã€åˆ é™¤</h3><p>é“¾è¡¨çš„æ·»åŠ å’Œåˆ é™¤ä¸»è¦æ˜¯å¯¹æŒ‡é’ˆåŸŸnextçš„æ“ä½œã€‚</p><h4 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h4><h5 id="å°¾éƒ¨æ·»åŠ "><a href="#å°¾éƒ¨æ·»åŠ " class="headerlink" title="å°¾éƒ¨æ·»åŠ "></a>å°¾éƒ¨æ·»åŠ </h5><p> åœ¨å°¾éƒ¨æ·»åŠ ç»“ç‚¹ç›¸å¯¹ç®€å•ï¼Œåªéœ€è¦å§å°¾éƒ¨ç»“ç‚¹çš„nextæŒ‡å‘è¦æ·»åŠ çš„ç»“ç‚¹å°±è¡Œï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> node1 = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> node2 = <span class="keyword">new</span> ListNode(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> node3 = <span class="keyword">new</span> ListNode(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†node2æ·»åŠ åœ¨node1åé¢</span></span><br><span class="line">node1.next = node2;</span><br><span class="line"><span class="comment">// å°†node3æ·»åŠ åœ¨node2åé¢</span></span><br><span class="line">node2.next = node3;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(node1);  <span class="comment">//  &#123; val: 1, next: &#123; val: 2, next: &#123; val: 3, next: null &#125; &#125;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ä»»æ„ä¸¤èŠ‚ç‚¹ä¸­æ·»åŠ "><a href="#ä»»æ„ä¸¤èŠ‚ç‚¹ä¸­æ·»åŠ " class="headerlink" title="ä»»æ„ä¸¤èŠ‚ç‚¹ä¸­æ·»åŠ "></a>ä»»æ„ä¸¤èŠ‚ç‚¹ä¸­æ·»åŠ </h5><p> åœ¨node1å’Œnode2ä¸­é—´æ’å…¥node3ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> node1 = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> node2 = <span class="keyword">new</span> ListNode(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> node3 = <span class="keyword">new</span> ListNode(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">node1.next = node2;  </span><br><span class="line"><span class="built_in">console</span>.log(node1)  <span class="comment">// &#123;val: 1, next: &#123; val: 2, next: null&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­é—´æ’å…¥node3</span></span><br><span class="line">node3.next = node1.next;</span><br><span class="line">node1.next = node3;</span><br><span class="line"><span class="built_in">console</span>.log(node1) <span class="comment">//  &#123; val: 1, next: &#123; val: 3, next: &#123; val: 2, next: null &#125; &#125;&#125;</span></span><br><span class="line">     </span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> node1 = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> node2 = <span class="keyword">new</span> ListNode(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> node3 = <span class="keyword">new</span> ListNode(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†node2æ·»åŠ åœ¨node1åé¢</span></span><br><span class="line">node1.next = node2;</span><br><span class="line"><span class="comment">// å°†node3æ·»åŠ åœ¨node2åé¢</span></span><br><span class="line">node2.next = node3;</span><br><span class="line"><span class="built_in">console</span>.log(node1); <span class="comment">// &#123; val: 1, next: &#123; val: 2, next: &#123; val: 3, next: null &#125; &#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤node2</span></span><br><span class="line">node1.next = node2.next;</span><br><span class="line"><span class="built_in">console</span>.log(node1); <span class="comment">// &#123; val: 1, next: &#123; val: 3, next: null &#125; &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ é™¤çš„node2å°±å˜æˆäº†ä¸€ä¸ªå®Œå…¨ä¸èƒ½åˆ°è¾¾çš„ç»“ç‚¹ï¼Œè¿™é‡Œå®ƒå°±ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>includesä¸indexOf</title>
      <link href="/2020/06/22/includes/"/>
      <url>/2020/06/22/includes/</url>
      
        <content type="html"><![CDATA[<blockquote><p><code>includes</code>å’Œ<code>indexOf</code>éƒ½æ˜¯ç”¨æ¥æ£€æµ‹æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŸå…ƒç´ çš„æ–¹æ³•ï¼Œincludesæ˜¯ES6çš„ã€‚</p></blockquote><h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf"></a>indexOf</h3><ol><li>indexOf è¿™ä¸ªæ–¹æ³•å¯¹å¤§å°å†™æ•æ„Ÿï¼Œä¸èƒ½æ˜¯indexofï¼›</li><li>å…¥å‚æœ‰ä¸¤ä¸ªï¼šè¦æŸ¥æ‰¾çš„<code>å…ƒç´ </code>ã€å¼€å§‹æŸ¥æ‰¾çš„<code>ä¸‹æ ‡</code>(å¯ä»¥ä¸ä¼ )ï¼›</li><li>æŸ¥æ‰¾çš„å…ƒç´ å­˜åœ¨ï¼Œè¿”å›<code>ç¬¬ä¸€ä¸ª</code>æ»¡è¶³æ¡ä»¶çš„ç´¢å¼•ï¼Œåé¢çš„å°±ä¸ä¼šç®¡äº†ï¼›</li><li>æŸ¥æ‰¾çš„å…ƒç´ ä¸å­˜åœ¨ï¼Œè¿”å› <code>-1</code>;</li><li>ç‰¹æ®Šç‚¹ï¼šå¯¹æ•°ç»„ä¸­æŸ¥è¯¢ <code>NaN</code> æ˜¯æ— æ•ˆçš„ï¼›</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;as&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;ab&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> arrRes = arr.indexOf(<span class="string">&#x27;ab&#x27;</span>, <span class="number">0</span>);     <span class="comment">// ä»ä¸‹æ ‡0å¼€å§‹æŸ¥æ‰¾ï¼Œæ˜¯å¦å«æœ‰&#x27;as&#x27;,æœ‰åˆ™è¿”å›æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line"><span class="keyword">let</span> arrRes1 = arr.indexOf(<span class="string">&#x27;lala&#x27;</span>, <span class="number">0</span>);  <span class="comment">// ä»ä¸‹æ ‡0å¼€å§‹æŸ¥æ‰¾ï¼Œæ˜¯å¦å«æœ‰&#x27;lala&#x27;ï¼Œæ²¡æœ‰è¿”å› -1</span></span><br><span class="line"><span class="built_in">console</span>.log(arrRes, arrRes1);          <span class="comment">// 1  -1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;abcdefghi&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> strRes = str.indexOf(<span class="string">&#x27;b&#x27;</span>, <span class="number">0</span>);     <span class="comment">// ä»ä¸‹æ ‡0å¼€å§‹æŸ¥æ‰¾ï¼Œæ˜¯å¦å«æœ‰&#x27;b&#x27;,æœ‰åˆ™è¿”å›æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line"><span class="keyword">let</span> strRes1 = str.indexOf(<span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>);    <span class="comment">// ä»ä¸‹æ ‡3å¼€å§‹æŸ¥æ‰¾ï¼Œæ˜¯å¦å«æœ‰&#x27;a&#x27;ï¼Œæ²¡æœ‰è¿”å› -1</span></span><br><span class="line"><span class="built_in">console</span>.log(strRes, strRes1);         <span class="comment">// 1  -1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> special = [<span class="literal">undefined</span>, <span class="literal">null</span>, <span class="literal">NaN</span>, <span class="string">&#x27;NaN&#x27;</span>];</span><br><span class="line"><span class="built_in">console</span>.log(special.indexOf(<span class="literal">undefined</span>));    <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(special.indexOf(<span class="literal">null</span>));         <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(special.indexOf(<span class="literal">NaN</span>));          <span class="comment">// -1 æŸ¥ä¸åˆ°</span></span><br><span class="line"><span class="built_in">console</span>.log(special.indexOf(<span class="string">`NaN`</span>));        <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h3 id="includes"><a href="#includes" class="headerlink" title="includes"></a>includes</h3><ol><li>å…¥å‚ã€ç”¨æ³•æ–¹é¢å’ŒindexOfæ˜¯ä¸€æ ·çš„ï¼›</li><li>æŸ¥æ‰¾çš„å…ƒç´ å­˜åœ¨ï¼Œè¿”å› true;</li><li>æŸ¥æ‰¾çš„å…ƒç´ ä¸å­˜åœ¨ï¼Œè¿”å› false;</li><li>è§£å†³äº†indexOfæŸ¥<code>NaN</code>æ— æ•ˆçš„é—®é¢˜ï¼›</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;as&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;ab&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> arrRes = arr.includes(<span class="string">&#x27;ab&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">let</span> arrRes1 = arr.includes(<span class="string">&#x27;lala&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arrRes, arrRes1); <span class="comment">// true false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;abcdefghi&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> strRes = str.includes(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> strRes1 = str.includes(<span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(strRes, strRes1); <span class="comment">// true false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> special = [<span class="literal">undefined</span>, <span class="literal">null</span>, <span class="literal">NaN</span>];</span><br><span class="line"><span class="built_in">console</span>.log(special.includes(<span class="literal">undefined</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(special.includes(<span class="literal">null</span>));      <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(special.includes(<span class="literal">NaN</span>));       <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h3><p>ä¸ºäº†è®©ç¨‹åºæ‰§è¡Œæ—¶é—´æ•°æ®æ›´å®¹æ˜“åŒºåˆ†ï¼Œå‡†å¤‡äº†ä¸€ä¸ªé•¿åº¦1000000ä½çš„æ•°ç»„ï¼Œåˆ†åˆ«ä½¿ç”¨<code>indexOf</code>å’Œ<code>includes</code>å»æŸ¥è¯¢ï¼Œçœ‹çœ‹ä»–ä»¬å„è‡ªä½¿ç”¨çš„æ—¶é—´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomString</span>(<span class="params">len</span>) </span>&#123;</span><br><span class="line">    len = len || <span class="number">32</span>;</span><br><span class="line">    <span class="keyword">let</span> $chars = <span class="string">&#x27;ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678&#x27;</span>; <span class="comment">/****é»˜è®¤å»æ‰äº†å®¹æ˜“æ··æ·†çš„å­—ç¬¦oOLl,9gq,Vv,Uu,I1****/</span></span><br><span class="line">    <span class="keyword">let</span> maxPos = $chars.length;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        res += $chars.charAt(<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * maxPos));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„è£…ä¸€ä¸ªé•¿åº¦1000000ä½çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">    arr.push(randomString(<span class="number">4</span>));</span><br><span class="line">&#125;</span><br><span class="line">arr.push(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&#x27;indexOfè€—æ—¶&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;ç´¢å¼•ï¼š&#x27;</span>, arr.indexOf(<span class="string">&#x27;test&#x27;</span>));</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">&#x27;indexOfè€—æ—¶&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&#x27;includesè€—æ—¶&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;æ˜¯å¦å­˜åœ¨ï¼š&#x27;</span>, arr.includes(<span class="string">&#x27;test&#x27;</span>));</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">&#x27;includesè€—æ—¶&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸ºäº†æé«˜æ•°æ®çš„å‡†ç¡®æ€§ï¼Œè¿è¡Œäº†å¾ˆå¤šæ¬¡ï¼Œæ‰“å°ç»“æœç½—åˆ—åœ¨ä¸‹æ–¹ï¼Œæ ¹æ®æ•°æ®å¯ä»¥æ˜æ˜¾çš„çœ‹å‡º<code>includes</code>æ€§èƒ½ä¼˜äº<code>indexOf</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ç´¢å¼•ï¼š 1000000</span><br><span class="line">indexOfè€—æ—¶: 13.363ms</span><br><span class="line">æ˜¯å¦å­˜åœ¨ï¼š true</span><br><span class="line">includesè€—æ—¶: 8.925ms</span><br><span class="line"></span><br><span class="line">ç´¢å¼•ï¼š 1000000</span><br><span class="line">indexOfè€—æ—¶: 13.729ms</span><br><span class="line">æ˜¯å¦å­˜åœ¨ï¼š true</span><br><span class="line">includesè€—æ—¶: 14.973ms</span><br><span class="line"></span><br><span class="line">ç´¢å¼•ï¼š 1000000</span><br><span class="line">indexOfè€—æ—¶: 12.111ms</span><br><span class="line">æ˜¯å¦å­˜åœ¨ï¼š true</span><br><span class="line">includesè€—æ—¶: 9.591ms</span><br><span class="line"></span><br><span class="line">ç´¢å¼•ï¼š 1000000</span><br><span class="line">indexOfè€—æ—¶: 13.745ms</span><br><span class="line">æ˜¯å¦å­˜åœ¨ï¼š true</span><br><span class="line">includesè€—æ—¶: 10.403ms</span><br><span class="line"></span><br><span class="line">ç´¢å¼•ï¼š 1000000</span><br><span class="line">indexOfè€—æ—¶: 11.771ms</span><br><span class="line">æ˜¯å¦å­˜åœ¨ï¼š true</span><br><span class="line">includesè€—æ—¶: 8.912ms</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p> åœ¨å¿…é¡»è¦çŸ¥é“å…ƒç´ çš„ç´¢å¼•æƒ…å†µä¸‹ï¼Œåªèƒ½ç”¨<code>indexOf</code>ï¼Œå…¶ä»–æƒ…å†µéƒ½å¯ä»¥ç”¨includesä»£æ›¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›æ–‡å­—ç¬¦ä¸²(å­¦ä¹ ç¬”è®°)</title>
      <link href="/2020/06/17/string/"/>
      <url>/2020/06/17/string/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å›æ–‡å­—ç¬¦ä¸²ï¼Œå°±æ˜¯æ­£ç€è¯»å’Œå€’ç€è¯»éƒ½ä¸€æ ·çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚è¯´è¿™æ ·ï¼š<code>&#39;abccba&#39;</code>ï¼Œå›æ–‡å­—ç¬¦ä¸²è¿˜æœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œå•ä¸ªå­—ç¬¦ä¸²è‚¯å®šå›æ–‡ï¼Œä¹Ÿå°±æ˜¯è¯´<code>&#39;aba&#39;</code>ä¹Ÿæ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼›</p><p>æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼Œæˆ‘ä»¬ä¸éš¾å†™å‡ºåˆ¤æ–­å›æ–‡å­—ç¬¦ä¸²çš„ä»£ç ï¼š :smiley:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPalindrome</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å…ˆåè½¬å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">const</span> reversedStr = str.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="comment">// åˆ¤æ–­åè½¬å‰åæ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">    <span class="keyword">return</span> reversedStr === str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä»å›æ–‡å­—ç¬¦ä¸²çš„<code>å¯¹ç§°æ€§</code>è€ƒè™‘ï¼ˆè®°ä½è¿™ä¸ª<code>å¯¹ç§°æ€§</code>ï¼Œå¾ˆé‡è¦ï¼‰è¿˜å¯ä»¥è¿™æ ·å†™:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPalindrome</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!str) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> len = str.length;</span><br><span class="line">    <span class="keyword">let</span> k = len - <span class="number">1</span>;    <span class="comment">// æŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len / <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt;= k &amp;&amp; str[i] !== str[k]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        k--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é«˜é¢‘é¢˜"><a href="#é«˜é¢‘é¢˜" class="headerlink" title="é«˜é¢‘é¢˜"></a>é«˜é¢‘é¢˜</h3><h4 id="1-ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸²-sï¼Œæœ€å¤šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚åˆ¤æ–­æ˜¯å¦èƒ½æˆä¸ºå›æ–‡å­—ç¬¦ä¸²ã€‚"><a href="#1-ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸²-sï¼Œæœ€å¤šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚åˆ¤æ–­æ˜¯å¦èƒ½æˆä¸ºå›æ–‡å­—ç¬¦ä¸²ã€‚" class="headerlink" title="1.ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² sï¼Œæœ€å¤šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚åˆ¤æ–­æ˜¯å¦èƒ½æˆä¸ºå›æ–‡å­—ç¬¦ä¸²ã€‚"></a>1.ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² sï¼Œæœ€å¤šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚åˆ¤æ–­æ˜¯å¦èƒ½æˆä¸ºå›æ–‡å­—ç¬¦ä¸²ã€‚</h4><blockquote><p>ä¸€èˆ¬çœ‹åˆ°å›æ–‡å­—ç¬¦ä¸²å°±è¦æƒ³èµ·ä»–çš„<code>å¯¹ç§°æ€§</code>ï¼Œ<code>å¯¹ç§°æ€§</code>è¦å¯¹åº”çš„æƒ³åˆ°<code>åŒæŒ‡é’ˆ</code>ã€‚</p></blockquote><p>æ€è·¯ï¼š</p><ol><li>é€šè¿‡å·¦å³æŒ‡é’ˆæ‰€æŒ‡çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰æ¥åˆ¤æ–­æ˜¯å¦å›æ–‡ï¼›</li><li>å¦‚æœä¸ç­‰ï¼Œåˆ†åˆ«å·¦å³æŒ‡é’ˆå…ˆåè·³è¿‡ä¸€ä½ï¼Œå¯¹æ¯”æ˜¯å¦ç›¸ç­‰ï¼›</li><li>å¦‚æœè¿˜ä¸ç­‰ï¼Œé‚£ä¸æ»¡è¶³å›æ–‡å­—ç¬¦ä¸²å¯¹ç§°æ€§ï¼Œè‚¯å®šå°±ä¸æ˜¯äº†ï¼›</li><li>å¦‚æœç›¸ç­‰ï¼Œç»§ç»­è¿›è¡ŒæŒ‡é’ˆå¯¹æ¯”ï¼Œå¦‚æœæ¥ä¸‹æ¥éƒ½å¯¹ç§°äº†ï¼Œä¸”è·³è¿‡æ¬¡æ•°ä¸å¤§äº1åˆ™æ»¡è¶³<code>æœ€å¤šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œèƒ½æˆä¸ºå›æ–‡å­—ç¬¦ä¸²</code>ï¼›</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validPalindrome</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!str) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> len = str.length;</span><br><span class="line">    <span class="comment">// jï¼Œkå·¦å³æŒ‡é’ˆã€count è®°å½•è·³è¿‡çš„æ¬¡æ•°ã€ flagæ˜¯å¦å›æ–‡</span></span><br><span class="line">    <span class="keyword">let</span> j = <span class="number">0</span>,</span><br><span class="line">        k = len - <span class="number">1</span>,</span><br><span class="line">        count = <span class="number">0</span>,</span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (j &gt; k) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span> (str[j] === str[k]) &#123;</span><br><span class="line">            j++;</span><br><span class="line">            k--;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str[j + <span class="number">1</span>] === str[k]) &#123;</span><br><span class="line">            <span class="comment">// å·¦æŒ‡é’ˆè·³è¿‡ä¸€ä¸ª</span></span><br><span class="line">            j = j + <span class="number">2</span>;</span><br><span class="line">            k--;</span><br><span class="line">            count++;</span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str[j] === str[k - <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="comment">// å³æŒ‡é’ˆè·³è¿‡ä¸€ä¸ª</span></span><br><span class="line">            k = k - <span class="number">2</span>;</span><br><span class="line">            j++;</span><br><span class="line">            count++;</span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// éå›æ–‡å­—ç¬¦ä¸²,ç›´æ¥è·³å‡ºå¾ªç¯</span></span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(validPalindrome(<span class="string">&#x27;abcdefgfedcba&#x27;</span>));     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(validPalindrome(<span class="string">&#x27;a1bcdefgfedcba&#x27;</span>));    <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(validPalindrome(<span class="string">&#x27;a1bcdefgfe2dcba~&#x27;</span>));  <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>æ€§èƒ½ä¼˜åŒ–ï¼š<br>åœ¨ä¸Šé¢æ€è·¯çš„ç¬¬4æ¡ï¼Œå¦‚æœæœ‰ä¸€æ¬¡ä¸ç­‰è¿›è¡Œäº†è·³è¿‡ï¼Œå°±å·²ç»è¾¾åˆ°<code>æœ€å¤šåˆ é™¤ä¸€ä¸ªå­—ç¬¦</code>æ¡ä»¶ä¸Šé™äº†ï¼Œç›´æ¥æŠŠè¿˜æœªå¯¹æ¯”çš„å­—ç¬¦ä¸²å½“æˆä¸€ä¸ªæ•´å­—ç¬¦ä¸²åˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡å°±è¡Œï¼Œå¦‚æœå›æ–‡åˆ™å¯ä»¥æ»¡è¶³æ¡ä»¶ï¼Œä¸å›æ–‡åˆ™ä¸æ»¡è¶³ï¼Œæ²¡å¿…è¦å†åšå¤šä½™çš„å¾ªç¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validPalindrome</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç¼“å­˜å­—ç¬¦ä¸²çš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">const</span> len = s.length</span><br><span class="line"></span><br><span class="line">    <span class="comment">// iã€jåˆ†åˆ«ä¸ºå·¦å³æŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>,</span><br><span class="line">        j = len - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“å·¦å³æŒ‡é’ˆå‡æ»¡è¶³å¯¹ç§°æ—¶ï¼Œä¸€èµ·å‘ä¸­é—´å‰è¿›</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt; j &amp;&amp; s[i] === s[j]) &#123;</span><br><span class="line">        i++</span><br><span class="line">        j--</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°è¯•åˆ¤æ–­è·³è¿‡å·¦æŒ‡é’ˆå…ƒç´ åå­—ç¬¦ä¸²æ˜¯å¦å›æ–‡</span></span><br><span class="line">    <span class="keyword">if</span> (isPalindrome(i + <span class="number">1</span>, j)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°è¯•åˆ¤æ–­è·³è¿‡å³æŒ‡é’ˆå…ƒç´ åå­—ç¬¦ä¸²æ˜¯å¦å›æ–‡</span></span><br><span class="line">    <span class="keyword">if</span> (isPalindrome(i, j - <span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å·¥å…·æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å›æ–‡</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">isPalindrome</span>(<span class="params">st, ed</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (st &lt; ed) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[st] !== s[ed]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">            st++</span><br><span class="line">            ed--</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é»˜è®¤è¿”å› false</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(validPalindrome(<span class="string">&#x27;abcdefgfedcba&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(validPalindrome(<span class="string">&#x27;a1bcdefgfedcba&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(validPalindrome(<span class="string">&#x27;a1bcdefgfe2dcba~&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜"><a href="#2-å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜" class="headerlink" title="2.å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜"></a>2.å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜</h4><p>è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æ„ï¼š</p><blockquote><p>void addWord(word)<br> bool search(word)<br> search(word) å¯ä»¥æœç´¢æ–‡å­—æˆ–æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²åªåŒ…å«å­—æ¯ . æˆ– a-z ã€‚<br>. å¯ä»¥è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå­—æ¯ã€‚</p></blockquote><blockquote><p>ç¤ºä¾‹: addWord(â€œbadâ€)<br>addWord(â€œdadâ€)<br>addWord(â€œmadâ€)<br>search(â€œpadâ€) -&gt; false<br>search(â€œbadâ€) -&gt; true<br>search(â€œ.adâ€) -&gt; true<br>search(â€œb..â€) -&gt; true<br>è¯´æ˜:<br>ä½ å¯ä»¥å‡è®¾æ‰€æœ‰å•è¯éƒ½æ˜¯ç”±å°å†™å­—æ¯ a-z ç»„æˆçš„ã€‚</p></blockquote><p>æ€è·¯ï¼š</p><ol><li>è¦æ±‚æ—¢èƒ½æ·»åŠ ï¼Œè¿˜èƒ½å¯¹æ·»åŠ çš„æ•°æ®è¿›è¡Œæœç´¢ï¼Œé‚£è‚¯å®šæ˜¯è¦æŠŠæ·»åŠ çš„æ•°ç»„å­˜èµ·æ¥ï¼Œä¸”æœ€å¥½æ˜¯é”®å€¼å¯¹å­˜å‚¨ï¼Œå‡å°‘æ£€ç´¢æˆæœ¬ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Map;</li><li>è¿™é‡Œä¸ºäº†é™ä½æŸ¥æ‰¾æ—¶çš„å¤æ‚åº¦ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä»¥å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º keyï¼Œç›¸åŒé•¿åº¦çš„å­—ç¬¦ä¸²å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œè¿™æ ·å¯ä»¥æé«˜æˆ‘ä»¬åç»­å®šä½çš„æ•ˆç‡ã€‚</li><li>è¿˜æœ‰ä¸€ç‚¹æ˜¯ï¼Œsearchæ–¹æ³•ï¼Œæ—¢èƒ½å®Œå…¨åŒ¹é…ï¼Œè¿˜è¦èƒ½æ­£åˆ™åŒ¹é…ï¼Œæ‰€ä»¥å…¥å‚éœ€è¦åˆ¤æ–­æ˜¯æ™®é€šå­—ç¬¦ä¸²è¿˜æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼›</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">WordDictionary</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.words = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">WordDictionary.prototype.addWord = <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!str) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> len = str.length;</span><br><span class="line">    <span class="keyword">let</span> val = <span class="built_in">this</span>.words.get(len);</span><br><span class="line">    <span class="keyword">if</span> (val) &#123;</span><br><span class="line">        val.push(str);</span><br><span class="line">        <span class="built_in">this</span>.words.set(len, val);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.words.set(len, [str]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">WordDictionary.prototype.search = <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!str) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¼ å…¥çš„å­—ç¬¦ä¸²çš„é•¿åº¦æ‰¾ä¸åˆ°è®°å½•ï¼Œåˆ™æŸ¥è¯¢çš„å­—ç¬¦ä¸²ä¸å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">let</span> len = str.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.words.get(len)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">let</span> val = <span class="built_in">this</span>.words.get(len);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­ä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ­£åˆ™</span></span><br><span class="line">    <span class="keyword">if</span> (!str.includes(<span class="string">&#x27;.&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> val.includes(str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­£åˆ™</span></span><br><span class="line">    <span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(str);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åªè¦æœ‰ä¸€é¡¹æ»¡è¶³å°±ä¸ºtrue,</span></span><br><span class="line">    <span class="comment">// someæ–¹æ³•ï¼Œæœ‰ä¸€é¡¹æ»¡è¶³æ¡ä»¶çš„è¿”å›ä¸ºtrueï¼Œ </span></span><br><span class="line">    <span class="comment">// everyæ–¹æ³•ï¼Œæ¯ä¸€é¡¹éƒ½è¦æ»¡è¶³æ¡ä»¶æ‰è¿”å›true</span></span><br><span class="line">    <span class="keyword">return</span> val.some(<span class="function"><span class="params">item</span> =&gt;</span> reg.test(item));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Words = <span class="keyword">new</span> WordDictionary();</span><br><span class="line"></span><br><span class="line">Words.addWord(<span class="string">&#x27;dad&#x27;</span>);</span><br><span class="line">Words.addWord(<span class="string">&#x27;lala&#x27;</span>);</span><br><span class="line">Words.addWord(<span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(Words.words);           <span class="comment">// Map &#123; 3 =&gt; [ &#x27;dad&#x27;, &#x27;abc&#x27; ], 4 =&gt; [ &#x27;lala&#x27; ] &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Words.search(<span class="string">&#x27;l...&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Words.search(<span class="string">&#x27;dad&#x27;</span>));   <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Words.search(<span class="string">&#x27;a..&#x27;</span>));   <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Words.search(<span class="string">&#x27;l&#x27;</span>));     <span class="comment">// false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒæŒ‡é’ˆæ³•ï¼ˆå­¦ä¹ ç¬”è®°ï¼‰</title>
      <link href="/2020/06/15/complexity/"/>
      <url>/2020/06/15/complexity/</url>
      
        <content type="html"><![CDATA[<h3 id="åŒæŒ‡é’ˆæ³•"><a href="#åŒæŒ‡é’ˆæ³•" class="headerlink" title="åŒæŒ‡é’ˆæ³•"></a>åŒæŒ‡é’ˆæ³•</h3><p>åŒæŒ‡é’ˆæ³•å¸¸ç”¨äº<code>æ±‚å’Œ</code>å’Œ<code>æ’åº</code>ä¹‹ç±»çš„åœºæ™¯,æ˜¯ä¸€ç§æ—¶é—´æ¢ç©ºé—´çš„ç®—æ³•ã€‚<br>å­¦ä¹ ç®—æ³•åªçœ‹ç†è®ºçŸ¥è¯†æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œéœ€è¦ä»å„ç§å„æ ·çš„é¢˜ä¸­å»ç»†ç»†ä½“æ‚Ÿç®—æ³•çš„é­…åŠ›ï¼Œä»è€ŒçœŸçœŸçš„æŠŠçŸ¥è¯†åˆ»åœ¨è„‘å­é‡Œï¼Œæˆä¸ºè‡ªå·±çš„ä¸€éƒ¨åˆ†ï¼›<br>æ‰€ä»¥æ­¤ç¯‡æ–‡ç« åŸºæœ¬éƒ½æ˜¯ç®—æ³•é¢˜ï¼Œè®©æˆ‘ä»¬ä»å®é™…çš„ä»£ç è§’åº¦æ¥æ­å¼€åŒæŒ‡é’ˆçš„ç¥ç§˜é¢çº±å§ï¼<br>ä¸‹é¢çš„é¢˜éƒ½æ˜¯ä»æŸä¸€æ–¹é¢çš„çŸ¥è¯†å†™çš„ä¾‹å­ï¼Œå¤§å®¶å¦‚æœæœ‰å…¶ä»–æƒ³æ³•ï¼Œä»£ç æ•²èµ·æ¥~</p><h4 id="1-ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„-nums-å’Œä¸€ä¸ªç›®æ ‡å€¼-targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£-ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚"><a href="#1-ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„-nums-å’Œä¸€ä¸ªç›®æ ‡å€¼-targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£-ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚" class="headerlink" title="1. ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚"></a>1. ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</h4><blockquote><p>è¿™é“é¢˜æ²¡æœ‰ç”¨åˆ°åŒæŒ‡é’ˆï¼Œå•çº¯çš„ç”¨æ¥ç»ƒç»ƒæ‰‹ï¼Œä»ç¬¬äºŒé¢˜å¼€å§‹ä¸ºåŒæŒ‡é’ˆç®—æ³•é¢˜ï¼›<br>ç¤ºä¾‹: ç»™å®š nums = [2, 7, 11, 15], target = 9<br>å› ä¸º nums[0] + nums[1] = 2 + 7 = 9 æ‰€ä»¥è¿”å› [0, 1]</p></blockquote><p> <code>æ±‚å’Œ</code>é—®é¢˜åŸºæœ¬å¯ä»¥åå‘æ€è€ƒä¸º <code>å·®å€¼</code>é—®é¢˜ï¼Œæ¯”å¦‚è¯´<code>a + b = target</code>,åˆ™å¯ä»¥æƒ³æˆ<code>target - a = b</code>, è¿™æ ·å°±èƒ½é¿å…å¯¹æ•°ç»„è¿›è¡Œä¸¤æ¬¡å¾ªç¯ï¼Œå†å¯¹å¾ªç¯çš„å€¼ç›¸åŠ ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="keyword">let</span> nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">target</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span> (<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œæˆ‘ç”¨å¯¹è±¡æ¥æ¨¡æ‹Ÿ map çš„èƒ½åŠ›</span></span><br><span class="line">    <span class="keyword">const</span> diffs = &#123;&#125;</span><br><span class="line">    <span class="comment">// ç¼“å­˜æ•°ç»„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">const</span> len = nums.length</span><br><span class="line">    <span class="comment">// éå†æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­å½“å‰å€¼å¯¹åº”çš„ target å·®å€¼æ˜¯å¦å­˜åœ¨ï¼ˆæ˜¯å¦å·²éå†è¿‡ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (diffs[target - nums[i]] !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">            <span class="comment">// è‹¥æœ‰å¯¹åº”å·®å€¼ï¼Œé‚£ä¹ˆç­”æ¡ˆgetï¼</span></span><br><span class="line">            <span class="keyword">return</span> [diffs[target - nums[i]], i]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è‹¥æ²¡æœ‰å¯¹åº”å·®å€¼ï¼Œåˆ™è®°å½•å½“å‰å€¼</span></span><br><span class="line">        diffs[nums[i]] = i</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = demo(nums, <span class="number">16</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// [ 6, 8 ]</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">target</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¼“å­˜æ•°ç»„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">const</span> len = nums.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> num = target - nums[i];</span><br><span class="line">        <span class="keyword">let</span> index = nums.indexOf(num);</span><br><span class="line">        <span class="keyword">if</span> (index !== -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> [i, index];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result2 = demo(nums, <span class="number">16</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result2);  <span class="comment">// [ 5, 9 ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„-nums1-å’Œ-nums2ï¼Œè¯·ä½ å°†-nums2-åˆå¹¶åˆ°-nums1-ä¸­ï¼Œä½¿-nums1-æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚"><a href="#2-ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„-nums1-å’Œ-nums2ï¼Œè¯·ä½ å°†-nums2-åˆå¹¶åˆ°-nums1-ä¸­ï¼Œä½¿-nums1-æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚" class="headerlink" title="2. ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„ nums1 å’Œ nums2ï¼Œè¯·ä½ å°† nums2 åˆå¹¶åˆ° nums1 ä¸­ï¼Œä½¿ nums1 æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚"></a>2. ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„ nums1 å’Œ nums2ï¼Œè¯·ä½ å°† nums2 åˆå¹¶åˆ° nums1 ä¸­ï¼Œä½¿ nums1 æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚</h4><blockquote><p>è¯´æ˜: åˆå§‹åŒ– nums1 å’Œ nums2 çš„å…ƒç´ æ•°é‡åˆ†åˆ«ä¸º m å’Œ n ã€‚ ä½ å¯ä»¥å‡è®¾ nums1 æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼ˆç©ºé—´å¤§å°å¤§äºæˆ–ç­‰äº m + nï¼‰æ¥ä¿å­˜ nums2 ä¸­çš„å…ƒç´ ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums1</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">m</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums2</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">n</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span> </span>Do not return anything, modify nums1 in-place instead.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">nums1, m, nums2, n</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆçš„æŒ‡å‘ï¼Œåˆå§‹åŒ– nums1 å°¾éƒ¨ç´¢å¼•k</span></span><br><span class="line">    <span class="keyword">let</span> i = m - <span class="number">1</span>, j = n - <span class="number">1</span>, k = m + n - <span class="number">1</span></span><br><span class="line">    <span class="comment">// å½“ä¸¤ä¸ªæ•°ç»„éƒ½æ²¡éå†å®Œæ—¶ï¼ŒæŒ‡é’ˆåŒæ­¥ç§»åŠ¨</span></span><br><span class="line">    <span class="keyword">while</span>(i &gt;= <span class="number">0</span> &amp;&amp; j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// å–è¾ƒå¤§çš„å€¼ï¼Œä»æœ«å°¾å¾€å‰å¡«è¡¥</span></span><br><span class="line">        <span class="keyword">if</span>(nums1[i] &gt;= nums2[j]) &#123;</span><br><span class="line">            nums1[k] = nums1[i] </span><br><span class="line">            i-- </span><br><span class="line">            k--</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nums1[k] = nums2[j] </span><br><span class="line">            j-- </span><br><span class="line">            k--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// nums2 ç•™ä¸‹çš„æƒ…å†µï¼Œç‰¹æ®Šå¤„ç†ä¸€ä¸‹ </span></span><br><span class="line">    <span class="keyword">while</span>(j&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">        nums1[k] = nums2[j]  </span><br><span class="line">        k-- </span><br><span class="line">        j--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æŠ•æœºå†™æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">nums1, m, nums2, n</span>) </span>&#123;</span><br><span class="line">    nums1.splice(m);</span><br><span class="line">    nums2.splice(n);</span><br><span class="line">    <span class="keyword">return</span> [...nums1, ...nums2].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ç»™å®šä¸€ä¸ªæ•°ç»„-numsï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰-0-ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚"><a href="#3-ç»™å®šä¸€ä¸ªæ•°ç»„-numsï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰-0-ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚" class="headerlink" title="3. ç»™å®šä¸€ä¸ªæ•°ç»„ numsï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ 0 ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚"></a>3. ç»™å®šä¸€ä¸ªæ•°ç»„ numsï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ 0 ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚</h4><blockquote><p>è¾“å…¥: [ 0, 1, 0, 3, 12 ], è¾“å‡º: [ 1, 3, 12, 0, 0 ], åªèƒ½åœ¨å½“å‰æ•°ç»„ä¸Šæ“ä½œï¼Œä¸èƒ½ä½¿ç”¨æ–°å»ºæ•°ç»„ã€åˆå¹¶ç­‰æ–¹æ³•ï¼›</p></blockquote><p>å¸¸è§„æ–¹æ¡ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">12</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> num = arr.length;</span><br><span class="line">    <span class="keyword">if</span>(!num) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= num; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] === <span class="number">0</span>) &#123;</span><br><span class="line">            arr.splice(i, <span class="number">1</span>);</span><br><span class="line">            arr.push(<span class="number">0</span>);</span><br><span class="line">            i--;    <span class="comment">// å½“å‰é¡¹åˆ é™¤åï¼Œä¸‹ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡å‰ç§»äº†ä¸€ä½ï¼Œæ‰€ä»¥è¦éå†åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå°±éœ€è¦ä¿æŒåŸä½</span></span><br><span class="line">            num--;  <span class="comment">// åˆ é™¤äº†ä¸€ä½ï¼Œæ•°ç»„éœ€è¦çš„å¾ªç¯æ¬¡æ•°å°±åº”è¯¥å‡å»ä¸€ä½ï¼Œç§»åˆ°æœ€åçš„0æ˜¯ä¸éœ€è¦éå†çš„</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">demo(arr);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1,3,12,0,0]</span></span><br></pre></td></tr></table></figure><p>åŒæŒ‡é’ˆæ–¹æ¡ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">12</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = nums.length;</span><br><span class="line">    <span class="keyword">if</span> (!n) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// æŠŠéé›¶çš„é¡¹ä¾æ¬¡ç§»åˆ°å‰é¢ï¼Œiä¸ºæŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[j] !== <span class="number">0</span>) &#123;</span><br><span class="line">            nums[i] = nums[j];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// kä¸ºæŒ‡é’ˆ2ï¼ŒæŒ‡å‘éé›¶é¡¹å¤„ç†åç¬¬ä¸€ä¸ªä¸º0çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k = i; k &lt; n; k++) &#123;</span><br><span class="line">        nums[k] = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(demo(arr)); <span class="comment">// [ 1, 3, 12, 0, 0 ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-ç»™ä½ ä¸€ä¸ªåŒ…å«-n-ä¸ªæ•´æ•°çš„æ•°ç»„-numsï¼Œåˆ¤æ–­-nums-ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´ -aï¼Œbï¼Œc-ï¼Œä½¿å¾—-a-b-c-0-ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚"><a href="#4-ç»™ä½ ä¸€ä¸ªåŒ…å«-n-ä¸ªæ•´æ•°çš„æ•°ç»„-numsï¼Œåˆ¤æ–­-nums-ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´ -aï¼Œbï¼Œc-ï¼Œä½¿å¾—-a-b-c-0-ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚" class="headerlink" title="4. ç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾— a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚"></a>4. ç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾— a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</h4><blockquote><p>ç¤ºä¾‹ï¼šç»™å®šæ•°ç»„ nums = [-1, 0, 1, 2, -1, -4]ï¼Œ æ»¡è¶³è¦æ±‚çš„ä¸‰å…ƒç»„é›†åˆä¸ºï¼š [ [-1, 0, 1], [-1, -1, 2] ]<br> æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p></blockquote><blockquote><p>è§£æ:<br>1.åœ¨<code>æ•°ç»„</code>å’Œ<code>æ±‚å’Œ</code>çš„ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬è¦ä¹ æƒ¯æ€§åœ¨è„‘å­é‡Œæ˜¾ç°<code>æ±‚å’Œå°±æ˜¯æ±‚å·®å€¼</code>ã€ <code>æŒ‡é’ˆ</code> è¿™ä¸¤æ€è·¯ï¼<br>2.å°½é‡ä»æ±‚å·®å€¼çš„è§’åº¦å»å‡å°‘å¾ªç¯æ¬¡æ•°ï¼Œä»è€Œé™ä½æ—¶é—´å¤æ‚åº¦ï¼›<br>3.æŒ‡é’ˆè¦æ±‚æ•°ç»„æ˜¯å¯åºçš„ï¼Œæ‰€ä»¥å½“æ•°ç»„æ˜¯æ— åºæ—¶ï¼Œè¦å°†æ•°ç»„æ’åºï¼Œåˆ›é€ å¯ä»¥ä½¿ç”¨æŒ‡é’ˆçš„æ¡ä»¶ï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹æ’æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">let</span> nums = [-<span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">2</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span> - <span class="number">2</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> m = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ»¡è¶³æ•°ç»„ä¸­ä¸‰ä¸ªæ•°ç›¸åŠ ç­‰äº m çš„æ•°ç»„å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> </span>arr ç›®æ ‡æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>m  ä¸‰ä¸ªæ•°ç›¸åŠ çš„å’Œ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;array[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">arr, m</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!arr || !arr.length) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">// ä¿å­˜ç›®æ ‡æ•°ç»„</span></span><br><span class="line">    <span class="keyword">let</span> result = [];</span><br><span class="line">    <span class="comment">// åŒæŒ‡é’ˆæ³•éœ€è¦æ•°ç»„æœ‰åºï¼Œæœ‰åºæ‰å¥½æŒ‡é’ˆç§»åŠ¨</span></span><br><span class="line">    arr = arr.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// console.log(arr);  // [-3, -2, -1, -1, -1,  0,  1,  2,  3]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> len = arr.length;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="comment">// å¯¹æ’æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">let</span> j = i + <span class="number">1</span>; <span class="comment">// æŒ‡é’ˆ1</span></span><br><span class="line">        <span class="keyword">let</span> k = len - <span class="number">1</span>; <span class="comment">// å°¾æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤„ç†é‡å¤</span></span><br><span class="line">        <span class="keyword">if</span> (arr[i] === arr[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (j &lt; k) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((arr[i] + arr[j] + arr[k]) &gt; m) &#123;</span><br><span class="line">                <span class="comment">// åˆ™å°¾æŒ‡é’ˆå‘å‰ç§»åŠ¨</span></span><br><span class="line">                k--;</span><br><span class="line">                <span class="comment">// å°¾æŒ‡é’ˆå¦‚æœé‡å¤åˆ™è·³è¿‡</span></span><br><span class="line">                <span class="keyword">if</span> (arr[k] === arr[k + <span class="number">1</span>]) &#123;</span><br><span class="line">                    k--;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> ((arr[i] + arr[j] + arr[k]) &lt; m) &#123;</span><br><span class="line">                <span class="comment">// å‰æŒ‡é’ˆå‘åç§»åŠ¨ä¸€ä½</span></span><br><span class="line">                j++;</span><br><span class="line">                <span class="comment">// å‰æŒ‡é’ˆå¦‚æœé‡å¤åˆ™è·³è¿‡</span></span><br><span class="line">                <span class="keyword">if</span> (arr[j] === arr[j - <span class="number">1</span>]) &#123;</span><br><span class="line">                    j++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> ((arr[i] + arr[j] + arr[k]) === m) &#123;</span><br><span class="line">                result.push([arr[i], arr[j], arr[k]]);</span><br><span class="line">                <span class="comment">// ä¸¤æŒ‡é’ˆä¸€åŒå‰è¿›</span></span><br><span class="line">                k--;</span><br><span class="line">                j++;</span><br><span class="line">                <span class="comment">// é‡å¤å€¼è·³è¿‡ï¼Œæ˜¯ä¸€ç§ä¼˜åŒ–ï¼Œè®©ä»£ç å°‘å¹²ç‚¹æ²¡æœ‰æ„ä¹‰çš„æ´»</span></span><br><span class="line">                <span class="keyword">if</span> (arr[k] === arr[k + <span class="number">1</span>]) &#123;</span><br><span class="line">                    k--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (arr[j] === arr[j - <span class="number">1</span>]) &#123;</span><br><span class="line">                    j++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(demo(nums, m));</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘éå†(å­¦ä¹ ç¬”è®°)</title>
      <link href="/2020/06/10/binaryTree/"/>
      <url>/2020/06/10/binaryTree/</url>
      
        <content type="html"><![CDATA[<h3 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> root = &#123;</span><br><span class="line">  val: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">  left: &#123;</span><br><span class="line">    val: <span class="string">&quot;B&quot;</span>,</span><br><span class="line">    left: &#123;</span><br><span class="line">      val: <span class="string">&quot;D&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    right: &#123;</span><br><span class="line">      val: <span class="string">&quot;E&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  right: &#123;</span><br><span class="line">    val: <span class="string">&quot;C&quot;</span>,</span><br><span class="line">    right: &#123;</span><br><span class="line">      val: <span class="string">&quot;F&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="1-å…ˆåºéå†"><a href="#1-å…ˆåºéå†" class="headerlink" title="1.å…ˆåºéå†"></a>1.å…ˆåºéå†</h3><blockquote><p>éå†çš„é¡ºåºæ˜¯ï¼š æ ¹èŠ‚ç‚¹ -&gt; å·¦å­æ ‘ -&gt;å³å­æ ‘</p></blockquote><p> <img src="/images/tree/preorder.png" alt="å›¾ç‰‡"><br> <img src="/images/tree/preorder.gif" alt="å›¾ç‰‡"></p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preorder</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’è¾¹ç•Œï¼Œroot ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span> ;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¾“å‡ºå½“å‰éå†çš„ç»“ç‚¹å€¼</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š&#x27;</span>, root.val);  </span><br><span class="line">    <span class="comment">// é€’å½’éå†å·¦å­æ ‘ </span></span><br><span class="line">    preorder(root.left);  </span><br><span class="line">    <span class="comment">// é€’å½’éå†å³å­æ ‘  </span></span><br><span class="line">    preorder(root.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h4><blockquote><p>1.è°ƒç”¨ <code>preorder(root)</code>ï¼Œè¿™é‡Œ <code>root</code> å°±æ˜¯ <code>A</code>ï¼Œå®ƒéç©ºï¼Œæ‰€ä»¥è¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º <code>A</code> å€¼ã€‚æ¥ç€ä¼˜å…ˆéå†å·¦å­æ ‘ï¼Œ<code>preorder(root.left)</code> æ­¤æ—¶ä¸º <code>preorder(B)</code>ï¼›</p></blockquote><blockquote><ol start="2"><li>è¿›å…¥ <code>preorder(B)</code>çš„é€»è¾‘ï¼š å…¥å‚ä¸ºç»“ç‚¹ <code>B</code>ï¼Œéç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º <code>B</code> å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† <code>B</code> çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)</code> æ­¤æ—¶ä¸º <code>preorder(D)</code>ï¼›</li></ol></blockquote><blockquote><ol start="3"><li>è¿›å…¥ <code>preorder(D)</code>çš„é€»è¾‘ï¼š å…¥å‚ä¸ºç»“ç‚¹ <code>D</code>ï¼Œéç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º <code>D</code> å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† <code>D</code> çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)</code> æ­¤æ—¶ä¸º <code>preorder(null)</code>;</li></ol></blockquote><blockquote><ol start="4"><li>è¿›å…¥<code>preorder(null)</code>ï¼Œå‘ç°æŠµè¾¾äº†é€’å½’è¾¹ç•Œï¼Œç›´æ¥ <code>return</code> æ‰ã€‚ç´§æ¥ç€æ˜¯ <code>preorder(D)</code>çš„é€»è¾‘å¾€ä¸‹èµ°ï¼Œèµ°åˆ°äº† <code>preorder(root.right)</code>;</li></ol></blockquote><blockquote><ol start="5"><li>å†æ¬¡è¿›å…¥<code>preorder(null)</code>ï¼Œå‘ç°æŠµè¾¾äº†é€’å½’è¾¹ç•Œï¼Œç›´æ¥ <code>return</code> æ‰ï¼Œå›åˆ°<code>preorder(D)</code>é‡Œã€‚æ¥ç€ <code>preorder(D)</code>çš„é€»è¾‘å¾€ä¸‹èµ°ï¼Œå‘ç° <code>preorder(D)</code> å·²ç»æ‰§è¡Œå®Œäº†ã€‚äºæ˜¯è¿”å›ï¼Œå›åˆ°<code>preorder(B)</code>é‡Œï¼Œæ¥ç€<code>preorder(B)</code>å¾€ä¸‹èµ°ï¼Œè¿›å…¥ <code>preorder(root.right)</code>ï¼Œä¹Ÿå°±æ˜¯ <code>preorder(E)</code>,<code>E</code> ä¸ä¸ºç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º <code>E</code> å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† <code>E</code> çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)</code> æ­¤æ—¶ä¸º <code>preorder(null)</code>ï¼Œè§¦ç¢°é€’å½’è¾¹ç•Œï¼Œç›´æ¥è¿”å› <code>preorder(E)</code>ï¼›ç»§ç»­<code>preorder(E)</code>æ‰§è¡Œä¸‹å»ï¼Œæ˜¯<code>preorder(root.right)</code>ï¼Œè¿™é‡Œ <code>E</code> çš„ <code>right</code> åŒæ ·æ˜¯ <code>null</code>ï¼Œæ•…ç›´æ¥è¿”å›ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œ<code>preorder(E)</code>å°±æ‰§è¡Œå®Œäº†ï¼Œå›åˆ°<code>preorder(B)</code>é‡Œå»ï¼›å‘ç°<code>preorder(B)</code>ä¹Ÿæ‰§è¡Œå®Œäº†ï¼Œäºæ˜¯å›åˆ°<code>preorder(A)</code>é‡Œå»ï¼Œæ‰§è¡Œ<code>preorder(A)</code>ä¸­çš„ <code>preorder(root.right)</code>ã€‚</li></ol></blockquote><blockquote><ol start="6"><li><code>root</code> æ˜¯<code>A</code>ï¼Œ<code>root.right</code> å°±æ˜¯<code>C</code> äº†ï¼Œè¿›å…¥<code>preorder(C)</code>çš„é€»è¾‘, <code>C</code> ä¸ä¸ºç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º <code>C</code> å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† <code>C</code> çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)</code> æ­¤æ—¶ä¸º <code>preorder(null)</code>ï¼Œè§¦ç¢°é€’å½’è¾¹ç•Œï¼Œç›´æ¥è¿”å›ã€‚ç»§ç»­<code>preorder(C)</code>æ‰§è¡Œä¸‹å»ï¼Œæ˜¯<code>preorder(root.right)</code>ï¼Œè¿™é‡Œ <code>C</code> çš„ <code>right</code>æ˜¯ <code>F</code>;</li></ol></blockquote><blockquote><ol start="7"><li>è¿›å…¥<code>preorder(F)</code>çš„é€»è¾‘ï¼Œ<code>F</code> ä¸ä¸ºç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º <code>F</code> å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† <code>F</code> çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)</code> æ­¤æ—¶ä¸º <code>preorder(null)</code>ï¼Œè§¦ç¢°é€’å½’è¾¹ç•Œï¼Œç›´æ¥è¿”å› <code>preorder(F)</code>ï¼›ç»§ç»­<code>preorder(F)</code>æ‰§è¡Œä¸‹å»ï¼Œæ˜¯<code>preorder(root.right)</code>ï¼Œè¿™é‡Œ <code>F</code> çš„ <code>right</code> åŒæ ·æ˜¯ <code>null</code>ï¼Œæ•…ç›´æ¥è¿”å›<code>preorder(F)</code>ã€‚æ­¤æ—¶<code>preorder(F)</code>å·²ç»æ‰§è¡Œå®Œäº†ï¼Œè¿”å›<code>preorder(C)</code>ï¼›å‘ç°<code>preorder(C)</code>ä¹Ÿæ‰§è¡Œå®Œäº†ï¼Œå°±å›åˆ° <code>preorder(A)</code>ï¼›å‘ç°<code>preorder(A)</code>ä½œä¸ºé€’å½’å…¥å£ï¼Œå®ƒçš„é€»è¾‘ä¹Ÿå·²ç»æ‰§è¡Œå®Œäº†ï¼Œäºæ˜¯æˆ‘ä»¬çš„é€’å½’æ´»åŠ¨å°±æ­£å¼ç”»ä¸Šäº†å¥å·ã€‚åˆ°æ­¤ä¸ºæ­¢ï¼Œ6ä¸ªç»“ç‚¹ä¹Ÿå·²å…¨éƒ¨æŒ‰ç…§å…ˆåºéå†é¡ºåºè¾“å‡º;</li></ol></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š A</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š B</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š D</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š E</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š C</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š F</span><br></pre></td></tr></table></figure><h3 id="2-ä¸­åºéå†"><a href="#2-ä¸­åºéå†" class="headerlink" title="2.ä¸­åºéå†"></a>2.ä¸­åºéå†</h3><blockquote><p>å·¦å­æ ‘ -&gt; æ ¹èŠ‚ç‚¹ -&gt; å³å­æ ‘</p></blockquote><p> <img src="/images/tree/inorder.png" alt="å›¾ç‰‡"><br> <img src="/images/tree/inorder.gif" alt="å›¾ç‰‡"></p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inorder</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’è¾¹ç•Œï¼Œroot ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">// é€’å½’éå†å·¦å­æ ‘ </span></span><br><span class="line">    inorder(root.left);  </span><br><span class="line">    <span class="comment">// è¾“å‡ºå½“å‰éå†çš„ç»“ç‚¹å€¼</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š&#x27;</span>, root.val);  </span><br><span class="line">    <span class="comment">// é€’å½’éå†å³å­æ ‘  </span></span><br><span class="line">    inorder(root.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æŒ‰ç…§ä¸­åºéå†å‡ºæ¥ï¼ŒåŒä¸€é¢—äºŒå‰æ ‘ï¼Œç»“ç‚¹å†…å®¹è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š D</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š B</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š E</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š A</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š C</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š F</span><br></pre></td></tr></table></figure><h3 id="3-ååºéå†"><a href="#3-ååºéå†" class="headerlink" title="3.ååºéå†"></a>3.ååºéå†</h3><blockquote><p>éå†çš„é¡ºåºæ˜¯ï¼šå·¦å­æ ‘ -&gt; å³å­æ ‘ -&gt; æ ¹èŠ‚ç‚¹</p></blockquote><p> <img src="/images/tree/postorder.png" alt="å›¾ç‰‡"><br> <img src="/images/tree/postorder.gif" alt="å›¾ç‰‡"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">postorder</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’è¾¹ç•Œï¼Œroot ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span>(!root) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">// é€’å½’éå†å·¦å­æ ‘ </span></span><br><span class="line">    postorder(root.left);  </span><br><span class="line">    <span class="comment">// é€’å½’éå†å³å­æ ‘  </span></span><br><span class="line">    postorder(root.right);</span><br><span class="line">    <span class="comment">// è¾“å‡ºå½“å‰éå†çš„ç»“ç‚¹å€¼</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š&#x27;</span>, root.val); </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>éå†ç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š D</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š E</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š B</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š F</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š C</span><br><span class="line">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š A</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ”¿æ²»å‘å±•çš„åŠ¨åŠ›<br>æ”¿æ²»å‘å±•åŠ¨åŠ›çš„æ¥æºæ˜¯äººç±»å¯¹äººç±»ç¤¾ä¼šå‘å±•çš„ä¸æ‡ˆè¿½æ±‚ï¼›<br>äººæ˜¯æ”¿æ²»ç”Ÿæ´»çš„ä¸»ä½“ï¼Œä¹Ÿæ˜¯æ”¿æ²»å‘å±•çš„æ¨åŠ¨åŠ›é‡ï¼Œæ›´æ˜¯æ”¿æ²»å‘å±•çš„æœåŠ¡å¯¹è±¡ï¼›<br>æ”¿æ²»å‘å±•çš„åŠ¨åŠ›æ¥æºæ˜¯é˜¶çº§å…³ç³»å’Œé˜¶çº§ç»“æ„ä¸æ–­å˜åŒ–çš„æ¨åŠ¨ï¼›<br>æ”¿æ²»å‘å±•çš„åŠ¨åŠ›æ¥æºæ˜¯æ”¿æ²»ç»“æ„è‡ªæˆ‘å®Œå–„ï¼Œè‡ªæˆ‘å‘å±•çš„è¦æ±‚ï¼›<br>æ”¿æ²»å‘å±•çš„åŠ¨åŠ›æ¥æºæ˜¯äººç±»ç¤¾ä¼šçš„ç›¸äº’æ²Ÿé€šï¼Œå­¦ä¹ çš„å½±å“ï¼›</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒå‰æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pdfjs-dist + vue ä½¿ç”¨è®°å½•</title>
      <link href="/2020/06/08/pdf/"/>
      <url>/2020/06/08/pdf/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç°åœ¨å…¬å¸æŠŠå¤–éƒ¨ç½‘éƒ½é™åˆ¶æ­»äº†ï¼Œå¯¼è‡´ç¬”è®°éƒ½ä¸èƒ½åšï¼Œä¸ºçŸ¥ç¬”è®°è¿™ä¹ˆå¥½ä½¿çš„ä¸œè¥¿å±…ç„¶ä¸ç»™ç”¨ï¼Œå¥½æ°”å“¦~ ä½†æ˜¯åšç¬”è®°çš„ä¹ æƒ¯ä¸èƒ½ä¸¢ï¼æš‚ä¸”æŠŠblogå½“ç¬”è®°ä½¿å§~</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;pdf_container bg_gray&quot; ref&#x3D;&quot;pdfWrap&quot;&gt;</span><br><span class="line">    &lt;canvas ref&#x3D;&quot;pdfCanvas&quot;&gt;&lt;&#x2F;canvas&gt;</span><br><span class="line">    &lt;!-- &lt;div ref&#x3D;&quot;pdfSvg&quot;&gt;&lt;&#x2F;div&gt; --&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æä¾›ä¸‰ä¸ªevent, çˆ¶çº§ç›´æ¥è°ƒç”¨, è§¦å‘æŒ‰é’®è¯·è‡ªè¡Œåœ¨çˆ¶çº§å®šä¹‰ã€‚</span></span><br><span class="line"><span class="comment"> * onLarger æ”¾å¤§</span></span><br><span class="line"><span class="comment"> * onSmaller ç¼©å°</span></span><br><span class="line"><span class="comment"> * onRotate æ—‹è½¬</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> PDF <span class="keyword">from</span> <span class="string">&#x27;pdfjs-dist&#x27;</span>;</span><br><span class="line"><span class="comment">// PDF.disableWorker = true;</span></span><br><span class="line">PDF.GlobalWorkerOptions.workerSrc = <span class="built_in">require</span>(<span class="string">&#x27;pdfjs-dist/build/pdf.worker.min&#x27;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;appliClaimPdf&#x27;</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    url: <span class="built_in">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      pages: <span class="number">0</span>,</span><br><span class="line">      scale: <span class="number">1.5</span>, <span class="comment">// ç¼©æ”¾å€æ•°</span></span><br><span class="line">      rotate: <span class="number">0</span>, <span class="comment">// æ—‹è½¬è§’åº¦</span></span><br><span class="line">      pdf: <span class="literal">null</span> <span class="comment">// pdfæœ¬èº«</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    <span class="function"><span class="title">url</span>(<span class="params">newData, oldData</span>)</span> &#123;</span><br><span class="line">      <span class="comment">// urlå¼‚æ­¥æ‹¿å–</span></span><br><span class="line">      <span class="keyword">if</span> (newData) &#123;</span><br><span class="line">        <span class="built_in">this</span>.previewPDF();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.url) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">this</span>.previewPDF();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">onLarger</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.scale &gt; <span class="number">3</span>) <span class="keyword">return</span>;</span><br><span class="line">      <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;globalLoading&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="built_in">this</span>.scale += <span class="number">0.25</span>;</span><br><span class="line">      <span class="built_in">this</span>.getPage(<span class="built_in">this</span>.pdf, <span class="built_in">this</span>.scale, <span class="built_in">this</span>.rotate, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">onSmaller</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.scale &lt; <span class="number">0.7</span>) <span class="keyword">return</span>;</span><br><span class="line">      <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;globalLoading&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="built_in">this</span>.scale -= <span class="number">0.25</span>;</span><br><span class="line">      <span class="built_in">this</span>.getPage(<span class="built_in">this</span>.pdf, <span class="built_in">this</span>.scale, <span class="built_in">this</span>.rotate, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">onRotate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.rotate &gt; <span class="number">360</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.rotate = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;globalLoading&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="built_in">this</span>.rotate += <span class="number">90</span>;</span><br><span class="line">      <span class="built_in">this</span>.getPage(<span class="built_in">this</span>.pdf, <span class="built_in">this</span>.scale, <span class="built_in">this</span>.rotate, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">previewPDF</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;globalLoading&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="keyword">let</span> _this = <span class="built_in">this</span>;</span><br><span class="line">      <span class="comment">// å¼•å…¥pdf.jsçš„å­—ä½“</span></span><br><span class="line">      <span class="keyword">let</span> CMAP_URL = <span class="string">&#x27;https://unpkg.com/pdfjs-dist@2.0.943/cmaps/&#x27;</span>;</span><br><span class="line">      <span class="keyword">let</span> loadingTask = PDF.getDocument(&#123;</span><br><span class="line">        url: _this.url,</span><br><span class="line">        <span class="comment">// url: &#x27;http://localhost:8080/api/upload/wechat/pdf/IID00921683.pdf&#x27;, // æœ¬åœ°è°ƒè¯•</span></span><br><span class="line">        cMapUrl: CMAP_URL,</span><br><span class="line">        cMapPacked: <span class="literal">true</span></span><br><span class="line">      &#125;).then(<span class="function"><span class="params">pdf</span> =&gt;</span> &#123;</span><br><span class="line">        _this.pdf = pdf;</span><br><span class="line">        <span class="keyword">let</span> numPages = pdf.numPages;</span><br><span class="line">        <span class="keyword">let</span> pageNumber = <span class="number">1</span>;</span><br><span class="line">        _this.getPage(pdf, _this.scale, _this.rotate, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">getPage</span>(<span class="params">pdf, scale, rotate, pageNumber, numPages</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> _this = <span class="built_in">this</span>;</span><br><span class="line">      pdf.getPage(pageNumber).then(<span class="function"><span class="params">page</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ–¹æ³•ä¸€ canvas (é¡µé¢ä¼šç™½å±é—ªçƒ)</span></span><br><span class="line">        <span class="comment">// è·å–DOMä¸­ä¸ºé¢„è§ˆPDFå‡†å¤‡å¥½çš„canvasDOMå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">let</span> canvasWrap = _this.$refs.pdfWrap;</span><br><span class="line">        <span class="keyword">let</span> canvas = _this.$refs.pdfCanvas;</span><br><span class="line">        <span class="keyword">let</span> viewport = page.getViewport(scale, rotate);</span><br><span class="line"></span><br><span class="line">        canvas.style.height = viewport.height + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        canvas.style.width = viewport.width + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        <span class="comment">// canvasç”»å¤§ä¸¤å€ï¼Œè§£å†³ç»˜ç”»æ¨¡ç³Š</span></span><br><span class="line">        canvas.height = viewport.height * <span class="number">1.5</span>;</span><br><span class="line">        canvas.width = viewport.width * <span class="number">1.5</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> ctx = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> renderContext = &#123;</span><br><span class="line">          canvasContext: ctx,</span><br><span class="line">          viewport</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        page.render(renderContext).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          pageNumber += <span class="number">1</span>;</span><br><span class="line">          <span class="keyword">if</span> (pageNumber &lt;= numPages) &#123;</span><br><span class="line">            _this.getPage(pdf, scale, rotate, pageNumber, numPages);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹æ³•äºŒ svgï¼ˆæ˜¾ç¤ºç”»è´¨ä¼šæ¯”canvasé«˜,å¼Šç«¯ï¼šioså±•ç¤ºä¸äº†éå®‹ä½“çš„å­—ï¼‰</span></span><br><span class="line">        <span class="comment">// let svgWrap = _this.$refs.pdfSvg;</span></span><br><span class="line">        <span class="comment">// let viewport = page.getViewport(scale, rotate);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// svgWrap.style.width = viewport.width + &#x27;px&#x27;;</span></span><br><span class="line">        <span class="comment">// svgWrap.style.height = viewport.height + &#x27;px&#x27;;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// page.getOperatorList().then(function(opList) &#123;</span></span><br><span class="line">        <span class="comment">//   var svgGfx = new PDF.SVGGraphics(page.commonObjs, page.objs);</span></span><br><span class="line">        <span class="comment">//   svgGfx.getSVG(opList, viewport).then(function(svg) &#123;</span></span><br><span class="line">        <span class="comment">//     svgWrap.innerHTML = &#x27;&#x27;;</span></span><br><span class="line">        <span class="comment">//     svgWrap.appendChild(svg);</span></span><br><span class="line">        <span class="comment">//   &#125;);</span></span><br><span class="line">        <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">        _this.$store.commit(<span class="string">&#x27;globalLoading&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pdfjs-dist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PCç½‘é¡µé¡¹ç›®å…¨å±ã€é€€å‡ºå…¨å±</title>
      <link href="/2020/06/08/fullscreen/"/>
      <url>/2020/06/08/fullscreen/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘è‡ªå·±åœ¨å†™pcç«¯çš„å°é¡¹ç›®ï¼ˆreact + ts + mobx + react-intl ï¼‰ï¼Œå†™äº†ä¸€ä¸ªå…¨å±å’Œé€€å‡ºå…¨å±çš„åŠŸèƒ½ï¼Œç‰¹æ­¤è®°å½•ï¼›</p></blockquote><p> å…ˆä¸Šæ•ˆæœå›¾ï¼š</p><p><img src="/images/fullscreen/full.png"></p><p><img src="/images/fullscreen/no.png"></p><h3 id="ä»£ç éƒ¨åˆ†"><a href="#ä»£ç éƒ¨åˆ†" class="headerlink" title="ä»£ç éƒ¨åˆ†"></a>ä»£ç éƒ¨åˆ†</h3><h4 id="1-storeéƒ¨åˆ†"><a href="#1-storeéƒ¨åˆ†" class="headerlink" title="1.storeéƒ¨åˆ†"></a>1.storeéƒ¨åˆ†</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤éå…¨å±</span></span><br><span class="line">@observable fullScreen: boolean = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±äº‹ä»¶</span></span><br><span class="line">@action</span><br><span class="line">requestFullScreen = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.fullScreen = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">var</span> docElm = <span class="built_in">document</span>.documentElement;</span><br><span class="line">    <span class="keyword">if</span> (docElm.requestFullscreen) &#123;</span><br><span class="line">        docElm.requestFullscreen();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€€å‡ºå…¨å±</span></span><br><span class="line">@action</span><br><span class="line">exitFullscreen = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.fullScreen = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.exitFullscreen) &#123;</span><br><span class="line">        <span class="built_in">document</span>.exitFullscreen();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-doméƒ¨åˆ†"><a href="#2-doméƒ¨åˆ†" class="headerlink" title="2.doméƒ¨åˆ†"></a>2.doméƒ¨åˆ†</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * header å³ä¾§åŠŸèƒ½åŒº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">fullScreenRender = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;  requestFullScreen, exitFullscreen &#125; = <span class="built_in">this</span>.store;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">            &#123;<span class="comment">/* æ­¤å¤„ä¸ºå…¨å±æŒ‰é’® */</span>&#125;</span><br><span class="line">            &lt;span className=<span class="string">&quot;layout-header-trigger layout-header-trigger-min flex-align-center&quot;</span>&gt;</span><br><span class="line">                &#123;fullScreen ? <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">onClick</span>=<span class="string">&#123;exitFullscreen&#125;</span> &gt;</span>&#123;SVG.full2&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span> : <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">onClick</span>=<span class="string">&#123;requestFullScreen&#125;</span> &gt;</span>&#123;SVG.full&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>&#125;</span><br><span class="line">            &lt;/span&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-æµè§ˆå™¨Escè‡ªå·±å…³é—­å…¨å±å¤„ç†"><a href="#3-æµè§ˆå™¨Escè‡ªå·±å…³é—­å…¨å±å¤„ç†" class="headerlink" title="3.æµè§ˆå™¨Escè‡ªå·±å…³é—­å…¨å±å¤„ç†"></a>3.æµè§ˆå™¨Escè‡ªå·±å…³é—­å…¨å±å¤„ç†</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å…¨å±ç¼©å°</span></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;resize&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> isFull:boolean = !!<span class="built_in">document</span>.fullscreenElement;</span><br><span class="line">        <span class="keyword">if</span> (!isFull) &#123;</span><br><span class="line">            <span class="comment">// æ›´æ”¹storeä¸­çš„å€¼å…¬å…±æ–¹æ³• changeObserver</span></span><br><span class="line">            <span class="built_in">this</span>.store.changeObserver(&#123; <span class="attr">key</span>: <span class="string">&#x27;fullScreen&#x27;</span>, <span class="attr">data</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-å…¼å®¹å†™æ³•"><a href="#4-å…¼å®¹å†™æ³•" class="headerlink" title="4.å…¼å®¹å†™æ³•"></a>4.å…¼å®¹å†™æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fullScreen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> element = <span class="built_in">document</span>.documentElement;</span><br><span class="line">    <span class="keyword">if</span> (element.requestFullscreen) &#123;</span><br><span class="line">        element.requestFullscreen();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.msRequestFullscreen) &#123;</span><br><span class="line">        element.msRequestFullscreen();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.mozRequestFullScreen) &#123;</span><br><span class="line">        element.mozRequestFullScreen();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.webkitRequestFullscreen) &#123;</span><br><span class="line">        element.webkitRequestFullscreen();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€€å‡ºå…¨å± </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exitFullscreen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.exitFullscreen) &#123;</span><br><span class="line">        <span class="built_in">document</span>.exitFullscreen();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.msExitFullscreen) &#123;</span><br><span class="line">        <span class="built_in">document</span>.msExitFullscreen();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.mozCancelFullScreen) &#123;</span><br><span class="line">        <span class="built_in">document</span>.mozCancelFullScreen();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.webkitExitFullscreen) &#123;</span><br><span class="line">        <span class="built_in">document</span>.webkitExitFullscreen();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›‘å¬windowæ˜¯å¦å…¨å±ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„æ“ä½œ,æ”¯æŒescé”®é€€å‡º</span></span><br><span class="line"><span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> isFull=!!(<span class="built_in">document</span>.webkitIsFullScreen || <span class="built_in">document</span>.mozFullScreen || </span><br><span class="line">        <span class="built_in">document</span>.msFullscreenElement || <span class="built_in">document</span>.fullscreenElement</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// todo something</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é‡åˆ°é—®é¢˜"><a href="#é‡åˆ°é—®é¢˜" class="headerlink" title="é‡åˆ°é—®é¢˜"></a>é‡åˆ°é—®é¢˜</h3><blockquote><p>åœ¨å†™çš„è¿‡ç¨‹ä¸­å‘ç°å…¨å±äº†ä¹‹åæŒ‰<code>Esc</code>é”®æ˜¯é»˜è®¤èƒ½é€€å‡ºå…¨å±æ¨¡å¼çš„ï¼Œä¸”åœ¨å…¨å±æ¨¡å¼ä¸‹æ˜¯ç›‘å¬ä¸åˆ°é”®ç›˜çš„<code>onkeydown</code>äº‹ä»¶çš„ï¼Œæµè§ˆå™¨è‡ªå·±å…³é—­äº†å…¨å±æ¨¡å¼ï¼Œå¯¼è‡´æˆ‘åœ¨<code>store</code>ä¸­ç”¨æ¥è¾¨è¯†æ˜¯å¦å…¨å±çš„<code>fullScreen</code>æ— æ³•æ›´æ”¹çŠ¶æ€ï¼›åæ¥å‘ç°æµè§ˆå™¨åˆ‡æ¢å…¨å±å’Œéå…¨å±ä¼šè§¦å‘<code>resize</code>äº‹ä»¶ï¼Œå…¨å±æ—¶<code>document.fullscreenElement</code>å°±æ˜¯è¢«å…¨å±çš„domå†…å®¹ï¼Œéå…¨å±æ—¶<code>document.fullscreenElement</code>çš„å€¼ä¸ºç©ºï¼›ç”±æ­¤æœ‰äº†ä¸Šé¢ç¬¬ä¸‰æ­¥<code>æµè§ˆå™¨Escè‡ªå·±å…³é—­å…¨å±å¤„ç†</code>,åœ¨æŒ‰<code>Esc</code>é”®å…³é—­å…¨å±æ¨¡å¼æ—¶ï¼Œæ‰‹åŠ¨æ›´æ”¹ä¸€ä¸‹<code>fullScreen</code>çš„çŠ¶æ€ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•é¢˜ï¼šä½¿ (a === 1 &amp;&amp; a === 2 &amp;&amp; a === 3) ä¸ºtrue</title>
      <link href="/2020/06/04/proxy/"/>
      <url>/2020/06/04/proxy/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸€çœ‹é¢˜ç›®å°±çŸ¥é“ <code>a</code> ä¸å¯èƒ½æ˜¯ä¸ªå›ºå®šçš„å€¼ï¼Œä¸”åœ¨ä¸€ä¸ªåˆ¤æ–­ä¸ºtrueå°±è¦å˜æˆä¸‹ä¸€ä¸ªåˆ¤æ–­çš„å€¼ã€‚ç”±æ­¤æ¨æ–­ï¼Œæ­¤å¤„éœ€è¦ä½¿ç”¨åˆ°æ•°æ®åŠ«æŒï¼</p></blockquote><h3 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a>Object.defineProperty</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span>  num = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(<span class="built_in">this</span>,<span class="string">&#x27;a&#x27;</span>,&#123;</span><br><span class="line">get:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> num++</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(a===<span class="number">1</span> &amp;&amp; a===<span class="number">2</span> &amp;&amp; a===<span class="number">3</span>)  <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><p>å‘ç°ç”¨proxyä¹Ÿèƒ½åšè¿™æ ·çš„äº‹ï¼Œä½†æ˜¯å¾—æŠŠ<code>a</code>æ”¾åˆ°å¯¹è±¡é‡Œ(å¯¹Proxyç†è§£ä¸æ˜¯å¾ˆé€å½»ï¼Œä¸çŸ¥é“è¿˜æœ‰æ²¡æœ‰å…¶ä»–å†™æ³•)ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj= <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;<span class="attr">a</span>:<span class="number">0</span>&#125;,&#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">target,key</span>)</span>&#123;</span><br><span class="line">       data = <span class="built_in">Reflect</span>.get(target,key) + <span class="number">1</span>;</span><br><span class="line">       <span class="built_in">this</span>.set(target, key, data)</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">target,key,value</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, key, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(obj.a === <span class="number">1</span>&amp;&amp;obj.a === <span class="number">2</span>&amp;&amp;obj.a === <span class="number">3</span>) <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡åœ¨åšæ¯”è¾ƒæ—¶çš„éšå¼è½¬æ¢"><a href="#å¯¹è±¡åœ¨åšæ¯”è¾ƒæ—¶çš„éšå¼è½¬æ¢" class="headerlink" title="å¯¹è±¡åœ¨åšæ¯”è¾ƒæ—¶çš„éšå¼è½¬æ¢"></a>å¯¹è±¡åœ¨åšæ¯”è¾ƒæ—¶çš„éšå¼è½¬æ¢</h3><blockquote><p>ä¸è¿‡è¿™ç§æ–¹æ³•ä¸èƒ½ä½¿ç”¨<code>===</code> åªèƒ½æ˜¯ç”¨ <code>==</code>åˆ¤æ–­æ‰èƒ½ä¸ºtrueï¼›</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  num: <span class="number">0</span>,</span><br><span class="line">  valueOf: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.num += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a==<span class="number">1</span> &amp;&amp; a==<span class="number">2</span> &amp;&amp; a==<span class="number">3</span>); <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://segmentfault.com/a/1190000012921114">è§£æåœ¨è¿™é‡Œ</a></p>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3.0æ•°æ®åŒå‘ç»‘å®šå­¦ä¹ è®°å½•</title>
      <link href="/2020/06/04/vue3/"/>
      <url>/2020/06/04/vue3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å°¤é›¨æºªè¯´ï¼šâ€œç®¡ä½ å­¦ä¸å­¦çš„åŠ¨ï¼Œè€å­å°±è¦æ›´æ–°ï¼â€ ç©ç¬‘å¼€å®Œäº†ï¼Œä»£ç æ’¸èµ·æ¥~   :smile: </p></blockquote><p>ä¸‹é¢æ˜¯ä½¿ç”¨è‡ªå·±å®ç°çš„åŒå‘ç»‘å®šjsåœ¨é¡µé¢çš„æ•ˆæœï¼š</p><p> <img src="/images/vue/1.png" alt="å›¾ç‰‡"><br> <img src="/images/vue/2.png" alt="å›¾ç‰‡"></p><h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"> &lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset&#x3D;&quot;UTF-8&quot; &#x2F;&gt;</span><br><span class="line">  &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot; &#x2F;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;app&quot;&gt; &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;button id&#x3D;&quot;btn&quot;&gt;ç‚¹å‡»&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;script src&#x3D;&quot;.&#x2F;vue3.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    const root &#x3D; document.getElementById(&#39;app&#39;);</span><br><span class="line">    const btn &#x3D; document.getElementById(&#39;btn&#39;);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å“åº”å¼</span><br><span class="line">    const data &#x3D; &#123;</span><br><span class="line">      name: &quot;é˜¿å¼º&quot;,</span><br><span class="line">      age: 3,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; å°†æ•°æ®proxy</span><br><span class="line">    const obj &#x3D; reactive(data);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; computedå±æ€§</span><br><span class="line">    let age &#x3D; computed(() &#x3D;&gt; obj.age - 2);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; æ•°æ®å˜åŒ–æ‰§è¡Œçš„fn</span><br><span class="line">    let changed &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F; æ•°æ®å˜åŒ– è§¦å‘setï¼Œæ‰§è¡Œè¿™ä¸ªå‡½æ•°</span><br><span class="line">      console.log(&#39;æ•°æ®å˜äº†&#39;, obj.age)</span><br><span class="line">      &#x2F;&#x2F; æˆ‘ä»¬æ²¡æœ‰compileï¼Œä¸èƒ½æ”¯æŒvueçš„è¯­æ³•</span><br><span class="line">      &#x2F;&#x2F; obj.name æ”¶é›†ä¾èµ–</span><br><span class="line">      root.innerHTML &#x3D; &#96;&lt;h1&gt;$&#123;obj.name&#125;ä»Šå¹´$&#123;obj.age&#125;å²äº†ï¼Œå–œæ¬¢éš”å£$&#123;age.value&#125;å²çš„å°èŠ±&lt;&#x2F;h1&gt;&#96;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    effect(changed);</span><br><span class="line"></span><br><span class="line">    btn.addEventListener(&#39;click&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F; è§¦å‘setå‡½æ•°ï¼Œæ‰§è¡Œeffect</span><br><span class="line">      obj.age++;</span><br><span class="line">    &#125;, false)</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="vue3-js"><a href="#vue3-js" class="headerlink" title="vue3.js"></a>vue3.js</h3> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// key:åŸå§‹æ•°æ® =&gt; data:å“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> toProxy = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="comment">// key:å“åº”å¼æ•°æ® =&gt; data:åŸå§‹æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> toRow = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­˜å‚¨effectçš„åœ°æ–¹ æ ˆ</span></span><br><span class="line"><span class="keyword">let</span> effectStack = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­˜å‚¨ä¾èµ–çš„åœ°æ–¹</span></span><br><span class="line"><span class="keyword">let</span> targetMap = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¶é›†ä¾èµ–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">track</span>(<span class="params">target, key</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ ˆåè¿›å…ˆå‡ºï¼Œæœ€åä¸€ä¸ªå°±æ˜¯æœ€æ–°çš„ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> effect = effectStack[effectStack.length - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (!effect) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> depMap = targetMap.get(target);</span><br><span class="line">    <span class="keyword">if</span> (depMap === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        depMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">        targetMap.set(target, depMap);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> dep = depMap.get(key);</span><br><span class="line">    <span class="keyword">if</span> (dep === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        dep = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">        depMap.set(key, dep);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!dep.has(effect)) &#123;</span><br><span class="line">        dep.add(effect);</span><br><span class="line">        effect.deps.push(dep);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘æ›´æ–°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trigger</span>(<span class="params">target, key, info</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.å¯»æ‰¾ä¾èµ–</span></span><br><span class="line">    <span class="keyword">const</span> depMap = targetMap.get(target);</span><br><span class="line">    <span class="comment">// æ²¡æœ‰ä¾èµ–</span></span><br><span class="line">    <span class="keyword">if</span> (depMap === <span class="literal">undefined</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> effects = <span class="keyword">new</span> <span class="built_in">Set</span>(); <span class="comment">// é›†åˆï¼Œè‡ªåŠ¨å»é‡</span></span><br><span class="line">    <span class="keyword">const</span> computedRunners = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (key) &#123;</span><br><span class="line">        <span class="keyword">let</span> deps = depMap.get(key);</span><br><span class="line">        <span class="comment">// depsé‡Œé¢å…¨éƒ¨æ˜¯effect</span></span><br><span class="line">        deps.forEach(<span class="function"><span class="params">effect</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (effect.computed) &#123;</span><br><span class="line">                computedRunners.add(effect);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                effects.add(effect);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œæ›´æ–°</span></span><br><span class="line">    effects.forEach(<span class="function"><span class="params">effect</span> =&gt;</span> effect());</span><br><span class="line">    computedRunners.forEach(<span class="function"><span class="params">computed</span> =&gt;</span> computed());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾€effectStack push effectå‡½æ•°ï¼Œæ‰§è¡Œfn æ•°æ®æ›´æ–°ä¹‹åéœ€è¦æ‰§è¡Œçš„fn</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">effect</span>(<span class="params">fn, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// @todo å¤„ç†options </span></span><br><span class="line">    <span class="keyword">let</span> e = createReactiveEffect(fn, options);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!options.lazy) &#123;</span><br><span class="line">        e();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> e</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ effect</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createReactiveEffect</span>(<span class="params">fn, options</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> effect = <span class="function"><span class="keyword">function</span> <span class="title">effect</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> run(effect, fn, args);</span><br><span class="line">    &#125;</span><br><span class="line">    effect.deps = [];</span><br><span class="line">    effect.computed = options.computed;</span><br><span class="line">    effect.lazy = options.lazy;</span><br><span class="line">    <span class="keyword">return</span> effect;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params">effect, fn, args</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (effectStack.indexOf(effect) === -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            effectStack.push(effect);</span><br><span class="line">            <span class="comment">// æ‰§è¡Œçš„æ—¶å€™ï¼Œæ˜¯è¦è·å–çš„</span></span><br><span class="line">            <span class="keyword">return</span> fn(...args);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            effectStack.pop() <span class="comment">// effectç”¨å®Œå°±è¦æ¨å‡ºå»</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—å±æ€§</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">computed</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> runner = effect(fn, &#123;</span><br><span class="line">        computed: <span class="literal">true</span>,</span><br><span class="line">        lazy: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        effect: runner,</span><br><span class="line">        <span class="keyword">get</span> <span class="title">value</span>() &#123;</span><br><span class="line">            <span class="keyword">return</span> runner();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”å¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reactive</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ç¼“å­˜ä¸­æ•°æ®æ˜¯å¦å·²ç»è¢«proxyäº†</span></span><br><span class="line">    <span class="keyword">let</span> observed = toProxy.get(target);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (observed) &#123;</span><br><span class="line">        <span class="keyword">return</span> observed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (toRow.get(target)) &#123;</span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°æ®æ²¡æœ‰proxyæ—¶ï¼Œè®¾ç½®ç¼“å­˜</span></span><br><span class="line">    observed = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, baseHandler);</span><br><span class="line">    toProxy.set(target, observed);</span><br><span class="line">    toRow.set(observed, target);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> observed;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”ä»£ç†</span></span><br><span class="line"><span class="keyword">const</span> baseHandler = &#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">target, key</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// targetå°±æ˜¯objï¼Œkeyå°±æ˜¯name  ä»¥ä¸‹å†™æ³•ç­‰åŒäº target[key]</span></span><br><span class="line">        <span class="keyword">const</span> res = <span class="built_in">Reflect</span>.get(target, key);</span><br><span class="line">        <span class="comment">// æ”¶é›†ä¾èµ– track </span></span><br><span class="line">        track(target, key);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">typeof</span> res == <span class="string">&#x27;object&#x27;</span> ? reactive(res) : res;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">target, key, val</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> info = &#123;</span><br><span class="line">            oldValue: target[key],</span><br><span class="line">            newValue: val</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// obj.name = xx è¿™é‡Œ æˆ‘ä»¬æ˜¯éœ€è¦é€šçŸ¥æ›´æ–°çš„</span></span><br><span class="line">        <span class="keyword">const</span> res = <span class="built_in">Reflect</span>.set(target, key, val)</span><br><span class="line">        <span class="comment">// è§¦å‘æ›´æ–°</span></span><br><span class="line">        trigger(target, key, info)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3.0 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vueé¡¹ç›®ç”¨HbuilderX æ‰“åŒ…app</title>
      <link href="/2020/06/04/vue/"/>
      <url>/2020/06/04/vue/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å…¬å¸è¦æŠŠä¹‹å‰åšçš„H5é¡¹ç›®æ‰“åŒ…æˆapp,åˆšå¥½ç ”ç©¶äº†ä¸€ä¸‹ã€‚å…¶å®ç”¨hbuilderæ‰“åŒ…è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå°±ç®€å•çš„å‡ æ­¥ï¼›åºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹å§~</p><h3 id="ä¸€-vueé¡¹ç›®"><a href="#ä¸€-vueé¡¹ç›®" class="headerlink" title="ä¸€. vueé¡¹ç›®"></a>ä¸€. vueé¡¹ç›®</h3><blockquote><p>é¡¹ç›®è¿è¡Œ<code>npm run build</code>æ‰“å‡ºç”Ÿäº§åŒ…ï¼Œè¿™ä¸ªåŒ…å…ˆæ‹·è´åˆ°å‰ªåˆ‡æ¿ä»¥å¤‡åé¢ä½¿ç”¨~</p></blockquote><p> <img src="/images/vue_7.png" alt="æ‰“åŒ…"></p><h3 id="äºŒ-Hbuild-X"><a href="#äºŒ-Hbuild-X" class="headerlink" title="äºŒ. Hbuild X"></a>äºŒ. Hbuild X</h3><h4 id="1-æ–°å»ºé¡¹ç›®ï¼›"><a href="#1-æ–°å»ºé¡¹ç›®ï¼›" class="headerlink" title="1.æ–°å»ºé¡¹ç›®ï¼›"></a>1.æ–°å»ºé¡¹ç›®ï¼›</h4><p> <img src="/images/vue_1.png" alt="æ–°å»º"></p><h4 id="2-æ–°å»ºå¥½äº†æŠŠé‡Œé¢ä¸€äº›æ²¡æœ‰çš„æ–‡ä»¶å¤¹åˆ é™¤ï¼ŒæŠŠmanifest-jsonç•™ä¸‹ï¼›"><a href="#2-æ–°å»ºå¥½äº†æŠŠé‡Œé¢ä¸€äº›æ²¡æœ‰çš„æ–‡ä»¶å¤¹åˆ é™¤ï¼ŒæŠŠmanifest-jsonç•™ä¸‹ï¼›" class="headerlink" title="2.æ–°å»ºå¥½äº†æŠŠé‡Œé¢ä¸€äº›æ²¡æœ‰çš„æ–‡ä»¶å¤¹åˆ é™¤ï¼ŒæŠŠmanifest.jsonç•™ä¸‹ï¼›"></a>2.æ–°å»ºå¥½äº†æŠŠé‡Œé¢ä¸€äº›æ²¡æœ‰çš„æ–‡ä»¶å¤¹åˆ é™¤ï¼ŒæŠŠ<code>manifest.json</code>ç•™ä¸‹ï¼›</h4><p> <img src="/images/vue_6.png" alt="åˆ é™¤ç”¨ä¸ä¸Šçš„æ–‡ä»¶"></p><h4 id="3-æŠŠvueé¡¹ç›®æ‰“å¥½çš„åŒ…æ”¾è¿›å»ï¼›"><a href="#3-æŠŠvueé¡¹ç›®æ‰“å¥½çš„åŒ…æ”¾è¿›å»ï¼›" class="headerlink" title="3.æŠŠvueé¡¹ç›®æ‰“å¥½çš„åŒ…æ”¾è¿›å»ï¼›"></a>3.æŠŠvueé¡¹ç›®æ‰“å¥½çš„åŒ…æ”¾è¿›å»ï¼›</h4><p> <img src="/images/vue_8.png" alt="å›¾ç‰‡"></p><h4 id="4-é…ç½®manifest-jsonæ–‡ä»¶ï¼›"><a href="#4-é…ç½®manifest-jsonæ–‡ä»¶ï¼›" class="headerlink" title="4.é…ç½®manifest.jsonæ–‡ä»¶ï¼›"></a>4.é…ç½®<code>manifest.json</code>æ–‡ä»¶ï¼›</h4><p> <img src="/images/vue_5.png" alt="å›¾ç‰‡"><br> <img src="/images/vue_4.png" alt="å›¾ç‰‡"><br> <img src="/images/vue_2.png" alt="å›¾ç‰‡"></p><h4 id="5-ç‚¹å‡»å‘è¡Œ-gt-åŸç”ŸApp-äº‘æ‰“åŒ…-gt-ï¼›"><a href="#5-ç‚¹å‡»å‘è¡Œ-gt-åŸç”ŸApp-äº‘æ‰“åŒ…-gt-ï¼›" class="headerlink" title="5.ç‚¹å‡»å‘è¡Œ -&gt; åŸç”ŸApp-äº‘æ‰“åŒ… -&gt;ï¼›"></a>5.ç‚¹å‡»<code>å‘è¡Œ -&gt; åŸç”ŸApp-äº‘æ‰“åŒ… -&gt;</code>ï¼›</h4><p> <img src="/images/vue_3.png" alt="å‘å¸ƒ"></p><blockquote><p>æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„ç‚¹ï¼ŒHbuilder + vue æ‰“å‡ºæ¥çš„åŒ…ï¼Œè·¯ç”±ä¼šå¤±æ•ˆï¼Œåœ¨é¡µé¢ç‚¹å‡»è¿”å›ä¼šç›´æ¥é€€å‡ºåº”ç”¨ï¼Œè¿™ä¸ªéœ€è¦åœ¨<code>index.html</code>çš„headä¸­æ’å…¥ä¸‹é¢è¿™è¡Œä»£ç ï¼š</p></blockquote> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;plusready&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> webview = plus.webview.currentWebview();</span><br><span class="line">plus.key.addEventListener(<span class="string">&#x27;backbutton&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">webview.canBack(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (e.canBack) &#123;</span><br><span class="line">webview.back();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//webview.close(); //hide,quit</span></span><br><span class="line"><span class="comment">//plus.runtime.quit();</span></span><br><span class="line"><span class="comment">//é¦–é¡µè¿”å›é”®å¤„ç†</span></span><br><span class="line"><span class="comment">//å¤„ç†é€»è¾‘ï¼š1ç§’å†…ï¼Œè¿ç»­ä¸¤æ¬¡æŒ‰è¿”å›é”®ï¼Œåˆ™é€€å‡ºåº”ç”¨ï¼›</span></span><br><span class="line"><span class="keyword">var</span> first = <span class="literal">null</span>;</span><br><span class="line">plus.key.addEventListener(<span class="string">&#x27;backbutton&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">//é¦–æ¬¡æŒ‰é”®ï¼Œæç¤ºâ€˜å†æŒ‰ä¸€æ¬¡é€€å‡ºåº”ç”¨â€™</span></span><br><span class="line"><span class="keyword">if</span> (!first) &#123;</span><br><span class="line">first = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;å†æŒ‰ä¸€æ¬¡é€€å‡ºåº”ç”¨&#x27;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">first = <span class="literal">null</span>;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() - first &lt; <span class="number">1500</span>) &#123;</span><br><span class="line">plus.runtime.quit();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> H5æ‰“åŒ…App </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mobxå­¦ä¹ è®°å½•</title>
      <link href="/2019/11/26/Mobx/"/>
      <url>/2019/11/26/Mobx/</url>
      
        <content type="html"><![CDATA[<h4 id="Mobxå·¥ä½œè®°å½•"><a href="#Mobxå·¥ä½œè®°å½•" class="headerlink" title="Mobxå·¥ä½œè®°å½•"></a>Mobxå·¥ä½œè®°å½•</h4><p>ä¹‹å‰ç”±äºé¡¹ç›®æ¯”è¾ƒæ€¥ï¼Œéœ€è¦åœ¨çŸ­æ—¶é—´å†…å­¦ä¹ å¹¶ä¸Šæ‰‹mobxï¼Œè™½ç„¶å·²ç»ç”¨react+mobxå¼€å‘äº†å¥½å‡ ä¸ªé¡¹ç›®ï¼Œä¸€ç›´éƒ½æ²¡æ—¶é—´æ€»ç»“ä¸€ä¸‹ã€‚ç‰¹æ­¤æ¢³ç†ä¸€ä¸‹ï¼Œè®©çŸ¥è¯†æ²‰æ·€æ²‰æ·€~<br><a href="https://github.com/mobxjs/mobx">Mobxå®˜æ–¹æ–‡æ¡£</a><br><a href="https://cn.mobx.js.org/">Mobxå®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></p><h4 id="Mobxçš„æ ¸å¿ƒæ¦‚å¿µ"><a href="#Mobxçš„æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="Mobxçš„æ ¸å¿ƒæ¦‚å¿µ"></a>Mobxçš„æ ¸å¿ƒæ¦‚å¿µ</h4><p>Mobxçš„æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡actionè§¦å‘stateçš„å˜åŒ–ï¼Œè¿›è€Œè§¦å‘stateçš„è¡ç”Ÿå¯¹è±¡ï¼ˆcomputed value &amp; Reactionsï¼‰ã€‚</p><p><img src="/images/mobx_flow.png"></p><h5 id="1-State-çŠ¶æ€"><a href="#1-State-çŠ¶æ€" class="headerlink" title="1.State(çŠ¶æ€)"></a>1.State(çŠ¶æ€)</h5><p> å…¶å®å°±æ˜¯æˆ‘ä»¬éœ€è¦ç”¨Mobxç®¡ç†èµ·æ¥çš„æ•°æ®ã€‚<br> åœ¨Mobxä¸­ï¼ŒStateå°±å¯¹åº”ä¸šåŠ¡çš„æœ€åŸå§‹çŠ¶æ€ï¼Œé€šè¿‡observableæ–¹æ³•ï¼Œå¯ä»¥ä½¿è¿™äº›çŠ¶æ€å˜å¾—å¯è§‚å¯Ÿã€‚<br>å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå½“æŸä¸€æ•°æ®è¢«observableåŒ…è£…åï¼Œä»–è¿”å›çš„æ˜¯è¢«observableåŒ…è£…åçš„ç±»å‹ã€‚</p><h5 id="2-Action-åŠ¨ä½œ"><a href="#2-Action-åŠ¨ä½œ" class="headerlink" title="2.Action(åŠ¨ä½œ)"></a>2.Action(åŠ¨ä½œ)</h5><p>åŠ¨ä½œ æ˜¯ä»»ä¸€ä¸€æ®µå¯ä»¥æ”¹å˜çŠ¶æ€çš„ä»£ç ã€‚ç”¨æˆ·äº‹ä»¶ã€åç«¯æ•°æ®æ¨é€ã€é¢„å®šäº‹ä»¶ã€ç­‰ç­‰ã€‚ åŠ¨ä½œç±»ä¼¼äºç”¨æˆ·åœ¨excelå•å…ƒæ ¼ä¸­è¾“å…¥ä¸€ä¸ªæ–°çš„å€¼ã€‚ æˆ‘ä»¬çš„å¼‚æ­¥è¯·æ±‚éƒ½å¯ä»¥åœ¨è¿™é‡Œåšã€‚ä½†æ˜¯è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼Œå¼‚æ­¥çš„å‡½æ•°é‡Œé¢å¯¹stateçš„æ›´æ”¹æ˜¯ä¸èƒ½æ£€æµ‹åˆ°çš„ã€‚æ‰€ä»¥å¼‚æ­¥çš„å›è°ƒä¹Ÿéœ€è¦ç”¨actionï¼ˆï¼‰åŒ…ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">demoMobx</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    @action</span><br><span class="line">    getServerList = <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.send(api_url, action(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// do something......</span></span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ª <code>flow</code>éœ€è¦è®²ä¸€ä¸‹ï¼š</p><blockquote><ul><li>ç”¨æ³•: flow(function* (args) { }),<br>flow() æ¥æ”¶ <code>generator</code> å‡½æ•°ä½œä¸ºå®ƒå”¯ä¸€çš„è¾“å…¥,å½“å¤„ç†å¼‚æ­¥åŠ¨ä½œæ—¶ï¼Œå›è°ƒä¸­æ‰§è¡Œçš„ä»£ç ä¸ä¼šè¢« action åŒ…è£…ã€‚è¿™æ„å‘³ç€ä½ ä¿®æ”¹çš„ observable state æ— æ³•é€šè¿‡ enforceActions æ£€æŸ¥ã€‚ä¿ç•™åŠ¨ä½œè¯­ä¹‰çš„ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ flow æ¥åŒ…è£…å¼‚æ­¥å‡½æ•°ã€‚è¿™å°†ç¡®ä¿æ‰€æœ‰å›è°ƒéƒ½ä¼šè¢« action() åŒ…è£…ã€‚</li></ul></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; configure &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å…è®¸åœ¨åŠ¨ä½œå¤–éƒ¨ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line">configure(&#123; <span class="attr">enforceActions</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Store</span> </span>&#123;</span><br><span class="line">    @observable githubProjects = [];</span><br><span class="line">    @observable state = <span class="string">&quot;pending&quot;</span>; <span class="comment">// &quot;pending&quot; / &quot;done&quot; / &quot;error&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    fetchProjects = flow(<span class="function"><span class="keyword">function</span>* <span class="title">fetchProjects</span>(<span class="params"></span>) </span>&#123; <span class="comment">// &lt;- æ³¨æ„*å·ï¼Œè¿™æ˜¯ç”Ÿæˆå™¨å‡½æ•°ï¼</span></span><br><span class="line">        <span class="built_in">this</span>.githubProjects = [];</span><br><span class="line">        <span class="built_in">this</span>.state = <span class="string">&quot;pending&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> projects = <span class="keyword">yield</span> fetchGithubProjectsSomehow(); <span class="comment">// ç”¨ yield ä»£æ›¿ await</span></span><br><span class="line">            <span class="keyword">const</span> filteredProjects = somePreprocessing(projects);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¼‚æ­¥ä»£ç è‡ªåŠ¨ä¼šè¢« `action` åŒ…è£…</span></span><br><span class="line">            <span class="built_in">this</span>.state = <span class="string">&quot;done&quot;</span>;</span><br><span class="line">            <span class="built_in">this</span>.githubProjects = filteredProjects;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="built_in">this</span>.state = <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-Derivations-è¡ç”Ÿ"><a href="#3-Derivations-è¡ç”Ÿ" class="headerlink" title="3. Derivations(è¡ç”Ÿ)"></a>3. Derivations(è¡ç”Ÿ)</h5><p>è¿™ä¸€éƒ¨åˆ†çš„æ¦‚å¿µä¸€ç›´ä¸æ˜¯å¤ªç†è§£ï¼Œå·¥ä½œä¹‹ä¸­ä¹Ÿä¸èƒ½ç›´è§‚çš„æ„Ÿå—åˆ°å®ƒï¼Œä¸€ç›´è¿·è¿·ç³Šç³Šã€‚ä½†æ˜¯åˆæ„Ÿè§‰ä¸å½±å“æ­£å¸¸å¼€å‘ï¼Œè¿™é‡Œåªèƒ½å…ˆç•™ä¸€ä¸ªTODOï¼Œç­‰å•¥æ—¶å€™è„‘å­å¼€çªäº†ï¼Œå†æ¥è¡¥ä¸Šå§~  </p><p>:smile:</p><h4 id="åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨Mobx"><a href="#åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨Mobx" class="headerlink" title="åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨Mobx"></a>åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨Mobx</h4><h5 id="1-å°†storeæ³¨å…¥åˆ°å…¨å±€"><a href="#1-å°†storeæ³¨å…¥åˆ°å…¨å±€" class="headerlink" title="1.å°†storeæ³¨å…¥åˆ°å…¨å±€"></a>1.å°†storeæ³¨å…¥åˆ°å…¨å±€</h5><p> <code>mobx-react</code> æä¾›äº† <code>Provider</code> </p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./app/app&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> stores <span class="keyword">from</span> <span class="string">&#x27;../../modules/store&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">baseReact</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;Provider &#123;...stores&#125;&gt;</span><br><span class="line">            &lt;App/&gt;</span><br><span class="line">        &lt;/Provider&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(baseReact(), <span class="built_in">document</span>.getElementById(<span class="string">&#x27;skin&#x27;</span>));</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-mobxåœ¨storeå’Œç»„ä»¶é‡Œçš„åº”ç”¨"><a href="#2-mobxåœ¨storeå’Œç»„ä»¶é‡Œçš„åº”ç”¨" class="headerlink" title="2.mobxåœ¨storeå’Œç»„ä»¶é‡Œçš„åº”ç”¨;"></a>2.mobxåœ¨storeå’Œç»„ä»¶é‡Œçš„åº”ç”¨;</h5><p><code>mobx-react</code>æä¾›äº†<code>reject</code> å’Œ <code>observer</code>ä¸¤ä¸ªå·¥å…·å»æŠŠstoreå’Œç»„ä»¶å…³è”èµ·æ¥ã€‚<br> <code>reject</code> æ˜¯å°†è¯¥ç»„ä»¶çš„storeæ³¨å…¥è¿›æ¥ï¼›<br> <code>observer</code>å¯ä»¥ç”¨ä½œåŒ…è£¹ React ç»„ä»¶çš„é«˜é˜¶ç»„ä»¶ï¼Œ åœ¨ç»„ä»¶çš„ render å‡½æ•°ä¸­çš„ä»»ä½•å·²ä½¿ç”¨çš„ observable å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶éƒ½ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“ã€‚ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨store.jsé‡Œé¢å¼•å…¥mobx, </span></span><br><span class="line"><span class="keyword">import</span> &#123; BaseStore &#125; <span class="keyword">from</span> <span class="string">&quot;../../../../../component.index&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; observable, action&#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DesignRightStore</span> <span class="keyword">extends</span> <span class="title">BaseStore</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    @observable rightComponentTabIndex: number = <span class="number">0</span>; </span><br><span class="line">    @observable showBackgroundColorPicker: boolean = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    @action</span><br><span class="line">    setRightComponentTabIndex = <span class="function">(<span class="params">index: number</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rightComponentTabIndex = index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> DesignRightStore();</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// react ç»„ä»¶éœ€è¦ç”¨åˆ° mobx-react</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">&quot;react-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; inject, observer&#125; <span class="keyword">from</span> <span class="string">&quot;mobx-react&quot;</span>;</span><br><span class="line"></span><br><span class="line">@withRouter</span><br><span class="line">@inject(<span class="string">&#x27;DesignRightStore&#x27;</span>) <span class="comment">// å°†DesignRightStoreæ³¨å…¥å½“å‰ç»„ä»¶</span></span><br><span class="line">@observer   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DesignElementPanel</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">super</span>(props);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span>(</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &#123;<span class="comment">/*ç»„ä»¶å†…å¯ä»¥é€šè¿‡ this.props.DesignRightStore æ‹¿åˆ°storeé‡Œé¢çš„å€¼å’Œæ–¹æ³•*/</span>&#125;</span><br><span class="line">            &#123;<span class="built_in">this</span>.props.DesignRightStore.rightComponentTabIndex&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> DesignElementPanel;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mobx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdownå¸¸ç”¨è¯­æ³•æµ‹è¯•</title>
      <link href="/2019/11/22/md/"/>
      <url>/2019/11/22/md/</url>
      
        <content type="html"><![CDATA[<h3 id="æµ‹è¯•æ–‡å­—"><a href="#æµ‹è¯•æ–‡å­—" class="headerlink" title="æµ‹è¯•æ–‡å­—"></a>æµ‹è¯•æ–‡å­—</h3><p>è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•çš„æ–‡ç« ï¼Œéšä¾¿å†™ä¸€äº›ä»€ä¹ˆä¸œè¥¿å§ã€‚å¤§å­¦æ—¶ï¼Œæ—¶é—´æ˜¯ä¸€å­¦æœŸä¸€å­¦æœŸæ¥è®¡ç®—çš„ï¼›æ¯•ä¸šåï¼Œæ—¶é—´å°±å˜æˆäº†ä¸€å¹´çš„ä¸€å¹´çš„è®¡ç®—ï¼Œæ„Ÿè§‰ä¸€æ™ƒå°±æ˜¯ä¸€å¹´ï¼Œä¸€æ™ƒå°±æ˜¯å¥½å‡ å¹´â€¦â€¦</p><blockquote><p>è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•çš„æ–‡ç« ï¼Œéšä¾¿å†™ä¸€äº›ä»€ä¹ˆä¸œè¥¿å§ã€‚å¤§å­¦æ—¶ï¼Œæ—¶é—´æ˜¯ä¸€å­¦æœŸä¸€å­¦æœŸæ¥è®¡ç®—çš„ï¼›æ¯•ä¸šåï¼Œæ—¶é—´å°±å˜æˆäº†ä¸€å¹´çš„ä¸€å¹´çš„è®¡ç®—ï¼Œæ„Ÿè§‰ä¸€æ™ƒå°±æ˜¯ä¸€å¹´ï¼Œä¸€æ™ƒå°±æ˜¯å¥½å‡ å¹´â€¦â€¦</p></blockquote><hr><h3 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h3><p>è¿™é‡Œæ¥æ”¾ä¸€ç‚¹ä»£ç å§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;æµ‹è¯•HTMLæ ‡ç­¾å±•ç¤º&lt;&#x2F;div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;hello world!&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åˆ†å‰²çº¿"><a href="#åˆ†å‰²çº¿" class="headerlink" title="åˆ†å‰²çº¿"></a>åˆ†å‰²çº¿</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">----</span><br><span class="line">***</span><br><span class="line">*****</span><br></pre></td></tr></table></figure><hr><hr><hr><hr><h3 id="è¶…é“¾æ¥"><a href="#è¶…é“¾æ¥" class="headerlink" title="è¶…é“¾æ¥"></a>è¶…é“¾æ¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ç™¾åº¦](http:&#x2F;&#x2F;baidu.com)</span><br></pre></td></tr></table></figure><p><a href="http://baidu.com/">ç™¾åº¦</a></p><h3 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h3><ul><li>è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•çš„æ–‡ç« ï¼Œéšä¾¿å†™ä¸€äº›ä»€ä¹ˆä¸œè¥¿å§ã€‚å¤§å­¦æ—¶ï¼Œæ—¶é—´æ˜¯ä¸€å­¦æœŸä¸€å­¦æœŸæ¥è®¡ç®—çš„ï¼›æ¯•ä¸šåï¼Œæ—¶é—´å°±å˜æˆäº†ä¸€å¹´çš„ä¸€å¹´çš„è®¡ç®—ï¼Œæ„Ÿè§‰ä¸€æ™ƒå°±æ˜¯ä¸€å¹´ï¼Œä¸€æ™ƒå°±æ˜¯å¥½å‡ å¹´â€¦â€¦</li></ul><ul><li>è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•çš„æ–‡ç« ï¼Œéšä¾¿å†™ä¸€äº›ä»€ä¹ˆä¸œè¥¿å§ã€‚å¤§å­¦æ—¶ï¼Œæ—¶é—´æ˜¯ä¸€å­¦æœŸä¸€å­¦æœŸæ¥è®¡ç®—çš„ï¼›æ¯•ä¸šåï¼Œæ—¶é—´å°±å˜æˆäº†ä¸€å¹´çš„ä¸€å¹´çš„è®¡ç®—ï¼Œæ„Ÿè§‰ä¸€æ™ƒå°±æ˜¯ä¸€å¹´ï¼Œä¸€æ™ƒå°±æ˜¯å¥½å‡ å¹´â€¦â€¦</li></ul><ol><li><p>è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•çš„æ–‡ç« ï¼Œéšä¾¿å†™ä¸€äº›ä»€ä¹ˆä¸œè¥¿å§ã€‚å¤§å­¦æ—¶ï¼Œæ—¶é—´æ˜¯ä¸€å­¦æœŸä¸€å­¦æœŸæ¥è®¡ç®—çš„ï¼›æ¯•ä¸šåï¼Œæ—¶é—´å°±å˜æˆäº†ä¸€å¹´çš„ä¸€å¹´çš„è®¡ç®—ï¼Œæ„Ÿè§‰ä¸€æ™ƒå°±æ˜¯ä¸€å¹´ï¼Œä¸€æ™ƒå°±æ˜¯å¥½å‡ å¹´â€¦â€¦</p></li><li><p>è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•çš„æ–‡ç« ï¼Œéšä¾¿å†™ä¸€äº›ä»€ä¹ˆä¸œè¥¿å§ã€‚å¤§å­¦æ—¶ï¼Œæ—¶é—´æ˜¯ä¸€å­¦æœŸä¸€å­¦æœŸæ¥è®¡ç®—çš„ï¼›æ¯•ä¸šåï¼Œæ—¶é—´å°±å˜æˆäº†ä¸€å¹´çš„ä¸€å¹´çš„è®¡ç®—ï¼Œæ„Ÿè§‰ä¸€æ™ƒå°±æ˜¯ä¸€å¹´ï¼Œä¸€æ™ƒå°±æ˜¯å¥½å‡ å¹´â€¦â€¦</p></li><li><p>è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•çš„æ–‡ç« ï¼Œéšä¾¿å†™ä¸€äº›ä»€ä¹ˆä¸œè¥¿å§ã€‚å¤§å­¦æ—¶ï¼Œæ—¶é—´æ˜¯ä¸€å­¦æœŸä¸€å­¦æœŸæ¥è®¡ç®—çš„ï¼›æ¯•ä¸šåï¼Œæ—¶é—´å°±å˜æˆäº†ä¸€å¹´çš„ä¸€å¹´çš„è®¡ç®—ï¼Œæ„Ÿè§‰ä¸€æ™ƒå°±æ˜¯ä¸€å¹´ï¼Œä¸€æ™ƒå°±æ˜¯å¥½å‡ å¹´â€¦â€¦</p></li></ol><h3 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¡¨å¤´|è¡¨å¤´|è¡¨å¤´</span><br><span class="line">---|:--:|---:</span><br><span class="line">å†…å®¹|å†…å®¹|å†…å®¹</span><br><span class="line">å†…å®¹|å†…å®¹|å†…å®¹</span><br></pre></td></tr></table></figure><table><thead><tr><th>è¡¨å¤´</th><th align="center">è¡¨å¤´</th><th align="right">è¡¨å¤´</th></tr></thead><tbody><tr><td>å†…å®¹</td><td align="center">å†…å®¹</td><td align="right">å†…å®¹</td></tr><tr><td>å†…å®¹</td><td align="center">å†…å®¹</td><td align="right">å†…å®¹</td></tr></tbody></table><h3 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![å›¾ç‰‡1](https:&#x2F;&#x2F;unsplash.it&#x2F;1920&#x2F;1040?random&amp;t&#x3D;8&amp;gravity&#x3D;north)</span><br></pre></td></tr></table></figure><p><img src="https://unsplash.it/1920/1040?random&t=8&gravity=north" alt="å›¾ç‰‡1"></p><h3 id="emoji"><a href="#emoji" class="headerlink" title="emoji"></a>emoji</h3><p>åœ°å€ <a href="https://emojipedia.org/">https://emojipedia.org/</a> â¤ï¸</p><h3 id="more"><a href="#more" class="headerlink" title="more"></a>more</h3><p>å¸¸å¸¸åœ¨æƒ³ï¼Œäººç”Ÿç©¶ç«Ÿä¼šæœ‰æ€ä¹ˆæ ·çš„æœªæ¥åœ¨ç­‰ç€æˆ‘ï¼Ÿæ˜¯å›°éš¾é‡é‡ã€è¿˜æ˜¯é£è½»äº‘æ·¡ã€æ˜¯å¹³é™ç¥¥å’Œã€è¿˜æ˜¯æ¿€çƒˆç‚½çƒ­ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> md </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mdè¯­æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS3æ–°å¢ç‰¹æ€§</title>
      <link href="/2017/09/21/css3/"/>
      <url>/2017/09/21/css3/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€-é€‰æ‹©å™¨"><a href="#ä¸€-é€‰æ‹©å™¨" class="headerlink" title="ä¸€.é€‰æ‹©å™¨"></a>ä¸€.é€‰æ‹©å™¨</h3><h4 id="1-å…³ç³»é€‰æ‹©å™¨"><a href="#1-å…³ç³»é€‰æ‹©å™¨" class="headerlink" title="1. å…³ç³»é€‰æ‹©å™¨"></a>1. å…³ç³»é€‰æ‹©å™¨</h4><blockquote><p>åä»£é€‰æ‹©å™¨ ul li é€‰æ‹©æ‰€æœ‰çš„åä»£å…ƒç´ <br><br>å­ä»£é€‰æ‹©å™¨ ul &gt; li é€‰æ‹©ulçš„å„¿å­<br><br>ç´§é‚»é€‰æ‹©å™¨ .box + li é€‰æ‹©.boxåé¢çš„ä¸€ä¸ªliå…ƒç´ <br><br>å…„å¼Ÿé€‰æ‹©å™¨ .box ~ li é€‰æ‹©.boxåé¢æ‰€æœ‰çš„liå…ƒç´ <br></p></blockquote><h4 id="2-å±æ€§é€‰æ‹©å™¨-ï¼šé€šè¿‡å±æ€§æ¥é€‰æ‹©å¯¹åº”çš„å…ƒç´ "><a href="#2-å±æ€§é€‰æ‹©å™¨-ï¼šé€šè¿‡å±æ€§æ¥é€‰æ‹©å¯¹åº”çš„å…ƒç´ " class="headerlink" title="2. å±æ€§é€‰æ‹©å™¨ ï¼šé€šè¿‡å±æ€§æ¥é€‰æ‹©å¯¹åº”çš„å…ƒç´ "></a>2. å±æ€§é€‰æ‹©å™¨ ï¼šé€šè¿‡å±æ€§æ¥é€‰æ‹©å¯¹åº”çš„å…ƒç´ </h4><blockquote><p>ï¼ˆ1ï¼‰E[å±æ€§å] ï¼š é€‰æ‹©æ‰€æœ‰çš„å…·å¤‡è¿™ä¸ªå±æ€§çš„Eå…ƒç´ <br><br>ï¼ˆ2ï¼‰E[å±æ€§å=å€¼] ï¼šé€‰æ‹©æ‰€æœ‰çš„å…·å¤‡è¿™ä¸ª â€˜å±æ€§ = å¯¹åº”å€¼â€™ çš„Eå…ƒç´ <br><br>ï¼ˆ3ï¼‰E[å±æ€§å~=å€¼]ï¼šé€‰æ‹©æ‰€æœ‰çš„åŒ…å«è¿™ä¸ª â€˜å±æ€§ = å¯¹åº”å€¼â€™ çš„Eå…ƒç´ </p></blockquote><p><code>css3æ–°å¢çš„(ä¸æ˜¯å¾ˆå¸¸ç”¨)ï¼š</code></p><blockquote><p>ï¼ˆ4ï¼‰E[å±æ€§å^=å€¼]ï¼šä»å¤´å»åŒ¹é…è¿™ä¸ª â€˜å±æ€§ = å¯¹åº”å€¼â€™ çš„Eå…ƒç´ <br><br>ï¼ˆ5ï¼‰E[å±æ€§å$=å€¼]ï¼šä»å°¾å»åŒ¹é…è¿™ä¸ª â€˜å±æ€§ = å¯¹åº”å€¼â€™ çš„Eå…ƒç´ <br><br>ï¼ˆ6ï¼‰E[å±æ€§å*=å€¼]ï¼š ä»ä»»æ„ä½ç½®å»åŒ¹é…è¿™ä¸ªâ€˜å±æ€§ = å¯¹åº”å€¼â€™çš„Eå…ƒç´ </p></blockquote><h4 id="3-ä¼ªç±»é€‰æ‹©å™¨"><a href="#3-ä¼ªç±»é€‰æ‹©å™¨" class="headerlink" title="3.ä¼ªç±»é€‰æ‹©å™¨"></a>3.ä¼ªç±»é€‰æ‹©å™¨</h4><blockquote><p>ï¼ˆ1ï¼‰Eï¼šfirst-child æ‰¾åˆ°ç¬¬ä¸€ä¸ªå­å…ƒç´ ä¸ºEçš„å…ƒç´  ï¼ˆcss2ï¼‰<br><br>ï¼ˆ2ï¼‰Eï¼šlast-child æ‰¾åˆ°æœ€åä¸€ä¸ªå­å…ƒç´ ä¸ºEçš„å…ƒç´  ï¼ˆcss3ï¼‰<br><br>ï¼ˆ3ï¼‰Eï¼šnth-childï¼ˆNï¼‰æ‰¾åˆ°ç¬¬Nä¸ªå­å…ƒç´ ä¸ºEçš„å…ƒç´  ï¼ˆcss3ï¼‰<br></p></blockquote><h4 id="4-ä¼ªå…ƒç´ -before-after"><a href="#4-ä¼ªå…ƒç´ -before-after" class="headerlink" title="4. ä¼ªå…ƒç´  before after"></a>4. ä¼ªå…ƒç´  before after</h4><blockquote><p>ä½œç”¨ï¼šæ¸²æŸ“ä¸€ä¸ªè™šæ‹Ÿçš„æ ‡ç­¾æ’å…¥åˆ°å½“å‰å…ƒç´ çš„å†…éƒ¨çš„å‰é¢æˆ–è€…åé¢,å•æ ‡ç­¾æ˜¯æ²¡æœ‰ä¼ªå…ƒç´ çš„ã€‚</p></blockquote><blockquote><p>ï¼ˆ1ï¼‰ä¼ªå…ƒç´ é»˜è®¤æ˜¯è¡Œå†…å…ƒç´ ï¼Œå¯ä»¥é€šè¿‡displayè¿›è¡Œè½¬åŒ–ï¼Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œå¤šç”¨æ¥æ¨¡æ‹Ÿä¸€äº›å°çš„æ ‡ç­¾å»è£…é¥°ï¼›<br><br>  ï¼ˆ2ï¼‰å› ä¸ºä¼ªå…ƒç´ æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ç”¨JSå»è·å–ï¼ˆå¯ä»¥åˆ©ç”¨ç±»å»è¦†ç›–ä¹‹å‰çš„æ ·å¼ï¼‰ï¼›<br><br>  ï¼ˆ3ï¼‰æ¸…é™¤æµ®åŠ¨çš„åº•å±‚åŸç†ï¼šå°±æ˜¯è®©ä¸€ä¸ªä¼ªå…ƒç´ ï¼ˆå› ä¸ºä¼ªå…ƒç´ ä¸å domå†…å­˜ï¼‰å»æ¸…é™¤æµ®åŠ¨ï¼Œä»è€ŒèŠ‚çº¦äº†domå†…å­˜ï¼Œä¹Ÿæ›´åŠ çš„åˆç†ï¼›<br><br>  ï¼ˆ4ï¼‰contentä¸€å®šä¸èƒ½çœç•¥ï¼Œå³ä½¿é‡Œé¢æ²¡æœ‰å†…å®¹ï¼Œä¹Ÿè¦å†™ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼›<br><br>  ï¼ˆ5ï¼‰ä¼ªå…ƒç´ æ¨èç”¨åŒå†’å·ï¼Œä½†æ˜¯IE6,7,8ä¸æ”¯æŒåŒå†’å·çš„å†™æ³•ï¼Œæ‰€ä»¥ä¸ºäº†å…¼å®¹è€ƒè™‘ï¼Œä½¿ç”¨å•å†’å·ï¼›<br><br>  ï¼ˆ6ï¼‰å½“ä¼ªç±»éœ€è¦é…åˆiconfontå»ä½¿ç”¨çš„è¯éœ€è¦æ‰“å¼€iconfont.css æ‹¿åˆ°contenté‡Œé¢å¯¹åº”çš„å€¼ï¼›<br><br>  ï¼ˆ7ï¼‰å½“ä¼ªå…ƒç´ éœ€è¦hoverçš„æ•ˆæœçš„æ—¶å€™ä¸èƒ½ç›´æ¥hover éœ€è¦å€ŸåŠ©äºçˆ¶çº§ å†™æ³•ï¼šçˆ¶çº§ï¼šhoverï¼šä¼ªå…ƒç´ ï¼›<br></p></blockquote><h4 id="5-å…¶ä»–é€‰æ‹©å™¨"><a href="#5-å…¶ä»–é€‰æ‹©å™¨" class="headerlink" title="5. å…¶ä»–é€‰æ‹©å™¨"></a>5. å…¶ä»–é€‰æ‹©å™¨</h4><blockquote><p>ï¼ˆ1ï¼‰input:focus{ } =&gt; é€‰æ‹©è·å–ç„¦ç‚¹çš„è¡¨å•<br><br>ï¼ˆ4ï¼‰Input:checked =&gt; é€‰æ‹©è¢«é€‰ä¸­çš„checkboxè¡¨å•<br><br>ï¼ˆ2ï¼‰input:enabled{ } =&gt; é€‰æ‹©å¯æ“æ§çš„è¡¨å•å…ƒç´ <br><br>ï¼ˆ3ï¼‰input:disabled { } =&gt; é€‰æ‹©ä¸å¯æ“æ§çš„è¡¨å•<br></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">&#x2F;* é€‰æ‹©è·å–ç„¦ç‚¹çš„é‚£ä¸ªè¡¨å• *&#x2F;</span><br><span class="line">input:focus&#123;</span><br><span class="line">border-color:pink;</span><br><span class="line">outline: none;</span><br><span class="line">height: 40px;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* é€‰æ‹©è¢«é€‰ä¸­çš„ checkbox *&#x2F;</span><br><span class="line">input:checked &#123;</span><br><span class="line">width: 100px;</span><br><span class="line">height: 100px;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* é€‰æ‹©å¯æ“æ§çš„é‚£ä¸ªè¡¨å•å…ƒç´  *&#x2F;</span><br><span class="line">input:enabled &#123;</span><br><span class="line">background-color: pink;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* é€‰æ‹©ä¸å¯æ“æ§çš„è¡¨å•å…ƒç´  *&#x2F;</span><br><span class="line">input:disabled&#123;</span><br><span class="line">background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* é€‰æ‹©é€šè¿‡é”šç‚¹è·³è½¬çš„å…ƒç´  *&#x2F;</span><br><span class="line">#test:target &#123;</span><br><span class="line">color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">ç”¨æˆ·åï¼š&lt;input type&#x3D;&quot;text&quot; disabled &gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">å¯†ç ï¼š &lt;input type&#x3D;&quot;password&quot;&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">èº«ä»½è¯å·ï¼š &lt;input type&#x3D;&quot;text&quot;&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">çˆ±å¥½ï¼šè¶³çƒï¼š&lt;input type&#x3D;&quot;checkbox&quot; name&#x3D;&quot;&quot; id&#x3D;&quot;&quot;&gt;</span><br><span class="line">ç¯®çƒï¼š&lt;input type&#x3D;&quot;checkbox&quot; name&#x3D;&quot;&quot; id&#x3D;&quot;&quot;&gt;  </span><br><span class="line">çœ‹åŠ¨æ¼«ï¼š&lt;input type&#x3D;&quot;checkbox&quot; name&#x3D;&quot;&quot; id&#x3D;&quot;&quot;&gt;  </span><br><span class="line">&lt;a href&#x3D;&quot;#test&quot;&gt;é”šç‚¹è·³è½¬&lt;&#x2F;a&gt;</span><br><span class="line">&lt;p&gt;æˆ‘æ˜¯på…ƒç´ &lt;&#x2F;p&gt;</span><br><span class="line">&lt;p id&#x3D;&quot;test&quot;&gt;æˆ‘æ˜¯æ‹å…ƒç´ ï¼Œæˆ‘æ‰æ˜¯è´§çœŸä»·å®çš„é‚£ä¸ªé”šç‚¹&lt;&#x2F;p&gt;</span><br><span class="line">&lt;p&gt;æˆ‘æ˜¯på…ƒç´ &lt;&#x2F;p&gt;</span><br><span class="line">&lt;p&gt;æˆ‘æ˜¯på…ƒç´ &lt;&#x2F;p&gt;</span><br><span class="line">&lt;p&gt;æˆ‘æ˜¯på…ƒç´ &lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure><h3 id="äºŒ-é¢œè‰²"><a href="#äºŒ-é¢œè‰²" class="headerlink" title="äºŒ. é¢œè‰²"></a>äºŒ. é¢œè‰²</h3><blockquote><p>æ–°å¢äº†RGBAã€HSLAæ¨¡å¼ï¼Œå…¶ä¸­çš„A è¡¨ç¤ºé€æ˜åº¦é€šé“ï¼Œå³å¯ä»¥è®¾ç½®é¢œè‰²å€¼çš„é€æ˜åº¦ï¼Œç›¸è¾ƒopacityï¼Œå®ƒä»¬ä¸å…·æœ‰ç»§æ‰¿æ€§ï¼Œå³ä¸ä¼šå½±å“å­å…ƒç´ çš„é€æ˜åº¦ã€‚</p></blockquote><h5 id="1-opacity"><a href="#1-opacity" class="headerlink" title="1. opacity"></a>1. opacity</h5><blockquote><p>å¦‚æœç»™çˆ¶ç›’å­è®¾ç½®opacityï¼Œæ‰€æœ‰çš„å­ç›’å­éƒ½ä¼šæœ‰è¿™ä¸ªæ•ˆæœï¼Œopacityå­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚æœæ˜¯åœ¨IE6/7/8ä¸‹ï¼Œåº”è¯¥ä½¿ç”¨filterè¿›è¡Œè®¾ç½®</p></blockquote><h5 id="2-rgba"><a href="#2-rgba" class="headerlink" title="2. rgba"></a>2. rgba</h5><blockquote><p>R:Redã€G:Greenã€B:Blueã€A:Alphaï¼ŒRã€Gã€B å–å€¼èŒƒå›´0~255ï¼ŒAçš„å–å€¼èŒƒå›´æ˜¯0-1ã€‚<br>RGBAå¯ä»¥ç”¨äºæ‰€æœ‰ä½¿ç”¨é¢œè‰²çš„åœ°æ–¹<br>rgbä¸‰ä¸ªå€¼è¶Šå°ï¼Œé¢œè‰²è¶Šé»‘<br>å¦‚æœæ˜¯çº¯è‰²çš„èƒŒæ™¯ï¼Œå¯ä»¥æ˜¯ä½¿ç”¨rgba<br>å¦‚æœæ˜¯å›¾ç‰‡ï¼Œå¯ä»¥è„±ç¦»çˆ¶å­å…³ç³»ï¼Œè®©åç”¨å®šä½çš„æ–¹å¼æ¥åšã€‚</p></blockquote><p><img src="/images/css/3.png"></p><h5 id="3-hsla"><a href="#3-hsla" class="headerlink" title="3. hsla"></a>3. hsla</h5><blockquote><p>H è‰²è°ƒ å–å€¼èŒƒå›´0<del>360ï¼Œ0/360è¡¨ç¤ºçº¢è‰²ã€120è¡¨ç¤ºç»¿è‰²ã€240è¡¨ç¤ºè“è‰²<br>S é¥±å’Œåº¦å–å€¼èŒƒå›´0%</del>100%<br>L äº®åº¦ å–å€¼èŒƒå›´0%<del>100%<br>A é€æ˜åº¦å–å€¼èŒƒå›´0</del>1</p></blockquote><p><img src="/images/css/4.png"></p><h3 id="ä¸‰-ç›’å­è‡ªå‡-box-sizing"><a href="#ä¸‰-ç›’å­è‡ªå‡-box-sizing" class="headerlink" title="ä¸‰. ç›’å­è‡ªå‡(box-sizing )"></a>ä¸‰. ç›’å­è‡ªå‡(box-sizing )</h3><blockquote><p>CSS3ä¸­å¯ä»¥é€šè¿‡box-sizing æ¥æŒ‡å®šç›’æ¨¡å‹ï¼Œä¹‹å‰æˆ‘ä»¬çš„ç›’å­çš„å®é™…å®½åº¦æ˜¯ :å®é™…å®½åº¦ = width + padding + borderï¼Œè€Œå†…å‡å±æ€§ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å‡æ‰ padding å’Œ borderå€¼ ï¼Œæ‰€ä»¥ç”¨äº†å†…å‡çš„ç›’å­å®é™…å®½åº¦å°±ç­‰äºwidthã€‚</p></blockquote><p>å¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µï¼š</p><blockquote><p>1ã€box-sizing: border-box è®¡ç®—æ–¹å¼ä¸ºcontent = width â€“ border - padding <br><br>2ã€box-sizing: content-box è®¡ç®—æ–¹å¼ä¸ºcontent = width</p></blockquote><h3 id="å››-é˜´å½±"><a href="#å››-é˜´å½±" class="headerlink" title="å››.é˜´å½±"></a>å››.é˜´å½±</h3><h5 id="4-1-æ–‡å­—é˜´å½±-text-shadow"><a href="#4-1-æ–‡å­—é˜´å½±-text-shadow" class="headerlink" title="4.1 æ–‡å­—é˜´å½±(text-shadow)"></a>4.1 æ–‡å­—é˜´å½±(text-shadow)</h5><blockquote><p>è¯­æ³•ï¼š text-shadowï¼šæ°´å¹³åç§» å‚ç›´åç§» ç¾½åŒ–å¤§å° é¢œè‰²</p></blockquote><h5 id="4-2-è¾¹æ¡†é˜´å½±-box-shadow"><a href="#4-2-è¾¹æ¡†é˜´å½±-box-shadow" class="headerlink" title="4.2 è¾¹æ¡†é˜´å½±(box-shadow)"></a>4.2 è¾¹æ¡†é˜´å½±(box-shadow)</h5><blockquote><p>è¯­æ³•ï¼šbox-shadowï¼šå€¼<br>å€¼è¯´æ˜ï¼š<br>ï¼ˆ1ï¼‰ç¬¬ä¸€ä¸ªå€¼ ï¼šNpx  é˜´å½±å‘æ°´å¹³æ–¹å‘åç§»Nä¸ªåƒç´   æ­£æ•°å¾€å³ è´Ÿæ•°å¾€å·¦<br>ï¼ˆ2ï¼‰ç¬¬äºŒä¸ªå€¼ ï¼šNpx  é˜´å½±å‘å‚ç›´æ–¹å‘åç§»Nä¸ªåƒç´   æ­£æ•°å¾€ä¸‹ è´Ÿæ•°å¾€ä¸Š<br>ï¼ˆ3ï¼‰ç¬¬ä¸‰ä¸ªå€¼ ï¼šç¾½åŒ–å¤§å° ï¼ˆæ¨¡ç³Šçš„å¤§å°ï¼‰<br>ï¼ˆ4ï¼‰ç¬¬å››ä¸ªå€¼ ï¼šé˜´å½±å°ºå¯¸<br>ï¼ˆ5ï¼‰ç¬¬äº”ä¸ªå€¼ ï¼šé¢œè‰² é»˜è®¤å€¼æ˜¯é»‘è‰²<br>ï¼ˆ6ï¼‰ç¬¬å…­ä¸ªå‚æ•°ï¼š å†…å¤–é˜´å½± é»˜è®¤æ˜¯å¤–é˜´å½± å†…é˜´å½±æ˜¯inset<br>ï¼ˆ7ï¼‰é˜´å½±å¯ä»¥å†™å¤šä¸ªï¼Œä¸­é—´ç”¨é€—å·éš”å¼€<br>ï¼ˆ8ï¼‰é˜´å½±å¯ä»¥ç®€å†™ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„æœ‰ä¸€äº›å€¼éœ€è¦è¡¥0</p></blockquote><p><img src="/images/css/7.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;é˜´å½±&lt;&#x2F;title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">        body&#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-wrap: wrap;</span><br><span class="line">        &#125;</span><br><span class="line">div &#123;</span><br><span class="line">width: 100px;</span><br><span class="line">height: 100px;</span><br><span class="line">            margin:20px;</span><br><span class="line">background-color: #84af9b;</span><br><span class="line">            display: flex;</span><br><span class="line">            color:#fff;</span><br><span class="line">            justify-content: center;</span><br><span class="line">            align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* ç¬¬ä¸€ä¸ªå€¼ ï¼šNpx  é˜´å½±å‘æ°´å¹³æ–¹å‘åç§»Nä¸ªåƒç´   æ­£æ•°å¾€å³ è´Ÿæ•°å¾€å·¦ *&#x2F;</span><br><span class="line">div:nth-child(1)&#123;</span><br><span class="line">box-shadow: -10px 0 0 0 #c9c8a9;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* ç¬¬äºŒä¸ªå€¼ ï¼šNpx  é˜´å½±å‘å‚ç›´æ–¹å‘åç§»Nä¸ªåƒç´   æ­£æ•°å¾€ä¸‹ è´Ÿæ•°å¾€ä¸Š *&#x2F;</span><br><span class="line">div:nth-child(2)&#123;</span><br><span class="line">box-shadow: 0 10px 0 0 #c9c8a9 ;</span><br><span class="line">&#125;</span><br><span class="line">div:nth-child(3)&#123;</span><br><span class="line">box-shadow: -10px -10px 0 0 #c9c8a9;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* ç¬¬ä¸‰ä¸ªå€¼æ§åˆ¶çš„æ¨¡ç³Šçš„ç¨‹åº¦ ï¼ˆç¾½åŒ–çš„å¤§å°ï¼‰é»˜è®¤å€¼0 *&#x2F;</span><br><span class="line">div:nth-child(4)&#123;</span><br><span class="line">box-shadow: 10px 10px 10px  0 #c9c8a9;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* ç¬¬å››ä¸ªå€¼æ§åˆ¶çš„ é˜´å½±çš„å¤§å° é»˜è®¤å€¼0*&#x2F;</span><br><span class="line">div:nth-child(5)&#123;</span><br><span class="line">box-shadow: 10px 10px 0px 10px #c9c8a9;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* ç¬¬äº”ä¸ªå€¼æ§åˆ¶çš„ é¢œè‰² é»˜è®¤å€¼é»‘è‰² å¯ä»¥ä½¿ç”¨rgbaå»æ§åˆ¶é€æ˜åº¦*&#x2F;</span><br><span class="line">div:nth-child(6)&#123;</span><br><span class="line">box-shadow: 10px 10px 10px 10px #c9c8a9 ;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* ç¬¬å…­ä¸ªå€¼æ§åˆ¶çš„ å†…å¤–é˜´å½± insetæ˜¯å†…é˜´å½± *&#x2F;</span><br><span class="line">div:nth-child(7)&#123;</span><br><span class="line">box-shadow: 10px 10px 10px 10px #c9c8a9 inset;</span><br><span class="line">&#125;</span><br><span class="line">div:nth-child(8) &#123;</span><br><span class="line">transition:all 1s;</span><br><span class="line">&#125;</span><br><span class="line">div:nth-child(8):hover&#123;</span><br><span class="line">box-shadow: 0 0 10px 10px #facdae,0 0 15px 5px #fc9a9d,0 0 15px 5px #ff426a;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div&gt;1&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div&gt;2&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div&gt;3&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div&gt;4&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div&gt;5&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div&gt;6&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div&gt;7&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div&gt;8&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure><h3 id="äº”-è¾¹æ¡†å›¾ç‰‡-äº†è§£"><a href="#äº”-è¾¹æ¡†å›¾ç‰‡-äº†è§£" class="headerlink" title="äº”. è¾¹æ¡†å›¾ç‰‡ (äº†è§£)"></a>äº”. è¾¹æ¡†å›¾ç‰‡ (äº†è§£)</h3><pre><code>è¯­æ³•ï¼šborder-imageï¼šå€¼</code></pre><blockquote><p>éµä»çš„æ˜¯ä¹å®«æ ¼å¼åˆ‡å›¾ï¼Œä¸Šä¸‹å·¦å³åˆ†åˆ«æ¥ä¸€åˆ€<br><br>å€¼è¯´æ˜ï¼š<br><br>ï¼ˆ1ï¼‰border-image-source:url(â€˜border.pngâ€™); å›¾ç‰‡è·¯å¾„<br><br>ï¼ˆ2ï¼‰border-image-slice:26;å›¾ç‰‡åˆ‡å‰²ï¼Œä¸è¦å¸¦å•ä½ï¼Œéµä»ä¹å®«æ ¼å¼åˆ‡å›¾æ³•ï¼ˆä¸Šä¸‹å·¦å³å„æ¥ä¸€åˆ€ï¼‰<br><br>ï¼ˆ3ï¼‰border-image-repeat:roundæˆ–è€…stretchæˆ–è€…repeat; roundæ²¡æœ‰ç‘•ç–µï¼Œstretché»˜è®¤æ‹‰ä¼¸ï¼Œrepeat å¹³é“ºï¼ˆå¯èƒ½æœ‰ç‘•ç–µï¼‰<br><br>ï¼ˆ4ï¼‰ç®€å†™ï¼šborder-image:url(â€˜border.pngâ€™) 26 round;</p></blockquote><h3 id="å…­-èƒŒæ™¯"><a href="#å…­-èƒŒæ™¯" class="headerlink" title="å…­. èƒŒæ™¯"></a>å…­. èƒŒæ™¯</h3><h5 id="6-1-æ§åˆ¶èƒŒæ™¯å›¾ç‰‡çš„å¤§å°-ï¼ˆé‡è¦ï¼‰"><a href="#6-1-æ§åˆ¶èƒŒæ™¯å›¾ç‰‡çš„å¤§å°-ï¼ˆé‡è¦ï¼‰" class="headerlink" title="6.1 æ§åˆ¶èƒŒæ™¯å›¾ç‰‡çš„å¤§å° ï¼ˆé‡è¦ï¼‰"></a>6.1 æ§åˆ¶èƒŒæ™¯å›¾ç‰‡çš„å¤§å° ï¼ˆé‡è¦ï¼‰</h5><pre><code>è¯­æ³•ï¼šbackground-sizeï¼šå€¼</code></pre><blockquote><p>ï¼ˆ1ï¼‰å½“åªæœ‰ä¸€ä¸ªå€¼çš„æƒ…å†µä¸‹ï¼Œå®½åº¦å®ç°æ‹‰ä¼¸ï¼Œå¹¶ä¸”é«˜åº¦ä¼šä¿æŒç­‰æ¯”ä¾‹ï¼Œå¯ä»¥æ”¯æŒpxï¼Œä¹Ÿå¯ä»¥æ”¯æŒç™¾åˆ†æ¯”ï¼Œç™¾åˆ†æ¯”å‚ç…§çš„æ˜¯è¿™ä¸ªç›’å­æœ¬èº«çš„å®½é«˜<br><br>ï¼ˆ2ï¼‰å½“æœ‰ä¸¤ä¸ªå€¼çš„æƒ…å†µä¸‹ï¼Œå®½åº¦å’Œé«˜åº¦ä¼šåˆ†åˆ«æ‹‰ä¼¸åˆ°å¯¹åº”çš„å€¼ï¼Œå¯èƒ½ä¼šå˜å½¢ï¼Œå¯ä»¥æ”¯æŒpxï¼Œä¹Ÿå¯ä»¥æ”¯æŒç™¾åˆ†æ¯”ï¼Œç™¾åˆ†æ¯”å‚ç…§çš„æ˜¯è¿™ä¸ªç›’å­æœ¬èº«çš„å®½é«˜<br><br>ï¼ˆ3ï¼‰contain å½“å›¾ç‰‡çš„å®½åº¦æˆ–è€…æ˜¯é«˜åº¦åœ¨ç¼©æ”¾çš„æ—¶å€™æœ‰ä¸€ä¸ªâ€œç¢°åˆ°â€äº†ç›’å­çš„è¾¹ç¼˜ï¼Œåˆ™åœæ­¢å˜åŒ–ï¼Œï¼ˆå®½åº¦æˆ–é«˜åº¦æ»¡è¶³ä¸€ä¸ªå³å¯ï¼‰<br><br>ï¼ˆ4ï¼‰åœ¨containçš„åŸºç¡€ä¸Šä¿è¯ä¸ç•™ç™½ï¼Œè¿™å°±æ˜¯coverçš„æ•ˆæœï¼ˆå®½åº¦å’Œé«˜åº¦éƒ½éœ€è¦æ»¡è¶³ï¼‰<br></p></blockquote><h5 id="6-2-å¤šé‡èƒŒæ™¯"><a href="#6-2-å¤šé‡èƒŒæ™¯" class="headerlink" title="6.2 å¤šé‡èƒŒæ™¯"></a>6.2 å¤šé‡èƒŒæ™¯</h5><blockquote><p>è¯´æ˜ï¼šèƒŒæ™¯å›¾ç‰‡ä¹‹é—´ç”¨é€—å·éš”å¼€ï¼Œå¯ä»¥å†™å¤šç»„ï¼Œæœ€å…ˆæ¸²æŸ“çš„å›¾ç‰‡æœ‰å¯èƒ½ä¼šé®ä½åé¢æ¸²æŸ“çš„å›¾ç‰‡</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>:  <span class="selector-tag">url</span>(<span class="selector-tag">image</span>/1<span class="selector-class">.jpg</span>) 0 0 <span class="selector-tag">no-repeat</span>,</span><br><span class="line">         <span class="selector-tag">url</span>(<span class="selector-tag">image</span>/2<span class="selector-class">.jpg</span>) 220<span class="selector-tag">px</span> 0 <span class="selector-tag">no-repeat</span>,</span><br><span class="line">             <span class="selector-tag">url</span>(<span class="selector-tag">image</span>/3<span class="selector-class">.jpg</span>) 430<span class="selector-tag">px</span> 0  <span class="selector-tag">no-repeat</span>;</span><br></pre></td></tr></table></figure><h5 id="6-3-èƒŒæ™¯å›¾ç‰‡çš„åŸºå‡†ç‚¹-äº†è§£"><a href="#6-3-èƒŒæ™¯å›¾ç‰‡çš„åŸºå‡†ç‚¹-äº†è§£" class="headerlink" title="6.3 èƒŒæ™¯å›¾ç‰‡çš„åŸºå‡†ç‚¹(äº†è§£)"></a>6.3 èƒŒæ™¯å›¾ç‰‡çš„åŸºå‡†ç‚¹(äº†è§£)</h5><p>è¯­æ³•ï¼šbackground-originï¼šå€¼</p><blockquote><p>å€¼è¯´æ˜ï¼š<br><br>ï¼ˆ1ï¼‰border-box  ï¼šå¿½ç•¥è¾¹æ¡† ç›´æ¥ä»è¾¹æ¡†çš„èµ·å§‹ 0 ï¼Œ0ç‚¹å¹³é“º<br><br>ï¼ˆ2ï¼‰padding-boxï¼š é»˜è®¤å€¼ï¼Œå¿½ç•¥padding ç›´æ¥ä»paddingçš„èµ·å§‹ 0 ï¼Œ0ç‚¹å¹³é“º<br><br>ï¼ˆ3ï¼‰content-box ï¼šä»å†…å®¹éƒ¨åˆ†å¼€å§‹å¹³é“º è·Ÿpaddingæœ‰å…³ç³»<br></p></blockquote><h3 id="ä¸ƒ-åœ†è§’-border-radius"><a href="#ä¸ƒ-åœ†è§’-border-radius" class="headerlink" title="ä¸ƒ. åœ†è§’(border-radius)"></a>ä¸ƒ. åœ†è§’(border-radius)</h3><ol><li>border-radiusçš„å€¼æŒ‡çš„æ˜¯è¾¹æ¡†çš„åœ†è§’åŠå¾„ã€‚<br></li><li>border-radiusä¸marginç±»ä¼¼ï¼Œå¯ä»¥åˆ†åˆ«æŒ‡å®š4ä¸ªåœ†è§’çš„å¤§å°ï¼ˆå·¦ä¸Šã€å³ä¸Šã€å³ä¸‹ã€å·¦ä¸‹ï¼‰.</li><li>border-radiusçš„åœ†è§’ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ¤­åœ†ã€‚<br></li><li>å¯ä»¥åˆ†åˆ«æŒ‡å®š4ä¸ªåœ†è§’æ˜¯æ¤­åœ†ã€‚<br></li><li>border-radiusçš„å€¼å¯ä»¥æ˜¯pxï¼Œä¹Ÿå¯ä»¥æ˜¯ ç™¾åˆ†æ¯”ã€‚<br></li></ol><h3 id="å…«-æ¸å˜"><a href="#å…«-æ¸å˜" class="headerlink" title="å…«.  æ¸å˜"></a>å…«.  æ¸å˜</h3><h5 id="8-1-çº¿æ€§æ¸å˜-linear-gradient"><a href="#8-1-çº¿æ€§æ¸å˜-linear-gradient" class="headerlink" title="8.1 çº¿æ€§æ¸å˜(linear-gradient)"></a>8.1 çº¿æ€§æ¸å˜(linear-gradient)</h5><blockquote><p>Background-image:linear-gradient(æ¸å˜çº¿è§’åº¦å€¼ | to æ–¹ä½åè¯ , é¢œè‰²ä¸€ æ­¢è‰²ä½ç½® , é¢œè‰²äºŒ æ­¢è‰²ä½ç½® , é¢œè‰²ä¸‰ æ­¢è‰²ä½ç½®);<br><br>         ï¼ˆ1ï¼‰è§’åº¦é»˜è®¤æ˜¯180åº¦ï¼Œä»ä¸Šåˆ°ä¸‹ ï¼Œ0åº¦ä»ä¸‹åˆ°ä¸Šï¼Œ90åº¦ä»å·¦åˆ°å³ï¼Œæ€»ç»“å°±æ˜¯å°å€¼åˆ°å¤§å€¼å‘ˆç°é¡ºæ—¶é’ˆ<br><br>         ï¼ˆ2ï¼‰ä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨to æ–¹ä½åè¯çš„å½¢å¼å»ç¡®å®šæ¸å˜çš„è§’åº¦ï¼Œæ›´ç›´è§‚ä¸€äº›<br><br>         ï¼ˆ3ï¼‰æ­¢è‰²çš„å€¼ï¼ˆé¢œè‰²åœ¨ä»€ä¹ˆä½ç½®åœæ­¢ï¼‰å¯ä»¥æ˜¯åƒç´ ï¼Œå’Œç™¾åˆ†æ¯”ï¼Œå¤šç”¨ç™¾åˆ†æ¯”å»æ§åˆ¶ï¼Œå¦‚æœåé¢é¢œè‰²çš„å€¼å°äºå‰é¢é¢œè‰²çš„å€¼è¿‡æ¸¡ä¼šå¾ˆç”Ÿç¡¬<br></p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//æ³¨æ„ï¼šæ¸å˜å®é™…ä¸Šç›¸å½“ä¸ä¸€å¼ å›¾ç‰‡ï¼Œå› ä¸ºéœ€è¦åŠ ç»™<span class="selector-tag">background-image</span>æ‰ä¼šç”Ÿæ•ˆ</span><br><span class="line">//æ¸å˜çš„ä¸¤ä¸ªè¦æ±‚ï¼šæœ‰åŒºé—´ï¼Œæœ‰é¢œè‰²å˜åŒ–ã€‚</span><br><span class="line">//æœ€ç®€å•çš„æ¸å˜</span><br><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">red</span>, <span class="selector-tag">green</span>);</span><br><span class="line">//è®¾å®šæ¸å˜çš„æ–¹å‘</span><br><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">right</span>, <span class="selector-tag">red</span>, <span class="selector-tag">green</span>);</span><br><span class="line">//ä¹Ÿå¯ä»¥è®¾å®šæ¸å˜çš„è§’åº¦</span><br><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(45<span class="selector-tag">deg</span>, <span class="selector-tag">red</span>, <span class="selector-tag">green</span>);</span><br><span class="line">//è®¾å®šæ¸å˜çš„èŒƒå›´</span><br><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">right</span>, <span class="selector-tag">red</span> 20%, <span class="selector-tag">green</span> 80%)</span><br><span class="line">//æ¯ä¸€ä¸ªåŒºé—´è¡¨ç¤ºæ¸å˜é¢œè‰²çš„èŒƒå›´</span><br><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">linear-gradient</span>(<span class="selector-tag">to</span> <span class="selector-tag">right</span>, <span class="selector-tag">red</span> 20%, <span class="selector-tag">green</span> 20%)</span><br></pre></td></tr></table></figure><h5 id="8-2-å¾„å‘æ¸å˜-radial-gradient"><a href="#8-2-å¾„å‘æ¸å˜-radial-gradient" class="headerlink" title="8.2 å¾„å‘æ¸å˜(radial-gradient)"></a>8.2 å¾„å‘æ¸å˜(radial-gradient)</h5><blockquote><p>background:radial-gradient(åœ†çš„åŠå¾„ at åœ†å¿ƒç‚¹çš„ä½ç½®,é¢œè‰²ä¸€ æ­¢è‰²ä½ç½®,é¢œè‰²äºŒ æ­¢è‰²ä½ç½® ,é¢œè‰²ä¸‰ æ­¢è‰²ä½ç½®);<br><br>         ï¼ˆ1ï¼‰åœ†çš„åŠå¾„åˆ†ä¸ºæ°´å¹³å’Œå‚ç›´åŠå¾„<br><br>         ï¼ˆ2ï¼‰å½“åœ†çš„åŠå¾„æ˜¯ä¸€ä¸ªå€¼çš„æƒ…å†µä¸‹ï¼Œæ˜¯æ­£åœ†ï¼Œè¡¨ç¤ºæ°´å¹³å’Œå‚ç›´çš„åŠå¾„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå½“åœ†çš„åŠå¾„ä¸ºä¸¤ä¸ªä¸ä¸€æ ·çš„å€¼æƒ…å†µä¸‹ï¼Œæ˜¯æ¤­åœ†<br><br>         ï¼ˆ3ï¼‰åœ†å¿ƒç‚¹çš„ä½ç½®é»˜è®¤åœ¨ä¸­é—´ï¼Œå¯ä»¥æ¥å—åƒç´ å’ŒåŠåˆ†æ¯” åŠå…¶æ–¹ä½åè¯<br><br>         ï¼ˆ4ï¼‰æ­¢è‰²çš„å€¼ï¼ˆé¢œè‰²åœ¨ä»€ä¹ˆä½ç½®åœæ­¢ï¼‰å¯ä»¥æ˜¯åƒç´ ï¼Œå’Œç™¾åˆ†æ¯”ï¼Œå¤šç”¨ç™¾åˆ†æ¯”å»æ§åˆ¶</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*1. æœ€ç®€å•çš„æ¸å˜*/</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">background-image</span>: <span class="selector-tag">radial-gradient</span>(<span class="selector-tag">red</span>, <span class="selector-tag">green</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*2. æŒ‡å®šåœ†çš„åŠå¾„å’Œåœ†å¿ƒ*/</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">background-image</span>: <span class="selector-tag">radial-gradient</span>(200<span class="selector-tag">px</span> <span class="selector-tag">at</span> <span class="selector-tag">center</span>, <span class="selector-tag">red</span>, <span class="selector-tag">green</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*3. æŒ‡å®šæ¤­åœ†*/</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">background-image</span>: <span class="selector-tag">radial-gradient</span>(200<span class="selector-tag">px</span> 80<span class="selector-tag">px</span> <span class="selector-tag">at</span> <span class="selector-tag">center</span>, <span class="selector-tag">red</span>, <span class="selector-tag">green</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*4. æŒ‡å®šèŒƒå›´</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    background-image: radial-gradient(200px at center, green 50%, red 50%);</span></span><br><span class="line"><span class="comment"></span></span><br></pre></td></tr></table></figure><h5 id="8-3-ç§æœ‰å‰ç¼€"><a href="#8-3-ç§æœ‰å‰ç¼€" class="headerlink" title="8.3 ç§æœ‰å‰ç¼€"></a>8.3 ç§æœ‰å‰ç¼€</h5><blockquote><p>ä½œç”¨ï¼šå…¼å®¹ä½ç‰ˆæœ¬çš„ä¸€äº›é«˜çº§æµè§ˆå™¨ï¼Œæˆ–è€…ä¸€äº›ç‰¹å®šçš„css3å±æ€§éœ€è¦æ·»åŠ ç§æœ‰å‰ç¼€æ‰èµ·ä½œç”¨ã€‚<br><br> æ¯ä¸€æ¡css3å±æ€§åˆç†æ¥è¯´éƒ½éœ€è¦æ·»åŠ å¯¹åº”æµè§ˆå™¨çš„å‰ç¼€ï¼Œä»¥ä¿è¯å…¶å…¼å®¹æ€§:<br></p></blockquote><blockquote><p>è°·æ­Œ è‹¹æœï¼š-webkit- <br><br> ç«ç‹ï¼š-moz-<br><br> IEï¼š-ms-<br><br> oï¼š-o-<br></p></blockquote><blockquote><p>å°ç»†èŠ‚ï¼šåœ¨æ‰‹æœºç«¯ï¼Œä¸€èˆ¬æ¥è¯´åªéœ€è¦å†™ä¸€ä¸ª-webkit-ï¼ˆé’ˆå¯¹å›½å†…çš„ç»å¤§éƒ¨åˆ†æ‰‹æœºç«¯ï¼‰<br>         æ·»åŠ çš„ä½ç½®ï¼šå¤§éƒ¨åˆ†éƒ½æ˜¯ç›´æ¥æ·»åŠ åˆ°æœ€å‰é¢ï¼Œcss2æ²¡æœ‰çš„å±æ€§éƒ½æ˜¯æ·»åŠ åœ¨æœ€å‰é¢çš„ï¼Œæœ‰ä¸€äº›æ˜¯css2å°±æœ‰çš„å±æ€§æ˜¯æ·»åŠ åœ¨åé¢çš„ï¼ˆbackgroundï¼š-webkit-linear-gradientï¼ˆï¼‰ï¼‰</p></blockquote><h3 id="ä¹-2Dè½¬æ¢"><a href="#ä¹-2Dè½¬æ¢" class="headerlink" title="ä¹.  2Dè½¬æ¢"></a>ä¹.  2Dè½¬æ¢</h3><h5 id="9-1-è¿‡æ¸¡"><a href="#9-1-è¿‡æ¸¡" class="headerlink" title="9.1 è¿‡æ¸¡"></a>9.1 è¿‡æ¸¡</h5><blockquote><p>transitionï¼šè¿‡æ¸¡æ˜¯CSS3ä¸­å…·æœ‰é¢ è¦†æ€§çš„ç‰¹å¾ä¹‹ä¸€ï¼Œå¯ä»¥å®ç°å…ƒç´ ä¸åŒçŠ¶æ€é—´çš„å¹³æ»‘è¿‡æ¸¡ï¼ˆè¡¥é—´åŠ¨ç”»ï¼‰ï¼Œç»å¸¸ç”¨æ¥åˆ¶ä½œåŠ¨ç”»æ•ˆæœã€‚</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//<span class="selector-tag">transition-property</span>ï¼šè®¾ç½®è¿‡æ¸¡å±æ€§</span><br><span class="line">//ä¹Ÿå¯ä»¥æ˜¯<span class="selector-tag">width</span>,<span class="selector-tag">height</span></span><br><span class="line"><span class="selector-tag">transition-property</span><span class="selector-pseudo">:all</span>;</span><br><span class="line"></span><br><span class="line">//<span class="selector-tag">transition-duration</span>:è®¾ç½®è¿‡æ¸¡æ—¶é—´</span><br><span class="line"><span class="selector-tag">transition-duration</span><span class="selector-pseudo">:1s</span>;<span class="comment">/*è¿‡æ¸¡çš„æ—¶é—´*/</span></span><br><span class="line"></span><br><span class="line">//<span class="selector-tag">transition-delay</span>ï¼šè®¾ç½®è¿‡æ¸¡å»¶æ—¶</span><br><span class="line"><span class="selector-tag">transition-delay</span><span class="selector-pseudo">:2s</span>;<span class="comment">/*2ç§’ä¹‹åæ‰è¿›è¡ŒåŠ¨ç”»*/</span></span><br><span class="line"></span><br><span class="line">//<span class="selector-tag">transition-timing-function</span>:è®¾ç½®è¿‡æ¸¡çš„é€Ÿåº¦</span><br><span class="line">//<span class="selector-tag">linear</span>ï¼Œ<span class="selector-tag">ease</span>ï¼Œ<span class="selector-tag">ease-in</span>ï¼Œ<span class="selector-tag">ease-out</span>ï¼Œ<span class="selector-tag">ease-in-out</span>ï¼Œ <span class="selector-tag">steps</span>(10)</span><br><span class="line"><span class="selector-tag">transition-timing-function</span><span class="selector-pseudo">:linear</span>;</span><br></pre></td></tr></table></figure><h5 id="9-2-transform"><a href="#9-2-transform" class="headerlink" title="9.2 transform"></a>9.2 transform</h5><blockquote><p>transform: è½¬æ¢ï¼Œæ˜¯CSS3æœ€å…·é¢ è¦†æ€§çš„å‡ ä¸ªç‰¹æ€§ä¹‹ä¸€ï¼Œæ—¢å¯ä»¥ç”¨äº2Dè½¬æ¢ï¼Œä¹Ÿå¯ä»¥ç”¨äº3Dè½¬æ¢ã€‚<br>transformï¼š2Dè½¬æ¢ï¼Œå…ƒç´ åœ¨å¹³é¢ä¸Šå®ç°ç§»åŠ¨ã€æ—‹è½¬ã€ç¼©æ”¾ã€æ–œåˆ‡ç­‰æ“ä½œ.</p></blockquote><h5 id="1-scaleç¼©æ”¾"><a href="#1-scaleç¼©æ”¾" class="headerlink" title="(1) scaleç¼©æ”¾"></a>(1) scaleç¼©æ”¾</h5><blockquote><p>æ³¨æ„ï¼š<br>scaleæ¥æ”¶çš„å€¼æ˜¯å€æ•°ï¼Œå› æ­¤æ²¡æœ‰å•ä½<br>scaleå¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå€¼ï¼Œä¸æ˜¯è¯´ä»…ä»…ç¼©æ”¾å®½åº¦ï¼Œé«˜åº¦ä¹Ÿä¼šç­‰æ¯”ä¾‹çš„ç¼©æ”¾ã€‚<br>å¯ä»¥é€šè¿‡transition-originè®¾å®šæ—‹è½¬åŸç‚¹</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">scaleX</span>(0.5);//è®©å®½åº¦å˜åŒ–</span><br><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">scaleY</span>(0.5);//è®©é«˜åº¦å˜åŒ–ï¼Œæ³¨æ„ä¸èƒ½å†™å¤šä¸ª<span class="selector-tag">transform</span>ï¼Œä¸ç„¶ä¼šè¦†ç›–ã€‚</span><br><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">scale</span>(0.5);//è®©å®½åº¦å’Œé«˜åº¦åŒæ—¶å˜åŒ–</span><br></pre></td></tr></table></figure><h5 id="2-translateå¹³ç§»"><a href="#2-translateå¹³ç§»" class="headerlink" title="(2) translateå¹³ç§»"></a>(2) translateå¹³ç§»</h5><blockquote><p>æ³¨æ„ï¼š<br>translateçš„å€¼å¯ä»¥æ˜¯pxï¼Œä¹Ÿå¯ä»¥æ˜¯ç™¾åˆ†æ¯”ï¼Œå¦‚æœæ˜¯ç™¾åˆ†æ¯”ï¼Œé‚£ä¹ˆå‚ç…§çš„æ˜¯è‡ªèº«çš„å®½é«˜ã€‚<br>translateç§»åŠ¨çš„å…ƒç´ å¹¶ä¸ä¼šå½±å“å…¶ä»–ç›’å­ï¼Œç±»ä¼¼äºç›¸å¯¹å®šä½ã€‚</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">translateX</span>(100<span class="selector-tag">px</span>);</span><br><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">translateY</span>(100<span class="selector-tag">px</span>);</span><br><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">translate</span>(100<span class="selector-tag">px</span>, 100<span class="selector-tag">px</span>);</span><br><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">translate</span>(50%, 50%);</span><br></pre></td></tr></table></figure><h5 id="3-rotateæ—‹è½¬"><a href="#3-rotateæ—‹è½¬" class="headerlink" title="(3) rotateæ—‹è½¬"></a>(3) rotateæ—‹è½¬</h5><blockquote><p>æ³¨æ„ï¼š<br>å•ä½æ˜¯degï¼Œè§’åº¦ï¼Œä¸æ˜¯px<br>æ­£å€¼é¡ºæ—¶é’ˆè½¬ï¼Œè´Ÿå€¼é€†æ—¶é’ˆè½¬<br>å¯ä»¥é€šè¿‡transition-originè®¾å®šæ—‹è½¬åŸç‚¹<br>è½¬æ¢åŸç‚¹å†™åœ¨AçŠ¶æ€ï¼Œä¸èƒ½å†™åœ¨BçŠ¶æ€</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">rotate</span>(360<span class="selector-tag">deg</span>);//æ—‹è½¬360åº¦</span><br><span class="line"><span class="selector-tag">transform</span>: <span class="selector-tag">rotate</span>(<span class="selector-tag">-360deg</span>);//é€†æ—¶é’ˆæ—‹è½¬360åº¦</span><br></pre></td></tr></table></figure><h5 id="4-skewæ–œåˆ‡"><a href="#4-skewæ–œåˆ‡" class="headerlink" title="(4) skewæ–œåˆ‡"></a>(4) skewæ–œåˆ‡</h5><blockquote><p>skewåœ¨å®é™…å¼€å‘ä¸­ï¼Œæ˜¯ç”¨çš„æœ€å°‘çš„ä¸€ä¸ªå±æ€§ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œxå’Œyåªä¼šå€¾æ–œå…¶ä¸­çš„ä¸€ä¸ª.      </p></blockquote><pre><code>/*åœ¨æ°´å¹³æ–¹å‘å€¾æ–œ30deg*/transform: skewX(30deg);/*åœ¨å‚ç›´æ–¹å‘å€¾æ–œ30deg*/transform: skewY(30deg);</code></pre><h5 id="5-transform-originè½¬æ¢åŸç‚¹"><a href="#5-transform-originè½¬æ¢åŸç‚¹" class="headerlink" title="(5) transform-originè½¬æ¢åŸç‚¹"></a>(5) transform-originè½¬æ¢åŸç‚¹</h5><blockquote><p>é€šè¿‡transform-originå¯ä»¥è®¾ç½®è½¬æ¢çš„ä¸­å¿ƒåŸç‚¹ã€‚</p></blockquote><pre><code>transform-origin: center center;transform-origin: 40px 40px;</code></pre><h5 id="6-è½¬æ¢åˆå†™é—®é¢˜"><a href="#6-è½¬æ¢åˆå†™é—®é¢˜" class="headerlink" title="(6) è½¬æ¢åˆå†™é—®é¢˜"></a>(6) è½¬æ¢åˆå†™é—®é¢˜</h5><pre><code> transform:translateX(800px)  scale(1.5)  rotate(360deg) ;   </code></pre><blockquote><ol><li>transformå±æ€§åªèƒ½å†™ä¸€ä¸ªï¼Œå¦‚æœå†™äº†å¤šä¸ªä¼šè¦†ç›–</li><li>transformå±æ€§å¯ä»¥è¿å†™ï¼Œä½†æ˜¯é¡ºåºå¯¹æ•ˆæœæœ‰å½±å“çš„ï¼Œå› ä¸ºå®ƒä¼šåœ¨ç¬¬ä¸€ä¸ªæ•ˆæœçš„åŸºç¡€ä¸Šæ‰§è¡Œç¬¬äºŒä¸ªæ•ˆæœï¼Œç„¶åæ‰§è¡Œç¬¬ä¸‰ä¸ªæ•ˆæœï¼ˆé€šå¸¸ä¼šæŠŠrotateæ”¾åé¢ï¼‰</li><li>å¦‚æœå¯¹transformè¿›è¡Œè¿‡åº¦æ•ˆæœçš„æ—¶å€™ï¼Œåˆå§‹çŠ¶æ€å’Œç»“æŸçŠ¶æ€ä¸€ä¸€å¯¹åº”</li></ol></blockquote><h3 id="å-3Dè½¬æ¢"><a href="#å-3Dè½¬æ¢" class="headerlink" title="å. 3Dè½¬æ¢"></a>å. 3Dè½¬æ¢</h3><h5 id="1-rotateX"><a href="#1-rotateX" class="headerlink" title="(1) rotateX"></a>(1) rotateX</h5><blockquote><p>è®©å…ƒç´ å›´ç»•ç€Xè½´è¿›è¡Œæ—‹è½¬<br>  ï¼ˆ1ï¼‰æ­£å€¼è¡¨ç¤ºæ¨åˆ°ï¼Œè´Ÿå€¼è¡¨ç¤ºé èº¬<br>  ï¼ˆ2ï¼‰æ²¡æœ‰é€è§†çš„3Dæ˜¯çœ‹ä¸å‡ºæ¥æ–¹å‘</p></blockquote><h5 id="2-rotateY"><a href="#2-rotateY" class="headerlink" title="(2) rotateY"></a>(2) rotateY</h5><blockquote><p>å›´ç»•ç€Yè½´è¿›è¡Œæ—‹è½¬<br>ï¼ˆ1ï¼‰æ­£æ•°æ˜¯é€†æ—¶é’ˆ ï¼ˆç«™åœ¨å³è¾¹æ¨é—¨ï¼‰ï¼Œè´Ÿæ•°æ˜¯é¡ºæ—¶é’ˆï¼ˆç«™åœ¨å·¦è¾¹æ¨é—¨ï¼‰</p></blockquote><h5 id="3-å®šä¹‰å…ƒç´ èƒŒè¿‡å»æ˜¯å¦å¯è§"><a href="#3-å®šä¹‰å…ƒç´ èƒŒè¿‡å»æ˜¯å¦å¯è§" class="headerlink" title="(3)å®šä¹‰å…ƒç´ èƒŒè¿‡å»æ˜¯å¦å¯è§"></a>(3)å®šä¹‰å…ƒç´ èƒŒè¿‡å»æ˜¯å¦å¯è§</h5><pre><code>  backface-visibility: visible|hidden;</code></pre><blockquote><p>è¯´æ˜ï¼švisibleè¡¨ç¤ºå¯è§ï¼Œhiddenè¡¨ç¤ºä¸å¯è§<br>æµ‹è¯•è´å¡å°”æ›²çº¿çš„ç½‘å€ï¼š<a href="http://xuanfengge.com/easeing/ceaser/">http://xuanfengge.com/easeing/ceaser/</a></p></blockquote><h5 id="4-translateZ"><a href="#4-translateZ" class="headerlink" title="(4) translateZ"></a>(4) translateZ</h5><blockquote><p>å°±æ˜¯åœ¨Zè½´ä¸Šæ¥å›ç§»åŠ¨ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰é€è§†çš„æƒ…å†µä¸‹ï¼Œå®Œå…¨çœ‹ä¸å‡ºæ•ˆæœ<br>å°ç»éªŒï¼štranslateZå’Œrotateç»“åˆä¼šäº§ç”Ÿä¸ä¸€æ ·çš„3Dæ•ˆæœï¼Œä¸åŒçš„é¡ºåºçš„æ•ˆæœæˆªç„¶ä¸åŒï¼Œå¦‚æœå…ˆrotate åœ¨translateZ å…ƒç´ æ˜¯åœ¨ç©ºé—´é‡Œé¢å‘ç”Ÿæ—‹è½¬ è€Œå¦‚æœæ˜¯translateZåœ¨rotate å…ƒç´ æ˜¯åœ¨ç›´çº¿ä¸Šå‘ç”Ÿæ—‹è½¬</p></blockquote><h5 id="ï¼ˆ5ï¼‰é€è§†-ï¼ˆæ™¯æ·±ï¼‰"><a href="#ï¼ˆ5ï¼‰é€è§†-ï¼ˆæ™¯æ·±ï¼‰" class="headerlink" title="ï¼ˆ5ï¼‰é€è§† ï¼ˆæ™¯æ·±ï¼‰"></a>ï¼ˆ5ï¼‰é€è§† ï¼ˆæ™¯æ·±ï¼‰</h5><pre><code>perspectiveï¼šå€¼</code></pre><blockquote><p>è¯´æ˜ï¼šé€è§†å€¼è¶Šå°ï¼Œé€è§†æ•ˆæœè¶Šå¼ºï¼Œå€¼è¶Šå¤§ï¼Œé€è§†æ•ˆæœè¶Šå¼±ï¼Œé€è§†æ·»åŠ åœ¨çˆ¶çº§èº«ä¸Š.</p></blockquote><h5 id="ï¼ˆ6ï¼‰ç­ç‚¹ï¼ˆé€è§†ç‚¹ï¼Œæ¶ˆå¤±ç‚¹ï¼‰"><a href="#ï¼ˆ6ï¼‰ç­ç‚¹ï¼ˆé€è§†ç‚¹ï¼Œæ¶ˆå¤±ç‚¹ï¼‰" class="headerlink" title="ï¼ˆ6ï¼‰ç­ç‚¹ï¼ˆé€è§†ç‚¹ï¼Œæ¶ˆå¤±ç‚¹ï¼‰"></a>ï¼ˆ6ï¼‰ç­ç‚¹ï¼ˆé€è§†ç‚¹ï¼Œæ¶ˆå¤±ç‚¹ï¼‰</h5><pre><code>perspective-originï¼šå€¼</code></pre><blockquote><p>è¯´æ˜ï¼šå€¼å¯ä»¥æ˜¯åƒç´ ï¼Œä¹Ÿå¯ä»¥æ˜¯ç™¾åˆ†æ¯”ï¼Œè¿˜å¯ä»¥æ˜¯æ–¹ä½åè¯ï¼Œé»˜è®¤å€¼æ˜¯50%ï¼Œ50%ï¼ˆä¸­å¿ƒç‚¹ï¼‰.</p></blockquote><h5 id="ï¼ˆ7ï¼‰transform-style"><a href="#ï¼ˆ7ï¼‰transform-style" class="headerlink" title="ï¼ˆ7ï¼‰transform-style"></a>ï¼ˆ7ï¼‰transform-style</h5><pre><code>transform-style:preserve-3d;</code></pre><blockquote><p>ä½œç”¨ï¼šè§„å®šè¢«åµŒå¥—å…ƒç´ å¦‚ä½•åœ¨3Dç©ºé—´ä¸­æ˜¾ç¤º<br>å€¼è¯´æ˜ï¼š<br><br>flatæ˜¯é»˜è®¤å€¼ï¼Œè®©å­å…ƒç´ ä¸ä¿ç•™å…¶3Dä½ç½®ï¼Œ<br> preserve-3d  è®©å­å…ƒç´ ä¿ç•™å…¶3Dä½ç½® ï¼ŒåŠ åœ¨çˆ¶äº²èº«ä¸Š<br></p></blockquote><p>å°æ€»ç»“ï¼šé€è§† ç­ç‚¹ transform-styleéƒ½æ˜¯æ·»åŠ åœ¨çˆ¶çº§èº«ä¸Š<br>å…³é”®ï¼š å½“å…ƒç´ å‘ç”Ÿ3Dç¿»è½¬çš„æ—¶å€™ï¼Œæ•´ä¸ªåæ ‡ç³»ä¹Ÿè·Ÿç€å‘ç”Ÿäº†ç¿»è½¬ï¼ï¼</p><h3 id="åä¸€-C3åŠ¨ç”»"><a href="#åä¸€-C3åŠ¨ç”»" class="headerlink" title="åä¸€. C3åŠ¨ç”»"></a>åä¸€. C3åŠ¨ç”»</h3><blockquote><p>åŠ¨ç”»ä¹Ÿæ˜¯CSS3ä¸­å…·æœ‰é¢ è¦†æ€§çš„ç‰¹å¾ä¹‹ä¸€ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å¤šä¸ªèŠ‚ç‚¹æ¥ç²¾ç¡®æ§åˆ¶ä¸€ä¸ªæˆ–è€…ä¸€ç»„åŠ¨ç”»ï¼Œå¸¸ç”¨æ¥å®ç°å¤æ‚çš„åŠ¨ç”»æ•ˆæœã€‚</p></blockquote><h5 id="11-1-åŠ¨ç”»ä¸è¿‡æ¸¡çš„åŒºåˆ«ï¼š"><a href="#11-1-åŠ¨ç”»ä¸è¿‡æ¸¡çš„åŒºåˆ«ï¼š" class="headerlink" title="11.1 åŠ¨ç”»ä¸è¿‡æ¸¡çš„åŒºåˆ«ï¼š"></a>11.1 åŠ¨ç”»ä¸è¿‡æ¸¡çš„åŒºåˆ«ï¼š</h5><blockquote><p>(1) è¿‡æ¸¡å¿…é¡»è§¦å‘ï¼Œéœ€è¦ä¸¤ä¸ªçŠ¶æ€çš„æ”¹å˜ã€‚<br><br>(2)åŠ¨ç”»å¯ä»¥ä¸€ç›´è¿è¡Œä¸‹å»ï¼Œä¸éœ€è¦è§¦å‘ã€‚å®ç°æ•ˆæœä¸è¿‡æ¸¡å·®ä¸å¤š:</p></blockquote><blockquote><p>1.é€šè¿‡@keyframesæŒ‡å®šåŠ¨ç”»åºåˆ—<br><br>2.é€šè¿‡ç™¾åˆ†æ¯”æˆ–è€…from/toå°†åŠ¨ç”»åˆ†å‰²æˆå¤šä¸ªèŠ‚ç‚¹<br><br>3.åœ¨å„ä¸ªèŠ‚ç‚¹ä¸­åˆ†åˆ«å®šä¹‰åŠ¨ç”»å±æ€§<br><br>4.é€šè¿‡animationå°†åŠ¨ç”»åº”ç”¨äºç›¸åº”çš„å…ƒç´ </p></blockquote><h5 id="11-2-animationè¯¦è§£"><a href="#11-2-animationè¯¦è§£" class="headerlink" title="11.2 animationè¯¦è§£:"></a>11.2 animationè¯¦è§£:</h5><blockquote><p>animationæ˜¯ä¸€ä¸ªå¤åˆå±æ€§ï¼Œä¸€å…±æœ‰8ä¸ªå‚æ•°:<br>animation-name:åŠ¨ç”»åç§°ï¼Œç”±@keyframeså®šä¹‰çš„<br>animation-durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´<br>animation-timing-functionï¼šåŠ¨ç”»çš„è¿‡æ¸¡ç±»å‹<br>animation-delayï¼šåŠ¨ç”»çš„å»¶è¿Ÿæ—¶é—´<br>animation-iteration-countï¼šåŠ¨ç”»çš„å¾ªç¯æ¬¡æ•°<br>animation-directionï¼šè®¾ç½®åŠ¨ç”»åœ¨å¾ªç¯ä¸­æ˜¯å¦åå‘è¿åŠ¨<br>animation-fill-modeï¼šè®¾ç½®åŠ¨ç”»æ—¶é—´ä¹‹å¤–çš„çŠ¶æ€<br>animattion-play-state:è®¾ç½®åŠ¨ç”»çš„çŠ¶æ€ã€‚</p></blockquote><blockquote><p>å€¼è¯´æ˜ï¼š<br><br>ï¼ˆ1ï¼‰è‡ªå®šä¹‰åŠ¨ç”»å <br><br>ï¼ˆ2ï¼‰åŠ¨ç”»çš„æŒç»­æ—¶é—´ å•ä½æ˜¯sæˆ–è€…ms<br><br>ï¼ˆ3ï¼‰åŠ¨ç”»çš„æ›²çº¿<br><br>ï¼ˆ4ï¼‰åŠ¨ç”»ä»ä½•æ—¶å¼€å§‹<br><br>ï¼ˆ5ï¼‰æ§åˆ¶åŠ¨ç”»æ‰§è¡Œçš„æ¬¡æ•°  æ²¡æœ‰å•ä½ï¼Œ ä¸€ç›´æ‰§è¡Œï¼šinfinite<br><br>ï¼ˆ6ï¼‰æ§åˆ¶åŠ¨ç”»æ˜¯å¦é€†åºæ’­æ”¾  é»˜è®¤å€¼normal  é€†åºï¼šalternate<br><br>ï¼ˆ7ï¼‰æ§åˆ¶åŠ¨ç”»çš„æ’­æ”¾å’Œæš‚åœ  é»˜è®¤å€¼æ˜¯æ’­æ”¾ï¼šrunning   æš‚åœï¼špaused<br><br>ï¼ˆ8ï¼‰åŠ¨ç”»æœ€åçš„åœç•™ä½ç½®  forwards è®©åŠ¨ç”»åœç•™åœ¨æœ€åä¸€å¸§<br><br>åŠ¨ç”»ä¸€å®šè¦å…ˆå†™animation ç„¶åæ­é…@keyframeså»å†™è‡ªå®šä¹‰çš„åŠ¨ç”» </p></blockquote><pre><code>    &lt;style&gt;        .box &#123;            width: 200px;            height: 200px;            background-color: cyan;            position: absolute;            left: 0;            top: 0;            animation: donghua 2s ease ;        &#125;        @keyframes donghua &#123;            0% &#123;                width: 200px;                height: 200px;                background-color: cyan;                border-radius: 0;            &#125;            100%&#123;                width: 400px;                height: 400px;                background-color: green;                border-radius: 50%;            &#125;        &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;&lt;/body&gt;</code></pre><h5 id="11-3-å¸§åŠ¨ç”»"><a href="#11-3-å¸§åŠ¨ç”»" class="headerlink" title="11.3 å¸§åŠ¨ç”»"></a>11.3 å¸§åŠ¨ç”»</h5><pre><code>stepsï¼ˆå¸§æ•°ï¼‰</code></pre><blockquote><p>å…¶å®å°±æ˜¯è®©åŠ¨ç”»åˆ†æˆå¤šå°‘æ­¥å»æ‰§è¡Œï¼Œstepsï¼ˆï¼‰é‡Œé¢çš„æ•°å€¼æ˜¯æ€»ç”»é¢æ•° - 1 ï¼Œåœ¨åˆ¶ä½œç²¾çµå›¾çš„æ—¶å€™æ¯ä¸ªç”»é¢çš„å®½åº¦å°½é‡ä¸€è‡´ï¼Œå¹¶ä¸”å»ºè®®åœ¨ä¸€è¡Œé‡Œé¢æ‘†æ”¾.</p></blockquote><h5 id="11-4-animate-cssåº“çš„ä½¿ç”¨"><a href="#11-4-animate-cssåº“çš„ä½¿ç”¨" class="headerlink" title="11.4 animate.cssåº“çš„ä½¿ç”¨"></a>11.4 animate.cssåº“çš„ä½¿ç”¨</h5><blockquote><p>å®˜ç½‘ï¼š<a href="https://daneden.github.io/animate.css/">https://daneden.github.io/animate.css/</a><br>ä½œç”¨ï¼šå°†ä¸€åˆ‡å¸¸è§çš„åŠ¨ç”»ç›´æ¥å°è£…ï¼Œå¼€å‘è€…ä¸éœ€è¦è€ƒè™‘å®ç°è¿‡ç¨‹ï¼Œåªéœ€è¦æ·»åŠ å¯¹åº”çš„ç±»å°±èƒ½å®ç°åŠ¨ç”»æ•ˆæœ<br>ä½¿ç”¨æ­¥éª¤ï¼š<br>ï¼ˆ1ï¼‰å°†ä¸‹è½½ä¸‹æ¥çš„animate.css å¼•å…¥åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼›<br>ï¼ˆ2ï¼‰å»å®˜ç½‘è·å–æƒ³è¦çš„æ•ˆæœ ç»™å¯¹åº”çš„å…ƒç´ æ·»åŠ ä¸Šanimated ç±» ï¼ˆå¿…å¡«ï¼‰å’Œä½ æƒ³è¦çš„æ•ˆæœçš„ç±»ï¼›</p></blockquote><h3 id="12-å¼¹æ€§å¸ƒå±€-flex"><a href="#12-å¼¹æ€§å¸ƒå±€-flex" class="headerlink" title="12. å¼¹æ€§å¸ƒå±€ flex"></a>12. å¼¹æ€§å¸ƒå±€ flex</h3><blockquote><p>é˜®ä¸€å³°çš„åšå®¢<a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
